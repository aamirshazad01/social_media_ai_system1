module.exports=[33405,(a,b,c)=>{b.exports=a.x("child_process",()=>require("child_process"))},97599,(a,b,c)=>{"use strict";var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=Object.defineProperty,g=Object.getOwnPropertyDescriptor,h=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===e.call(a)},i=function(a){if(!a||"[object Object]"!==e.call(a))return!1;var b,c=d.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!c&&!f)return!1;for(b in a);return void 0===b||d.call(a,b)},j=function(a,b){f&&"__proto__"===b.name?f(a,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):a[b.name]=b.newValue},k=function(a,b){if("__proto__"===b){if(!d.call(a,b))return;else if(g)return g(a,b).value}return a[b]};b.exports=function a(){var b,c,d,e,f,g,l=arguments[0],m=1,n=arguments.length,o=!1;for("boolean"==typeof l&&(o=l,l=arguments[1]||{},m=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});m<n;++m)if(b=arguments[m],null!=b)for(c in b)d=k(l,c),l!==(e=k(b,c))&&(o&&e&&(i(e)||(f=h(e)))?(f?(f=!1,g=d&&h(d)?d:[]):g=d&&i(d)?d:{},j(l,{name:c,newValue:a(o,g,e)})):void 0!==e&&j(l,{name:c,newValue:e}));return l}},451,a=>{a.v({name:"gaxios",version:"7.1.3",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:{type:"git",directory:"packages/gaxios",url:"https://github.com/googleapis/google-cloud-node-core.git"},keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2",rimraf:"^5.0.1"},homepage:"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"})},52947,(a,b,c)=>{"use strict";b.exports={pkg:a.r(451)}},69565,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.GaxiosError=c.GAXIOS_ERROR_SYMBOL=void 0,c.defaultErrorRedactor=function a(b){let c="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function d(a){a&&a.forEach((b,d)=>{(/^authentication$/i.test(d)||/^authorization$/i.test(d)||/secret/i.test(d))&&a.set(d,c)})}function e(a,b){if("object"==typeof a&&null!==a&&"string"==typeof a[b]){let d=a[b];(/grant_type=/i.test(d)||/assertion=/i.test(d)||/secret/i.test(d))&&(a[b]=c)}}function f(a){!a||"object"!=typeof a||(a instanceof FormData||a instanceof URLSearchParams||"forEach"in a&&"set"in a?a.forEach((b,d)=>{(["grant_type","assertion"].includes(d)||/secret/.test(d))&&a.set(d,c)}):("grant_type"in a&&(a.grant_type=c),"assertion"in a&&(a.assertion=c),"client_secret"in a&&(a.client_secret=c)))}return b.config&&(d(b.config.headers),e(b.config,"data"),f(b.config.data),e(b.config,"body"),f(b.config.body),b.config.url.searchParams.has("token")&&b.config.url.searchParams.set("token",c),b.config.url.searchParams.has("client_secret")&&b.config.url.searchParams.set("client_secret",c)),b.response&&(a({config:b.response.config}),d(b.response.headers),b.response.bodyUsed&&(e(b.response,"data"),f(b.response.data))),b};let e=d(a.r(97599)),f=d(a.r(52947)).default.pkg;c.GAXIOS_ERROR_SYMBOL=Symbol.for(`${f.name}-gaxios-error`);class g extends Error{config;response;code;status;error;[c.GAXIOS_ERROR_SYMBOL]=f.version;static[Symbol.hasInstance](a){return!!a&&"object"==typeof a&&c.GAXIOS_ERROR_SYMBOL in a&&a[c.GAXIOS_ERROR_SYMBOL]===f.version||Function.prototype[Symbol.hasInstance].call(g,a)}constructor(a,b,c,d){if(super(a,{cause:d}),this.config=b,this.response=c,this.error=d instanceof Error?d:void 0,this.config=(0,e.default)(!0,{},b),this.response&&(this.response.config=(0,e.default)(!0,{},this.response.config)),this.response){try{this.response.data=function(a,b){switch(a){case"stream":default:return b;case"json":return JSON.parse(JSON.stringify(b));case"arraybuffer":return JSON.parse(Buffer.from(b).toString("utf8"));case"blob":return JSON.parse(b.text())}}(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}d instanceof DOMException?this.code=d.name:d&&"object"==typeof d&&"code"in d&&("string"==typeof d.code||"number"==typeof d.code)&&(this.code=d.code)}static extractAPIErrorFromResponse(a,b="The request failed"){let c=b;if("string"==typeof a.data&&(c=a.data),a.data&&"object"==typeof a.data&&"error"in a.data&&a.data.error&&!a.ok){if("string"==typeof a.data.error)return{message:a.data.error,code:a.status,status:a.statusText};if("object"==typeof a.data.error){c="message"in a.data.error&&"string"==typeof a.data.error.message?a.data.error.message:c;let b="status"in a.data.error&&"string"==typeof a.data.error.status?a.data.error.status:a.statusText,d="code"in a.data.error&&"number"==typeof a.data.error.code?a.data.error.code:a.status;if("errors"in a.data.error&&Array.isArray(a.data.error.errors)){let e=[];for(let b of a.data.error.errors)"object"==typeof b&&"message"in b&&"string"==typeof b.message&&e.push(b.message);return Object.assign({message:e.join("\n")||c,code:d,status:b},a.data.error)}return Object.assign({message:c,code:d,status:b},a.data.error)}}return{message:c,code:a.status,status:a.statusText}}}c.GaxiosError=g},63492,(a,b,c)=>{"use strict";async function d(a){var b;let c=f(a);if(!a||!a.config||!c&&!a.config.retry)return{shouldRetry:!1};(c=c||{}).currentRetryAttempt=c.currentRetryAttempt||0,c.retry=void 0===c.retry||null===c.retry?3:c.retry,c.httpMethodsToRetry=c.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],c.noResponseRetries=void 0===c.noResponseRetries||null===c.noResponseRetries?2:c.noResponseRetries,c.retryDelayMultiplier=c.retryDelayMultiplier?c.retryDelayMultiplier:2,c.timeOfFirstRequest=c.timeOfFirstRequest?c.timeOfFirstRequest:Date.now(),c.totalTimeout=c.totalTimeout?c.totalTimeout:Number.MAX_SAFE_INTEGER,c.maxRetryDelay=c.maxRetryDelay?c.maxRetryDelay:Number.MAX_SAFE_INTEGER,c.statusCodesToRetry=c.statusCodesToRetry||[[100,199],[408,408],[429,429],[500,599]],a.config.retryConfig=c;let d=c.shouldRetry||e;if(!await d(a))return{shouldRetry:!1,config:a.config};let g=Math.min(((b=c).currentRetryAttempt?0:b.retryDelay??100)+(Math.pow(b.retryDelayMultiplier,b.currentRetryAttempt)-1)/2*1e3,b.totalTimeout-(Date.now()-b.timeOfFirstRequest),b.maxRetryDelay);a.config.retryConfig.currentRetryAttempt+=1;let h=c.retryBackoff?c.retryBackoff(a,g):new Promise(a=>{setTimeout(a,g)});return c.onRetryAttempt&&await c.onRetryAttempt(a),await h,{shouldRetry:!0,config:a.config}}function e(a){let b=f(a);if(a.config.signal?.aborted&&"TimeoutError"!==a.code||"AbortError"===a.code||!b||0===b.retry||!a.response&&(b.currentRetryAttempt||0)>=b.noResponseRetries||!b.httpMethodsToRetry||!b.httpMethodsToRetry.includes(a.config.method?.toUpperCase()||"GET"))return!1;if(a.response&&a.response.status){let c=!1;for(let[d,e]of b.statusCodesToRetry){let b=a.response.status;if(b>=d&&b<=e){c=!0;break}}if(!c)return!1}return b.currentRetryAttempt=b.currentRetryAttempt||0,!(b.currentRetryAttempt>=b.retry)}function f(a){if(a&&a.config&&a.config.retryConfig)return a.config.retryConfig}Object.defineProperty(c,"__esModule",{value:!0}),c.getRetryConfig=d},69706,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GaxiosInterceptorManager=void 0;class d extends Set{}c.GaxiosInterceptorManager=d},76176,(a,b,c)=>{"use strict";var d,e=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Gaxios=void 0;let f=e(a.r(97599)),g=a.r(24836),h=a.r(69565),i=a.r(63492),j=a.r(88947),k=a.r(69706),l=async()=>globalThis.crypto?.randomUUID()||(await a.A(85685)).randomUUID();class m{agentCache=new Map;defaults;interceptors;constructor(a){this.defaults=a||{},this.interceptors={request:new k.GaxiosInterceptorManager,response:new k.GaxiosInterceptorManager}}fetch(...a){let b,c=a[0],e=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&d.mergeHeaders(f,c.headers),e&&d.mergeHeaders(f,new Headers(e.headers)),"object"!=typeof c||c instanceof URL)?this.request({...e,headers:f,url:b}):this.request({...e,...c,headers:f,url:b})}async request(a={}){let b=await this.#a(a);return b=await this.#b(b),this.#c(this._request(b))}async _defaultAdapter(a){let b=a.fetchImplementation||this.defaults.fetchImplementation||await d.#d(),c={...a};delete c.data;let e=await b(a.url,c),f=await this.getResponseData(a,e);return Object.getOwnPropertyDescriptor(e,"data")?.configurable||Object.defineProperties(e,{data:{configurable:!0,writable:!0,enumerable:!0,value:f}}),Object.assign(e,{config:a,data:f})}async _request(a){try{let b;if(b=a.adapter?await a.adapter(a,this._defaultAdapter.bind(this)):await this._defaultAdapter(a),!a.validateStatus(b.status)){if("stream"===a.responseType){let a=[];for await(let c of b.data)a.push(c);b.data=a.toString()}let c=h.GaxiosError.extractAPIErrorFromResponse(b,`Request failed with status code ${b.status}`);throw new h.GaxiosError(c?.message,a,b,c)}return b}catch(e){let b;b=e instanceof h.GaxiosError?e:e instanceof Error?new h.GaxiosError(e.message,a,void 0,e):new h.GaxiosError("Unexpected Gaxios Error",a,void 0,e);let{shouldRetry:c,config:d}=await (0,i.getRetryConfig)(b);if(c&&d)return b.config.retryConfig.currentRetryAttempt=d.retryConfig.currentRetryAttempt,a.retryConfig=b.config?.retryConfig,this.#e(a),this._request(a);throw a.errorRedactor&&a.errorRedactor(b),b}}async getResponseData(a,b){if(204===b.status)return"";if(a.maxContentLength&&b.headers.has("content-length")&&a.maxContentLength<Number.parseInt(b.headers?.get("content-length")||""))throw new h.GaxiosError("Response's `Content-Length` is over the limit.",a,Object.assign(b,{config:a}));switch(a.responseType){case"stream":return b.body;case"json":{let a=await b.text();try{return JSON.parse(a)}catch{return a}}case"arraybuffer":return b.arrayBuffer();case"blob":return b.blob();case"text":return b.text();default:return this.getResponseDataFromContentType(b)}}#f(a,b=[]){let c=new URL(a),d=[...b];for(let a of(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[])d.push(a.trim());for(let a of d)if(a instanceof RegExp){if(a.test(c.toString()))return!1}else if(a instanceof URL){if(a.origin===c.origin)return!1}else if(a.startsWith("*.")||a.startsWith(".")){let b=a.replace(/^\*\./,".");if(c.hostname.endsWith(b))return!1}else if(a===c.origin||a===c.hostname||a===c.href)return!1;return!0}async #b(a){let b=Promise.resolve(a);for(let a of this.interceptors.request.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #c(a){let b=Promise.resolve(a);for(let a of this.interceptors.response.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #a(a){let b=new Headers(this.defaults.headers);d.mergeHeaders(b,a.headers);let c=(0,f.default)(!0,{},this.defaults,a);if(!c.url)throw Error("URL is required.");if(c.baseURL&&(c.url=new URL(c.url,c.baseURL)),c.url=new URL(c.url),c.params)if(c.paramsSerializer){let a=c.paramsSerializer(c.params);a.startsWith("?")&&(a=a.slice(1));let b=c.url.toString().includes("?")?"&":"?";c.url=c.url+b+a}else{let a=c.url instanceof URL?c.url:new URL(c.url);for(let[b,d]of new URLSearchParams(c.params))a.searchParams.append(b,d);c.url=a}"number"==typeof a.maxContentLength&&(c.size=a.maxContentLength),"number"==typeof a.maxRedirects&&(c.follow=a.maxRedirects);let e="string"==typeof c.data||c.data instanceof ArrayBuffer||c.data instanceof Blob||globalThis.File&&c.data instanceof File||c.data instanceof FormData||c.data instanceof j.Readable||c.data instanceof ReadableStream||c.data instanceof String||c.data instanceof URLSearchParams||ArrayBuffer.isView(c.data)||["Blob","File","FormData"].includes(c.data?.constructor?.name||"");if(c.multipart?.length){let a=await l();b.set("content-type",`multipart/related; boundary=${a}`),c.body=j.Readable.from(this.getMultipartRequest(c.multipart,a))}else e?c.body=c.data:"object"==typeof c.data?"application/x-www-form-urlencoded"===b.get("Content-Type")?c.body=c.paramsSerializer?c.paramsSerializer(c.data):new URLSearchParams(c.data):(b.has("content-type")||b.set("content-type","application/json"),c.body=JSON.stringify(c.data)):c.data&&(c.body=c.data);c.validateStatus=c.validateStatus||this.validateStatus,c.responseType=c.responseType||"unknown",b.has("accept")||"json"!==c.responseType||b.set("accept","application/json");let i=c.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(c.agent);else if(i&&this.#f(c.url,c.noProxy)){let a=await d.#g();this.agentCache.has(i)?c.agent=this.agentCache.get(i):(c.agent=new a(i,{cert:c.cert,key:c.key}),this.agentCache.set(i,c.agent))}else c.cert&&c.key&&(this.agentCache.has(c.key)?c.agent=this.agentCache.get(c.key):(c.agent=new g.Agent({cert:c.cert,key:c.key}),this.agentCache.set(c.key,c.agent)));return"function"!=typeof c.errorRedactor&&!1!==c.errorRedactor&&(c.errorRedactor=h.defaultErrorRedactor),!c.body||"duplex"in c||(c.duplex="half"),this.#e(c),Object.assign(c,{headers:b,url:c.url instanceof URL?c.url:new URL(c.url)})}#e(a){if(a.timeout){let b=AbortSignal.timeout(a.timeout);a.signal&&!a.signal.aborted?a.signal=AbortSignal.any([a.signal,b]):a.signal=b}}validateStatus(a){return a>=200&&a<300}async getResponseDataFromContentType(a){let b=a.headers.get("Content-Type");if(null===b)return a.text();if((b=b.toLowerCase()).includes("application/json")){let b=await a.text();try{b=JSON.parse(b)}catch{}return b}return b.match(/^text\//)?a.text():a.blob()}async *getMultipartRequest(a,b){let c=`--${b}--`;for(let c of a){let a=c.headers.get("Content-Type")||"application/octet-stream",d=`--${b}\r
Content-Type: ${a}\r
\r
`;yield d,"string"==typeof c.content?yield c.content:yield*c.content,yield"\r\n"}yield c}static #h;static #i;static async #g(){return this.#h||=(await a.A(57882)).HttpsProxyAgent,this.#h}static async #d(){return this.#i||=(await a.A(69375)).default,this.#i}static mergeHeaders(a,...b){for(let c of(a=a instanceof Headers?a:new Headers(a),b))(c instanceof Headers?c:new Headers(c)).forEach((b,c)=>{"set-cookie"===c?a.append(c,b):a.set(c,b)});return a}}c.Gaxios=m,d=m},99853,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),c.instance=c.Gaxios=c.GaxiosError=void 0,c.request=h;let f=a.r(76176);Object.defineProperty(c,"Gaxios",{enumerable:!0,get:function(){return f.Gaxios}});var g=a.r(69565);async function h(a){return c.instance.request(a)}Object.defineProperty(c,"GaxiosError",{enumerable:!0,get:function(){return g.GaxiosError}}),e(a.r(69706),c),c.instance=new f.Gaxios},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},37062,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GCE_LINUX_BIOS_PATHS=void 0,c.isGoogleCloudServerless=f,c.isGoogleComputeEngineLinux=g,c.isGoogleComputeEngineMACAddress=h,c.isGoogleComputeEngine=i,c.detectGCPResidency=function(){return f()||i()},a.r(22734);let d=a.r(46786);c.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};let e=/^42:01/;function f(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function g(){if("linux"!==(0,d.platform)())return!1}function h(){for(let a of Object.values((0,d.networkInterfaces)()))if(a){for(let{mac:b}of a)if(e.test(b))return!0}return!1}function i(){return g()||h()}},30168,(a,b,c)=>{!function(c){"use strict";var d,e=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,f=Math.ceil,g=Math.floor,h="[BigNumber Error] ",i=h+"Number primitive has more than 15 significant digits: ",j=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function k(a){var b=0|a;return a>0||a===b?b:b-1}function l(a){for(var b,c,d=1,e=a.length,f=a[0]+"";d<e;){for(c=14-(b=a[d++]+"").length;c--;b="0"+b);f+=b}for(e=f.length;48===f.charCodeAt(--e););return f.slice(0,e+1||1)}function m(a,b){var c,d,e=a.c,f=b.c,g=a.s,h=b.s,i=a.e,j=b.e;if(!g||!h)return null;if(c=e&&!e[0],d=f&&!f[0],c||d)return c?d?0:-h:g;if(g!=h)return g;if(c=g<0,d=i==j,!e||!f)return d?0:!e^c?1:-1;if(!d)return i>j^c?1:-1;for(g=0,h=(i=e.length)<(j=f.length)?i:j;g<h;g++)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1}function n(a,b,c,d){if(a<b||a>c||a!==g(a))throw Error(h+(d||"Argument")+("number"==typeof a?a<b||a>c?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function o(a){var b=a.c.length-1;return k(a.e/14)==b&&a.c[b]%2!=0}function p(a,b){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(b<0?"e":"e+")+b}function q(a,b,c){var d,e;if(b<0){for(e=c+".";++b;e+=c);a=e+a}else if(d=a.length,++b>d){for(e=c,b-=d;--b;e+=c);a+=e}else b<d&&(a=a.slice(0,b)+"."+a.slice(b));return a}if((d=function a(b){var c,d,r,s,t,u,v,w,x,y=M.prototype={constructor:M,toString:null,valueOf:null},z=new M(1),A=20,B=4,C=-7,D=21,E=-1e7,F=1e7,G=!1,H=1,I=0,J={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",L=!0;function M(a,b){var c,d,f,h,j,k,l,m,o=this;if(!(o instanceof M))return new M(a,b);if(null==b){if(a&&!0===a._isBigNumber){o.s=a.s,!a.c||a.e>F?o.c=o.e=null:a.e<E?o.c=[o.e=0]:(o.e=a.e,o.c=a.c.slice());return}if((k="number"==typeof a)&&0*a==0){if(o.s=1/a<0?(a=-a,-1):1,a===~~a){for(h=0,j=a;j>=10;j/=10,h++);h>F?o.c=o.e=null:(o.e=h,o.c=[a]);return}m=String(a)}else{if(!e.test(m=String(a)))return x(o,m,k);o.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(h=m.indexOf("."))>-1&&(m=m.replace(".","")),(j=m.search(/e/i))>0?(h<0&&(h=j),h+=+m.slice(j+1),m=m.substring(0,j)):h<0&&(h=m.length)}else{if(n(b,2,K.length,"Base"),10==b&&L)return Q(o=new M(a),A+o.e+1,B);if(m=String(a),k="number"==typeof a){if(0*a!=0)return x(o,m,k,b);if(o.s=1/a<0?(m=m.slice(1),-1):1,M.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(i+a)}else o.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(c=K.slice(0,b),h=j=0,l=m.length;j<l;j++)if(0>c.indexOf(d=m.charAt(j))){if("."==d){if(j>h){h=l;continue}}else if(!f&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){f=!0,j=-1,h=0;continue}return x(o,String(a),k,b)}k=!1,(h=(m=w(m,b,10,o.s)).indexOf("."))>-1?m=m.replace(".",""):h=m.length}for(j=0;48===m.charCodeAt(j);j++);for(l=m.length;48===m.charCodeAt(--l););if(m=m.slice(j,++l)){if(l-=j,k&&M.DEBUG&&l>15&&(a>0x1fffffffffffff||a!==g(a)))throw Error(i+o.s*a);if((h=h-j-1)>F)o.c=o.e=null;else if(h<E)o.c=[o.e=0];else{if(o.e=h,o.c=[],j=(h+1)%14,h<0&&(j+=14),j<l){for(j&&o.c.push(+m.slice(0,j)),l-=14;j<l;)o.c.push(+m.slice(j,j+=14));j=14-(m=m.slice(j)).length}else j-=l;for(;j--;m+="0");o.c.push(+m)}}else o.c=[o.e=0]}function N(a,b,c,d){var e,f,g,h,i;if(null==c?c=B:n(c,0,8),!a.c)return a.toString();if(e=a.c[0],g=a.e,null==b)i=l(a.c),i=1==d||2==d&&(g<=C||g>=D)?p(i,g):q(i,g,"0");else if(f=(a=Q(new M(a),b,c)).e,h=(i=l(a.c)).length,1==d||2==d&&(b<=f||f<=C)){for(;h<b;i+="0",h++);i=p(i,f)}else if(b-=g+(2===d&&f>g),i=q(i,f,"0"),f+1>h){if(--b>0)for(i+=".";b--;i+="0");}else if((b+=f-h)>0)for(f+1==h&&(i+=".");b--;i+="0");return a.s<0&&e?"-"+i:i}function O(a,b){for(var c,d,e=1,f=new M(a[0]);e<a.length;e++)(d=new M(a[e])).s&&(c=m(f,d))!==b&&(0!==c||f.s!==b)||(f=d);return f}function P(a,b,c){for(var d=1,e=b.length;!b[--e];b.pop());for(e=b[0];e>=10;e/=10,d++);return(c=d+14*c-1)>F?a.c=a.e=null:c<E?a.c=[a.e=0]:(a.e=c,a.c=b),a}function Q(a,b,c,d){var e,h,i,k,l,m,n,o=a.c;if(o){a:{for(e=1,k=o[0];k>=10;k/=10,e++);if((h=b-e)<0)h+=14,i=b,n=g((l=o[m=0])/j[e-i-1]%10);else if((m=f((h+1)/14))>=o.length)if(d){for(;o.length<=m;o.push(0));l=n=0,e=1,h%=14,i=h-14+1}else break a;else{for(e=1,l=k=o[m];k>=10;k/=10,e++);h%=14,n=(i=h-14+e)<0?0:g(l/j[e-i-1]%10)}if(d=d||b<0||null!=o[m+1]||(i<0?l:l%j[e-i-1]),d=c<4?(n||d)&&(0==c||c==(a.s<0?3:2)):n>5||5==n&&(4==c||d||6==c&&(h>0?i>0?l/j[e-i]:0:o[m-1])%10&1||c==(a.s<0?8:7)),b<1||!o[0])return o.length=0,d?(b-=a.e+1,o[0]=j[(14-b%14)%14],a.e=-b||0):o[0]=a.e=0,a;if(0==h?(o.length=m,k=1,m--):(o.length=m+1,k=j[14-h],o[m]=i>0?g(l/j[e-i]%j[i])*k:0),d)for(;;)if(0==m){for(h=1,i=o[0];i>=10;i/=10,h++);for(i=o[0]+=k,k=1;i>=10;i/=10,k++);h!=k&&(a.e++,1e14==o[0]&&(o[0]=1));break}else{if(o[m]+=k,1e14!=o[m])break;o[m--]=0,k=1}for(h=o.length;0===o[--h];o.pop());}a.e>F?a.c=a.e=null:a.e<E&&(a.c=[a.e=0])}return a}function R(a){var b,c=a.e;return null===c?a.toString():(b=l(a.c),b=c<=C||c>=D?p(b,c):q(b,c,"0"),a.s<0?"-"+b:b)}return M.clone=a,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(a){var b,c;if(null!=a)if("object"==typeof a){if(a.hasOwnProperty(b="DECIMAL_PLACES")&&(n(c=a[b],0,1e9,b),A=c),a.hasOwnProperty(b="ROUNDING_MODE")&&(n(c=a[b],0,8,b),B=c),a.hasOwnProperty(b="EXPONENTIAL_AT")&&((c=a[b])&&c.pop?(n(c[0],-1e9,0,b),n(c[1],0,1e9,b),C=c[0],D=c[1]):(n(c,-1e9,1e9,b),C=-(D=c<0?-c:c))),a.hasOwnProperty(b="RANGE"))if((c=a[b])&&c.pop)n(c[0],-1e9,-1,b),n(c[1],1,1e9,b),E=c[0],F=c[1];else if(n(c,-1e9,1e9,b),c)E=-(F=c<0?-c:c);else throw Error(h+b+" cannot be zero: "+c);if(a.hasOwnProperty(b="CRYPTO"))if(!!(c=a[b])===c)if(c)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))G=c;else throw G=!c,Error(h+"crypto unavailable");else G=c;else throw Error(h+b+" not true or false: "+c);if(a.hasOwnProperty(b="MODULO_MODE")&&(n(c=a[b],0,9,b),H=c),a.hasOwnProperty(b="POW_PRECISION")&&(n(c=a[b],0,1e9,b),I=c),a.hasOwnProperty(b="FORMAT"))if("object"==typeof(c=a[b]))J=c;else throw Error(h+b+" not an object: "+c);if(a.hasOwnProperty(b="ALPHABET")){if("string"!=typeof(c=a[b])||/^.?$|[+\-.\s]|(.).*\1/.test(c))throw Error(h+b+" invalid: "+c);L="0123456789"==c.slice(0,10),K=c}}else throw Error(h+"Object expected: "+a);return{DECIMAL_PLACES:A,ROUNDING_MODE:B,EXPONENTIAL_AT:[C,D],RANGE:[E,F],CRYPTO:G,MODULO_MODE:H,POW_PRECISION:I,FORMAT:J,ALPHABET:K}},M.isBigNumber=function(a){if(!a||!0!==a._isBigNumber)return!1;if(!M.DEBUG)return!0;var b,c,d=a.c,e=a.e,f=a.s;a:if("[object Array]"==({}).toString.call(d)){if((1===f||-1===f)&&e>=-1e9&&e<=1e9&&e===g(e)){if(0===d[0]){if(0===e&&1===d.length)return!0;break a}if((b=(e+1)%14)<1&&(b+=14),String(d[0]).length==b){for(b=0;b<d.length;b++)if((c=d[b])<0||c>=1e14||c!==g(c))break a;if(0!==c)return!0}}}else if(null===d&&null===e&&(null===f||1===f||-1===f))return!0;throw Error(h+"Invalid BigNumber: "+a)},M.maximum=M.max=function(){return O(arguments,-1)},M.minimum=M.min=function(){return O(arguments,1)},c=0x20000000000000*Math.random()&2097151?function(){return g(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},M.random=function(a){var b,d,e,i,k,l=0,m=[],o=new M(z);if(null==a?a=A:n(a,0,1e9),i=f(a/14),G)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(i*=2));l<i;)(k=131072*b[l]+(b[l+1]>>>11))>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),b[l]=d[0],b[l+1]=d[1]):(m.push(k%1e14),l+=2);l=i/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(i*=7);l<i;)(k=(31&b[l])*0x1000000000000+0x10000000000*b[l+1]+0x100000000*b[l+2]+0x1000000*b[l+3]+(b[l+4]<<16)+(b[l+5]<<8)+b[l+6])>=9e15?crypto.randomBytes(7).copy(b,l):(m.push(k%1e14),l+=7);l=i/7}else throw G=!1,Error(h+"crypto unavailable");if(!G)for(;l<i;)(k=c())<9e15&&(m[l++]=k%1e14);for(i=m[--l],a%=14,i&&a&&(k=j[14-a],m[l]=g(i/k)*k);0===m[l];m.pop(),l--);if(l<0)m=[e=0];else{for(e=-1;0===m[0];m.splice(0,1),e-=14);for(l=1,k=m[0];k>=10;k/=10,l++);l<14&&(e-=14-l)}return o.e=e,o.c=m,o},M.sum=function(){for(var a=1,b=arguments,c=new M(b[0]);a<b.length;)c=c.plus(b[a++]);return c},w=function(){var a="0123456789";function b(a,b,c,d){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;g[f]*=b);for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(null==g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}return function(c,d,e,f,g){var h,i,j,k,m,n,o,p,r=c.indexOf("."),s=A,t=B;for(r>=0&&(k=I,I=0,c=c.replace(".",""),n=(p=new M(d)).pow(c.length-r),I=k,p.c=b(q(l(n.c),n.e,"0"),10,e,a),p.e=p.c.length),j=k=(o=b(c,d,e,g?(h=K,a):(h=a,K))).length;0==o[--k];o.pop());if(!o[0])return h.charAt(0);if(r<0?--j:(n.c=o,n.e=j,n.s=f,o=(n=v(n,p,s,t,e)).c,m=n.r,j=n.e),r=o[i=j+s+1],k=e/2,m=m||i<0||null!=o[i+1],m=t<4?(null!=r||m)&&(0==t||t==(n.s<0?3:2)):r>k||r==k&&(4==t||m||6==t&&1&o[i-1]||t==(n.s<0?8:7)),i<1||!o[0])c=m?q(h.charAt(1),-s,h.charAt(0)):h.charAt(0);else{if(o.length=i,m)for(--e;++o[--i]>e;)o[i]=0,i||(++j,o=[1].concat(o));for(k=o.length;!o[--k];);for(r=0,c="";r<=k;c+=h.charAt(o[r++]));c=q(c,j,h.charAt(0))}return c}}(),v=function(){function a(a,b,c){var d,e,f,g,h=0,i=a.length,j=b%1e7,k=b/1e7|0;for(a=a.slice();i--;)d=k*(f=a[i]%1e7)+(g=a[i]/1e7|0)*j,h=((e=j*f+d%1e7*1e7+h)/c|0)+(d/1e7|0)+k*g,a[i]=e%c;return h&&(a=[h].concat(a)),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(d,e,f,h,i){var j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d.s==e.s?1:-1,C=d.c,D=e.c;if(!C||!C[0]||!D||!D[0])return new M(!d.s||!e.s||(C?D&&C[0]==D[0]:!D)?NaN:C&&0==C[0]||!D?0*B:B/0);for(s=(r=new M(B)).c=[],B=f+(l=d.e-e.e)+1,i||(i=1e14,l=k(d.e/14)-k(e.e/14),B=B/14|0),m=0;D[m]==(C[m]||0);m++);if(D[m]>(C[m]||0)&&l--,B<0)s.push(1),n=!0;else{for(x=C.length,z=D.length,m=0,B+=2,(o=g(i/(D[0]+1)))>1&&(D=a(D,o,i),C=a(C,o,i),z=D.length,x=C.length),w=z,u=(t=C.slice(0,z)).length;u<z;t[u++]=0);A=[0].concat(A=D.slice()),y=D[0],D[1]>=i/2&&y++;do{if(o=0,(j=b(D,t,z,u))<0){if(v=t[0],z!=u&&(v=v*i+(t[1]||0)),(o=g(v/y))>1)for(o>=i&&(o=i-1),q=(p=a(D,o,i)).length,u=t.length;1==b(p,t,q,u);)o--,c(p,z<q?A:D,q,i),q=p.length,j=1;else 0==o&&(j=o=1),q=(p=D.slice()).length;if(q<u&&(p=[0].concat(p)),c(t,p,u,i),u=t.length,-1==j)for(;1>b(D,t,z,u);)o++,c(t,z<u?A:D,u,i),u=t.length}else 0===j&&(o++,t=[0]);s[m++]=o,t[0]?t[u++]=C[w]||0:(t=[C[w]],u=1)}while((w++<x||null!=t[0])&&B--)n=null!=t[0],s[0]||s.splice(0,1)}if(1e14==i){for(m=1,B=s[0];B>=10;B/=10,m++);Q(r,f+(r.e=m+14*l-1)+1,h,n)}else r.e=l,r.r=+n;return r}}(),d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,s=/^\.([^.]+)$/,t=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(a,b,c,e){var f,g=c?b:b.replace(u,"");if(t.test(g))a.s=isNaN(g)?null:g<0?-1:1;else{if(!c&&(g=g.replace(d,function(a,b,c){return f="x"==(c=c.toLowerCase())?16:"b"==c?2:8,e&&e!=f?a:b}),e&&(f=e,g=g.replace(r,"$1").replace(s,"0.$1")),b!=g))return new M(g,f);if(M.DEBUG)throw Error(h+"Not a"+(e?" base "+e:"")+" number: "+b);a.s=null}a.c=a.e=null},y.absoluteValue=y.abs=function(){var a=new M(this);return a.s<0&&(a.s=1),a},y.comparedTo=function(a,b){return m(this,new M(a,b))},y.decimalPlaces=y.dp=function(a,b){var c,d,e;if(null!=a)return n(a,0,1e9),null==b?b=B:n(b,0,8),Q(new M(this),a+this.e+1,b);if(!(c=this.c))return null;if(d=((e=c.length-1)-k(this.e/14))*14,e=c[e])for(;e%10==0;e/=10,d--);return d<0&&(d=0),d},y.dividedBy=y.div=function(a,b){return v(this,new M(a,b),A,B)},y.dividedToIntegerBy=y.idiv=function(a,b){return v(this,new M(a,b),0,1)},y.exponentiatedBy=y.pow=function(a,b){var c,d,e,i,j,k,l,m,n,p=this;if((a=new M(a)).c&&!a.isInteger())throw Error(h+"Exponent not an integer: "+R(a));if(null!=b&&(b=new M(b)),k=a.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!a.c||!a.c[0])return n=new M(Math.pow(+R(p),k?a.s*(2-o(a)):+R(a))),b?n.mod(b):n;if(l=a.s<0,b){if(b.c?!b.c[0]:!b.s)return new M(NaN);(d=!l&&p.isInteger()&&b.isInteger())&&(p=p.mod(b))}else{if(a.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||k&&p.c[1]>=24e7:p.c[0]<8e13||k&&p.c[0]<=9999975e7)))return i=p.s<0&&o(a)?-0:0,p.e>-1&&(i=1/i),new M(l?1/i:i);I&&(i=f(I/14+2))}for(k?(c=new M(.5),l&&(a.s=1),m=o(a)):m=(e=Math.abs(+R(a)))%2,n=new M(z);;){if(m){if(!(n=n.times(p)).c)break;i?n.c.length>i&&(n.c.length=i):d&&(n=n.mod(b))}if(e){if(0===(e=g(e/2)))break;m=e%2}else if(Q(a=a.times(c),a.e+1,1),a.e>14)m=o(a);else{if(0==(e=+R(a)))break;m=e%2}p=p.times(p),i?p.c&&p.c.length>i&&(p.c.length=i):d&&(p=p.mod(b))}return d?n:(l&&(n=z.div(n)),b?n.mod(b):i?Q(n,I,B,j):n)},y.integerValue=function(a){var b=new M(this);return null==a?a=B:n(a,0,8),Q(b,b.e+1,a)},y.isEqualTo=y.eq=function(a,b){return 0===m(this,new M(a,b))},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(a,b){return m(this,new M(a,b))>0},y.isGreaterThanOrEqualTo=y.gte=function(a,b){return 1===(b=m(this,new M(a,b)))||0===b},y.isInteger=function(){return!!this.c&&k(this.e/14)>this.c.length-2},y.isLessThan=y.lt=function(a,b){return 0>m(this,new M(a,b))},y.isLessThanOrEqualTo=y.lte=function(a,b){return -1===(b=m(this,new M(a,b)))||0===b},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&0==this.c[0]},y.minus=function(a,b){var c,d,e,f,g=this.s;if(b=(a=new M(a,b)).s,!g||!b)return new M(NaN);if(g!=b)return a.s=-b,this.plus(a);var h=this.e/14,i=a.e/14,j=this.c,l=a.c;if(!h||!i){if(!j||!l)return j?(a.s=-b,a):new M(l?this:NaN);if(!j[0]||!l[0])return l[0]?(a.s=-b,a):new M(j[0]?this:3==B?-0:0)}if(h=k(h),i=k(i),j=j.slice(),g=h-i){for((f=g<0)?(g=-g,e=j):(i=h,e=l),e.reverse(),b=g;b--;e.push(0));e.reverse()}else for(d=(f=(g=j.length)<(b=l.length))?g:b,g=b=0;b<d;b++)if(j[b]!=l[b]){f=j[b]<l[b];break}if(f&&(e=j,j=l,l=e,a.s=-a.s),(b=(d=l.length)-(c=j.length))>0)for(;b--;j[c++]=0);for(b=1e14-1;d>g;){if(j[--d]<l[d]){for(c=d;c&&!j[--c];j[c]=b);--j[c],j[d]+=1e14}j[d]-=l[d]}for(;0==j[0];j.splice(0,1),--i);return j[0]?P(a,j,i):(a.s=3==B?-1:1,a.c=[a.e=0],a)},y.modulo=y.mod=function(a,b){var c,d;return(a=new M(a,b),this.c&&a.s&&(!a.c||a.c[0]))?a.c&&(!this.c||this.c[0])?(9==H?(d=a.s,a.s=1,c=v(this,a,0,3),a.s=d,c.s*=d):c=v(this,a,0,H),(a=this.minus(c.times(a))).c[0]||1!=H||(a.s=this.s),a):new M(this):new M(NaN)},y.multipliedBy=y.times=function(a,b){var c,d,e,f,g,h,i,j,l,m,n,o,p,q=this.c,r=(a=new M(a,b)).c;if(!q||!r||!q[0]||!r[0])return this.s&&a.s&&(!q||q[0]||r)&&(!r||r[0]||q)?(a.s*=this.s,q&&r?(a.c=[0],a.e=0):a.c=a.e=null):a.c=a.e=a.s=null,a;for(d=k(this.e/14)+k(a.e/14),a.s*=this.s,(i=q.length)<(m=r.length)&&(p=q,q=r,r=p,e=i,i=m,m=e),e=i+m,p=[];e--;p.push(0));for(e=m;--e>=0;){for(c=0,n=r[e]%1e7,o=r[e]/1e7|0,f=e+(g=i);f>e;)h=o*(j=q[--g]%1e7)+(l=q[g]/1e7|0)*n,c=((j=n*j+h%1e7*1e7+p[f]+c)/1e14|0)+(h/1e7|0)+o*l,p[f--]=j%1e14;p[f]=c}return c?++d:p.splice(0,1),P(a,p,d)},y.negated=function(){var a=new M(this);return a.s=-a.s||null,a},y.plus=function(a,b){var c,d=this.s;if(b=(a=new M(a,b)).s,!d||!b)return new M(NaN);if(d!=b)return a.s=-b,this.minus(a);var e=this.e/14,f=a.e/14,g=this.c,h=a.c;if(!e||!f){if(!g||!h)return new M(d/0);if(!g[0]||!h[0])return h[0]?a:new M(g[0]?this:0*d)}if(e=k(e),f=k(f),g=g.slice(),d=e-f){for(d>0?(f=e,c=h):(d=-d,c=g),c.reverse();d--;c.push(0));c.reverse()}for((d=g.length)-(b=h.length)<0&&(c=h,h=g,g=c,b=d),d=0;b;)d=(g[--b]=g[b]+h[b]+d)/1e14|0,g[b]=1e14===g[b]?0:g[b]%1e14;return d&&(g=[d].concat(g),++f),P(a,g,f)},y.precision=y.sd=function(a,b){var c,d,e;if(null!=a&&!!a!==a)return n(a,1,1e9),null==b?b=B:n(b,0,8),Q(new M(this),a,b);if(!(c=this.c))return null;if(d=14*(e=c.length-1)+1,e=c[e]){for(;e%10==0;e/=10,d--);for(e=c[0];e>=10;e/=10,d++);}return a&&this.e+1>d&&(d=this.e+1),d},y.shiftedBy=function(a){return n(a,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+a)},y.squareRoot=y.sqrt=function(){var a,b,c,d,e,f=this.c,g=this.s,h=this.e,i=A+4,j=new M("0.5");if(1!==g||!f||!f[0])return new M(!g||g<0&&(!f||f[0])?NaN:f?this:1/0);if(0==(g=Math.sqrt(+R(this)))||g==1/0?(((b=l(f)).length+h)%2==0&&(b+="0"),g=Math.sqrt(+b),h=k((h+1)/2)-(h<0||h%2),c=new M(b=g==1/0?"5e"+h:(b=g.toExponential()).slice(0,b.indexOf("e")+1)+h)):c=new M(g+""),c.c[0]){for((g=(h=c.e)+i)<3&&(g=0);;)if(e=c,c=j.times(e.plus(v(this,e,i,1))),l(e.c).slice(0,g)===(b=l(c.c)).slice(0,g)){if(c.e<h&&--g,"9999"!=(b=b.slice(g-3,g+1))&&(d||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(Q(c,c.e+A+2,1),a=!c.times(c).eq(this));break}if(!d&&(Q(e,e.e+A+2,0),e.times(e).eq(this))){c=e;break}i+=4,g+=4,d=1}}return Q(c,c.e+A+1,B,a)},y.toExponential=function(a,b){return null!=a&&(n(a,0,1e9),a++),N(this,a,b,1)},y.toFixed=function(a,b){return null!=a&&(n(a,0,1e9),a=a+this.e+1),N(this,a,b)},y.toFormat=function(a,b,c){var d;if(null==c)null!=a&&b&&"object"==typeof b?(c=b,b=null):a&&"object"==typeof a?(c=a,a=b=null):c=J;else if("object"!=typeof c)throw Error(h+"Argument not an object: "+c);if(d=this.toFixed(a,b),this.c){var e,f=d.split("."),g=+c.groupSize,i=+c.secondaryGroupSize,j=c.groupSeparator||"",k=f[0],l=f[1],m=this.s<0,n=m?k.slice(1):k,o=n.length;if(i&&(e=g,g=i,i=e,o-=e),g>0&&o>0){for(e=o%g||g,k=n.substr(0,e);e<o;e+=g)k+=j+n.substr(e,g);i>0&&(k+=j+n.slice(e)),m&&(k="-"+k)}d=l?k+(c.decimalSeparator||"")+((i=+c.fractionGroupSize)?l.replace(RegExp("\\d{"+i+"}\\B","g"),"$&"+(c.fractionGroupSeparator||"")):l):k}return(c.prefix||"")+d+(c.suffix||"")},y.toFraction=function(a){var b,c,d,e,f,g,i,k,m,n,o,p,q=this.c;if(null!=a&&(!(i=new M(a)).isInteger()&&(i.c||1!==i.s)||i.lt(z)))throw Error(h+"Argument "+(i.isInteger()?"out of range: ":"not an integer: ")+R(i));if(!q)return new M(this);for(b=new M(z),m=c=new M(z),d=k=new M(z),p=l(q),f=b.e=p.length-this.e-1,b.c[0]=j[(g=f%14)<0?14+g:g],a=!a||i.comparedTo(b)>0?f>0?b:m:i,g=F,F=1/0,i=new M(p),k.c[0]=0;n=v(i,b,0,1),1!=(e=c.plus(n.times(d))).comparedTo(a);)c=d,d=e,m=k.plus(n.times(e=m)),k=e,b=i.minus(n.times(e=b)),i=e;return e=v(a.minus(c),d,0,1),k=k.plus(e.times(m)),c=c.plus(e.times(d)),k.s=m.s=this.s,f*=2,o=1>v(m,d,f,B).minus(this).abs().comparedTo(v(k,c,f,B).minus(this).abs())?[m,d]:[k,c],F=g,o},y.toNumber=function(){return+R(this)},y.toPrecision=function(a,b){return null!=a&&n(a,1,1e9),N(this,a,b,2)},y.toString=function(a){var b,c=this,d=c.s,e=c.e;return null===e?d?(b="Infinity",d<0&&(b="-"+b)):b="NaN":(null==a?b=e<=C||e>=D?p(l(c.c),e):q(l(c.c),e,"0"):10===a&&L?b=q(l((c=Q(new M(c),A+e+1,B)).c),c.e,"0"):(n(a,2,K.length,"Base"),b=w(q(l(c.c),e,"0"),10,a,d,!0)),d<0&&c.c[0]&&(b="-"+b)),b},y.valueOf=y.toJSON=function(){return R(this)},y._isBigNumber=!0,null!=b&&M.set(b),M}()).default=d.BigNumber=d,"function"==typeof define&&define.amd)a.r,void 0!==d&&a.v(d);else b.exports?b.exports=d:(c||(c="undefined"!=typeof self&&self?self:window),c.BigNumber=d)}(a.e)},47006,(a,b,c)=>{var d=a.r(30168),e=b.exports;!function(){"use strict";var a,b,c,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function h(a){return f.lastIndex=0,f.test(a)?'"'+a.replace(f,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}"function"!=typeof e.stringify&&(e.stringify=function(e,f,g){var i;if(a="",b="","number"==typeof g)for(i=0;i<g;i+=1)b+=" ";else"string"==typeof g&&(b=g);if(c=f,f&&"function"!=typeof f&&("object"!=typeof f||"number"!=typeof f.length))throw Error("JSON.stringify");return function e(f,g){var i,j,k,l,m,n=a,o=g[f],p=null!=o&&(o instanceof d||d.isBigNumber(o));switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(f)),"function"==typeof c&&(o=c.call(g,f,o)),typeof o){case"string":if(p)return o;return h(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":case"bigint":return String(o);case"object":if(!o)return"null";if(a+=b,m=[],"[object Array]"===Object.prototype.toString.apply(o)){for(i=0,l=o.length;i<l;i+=1)m[i]=e(i,o)||"null";return k=0===m.length?"[]":a?"[\n"+a+m.join(",\n"+a)+"\n"+n+"]":"["+m.join(",")+"]",a=n,k}if(c&&"object"==typeof c)for(i=0,l=c.length;i<l;i+=1)"string"==typeof c[i]&&(k=e(j=c[i],o))&&m.push(h(j)+(a?": ":":")+k);else Object.keys(o).forEach(function(b){var c=e(b,o);c&&m.push(h(b)+(a?": ":":")+c)});return k=0===m.length?"{}":a?"{\n"+a+m.join(",\n"+a)+"\n"+n+"}":"{"+m.join(",")+"}",a=n,k}}("",{"":e})})}()},27545,(a,b,c)=>{var d=null;let e=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,f=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;b.exports=function(b){"use strict";var c={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=b){if(!0===b.strict&&(c.strict=!0),!0===b.storeAsString&&(c.storeAsString=!0),c.alwaysParseAsBig=!0===b.alwaysParseAsBig&&b.alwaysParseAsBig,c.useNativeBigInt=!0===b.useNativeBigInt&&b.useNativeBigInt,void 0!==b.constructorAction)if("error"===b.constructorAction||"ignore"===b.constructorAction||"preserve"===b.constructorAction)c.constructorAction=b.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${b.constructorAction}`);if(void 0!==b.protoAction)if("error"===b.protoAction||"ignore"===b.protoAction||"preserve"===b.protoAction)c.protoAction=b.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${b.protoAction}`)}var g,h,i,j,k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},l=function(a){throw{name:"SyntaxError",message:a,at:g,text:i}},m=function(a){return a&&a!==h&&l("Expected '"+a+"' instead of '"+h+"'"),h=i.charAt(g),g+=1,h},n=function(){var b,e="";for("-"===h&&(e="-",m("-"));h>="0"&&h<="9";)e+=h,m();if("."===h)for(e+=".";m()&&h>="0"&&h<="9";)e+=h;if("e"===h||"E"===h)for(e+=h,m(),("-"===h||"+"===h)&&(e+=h,m());h>="0"&&h<="9";)e+=h,m();if(isFinite(b=+e))return(null==d&&(d=a.r(30168)),e.length>15)?c.storeAsString?e:c.useNativeBigInt?BigInt(e):new d(e):c.alwaysParseAsBig?c.useNativeBigInt?BigInt(b):new d(b):b;l("Bad number")},o=function(){var a,b,c,d="";if('"'===h)for(var e=g;m();){if('"'===h)return g-1>e&&(d+=i.substring(e,g-1)),m(),d;if("\\"===h){if(g-1>e&&(d+=i.substring(e,g-1)),m(),"u"===h){for(b=0,c=0;b<4&&isFinite(a=parseInt(m(),16));b+=1)c=16*c+a;d+=String.fromCharCode(c)}else if("string"==typeof k[h])d+=k[h];else break;e=g}}l("Bad string")},p=function(){for(;h&&h<=" ";)m()},q=function(){switch(h){case"t":return m("t"),m("r"),m("u"),m("e"),!0;case"f":return m("f"),m("a"),m("l"),m("s"),m("e"),!1;case"n":return m("n"),m("u"),m("l"),m("l"),null}l("Unexpected '"+h+"'")},r=function(){var a=[];if("["===h){if(m("["),p(),"]"===h)return m("]"),a;for(;h;){if(a.push(j()),p(),"]"===h)return m("]"),a;m(","),p()}}l("Bad array")},s=function(){var a,b=Object.create(null);if("{"===h){if(m("{"),p(),"}"===h)return m("}"),b;for(;h;){if(a=o(),p(),m(":"),!0===c.strict&&Object.hasOwnProperty.call(b,a)&&l('Duplicate key "'+a+'"'),!0===e.test(a)?"error"===c.protoAction?l("Object contains forbidden prototype property"):"ignore"===c.protoAction?j():b[a]=j():!0===f.test(a)?"error"===c.constructorAction?l("Object contains forbidden constructor property"):"ignore"===c.constructorAction?j():b[a]=j():b[a]=j(),p(),"}"===h)return m("}"),b;m(","),p()}}l("Bad object")};return j=function(){switch(p(),h){case"{":return s();case"[":return r();case'"':return o();case"-":return n();default:return h>="0"&&h<="9"?n():q()}},function(a,b){var c;return i=a+"",g=0,h=" ",c=j(),p(),h&&l("Syntax error"),"function"==typeof b?function a(c,d){var e,f=c[d];return f&&"object"==typeof f&&Object.keys(f).forEach(function(b){void 0!==(e=a(f,b))?f[b]=e:delete f[b]}),b.call(c,d,f)}({"":c},""):c}}},31553,(a,b,c)=>{var d=a.r(47006).stringify,e=a.r(27545);b.exports=function(a){return{parse:e(a),stringify:d}},b.exports.parse=e(),b.exports.stringify=d},5365,(a,b,c)=>{b.exports=a.x("process",()=>require("process"))},22852,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Colours=void 0;class d{static isEnabled(a){return a&&a.isTTY&&("function"!=typeof a.getColorDepth||a.getColorDepth()>2)}static refresh(){d.enabled=d.isEnabled(null==process?void 0:process.stderr),this.enabled?(d.reset="\x1b[0m",d.bright="\x1b[1m",d.dim="\x1b[2m",d.red="\x1b[31m",d.green="\x1b[32m",d.yellow="\x1b[33m",d.blue="\x1b[34m",d.magenta="\x1b[35m",d.cyan="\x1b[36m",d.white="\x1b[37m",d.grey="\x1b[90m"):(d.reset="",d.bright="",d.dim="",d.red="",d.green="",d.yellow="",d.blue="",d.magenta="",d.cyan="",d.white="",d.grey="")}}c.Colours=d,d.enabled=!1,d.reset="",d.bright="",d.dim="",d.red="",d.green="",d.yellow="",d.blue="",d.magenta="",d.cyan="",d.white="",d.grey="",d.refresh()},91100,(a,b,c)=>{"use strict";let d;var e,f,g,h=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),i=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),j=a.e&&a.e.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&h(b,a,c[d]);return i(b,a),b});Object.defineProperty(c,"__esModule",{value:!0}),c.env=c.DebugLogBackendBase=c.placeholder=c.AdhocDebugLogger=c.LogSeverity=void 0,c.getNodeBackend=r,c.getDebugBackend=function(a){return new s(a)},c.getStructuredBackend=function(a){return new t(a)},c.setBackend=function(a){d=a,u.clear()},c.log=v;let k=a.r(27699),l=j(a.r(5365)),m=j(a.r(24361)),n=a.r(22852);(f=g||(c.LogSeverity=g={})).DEFAULT="DEFAULT",f.DEBUG="DEBUG",f.INFO="INFO",f.WARNING="WARNING",f.ERROR="ERROR";class o extends k.EventEmitter{constructor(a,b){super(),this.namespace=a,this.upstream=b,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(a,b)=>this.on(a,b)}),this.func.debug=(...a)=>this.invokeSeverity(g.DEBUG,...a),this.func.info=(...a)=>this.invokeSeverity(g.INFO,...a),this.func.warn=(...a)=>this.invokeSeverity(g.WARNING,...a),this.func.error=(...a)=>this.invokeSeverity(g.ERROR,...a),this.func.sublog=a=>v(a,this.func)}invoke(a,...b){if(this.upstream)try{this.upstream(a,...b)}catch(a){}try{this.emit("log",a,b)}catch(a){}}invokeSeverity(a,...b){this.invoke({severity:a},...b)}}c.AdhocDebugLogger=o,c.placeholder=new o("",()=>{}).func;class p{constructor(){var a;this.cached=new Map,this.filters=[],this.filtersSet=!1;let b=null!=(a=l.env[c.env.nodeEnables])?a:"*";"all"===b&&(b="*"),this.filters=b.split(",")}log(a,b,...c){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let d=this.cached.get(a);d||(d=this.makeLogger(a),this.cached.set(a,d)),d(b,...c)}catch(a){console.error(a)}}}c.DebugLogBackendBase=p;class q extends p{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(a){return this.enabledRegexp.test(a)}makeLogger(a){return this.enabledRegexp.test(a)?(b,...c)=>{var d;let e,f=`${n.Colours.green}${a}${n.Colours.reset}`,h=`${n.Colours.yellow}${l.pid}${n.Colours.reset}`;switch(b.severity){case g.ERROR:e=`${n.Colours.red}${b.severity}${n.Colours.reset}`;break;case g.INFO:e=`${n.Colours.magenta}${b.severity}${n.Colours.reset}`;break;case g.WARNING:e=`${n.Colours.yellow}${b.severity}${n.Colours.reset}`;break;default:e=null!=(d=b.severity)?d:g.DEFAULT}let i=m.formatWithOptions({colors:n.Colours.enabled},...c),j=Object.assign({},b);delete j.severity;let k=Object.getOwnPropertyNames(j).length?JSON.stringify(j):"",o=k?`${n.Colours.grey}${k}${n.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",h,f,e,i,k?` ${o}`:"")}:()=>{}}setFilters(){let a=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=RegExp(`^${a}$`,"i")}}function r(){return new q}class s extends p{constructor(a){super(),this.debugPkg=a}makeLogger(a){let b=this.debugPkg(a);return(a,...c)=>{b(c[0],...c.slice(1))}}setFilters(){var a;let b=null!=(a=l.env.NODE_DEBUG)?a:"";l.env.NODE_DEBUG=`${b}${b?",":""}${this.filters.join(",")}`}}class t extends p{constructor(a){super(),this.upstream=null!=a?a:void 0}makeLogger(a){var b;let c=null==(b=this.upstream)?void 0:b.makeLogger(a);return(a,...b)=>{var d;let e=JSON.stringify(Object.assign({severity:null!=(d=a.severity)?d:g.INFO,message:m.format(...b)},a));c?c(a,e):console.log("%s",e)}}setFilters(){var a;null==(a=this.upstream)||a.setFilters()}}c.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};let u=new Map;function v(a,b){let e;if(!d&&!l.env[c.env.nodeEnables]||!a)return c.placeholder;b&&(a=`${b.instance.namespace}:${a}`);let f=u.get(a);if(f)return f.func;if(null===d)return c.placeholder;void 0===d&&(d=r());let g=new o(a,(b,...c)=>{if(e!==d){if(null===d)return;void 0===d&&(d=r()),e=d}null==d||d.log(a,b,...c)});return u.set(a,g),g.func}},15979,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(91100),c)},54145,(a,b,c)=>{"use strict";let d;var e,f=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),g=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),h=a.e&&a.e.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&f(b,a,c[d]);return g(b,a),b}),i=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||f(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),c.gcpResidencyCache=c.METADATA_SERVER_DETECTION=c.HEADERS=c.HEADER_VALUE=c.HEADER_NAME=c.SECONDARY_HOST_ADDRESS=c.HOST_ADDRESS=c.BASE_PATH=void 0,c.instance=function(a){return p("instance",a)},c.project=function(a){return p("project",a)},c.universe=function(a){return p("universe",a)},c.bulk=r,c.isAvailable=s,c.resetIsAvailableCache=function(){d=void 0},c.getGCPResidency=t,c.setGCPResidency=u,c.requestTimeout=v;let j=a.r(99853),k=a.r(31553),l=a.r(37062),m=h(a.r(15979));c.BASE_PATH="/computeMetadata/v1",c.HOST_ADDRESS="http://169.254.169.254",c.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",c.HEADER_NAME="Metadata-Flavor",c.HEADER_VALUE="Google",c.HEADERS=Object.freeze({[c.HEADER_NAME]:c.HEADER_VALUE});let n=m.log("gcp-metadata");function o(a){return a||(a=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||c.HOST_ADDRESS),/^https?:\/\//.test(a)||(a=`http://${a}`),new URL(c.BASE_PATH,a).href}async function p(a,b={},d=3,e=!1){let f=new Headers(c.HEADERS),g="",h={};("object"==typeof a?(new Headers(a.headers).forEach((a,b)=>f.set(b,a)),g=a.metadataKey,h=a.params||h,d=a.noResponseRetries||d,e=a.fastFail||e):g=a,"string"==typeof b)?g+=`/${b}`:(Object.keys(b).forEach(a=>{switch(a){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${a}' is not a valid configuration option.`)}}),b.property&&(g+=`/${b.property}`),new Headers(b.headers).forEach((a,b)=>f.set(b,a)),h=b.params||h);let i=e?q:j.request,l={url:`${o()}/${g}`,headers:f,retryConfig:{noResponseRetries:d},params:h,responseType:"text",timeout:v()};n.info("instance request %j",l);let m=await i(l);n.info("instance metadata is %s",m.data);let r=m.headers.get(c.HEADER_NAME);if(r!==c.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${c.HEADER_NAME} header. Expected '${c.HEADER_VALUE}', got ${r?`'${r}'`:"no header"}`);if("string"==typeof m.data)try{return k.parse(m.data)}catch{}return m.data}async function q(a){let b={...a,url:a.url?.toString().replace(o(),o(c.SECONDARY_HOST_ADDRESS))};return Promise.any([(0,j.request)(a),(0,j.request)(b)])}async function r(a){let b={};return await Promise.all(a.map(a=>(async()=>{let c=await p(a);b[a.metadataKey]=c})())),b}async function s(){if(process.env.METADATA_SERVER_DETECTION){let a=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(a in c.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${a}\`, but it should be \`${Object.keys(c.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(a){case"assume-present":return!0;case"none":return!1;case"bios-only":return t()}}try{return void 0===d&&(d=p("instance",void 0,process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0,!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await d,!0}catch(a){if(process.env.DEBUG_AUTH&&console.info(a),"request-timeout"===a.type||a.response&&404===a.response.status)return!1;if(!(a.response&&404===a.response.status)&&(!a.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(a.code.toString()))){let b="UNKNOWN";a.code&&(b=a.code.toString()),process.emitWarning(`received unexpected error = ${a.message} code = ${b}`,"MetadataLookupWarning")}return!1}}function t(){return null===c.gcpResidencyCache&&u(),c.gcpResidencyCache}function u(a=null){c.gcpResidencyCache=null!==a?a:(0,l.detectGCPResidency)()}function v(){return 3e3*!t()}c.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"}),c.gcpResidencyCache=null,i(a.r(37062),c)},35863,(a,b,c)=>{"use strict";c.byteLength=function(a){var b=j(a),c=b[0],d=b[1];return(c+d)*3/4-d},c.toByteArray=function(a){var b,c,d=j(a),g=d[0],h=d[1],i=new f((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=e[a.charCodeAt(c)]<<18|e[a.charCodeAt(c+1)]<<12|e[a.charCodeAt(c+2)]<<6|e[a.charCodeAt(c+3)],i[k++]=b>>16&255,i[k++]=b>>8&255,i[k++]=255&b;return 2===h&&(b=e[a.charCodeAt(c)]<<2|e[a.charCodeAt(c+1)]>>4,i[k++]=255&b),1===h&&(b=e[a.charCodeAt(c)]<<10|e[a.charCodeAt(c+1)]<<4|e[a.charCodeAt(c+2)]>>2,i[k++]=b>>8&255,i[k++]=255&b),i},c.fromByteArray=function(a){for(var b,c=a.length,e=c%3,f=[],g=0,h=c-e;g<h;g+=16383)f.push(function(a,b,c){for(var e,f=[],g=b;g<c;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(d[e>>18&63]+d[e>>12&63]+d[e>>6&63]+d[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(d[(b=a[c-1])>>2]+d[b<<4&63]+"=="):2===e&&f.push(d[(b=(a[c-2]<<8)+a[c-1])>>10]+d[b>>4&63]+d[b<<2&63]+"="),f.join("")};for(var d=[],e=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,i=g.length;h<i;++h)d[h]=g[h],e[g.charCodeAt(h)]=h;function j(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}e[45]=62,e[95]=63},66051,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.fromArrayBufferToHex=function(a){return Array.from(new Uint8Array(a)).map(a=>a.toString(16).padStart(2,"0")).join("")}},26410,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.BrowserCrypto=void 0;let d=a.r(35863),e=a.r(66051);class f{constructor(){throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return d.fromByteArray(new Uint8Array(c))}randomBytesBase64(a){let b=new Uint8Array(a);return window.crypto.getRandomValues(b),d.fromByteArray(b)}static padBase64(a){for(;a.length%4!=0;)a+="=";return a}async verify(a,b,c){let e={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},g=new TextEncoder().encode(b),h=d.toByteArray(f.padBase64(c)),i=await window.crypto.subtle.importKey("jwk",a,e,!0,["verify"]);return await window.crypto.subtle.verify(e,i,h,g)}async sign(a,b){let c={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},e=new TextEncoder().encode(b),f=await window.crypto.subtle.importKey("jwk",a,c,!0,["sign"]),g=await window.crypto.subtle.sign(c,f,e);return d.fromByteArray(new Uint8Array(g))}decodeBase64StringUtf8(a){let b=d.toByteArray(f.padBase64(a));return new TextDecoder().decode(b)}encodeBase64StringUtf8(a){let b=new TextEncoder().encode(a);return d.fromByteArray(b)}async sha256DigestHex(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return(0,e.fromArrayBufferToHex)(c)}async signWithHmacSha256(a,b){let c="string"==typeof a?a:String.fromCharCode(...new Uint16Array(a)),d=new TextEncoder,e=await window.crypto.subtle.importKey("raw",d.encode(c),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",e,d.encode(b))}}c.BrowserCrypto=f},66414,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.NodeCrypto=void 0;let d=a.r(54799);c.NodeCrypto=class{async sha256DigestBase64(a){return d.createHash("sha256").update(a).digest("base64")}randomBytesBase64(a){return d.randomBytes(a).toString("base64")}async verify(a,b,c){let e=d.createVerify("RSA-SHA256");return e.update(b),e.end(),e.verify(a,c,"base64")}async sign(a,b){let c=d.createSign("RSA-SHA256");return c.update(b),c.end(),c.sign(a,"base64")}decodeBase64StringUtf8(a){return Buffer.from(a,"base64").toString("utf-8")}encodeBase64StringUtf8(a){return Buffer.from(a,"utf-8").toString("base64")}async sha256DigestHex(a){return d.createHash("sha256").update(a).digest("hex")}async signWithHmacSha256(a,b){var c,e;let f="string"==typeof a?a:(c=a,Buffer.from(c));return(e=d.createHmac("sha256",f).update(b).digest()).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}},65726,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),c.createCrypto=function(){return function(){;}(),new f.NodeCrypto},c.hasBrowserCrypto=g,a.r(26410);let f=a.r(66414);function g(){return!1}e(a.r(66051),c)},45706,(a,b,c)=>{b.exports=a.x("querystring",()=>require("querystring"))},74898,(a,b,c)=>{var d=a.r(874),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?b.exports=d:(f(d,c),c.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},79106,(a,b,c)=>{"use strict";function d(a){return(a/8|0)+ +(a%8!=0)}var e={ES256:d(256),ES384:d(384),ES512:d(521)};b.exports=function(a){var b=e[a];if(b)return b;throw Error('Unknown algorithm "'+a+'"')}},8863,(a,b,c)=>{"use strict";var d=a.r(74898).Buffer,e=a.r(79106);function f(a){if(d.isBuffer(a))return a;if("string"==typeof a)return d.from(a,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function g(a,b,c){for(var d=0;b+d<c&&0===a[b+d];)++d;return a[b+d]>=128&&--d,d}b.exports={derToJose:function(a,b){a=f(a);var c=e(b),g=c+1,h=a.length,i=0;if(48!==a[i++])throw Error('Could not find expected "seq"');var j=a[i++];if(129===j&&(j=a[i++]),h-i<j)throw Error('"seq" specified length of "'+j+'", only "'+(h-i)+'" remaining');if(2!==a[i++])throw Error('Could not find expected "int" for "r"');var k=a[i++];if(h-i-2<k)throw Error('"r" specified length of "'+k+'", only "'+(h-i-2)+'" available');if(g<k)throw Error('"r" specified length of "'+k+'", max of "'+g+'" is acceptable');var l=i;if(i+=k,2!==a[i++])throw Error('Could not find expected "int" for "s"');var m=a[i++];if(h-i!==m)throw Error('"s" specified length of "'+m+'", expected "'+(h-i)+'"');if(g<m)throw Error('"s" specified length of "'+m+'", max of "'+g+'" is acceptable');var n=i;if((i+=m)!==h)throw Error('Expected to consume entire buffer, but "'+(h-i)+'" bytes remain');var o=c-k,p=c-m,q=d.allocUnsafe(o+k+p+m);for(i=0;i<o;++i)q[i]=0;a.copy(q,i,l+Math.max(-o,0),l+k),i=c;for(var r=i;i<r+p;++i)q[i]=0;return a.copy(q,i,n+Math.max(-p,0),n+m),q=(q=q.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(a,b){a=f(a);var c=e(b),h=a.length;if(h!==2*c)throw TypeError('"'+b+'" signatures must be "'+2*c+'" bytes, saw "'+h+'"');var i=g(a,0,c),j=g(a,c,a.length),k=c-i,l=c-j,m=2+k+1+1+l,n=m<128,o=d.allocUnsafe((n?2:3)+m),p=0;return o[p++]=48,n?o[p++]=m:(o[p++]=129,o[p++]=255&m),o[p++]=2,o[p++]=k,i<0?(o[p++]=0,p+=a.copy(o,p,0,c)):p+=a.copy(o,p,i,c),o[p++]=2,o[p++]=l,j<0?(o[p++]=0,a.copy(o,p,c)):a.copy(o,p,c+j),o}}},98126,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.LRUCache=void 0,c.snakeToCamel=h,c.originalOrCamelOptions=function(a){return{get:function(b){let c=a||{};return c[b]??c[h(b)]}}},c.removeUndefinedValuesInObject=function(a){return Object.entries(a).forEach(([b,c])=>{(void 0===c||"undefined"===c)&&delete a[b]}),a},c.isValidFile=j,c.getWellKnownCertificateConfigFileLocation=function(){let a=process.env.CLOUDSDK_CONFIG||(e.platform().startsWith("win")?f.join(process.env.APPDATA||"",g):f.join(process.env.HOME||"",".config",g));return f.join(a,"certificate_config.json")};let d=a.r(22734),e=a.r(46786),f=a.r(14747),g="gcloud";function h(a){return a.replace(/([_][^_])/g,a=>a.slice(1).toUpperCase())}class i{capacity;#j=new Map;maxAge;constructor(a){this.capacity=a.capacity,this.maxAge=a.maxAge}#k(a,b){this.#j.delete(a),this.#j.set(a,{value:b,lastAccessed:Date.now()})}set(a,b){this.#k(a,b),this.#l()}get(a){let b=this.#j.get(a);if(b)return this.#k(a,b.value),this.#l(),b.value}#l(){let a=this.maxAge?Date.now()-this.maxAge:0,b=this.#j.entries().next();for(;!b.done&&(this.#j.size>this.capacity||b.value[1].lastAccessed<a);)this.#j.delete(b.value[0]),b=this.#j.entries().next()}}async function j(a){try{return(await d.promises.lstat(a)).isFile()}catch(a){return!1}}c.LRUCache=i},91829,a=>{a.v({name:"google-auth-library",version:"10.5.0",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"})},15204,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.USER_AGENT=c.PRODUCT_NAME=c.pkg=void 0;let d=a.r(91829);c.pkg=d;let e="google-api-nodejs-client";c.PRODUCT_NAME=e,c.USER_AGENT=`${e}/${d.version}`},30190,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AuthClient=c.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=c.DEFAULT_UNIVERSE=void 0;let d=a.r(27699),e=a.r(99853),f=a.r(98126),g=a.r(15979),h=a.r(15204);c.DEFAULT_UNIVERSE="googleapis.com",c.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class i extends d.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=c.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=c.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(a={}){super();const b=(0,f.originalOrCamelOptions)(a);this.apiKey=a.apiKey,this.projectId=b.get("project_id")??null,this.quotaProjectId=b.get("quota_project_id"),this.credentials=b.get("credentials")??{},this.universeDomain=b.get("universe_domain")??c.DEFAULT_UNIVERSE,this.transporter=a.transporter??new e.Gaxios(a.transporterOptions),!1!==b.get("useAuthRequestParameters")&&(this.transporter.interceptors.request.add(i.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(i.DEFAULT_RESPONSE_INTERCEPTOR)),a.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=a.forceRefreshOnFailure??!1}fetch(...a){let b,c=a[0],d=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&e.Gaxios.mergeHeaders(f,c.headers),d&&e.Gaxios.mergeHeaders(f,new Headers(d.headers)),"object"!=typeof c||c instanceof URL)?this.request({...d,headers:f,url:b}):this.request({...d,...c,headers:f,url:b})}setCredentials(a){this.credentials=a}addSharedMetadataHeaders(a){return!a.has("x-goog-user-project")&&this.quotaProjectId&&a.set("x-goog-user-project",this.quotaProjectId),a}addUserProjectAndAuthHeaders(a,b){let c=b.get("x-goog-user-project"),d=b.get("authorization");return c&&a.set("x-goog-user-project",c),d&&a.set("authorization",d),a}static log=(0,g.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async a=>{if(!a.headers.has("x-goog-api-client")){let b=process.version.replace(/^v/,"");a.headers.set("x-goog-api-client",`gl-node/${b}`)}let b=a.headers.get("User-Agent");b?b.includes(`${h.PRODUCT_NAME}/`)||a.headers.set("User-Agent",`${b} ${h.USER_AGENT}`):a.headers.set("User-Agent",h.USER_AGENT);try{let b=a[i.RequestMethodNameSymbol],c=`${Math.floor(1e3*Math.random())}`;a[i.RequestLogIdSymbol]=c;let d={url:a.url,headers:a.headers};b?i.log.info("%s [%s] request %j",b,c,d):i.log.info("[%s] request %j",c,d)}catch(a){}return a}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] response %j",c,d,a.data):i.log.info("[%s] response %j",d,a.data)}catch(a){}return a},rejected:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] error %j",c,d,a.response?.data):i.log.error("[%s] error %j",d,a.response?.data)}catch(a){}throw a}};static setMethodName(a,b){try{a[i.RequestMethodNameSymbol]=b}catch(a){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}c.AuthClient=i},98463,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.LoginTicket=void 0,c.LoginTicket=class{envelope;payload;constructor(a,b){this.envelope=a,this.payload=b}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let a=this.getPayload();return a&&a.sub?a.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}},94347,(a,b,c)=>{"use strict";var d,e,f,g,h,i;Object.defineProperty(c,"__esModule",{value:!0}),c.OAuth2Client=c.ClientAuthentication=c.CertificateFormat=c.CodeChallengeMethod=void 0;let j=a.r(99853),k=a.r(45706),l=a.r(88947),m=a.r(8863),n=a.r(98126),o=a.r(65726),p=a.r(30190),q=a.r(98463);(g=d||(c.CodeChallengeMethod=d={})).Plain="plain",g.S256="S256",(h=e||(c.CertificateFormat=e={})).PEM="PEM",h.JWK="JWK",(i=f||(c.ClientAuthentication=f={})).ClientSecretPost="ClientSecretPost",i.ClientSecretBasic="ClientSecretBasic",i.None="None";class r extends p.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=e.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(a={},b,c){super("object"==typeof a?a:{}),"object"!=typeof a&&(a={clientId:a,clientSecret:b,redirectUri:c}),this._clientId=a.clientId||a.client_id,this._clientSecret=a.clientSecret||a.client_secret,this.redirectUri=a.redirectUri||a.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...a.endpoints},this.clientAuthentication=a.clientAuthentication||f.ClientSecretPost,this.issuers=a.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(a={}){if(a.code_challenge_method&&!a.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");return a.response_type=a.response_type||"code",a.client_id=a.client_id||this._clientId,a.redirect_uri=a.redirect_uri||this.redirectUri,Array.isArray(a.scope)&&(a.scope=a.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+k.stringify(a)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let a=(0,o.createCrypto)(),b=a.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),c=(await a.sha256DigestBase64(b)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:b,codeChallenge:c}}getToken(a,b){let c="string"==typeof a?{code:a}:a;if(!b)return this.getTokenAsync(c);this.getTokenAsync(c).then(a=>b(null,a.tokens,a.res),a=>b(a,null,a.response))}async getTokenAsync(a){let b=this.endpoints.oauth2TokenUrl.toString(),c=new Headers,d={client_id:a.client_id||this._clientId,code_verifier:a.codeVerifier,code:a.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri||this.redirectUri};if(this.clientAuthentication===f.ClientSecretBasic){let a=Buffer.from(`${this._clientId}:${this._clientSecret}`);c.set("authorization",`Basic ${a.toString("base64")}`)}this.clientAuthentication===f.ClientSecretPost&&(d.client_secret=this._clientSecret);let e={...r.RETRY_CONFIG,method:"POST",url:b,data:new URLSearchParams((0,n.removeUndefinedValuesInObject)(d)),headers:c};p.AuthClient.setMethodName(e,"getTokenAsync");let g=await this.transporter.request(e),h=g.data;return g.data&&g.data.expires_in&&(h.expiry_date=new Date().getTime()+1e3*g.data.expires_in,delete h.expires_in),this.emit("tokens",h),{tokens:h,res:g}}async refreshToken(a){if(!a)return this.refreshTokenNoCache(a);if(this.refreshTokenPromises.has(a))return this.refreshTokenPromises.get(a);let b=this.refreshTokenNoCache(a).then(b=>(this.refreshTokenPromises.delete(a),b),b=>{throw this.refreshTokenPromises.delete(a),b});return this.refreshTokenPromises.set(a,b),b}async refreshTokenNoCache(a){let b;if(!a)throw Error("No refresh token is set.");let c=this.endpoints.oauth2TokenUrl.toString(),d={refresh_token:a,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};try{let a={...r.RETRY_CONFIG,method:"POST",url:c,data:new URLSearchParams((0,n.removeUndefinedValuesInObject)(d))};p.AuthClient.setMethodName(a,"refreshTokenNoCache"),b=await this.transporter.request(a)}catch(a){throw a instanceof j.GaxiosError&&"invalid_grant"===a.message&&a.response?.data&&/ReAuth/i.test(a.response.data.error_description)&&(a.message=JSON.stringify(a.response.data)),a}let e=b.data;return b.data&&b.data.expires_in&&(e.expiry_date=new Date().getTime()+1e3*b.data.expires_in,delete e.expires_in),this.emit("tokens",e),{tokens:e,res:b}}refreshAccessToken(a){if(!a)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then(b=>a(null,b.credentials,b.res),a)}async refreshAccessTokenAsync(){let a=await this.refreshToken(this.credentials.refresh_token),b=a.tokens;return b.refresh_token=this.credentials.refresh_token,this.credentials=b,{credentials:this.credentials,res:a.res}}getAccessToken(a){if(!a)return this.getAccessTokenAsync();this.getAccessTokenAsync().then(b=>a(null,b.token,b.res),a)}async getAccessTokenAsync(){if(!(!this.credentials.access_token||this.isTokenExpiring()))return{token:this.credentials.access_token};{if(!this.credentials.refresh_token)if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token)return this.setCredentials(a),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let a=await this.refreshAccessTokenAsync();if(!a.credentials||a.credentials&&!a.credentials.access_token)throw Error("Could not refresh access token.");return{token:a.credentials.access_token,res:a.res}}}async getRequestHeaders(a){return(await this.getRequestMetadataAsync(a)).headers}async getRequestMetadataAsync(a){let b=this.credentials;if(!b.access_token&&!b.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(b.access_token&&!this.isTokenExpiring()){b.token_type=b.token_type||"Bearer";let a=new Headers({authorization:b.token_type+" "+b.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let b=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(b)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let c=null,d=null;try{d=(c=await this.refreshToken(b.refresh_token)).tokens}catch(a){throw a.response&&(403===a.response.status||404===a.response.status)&&(a.message=`Could not refresh access token: ${a.message}`),a}let e=this.credentials;e.token_type=e.token_type||"Bearer",d.refresh_token=e.refresh_token,this.credentials=d;let f=new Headers({authorization:e.token_type+" "+d.access_token});return{headers:this.addSharedMetadataHeaders(f),res:c.res}}static getRevokeTokenUrl(a){return new r().getRevokeTokenURL(a).toString()}getRevokeTokenURL(a){let b=new URL(this.endpoints.oauth2RevokeUrl);return b.searchParams.append("token",a),b}revokeToken(a,b){let c={...r.RETRY_CONFIG,url:this.getRevokeTokenURL(a).toString(),method:"POST"};if(p.AuthClient.setMethodName(c,"revokeToken"),!b)return this.transporter.request(c);this.transporter.request(c).then(a=>b(null,a),b)}revokeCredentials(a){if(!a)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then(b=>a(null,b),a)}async revokeCredentialsAsync(){let a=this.credentials.access_token;if(this.credentials={},a)return this.revokeToken(a);throw Error("No access token to revoke.")}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){try{let b=await this.getRequestMetadataAsync();return a.headers=j.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b.headers),this.apiKey&&a.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),f=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,g=c.config.data instanceof l.Readable,h=401===d||403===d;if(!b&&h&&!g&&e)return await this.refreshAccessTokenAsync(),this.requestAsync(a,!0);if(!b&&h&&!g&&f){let b=await this.processAndValidateRefreshHandler();return b?.access_token&&this.setCredentials(b),this.requestAsync(a,!0)}}throw d}}verifyIdToken(a,b){if(b&&"function"!=typeof b)throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!b)return this.verifyIdTokenAsync(a);this.verifyIdTokenAsync(a).then(a=>b(null,a),b)}async verifyIdTokenAsync(a){if(!a.idToken)throw Error("The verifyIdToken method requires an ID Token");let b=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(a.idToken,b.certs,a.audience,this.issuers,a.maxExpiry)}async getTokenInfo(a){let{data:b}=await this.transporter.request({...r.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${a}`},url:this.endpoints.tokenInfoUrl.toString()}),c=Object.assign({expiry_date:new Date().getTime()+1e3*b.expires_in,scopes:b.scope.split(" ")},b);return delete c.expires_in,delete c.scope,c}getFederatedSignonCerts(a){if(!a)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then(b=>a(null,b.certs,b.res),a)}async getFederatedSignonCertsAsync(){let a,b,c=new Date().getTime(),d=(0,o.hasBrowserCrypto)()?e.JWK:e.PEM;if(this.certificateExpiry&&c<this.certificateExpiry.getTime()&&this.certificateCacheFormat===d)return{certs:this.certificateCache,format:d};switch(d){case e.PEM:b=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case e.JWK:b=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${d}`)}try{let c={...r.RETRY_CONFIG,url:b};p.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}let f=a?.headers.get("cache-control"),g=-1;if(f){let a=/max-age=(?<maxAge>[0-9]+)/.exec(f)?.groups?.maxAge;a&&(g=1e3*Number(a))}let h={};switch(d){case e.PEM:h=a.data;break;case e.JWK:for(let b of a.data.keys)h[b.kid]=b;break;default:throw Error(`Unsupported certificate format ${d}`)}let i=new Date;return this.certificateExpiry=-1===g?null:new Date(i.getTime()+g),this.certificateCache=h,this.certificateCacheFormat=d,{certs:h,format:d,res:a}}getIapPublicKeys(a){if(!a)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then(b=>a(null,b.pubkeys,b.res),a)}async getIapPublicKeysAsync(){let a,b=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let c={...r.RETRY_CONFIG,url:b};p.AuthClient.setMethodName(c,"getIapPublicKeysAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}return{pubkeys:a.data,res:a}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(a,b,c,d,e){let f,g,h=(0,o.createCrypto)();e||(e=r.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let i=a.split(".");if(3!==i.length)throw Error("Wrong number of segments in token: "+a);let j=i[0]+"."+i[1],k=i[2];try{f=JSON.parse(h.decodeBase64StringUtf8(i[0]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token envelope: ${i[0]}': ${a.message}`),a}if(!f)throw Error("Can't parse token envelope: "+i[0]);try{g=JSON.parse(h.decodeBase64StringUtf8(i[1]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token payload '${i[0]}`),a}if(!g)throw Error("Can't parse token payload: "+i[1]);if(!Object.prototype.hasOwnProperty.call(b,f.kid))throw Error("No pem found for envelope: "+JSON.stringify(f));let l=b[f.kid];if("ES256"===f.alg&&(k=m.joseToDer(k,"ES256").toString("base64")),!await h.verify(l,j,k))throw Error("Invalid token signature: "+a);if(!g.iat)throw Error("No issue time in token: "+JSON.stringify(g));if(!g.exp)throw Error("No expiration time in token: "+JSON.stringify(g));let n=Number(g.iat);if(isNaN(n))throw Error("iat field using invalid format");let p=Number(g.exp);if(isNaN(p))throw Error("exp field using invalid format");let s=new Date().getTime()/1e3;if(p>=s+e)throw Error("Expiration time too far in future: "+JSON.stringify(g));let t=n-r.CLOCK_SKEW_SECS_,u=p+r.CLOCK_SKEW_SECS_;if(s<t)throw Error("Token used too early, "+s+" < "+t+": "+JSON.stringify(g));if(s>u)throw Error("Token used too late, "+s+" > "+u+": "+JSON.stringify(g));if(d&&0>d.indexOf(g.iss))throw Error("Invalid issuer, expected one of ["+d+"], but got "+g.iss);if(null!=c){let a=g.aud;if(!(c.constructor===Array?c.indexOf(a)>-1:a===c))throw Error("Wrong recipient, payload audience != requiredAudience")}return new q.LoginTicket(f,g)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let a=await this.refreshHandler();if(!a.access_token)throw Error("No access token is returned by the refreshHandler callback.");return a}}isTokenExpiring(){let a=this.credentials.expiry_date;return!!a&&a<=new Date().getTime()+this.eagerRefreshThresholdMillis}}c.OAuth2Client=r},48889,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Compute=void 0;let d=a.r(99853),e=a.r(54145),f=a.r(94347);class g extends f.OAuth2Client{serviceAccountEmail;scopes;constructor(a={}){super(a),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=a.serviceAccountEmail||"default",this.scopes=Array.isArray(a.scopes)?a.scopes:a.scopes?[a.scopes]:[]}async refreshTokenNoCache(){let a,b=`service-accounts/${this.serviceAccountEmail}/token`;try{let c={property:b};this.scopes.length>0&&(c.params={scopes:this.scopes.join(",")}),a=await e.instance(c)}catch(a){throw a instanceof d.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let c=a;return a&&a.expires_in&&(c.expiry_date=new Date().getTime()+1e3*a.expires_in,delete c.expires_in),this.emit("tokens",c),{tokens:c,res:null}}async fetchIdToken(a){let b,c=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${a}`;try{b=await e.instance({property:c})}catch(a){throw a instanceof Error&&(a.message=`Could not fetch ID token: ${a.message}`),a}return b}wrapError(a){let b=a.response;b&&b.status&&(a.status=b.status,403===b.status?a.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+a.message:404===b.status&&(a.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+a.message))}}c.Compute=g},70241,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IdTokenClient=void 0;let d=a.r(94347);class e extends d.OAuth2Client{targetAudience;idTokenProvider;constructor(a){super(a),this.targetAudience=a.targetAudience,this.idTokenProvider=a.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let a=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:a,expiry_date:this.getIdTokenExpiryDate(a)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(a){let b=a.split(".")[1];if(b)return 1e3*JSON.parse(Buffer.from(b,"base64").toString("ascii")).exp}}c.IdTokenClient=e},51747,(a,b,c)=>{"use strict";var d,e;let f;Object.defineProperty(c,"__esModule",{value:!0}),c.GCPEnv=void 0,c.clear=function(){f=void 0},c.getEnv=h;let g=a.r(54145);async function h(){return f||(f=i())}async function i(){d.NONE;return process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME?d.APP_ENGINE:process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET?d.CLOUD_FUNCTIONS:await k()?await j()?d.KUBERNETES_ENGINE:process.env.K_CONFIGURATION?d.CLOUD_RUN:process.env.CLOUD_RUN_JOB?d.CLOUD_RUN_JOBS:d.COMPUTE_ENGINE:d.NONE}async function j(){try{return await g.instance("attributes/cluster-name"),!0}catch(a){return!1}}async function k(){return g.isAvailable()}(e=d||(c.GCPEnv=d={})).APP_ENGINE="APP_ENGINE",e.KUBERNETES_ENGINE="KUBERNETES_ENGINE",e.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",e.COMPUTE_ENGINE="COMPUTE_ENGINE",e.CLOUD_RUN="CLOUD_RUN",e.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",e.NONE="NONE"},60597,(a,b,c)=>{var d=a.r(74898).Buffer,e=a.r(88947);function f(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=d.alloc(0),this;if("function"==typeof a.pipe)return this.buffer=d.alloc(0),a.pipe(this),this;if(a.length||"object"==typeof a)return this.buffer=a,this.writable=!1,process.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof a+")")}a.r(24361).inherits(f,e),f.prototype.write=function(a){this.buffer=d.concat([this.buffer,d.from(a)]),this.emit("data",a)},f.prototype.end=function(a){a&&this.write(a),this.emit("end",a),this.emit("close"),this.writable=!1,this.readable=!1},b.exports=f},89815,(a,b,c)=>{"use strict";var d=a.r(874).Buffer,e=a.r(874).SlowBuffer;function f(a,b){if(!d.isBuffer(a)||!d.isBuffer(b)||a.length!==b.length)return!1;for(var c=0,e=0;e<a.length;e++)c|=a[e]^b[e];return 0===c}b.exports=f,f.install=function(){d.prototype.equal=e.prototype.equal=function(a){return f(this,a)}};var g=d.prototype.equal,h=e.prototype.equal;f.restore=function(){d.prototype.equal=g,e.prototype.equal=h}},79418,(a,b,c)=>{var d,e=a.r(74898).Buffer,f=a.r(54799),g=a.r(8863),h=a.r(24361),i="secret must be a string or buffer",j="key must be a string or a buffer",k="function"==typeof f.createPublicKey;function l(a){if(!e.isBuffer(a)&&"string"!=typeof a&&(!k||"object"!=typeof a||"string"!=typeof a.type||"string"!=typeof a.asymmetricKeyType||"function"!=typeof a.export))throw p(j)}function m(a){if(!e.isBuffer(a)&&"string"!=typeof a&&"object"!=typeof a)throw p("key must be a string, a buffer or an object")}function n(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(a){var b=4-(a=a.toString()).length%4;if(4!==b)for(var c=0;c<b;++c)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function p(a){var b=[].slice.call(arguments,1);return TypeError(h.format.bind(h,a).apply(null,b))}function q(a){var b;return b=a,e.isBuffer(b)||"string"==typeof b||(a=JSON.stringify(a)),a}function r(a){return function(b,c){!function(a){if(!e.isBuffer(a)){if("string"!=typeof a){if(!k||"object"!=typeof a||"secret"!==a.type||"function"!=typeof a.export)throw p(i)}}}(c),b=q(b);var d=f.createHmac("sha"+a,c);return n((d.update(b),d.digest("base64")))}}k&&(j+=" or a KeyObject",i+="or a KeyObject");var s="timingSafeEqual"in f?function(a,b){return a.byteLength===b.byteLength&&f.timingSafeEqual(a,b)}:function(b,c){return d||(d=a.r(89815)),d(b,c)};function t(a){return function(b,c,d){var f=r(a)(b,d);return s(e.from(c),e.from(f))}}function u(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign(c,"base64")))}}function v(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify(d,c,"base64")}}function w(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign({key:c,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function x(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify({key:d,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},c,"base64")}}function y(a){var b=u(a);return function(){var c=b.apply(null,arguments);return g.derToJose(c,"ES"+a)}}function z(a){var b=v(a);return function(c,d,e){return b(c,d=g.joseToDer(d,"ES"+a).toString("base64"),e)}}function A(){return function(){return""}}function B(){return function(a,b){return""===b}}b.exports=function(a){var b=a.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!b)throw p('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',a);var c=(b[1]||b[3]).toLowerCase(),d=b[2];return{sign:({hs:r,rs:u,ps:w,es:y,none:A})[c](d),verify:({hs:t,rs:v,ps:x,es:z,none:B})[c](d)}}},53379,(a,b,c)=>{var d=a.r(874).Buffer;b.exports=function(a){return"string"==typeof a?a:"number"==typeof a||d.isBuffer(a)?a.toString():JSON.stringify(a)}},73546,(a,b,c)=>{var d=a.r(74898).Buffer,e=a.r(60597),f=a.r(79418),g=a.r(88947),h=a.r(53379),i=a.r(24361);function j(a,b){return d.from(a,b).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(a){var b,c,d,e=a.header,g=a.payload,k=a.secret||a.privateKey,l=a.encoding,m=f(e.alg),n=(b=(b=l)||"utf8",c=j(h(e),"binary"),d=j(h(g),b),i.format("%s.%s",c,d)),o=m.sign(n,k);return i.format("%s.%s",n,o)}function l(a){var b=new e(a.secret||a.privateKey||a.key);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=b,this.payload=new e(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}i.inherits(l,g),l.prototype.sign=function(){try{var a=k({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",a),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},l.sign=k,b.exports=l},45712,(a,b,c)=>{var d=a.r(74898).Buffer,e=a.r(60597),f=a.r(79418),g=a.r(88947),h=a.r(53379),i=a.r(24361),j=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function k(a){var b=a.split(".",1)[0],c=d.from(b,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(c))return c;try{return JSON.parse(c)}catch(a){return}}function l(a){return a.split(".")[2]}function m(a){return j.test(a)&&!!k(a)}function n(a,b,c){if(!b){var d=Error("Missing algorithm parameter for jws.verify");throw d.code="MISSING_ALGORITHM",d}var e=l(a=h(a)),g=a.split(".",2).join(".");return f(b).verify(g,e,c)}function o(a,b){if(b=b||{},!m(a=h(a)))return null;var c,e,f=k(a);if(!f)return null;var g=(c=c||"utf8",e=a.split(".")[1],d.from(e,"base64").toString(c));return("JWT"===f.typ||b.json)&&(g=JSON.parse(g,b.encoding)),{header:f,payload:g,signature:l(a)}}function p(a){var b=new e((a=a||{}).secret||a.publicKey||a.key);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=b,this.signature=new e(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}i.inherits(p,g),p.prototype.verify=function(){try{var a=n(this.signature.buffer,this.algorithm,this.key.buffer),b=o(this.signature.buffer,this.encoding);return this.emit("done",a,b),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},p.decode=o,p.isValid=m,p.verify=n,b.exports=p},38823,(a,b,c)=>{var d=a.r(73546),e=a.r(45712);c.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],c.sign=d.sign,c.verify=e.verify,c.decode=e.decode,c.isValid=e.isValid,c.createSign=function(a){return new d(a)},c.createVerify=function(a){return new e(a)}},6122,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GoogleToken=void 0;var d,e=j(a.r(22734)),f=a.r(99853),g=j(a.r(38823)),h=j(a.r(14747)),i=a.r(24361);function j(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(j=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=k(a)&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(var h in a)"default"!==h&&({}).hasOwnProperty.call(a,h)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,h))&&(f.get||f.set)?e(g,h,f):g[h]=a[h]);return g})(a,b)}function k(a){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function l(a,b){if(b.has(a))throw TypeError("Cannot initialize the same private elements twice on an object")}function m(a,b,c){return a.set(n(a,b),c),c}function n(a,b,c){if("function"==typeof a?a===b:a.has(b))return arguments.length<3?b:c;throw TypeError("Private element is not present on this object")}function o(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,w(d.key),d)}}function p(a,b,c){return b&&o(a.prototype,b),c&&o(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function q(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function r(a){var b="function"==typeof Map?new Map:void 0;return(r=function(a){if(null===a||!function(a){try{return -1!==Function.toString.call(a).indexOf("[native code]")}catch(b){return"function"==typeof a}}(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return function(a,b,c){if(s())return Reflect.construct.apply(null,arguments);var d=[null];d.push.apply(d,b);var e=new(a.bind.apply(a,d));return c&&t(e,c.prototype),e}(a,arguments,u(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),t(c,a)})(a)}function s(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(s=function(){return!!a})()}function t(a,b){return(t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function u(a){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function v(a,b,c){return(b=w(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(a){var b=function(a,b){if("object"!=k(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=k(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==k(b)?b:b+""}function x(){var a,b,c="function"==typeof Symbol?Symbol:{},d=c.iterator||"@@iterator",e=c.toStringTag||"@@toStringTag";function f(c,d,e,f){var i=Object.create((d&&d.prototype instanceof h?d:h).prototype);return y(i,"_invoke",function(c,d,e){var f,h,i,j=0,k=e||[],l=!1,m={p:0,n:0,v:a,a:n,f:n.bind(a,4),d:function(b,c){return f=b,h=0,i=a,m.n=c,g}};function n(c,d){for(h=c,i=d,b=0;!l&&j&&!e&&b<k.length;b++){var e,f=k[b],n=m.p,o=f[2];c>3?(e=o===d)&&(i=f[(h=f[4])?5:(h=3,3)],f[4]=f[5]=a):f[0]<=n&&((e=c<2&&n<f[1])?(h=0,m.v=d,m.n=f[1]):n<o&&(e=c<3||f[0]>d||d>o)&&(f[4]=c,f[5]=d,m.n=o,h=0))}if(e||c>1)return g;throw l=!0,d}return function(e,k,o){if(j>1)throw TypeError("Generator is already running");for(l&&1===k&&n(k,o),h=k,i=o;(b=h<2?a:i)||!l;){f||(h?h<3?(h>1&&(m.n=-1),n(h,i)):m.n=i:m.v=i);try{if(j=2,f){if(h||(e="next"),b=f[e]){if(!(b=b.call(f,i)))throw TypeError("iterator result is not an object");if(!b.done)return b;i=b.value,h<2&&(h=0)}else 1===h&&(b=f.return)&&b.call(f),h<2&&(i=TypeError("The iterator does not provide a '"+e+"' method"),h=1);f=a}else if((b=(l=m.n<0)?i:c.call(d,m))!==g)break}catch(b){f=a,h=1,i=b}finally{j=1}}return{value:b,done:l}}}(c,e,f),!0),i}var g={};function h(){}function i(){}function j(){}b=Object.getPrototypeOf;var k=j.prototype=h.prototype=Object.create([][d]?b(b([][d]())):(y(b={},d,function(){return this}),b));function l(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,j):(a.__proto__=j,y(a,e,"GeneratorFunction")),a.prototype=Object.create(k),a}return i.prototype=j,y(k,"constructor",j),y(j,"constructor",i),i.displayName="GeneratorFunction",y(j,e,"GeneratorFunction"),y(k),y(k,e,"Generator"),y(k,d,function(){return this}),y(k,"toString",function(){return"[object Generator]"}),(x=function(){return{w:f,m:l}})()}function y(a,b,c,d){var e=Object.defineProperty;try{e({},"",{})}catch(a){e=0}(y=function(a,b,c,d){if(b)e?e(a,b,{value:c,enumerable:!d,configurable:!d,writable:!d}):a[b]=c;else{var f=function(b,c){y(a,b,function(a){return this._invoke(b,c,a)})};f("next",0),f("throw",1),f("return",2)}})(a,b,c,d)}function z(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function A(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){z(f,d,e,g,h,"next",a)}function h(a){z(f,d,e,g,h,"throw",a)}g(void 0)})}}var B=e.readFile?(0,i.promisify)(e.readFile):A(x().m(function a(){return x().w(function(a){for(;;)switch(a.n){case 0:throw new D("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return a.a(2)}},a)})),C="https://oauth2.googleapis.com/token",D=function(a){function b(a,c){var d,e,f;return q(this,b),e=b,f=[a],e=u(e),v(d=function(a,b){if(b&&("object"==k(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");var c=a;if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(this,s()?Reflect.construct(e,f||[],u(this).constructor):e.apply(this,f)),"code",void 0),d.code=c,d}if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");return b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),a&&t(b,a),p(b)}(r(Error)),E=new WeakMap,F=new WeakSet;function G(a){return H.apply(this,arguments)}function H(){return(H=A(x().m(function a(b){return x().w(function(a){for(;;)switch(a.n){case 0:if(!E.get(n(E,this))||b.forceRefresh){a.n=1;break}return a.a(2,E.get(n(E,this)));case 1:return a.p=1,a.n=2,m(E,this,n(F,this,I).call(this,b));case 2:return a.a(2,a.v);case 3:return a.p=3,m(E,this,void 0),a.f(3);case 4:return a.a(2)}},a,this,[[1,,3,4]])}))).apply(this,arguments)}function I(a){return J.apply(this,arguments)}function J(){return(J=A(x().m(function a(b){var c;return x().w(function(a){for(;;)switch(a.n){case 0:if(!1!==this.isTokenExpiring()||!1!==b.forceRefresh){a.n=1;break}return a.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){a.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){a.n=4;break}return a.n=3,this.getCredentials(this.keyFile);case 3:c=a.v,this.key=c.privateKey,this.iss=c.clientEmail||this.iss,c.clientEmail||n(F,this,K).call(this);case 4:return a.a(2,n(F,this,O).call(this))}},a,this)}))).apply(this,arguments)}function K(){if(!this.iss)throw new D("email is required.","MISSING_CREDENTIALS")}function L(){return M.apply(this,arguments)}function M(){return(M=A(x().m(function a(){var b;return x().w(function(a){for(;;)switch(a.n){case 0:if(this.accessToken){a.n=1;break}throw Error("No token to revoke.");case 1:return b="https://oauth2.googleapis.com/revoke?token="+this.accessToken,a.n=2,this.transporter.request({url:b,retry:!0});case 2:n(F,this,N).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return a.a(2)}},a,this)}))).apply(this,arguments)}function N(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=a.keyFile,this.key=a.key,this.rawToken=void 0,this.iss=a.email||a.iss,this.sub=a.sub,this.additionalClaims=a.additionalClaims,"object"===k(a.scope)?this.scope=a.scope.join(" "):this.scope=a.scope,this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,a.transporter&&(this.transporter=a.transporter)}function O(){return P.apply(this,arguments)}function P(){return(P=A(x().m(function a(){var b,c,d,e,f,h,i,j,k,l;return x().w(function(a){for(;;)switch(a.n){case 0:return b=Math.floor(new Date().getTime()/1e3),c=this.additionalClaims||{},d=Object.assign({iss:this.iss,scope:this.scope,aud:C,exp:b+3600,iat:b,sub:this.sub},c),e=g.sign({header:{alg:"RS256"},payload:d,secret:this.key}),a.p=1,a.n=2,this.transporter.request({method:"POST",url:C,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:e}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return f=a.v,this.rawToken=f.data,this.expiresAt=null===f.data.expires_in||void 0===f.data.expires_in?void 0:(b+f.data.expires_in)*1e3,a.a(2,this.rawToken);case 3:throw a.p=3,l=a.v,this.rawToken=void 0,this.tokenExpires=void 0,(j=l.response&&null!=(h=l.response)&&h.data?null==(i=l.response)?void 0:i.data:{}).error&&(k=j.error_description?": ".concat(j.error_description):"",l.message="".concat(j.error).concat(k)),l;case 4:return a.a(2)}},a,this,[[1,3]])}))).apply(this,arguments)}c.GoogleToken=p(function a(b){q(this,a),l(this,F),F.add(this),v(this,"expiresAt",void 0),v(this,"key",void 0),v(this,"keyFile",void 0),v(this,"iss",void 0),v(this,"sub",void 0),v(this,"scope",void 0),v(this,"rawToken",void 0),v(this,"tokenExpires",void 0),v(this,"email",void 0),v(this,"additionalClaims",void 0),v(this,"eagerRefreshThresholdMillis",void 0),v(this,"transporter",{request:function(a){return(0,f.request)(a)}}),l(this,E),E.set(this,void 0),n(F,this,N).call(this,b)},[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var a=new Date().getTime();return!this.rawToken||!this.expiresAt||a>=this.expiresAt}},{key:"isTokenExpiring",value:function(){var a,b=new Date().getTime(),c=null!=(a=this.eagerRefreshThresholdMillis)?a:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=b+c}},{key:"getToken",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===k(a)&&(b=a,a=void 0),b=Object.assign({forceRefresh:!1},b),a){var c=a;n(F,this,G).call(this,b).then(function(a){return c(null,a)},a);return}return n(F,this,G).call(this,b)}},{key:"getCredentials",value:(d=A(x().m(function a(b){var c,d,e,f,g;return x().w(function(a){for(;;)switch(a.n){case 0:a.n=".json"===(g=h.extname(b))?1:".der"===g||".crt"===g||".pem"===g?4:".p12"===g||".pfx"===g?6:7;break;case 1:return a.n=2,B(b,"utf8");case 2:if(d=(c=JSON.parse(a.v)).private_key,e=c.client_email,!(!d||!e)){a.n=3;break}throw new D("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return a.a(2,{privateKey:d,clientEmail:e});case 4:return a.n=5,B(b,"utf8");case 5:return f=a.v,a.a(2,{privateKey:f});case 6:throw new D("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new D("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return a.a(2)}},a)})),function(a){return d.apply(this,arguments)})},{key:"revokeToken",value:function(a){return a?void n(F,this,L).call(this).then(function(){return a()},a):n(F,this,L).call(this)}}])},88329,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.JWTAccess=void 0;let d=a.r(38823),e=a.r(98126),f={alg:"RS256",typ:"JWT"};class g{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new e.LRUCache({capacity:500,maxAge:36e5});constructor(a,b,c,d){this.email=a,this.key=b,this.keyId=c,this.eagerRefreshThresholdMillis=d??3e5}getCachedKey(a,b){let c=a;if(b&&Array.isArray(b)&&b.length?c=a?`${a}_${b.join("_")}`:`${b.join("_")}`:"string"==typeof b&&(c=a?`${a}_${b}`:b),!c)throw Error("Scopes or url must be provided");return c}getRequestHeaders(a,b,c){let e,h=this.getCachedKey(a,c),i=this.cache.get(h),j=Date.now();if(i&&i.expiration-j>this.eagerRefreshThresholdMillis)return new Headers(i.headers);let k=Math.floor(Date.now()/1e3),l=g.getExpirationTime(k);if(Array.isArray(c)&&(c=c.join(" ")),e=c?{iss:this.email,sub:this.email,scope:c,exp:l,iat:k}:{iss:this.email,sub:this.email,aud:a,exp:l,iat:k},b){for(let a in e)if(b[a])throw Error(`The '${a}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let m=this.keyId?{...f,kid:this.keyId}:f,n=Object.assign(e,b),o=d.sign({header:m,payload:n,secret:this.key}),p=new Headers({authorization:`Bearer ${o}`});return this.cache.set(h,{expiration:1e3*l,headers:p}),p}static getExpirationTime(a){return a+3600}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{a||c(Error("Must pass in a stream containing the service account auth settings."));let d="";a.setEncoding("utf8").on("data",a=>d+=a).on("error",c).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}}c.JWTAccess=g},42911,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.JWT=void 0;let d=a.r(6122),e=a.r(88329),f=a.r(94347),g=a.r(30190);class h extends f.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(a={}){super(a),this.email=a.email,this.keyFile=a.keyFile,this.key=a.key,this.keyId=a.keyId,this.scopes=a.scopes,this.subject=a.subject,this.additionalClaims=a.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(a){let b=new h(this);return b.scopes=a,b}async getRequestMetadataAsync(a){a=this.defaultServicePath?`https://${this.defaultServicePath}/`:a;let b=!this.hasUserScopes()&&a||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==g.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==g.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${g.DEFAULT_UNIVERSE}`);if(!this.apiKey&&b)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${a.id_token}`}))}}else{let b;this.access||(this.access=new e.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis)),this.hasUserScopes()?b=this.scopes:a||(b=this.defaultScopes);let c=this.useJWTAccessWithScope||this.universeDomain!==g.DEFAULT_UNIVERSE,d=await this.access.getRequestHeaders(a??void 0,this.additionalClaims,c?b:void 0);return{headers:this.addSharedMetadataHeaders(d)}}return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(a):{headers:new Headers}}async fetchIdToken(a){let b=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:a},transporter:this.transporter});if(await b.getToken({forceRefresh:!0}),!b.idToken)throw Error("Unknown error: Failed to fetch ID token");return b.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!this.scopes&&!!(this.scopes.length>0)||!!this.defaultScopes&&!!(this.defaultScopes.length>0)}authorize(a){if(!a)return this.authorizeAsync();this.authorizeAsync().then(b=>a(null,b),a)}async authorizeAsync(){let a=await this.refreshToken();if(!a)throw Error("No result returned");return this.credentials=a.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,a.tokens}async refreshTokenNoCache(){let a=this.createGToken(),b={access_token:(await a.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:a.expiresAt,id_token:a.idToken};return this.emit("tokens",b),{res:null,tokens:b}}createGToken(){return this.gtoken||(this.gtoken=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{if(!a)throw Error("Must pass in a stream containing the service account auth settings.");let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}fromAPIKey(a){if("string"!=typeof a)throw Error("Must provide an API Key string.");this.apiKey=a}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let a=this.createGToken(),b=await a.getCredentials(this.keyFile);return{private_key:b.privateKey,client_email:b.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}c.JWT=h},92114,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.UserRefreshClient=c.USER_REFRESH_ACCOUNT_TYPE=void 0;let d=a.r(94347),e=a.r(30190);c.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class f extends d.OAuth2Client{_refreshToken;constructor(a,b,c,d,e){const f=a&&"object"==typeof a?a:{clientId:a,clientSecret:b,refreshToken:c,eagerRefreshThresholdMillis:d,forceRefreshOnFailure:e};super(f),this._refreshToken=f.refreshToken,this.credentials.refresh_token=f.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(a){let b={...f.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:a})};return e.AuthClient.setMethodName(b,"fetchIdToken"),(await this.transporter.request(b)).data.id_token}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==a.type)throw Error('The incoming JSON object does not have the "authorized_user" type');if(!a.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!a.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!a.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=a.client_id,this._clientSecret=a.client_secret,this._refreshToken=a.refresh_token,this.credentials.refresh_token=a.refresh_token,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}async fromStreamAsync(a){return new Promise((b,c)=>{if(!a)return c(Error("Must pass in a stream containing the user refresh token."));let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);return this.fromJSON(a),b()}catch(a){return c(a)}})})}static fromJSON(a){let b=new f;return b.fromJSON(a),b}}c.UserRefreshClient=f},61576,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Impersonated=c.IMPERSONATED_ACCOUNT_TYPE=void 0;let d=a.r(94347),e=a.r(99853),f=a.r(98126);c.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class g extends d.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(a={}){if(super(a),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=a.sourceClient??new d.OAuth2Client,this.targetPrincipal=a.targetPrincipal??"",this.delegates=a.delegates??[],this.targetScopes=a.targetScopes??[],this.lifetime=a.lifetime??3600,(0,f.originalOrCamelOptions)(a).get("universe_domain")){if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`)}else this.universeDomain=this.sourceClient.universeDomain;this.endpoint=a.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(a){await this.sourceClient.getAccessToken();let b=`projects/-/serviceAccounts/${this.targetPrincipal}`,c=`${this.endpoint}/v1/${b}:signBlob`,d={delegates:this.delegates,payload:Buffer.from(a).toString("base64")};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:c,data:d,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let a="projects/-/serviceAccounts/"+this.targetPrincipal,b=`${this.endpoint}/v1/${a}:generateAccessToken`,c={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},d=await this.sourceClient.request({...g.RETRY_CONFIG,url:b,data:c,method:"POST"}),e=d.data;return this.credentials.access_token=e.accessToken,this.credentials.expiry_date=Date.parse(e.expireTime),{tokens:this.credentials,res:d}}catch(c){if(!(c instanceof Error))throw c;let a=0,b="";if(c instanceof e.GaxiosError&&(a=c?.response?.data?.error?.status,b=c?.response?.data?.error?.message),a&&b)throw c.message=`${a}: unable to impersonate: ${b}`,c;throw c.message=`unable to impersonate: ${c}`,c}}async fetchIdToken(a,b){await this.sourceClient.getAccessToken();let c=`projects/-/serviceAccounts/${this.targetPrincipal}`,d=`${this.endpoint}/v1/${c}:generateIdToken`,e={delegates:this.delegates,audience:a,includeEmail:b?.includeEmail??!0,useEmailAzp:b?.includeEmail??!0};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:d,data:e,method:"POST"})).data.token}}c.Impersonated=g},21575,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.OAuthClientAuthHandler=void 0,c.getErrorFromOAuthErrorResponse=function(a,b){let c=a.error,d=a.error_description,e=a.error_uri,f=`Error code ${c}`;void 0!==d&&(f+=`: ${d}`),void 0!==e&&(f+=` - ${e}`);let g=Error(f);if(b){let a=Object.keys(b);b.stack&&a.push("stack"),a.forEach(a=>{"message"!==a&&Object.defineProperty(g,a,{value:b[a],writable:!1,enumerable:!0})})}return g};let d=a.r(99853),e=a.r(65726),f=["PUT","POST","PATCH"];class g{#m=(0,e.createCrypto)();#n;transporter;constructor(a){a&&"clientId"in a?(this.#n=a,this.transporter=new d.Gaxios):(this.#n=a?.clientAuthentication,this.transporter=a?.transporter||new d.Gaxios)}applyClientAuthenticationOptions(a,b){a.headers=d.Gaxios.mergeHeaders(a.headers),this.injectAuthenticatedHeaders(a,b),b||this.injectAuthenticatedRequestBody(a)}injectAuthenticatedHeaders(a,b){if(b)a.headers=d.Gaxios.mergeHeaders(a.headers,{authorization:`Bearer ${b}`});else if(this.#n?.confidentialClientType==="basic"){a.headers=d.Gaxios.mergeHeaders(a.headers);let b=this.#n.clientId,c=this.#n.clientSecret||"",e=this.#m.encodeBase64StringUtf8(`${b}:${c}`);d.Gaxios.mergeHeaders(a.headers,{authorization:`Basic ${e}`})}}injectAuthenticatedRequestBody(a){if(this.#n?.confidentialClientType==="request-body"){let b=(a.method||"GET").toUpperCase();if(!f.includes(b))throw Error(`${b} HTTP method does not support ${this.#n.confidentialClientType} client authentication`);let c=new Headers(a.headers).get("content-type");if(c?.startsWith("application/x-www-form-urlencoded")||a.data instanceof URLSearchParams){let b=new URLSearchParams(a.data??"");b.append("client_id",this.#n.clientId),b.append("client_secret",this.#n.clientSecret||""),a.data=b}else if(c?.startsWith("application/json"))a.data=a.data||{},Object.assign(a.data,{client_id:this.#n.clientId,client_secret:this.#n.clientSecret||""});else throw Error(`${c} content-types are not supported with ${this.#n.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}c.OAuthClientAuthHandler=g},78794,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.StsCredentials=void 0;let d=a.r(99853),e=a.r(30190),f=a.r(21575),g=a.r(98126);class h extends f.OAuthClientAuthHandler{#o;constructor(a={tokenExchangeEndpoint:""},b){("object"!=typeof a||a instanceof URL)&&(a={tokenExchangeEndpoint:a,clientAuthentication:b}),super(a),this.#o=a.tokenExchangeEndpoint}async exchangeToken(a,b,c){let i={grant_type:a.grantType,resource:a.resource,audience:a.audience,scope:a.scope?.join(" "),requested_token_type:a.requestedTokenType,subject_token:a.subjectToken,subject_token_type:a.subjectTokenType,actor_token:a.actingParty?.actorToken,actor_token_type:a.actingParty?.actorTokenType,options:c&&JSON.stringify(c)},j={...h.RETRY_CONFIG,url:this.#o.toString(),method:"POST",headers:b,data:new URLSearchParams((0,g.removeUndefinedValuesInObject)(i))};e.AuthClient.setMethodName(j,"exchangeToken"),this.applyClientAuthenticationOptions(j);try{let a=await this.transporter.request(j),b=a.data;return b.res=a,b}catch(a){if(a instanceof d.GaxiosError&&a.response)throw(0,f.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}c.StsCredentials=h},20382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.BaseExternalAccountClient=c.CLOUD_RESOURCE_MANAGER=c.EXTERNAL_ACCOUNT_TYPE=c.EXPIRATION_TIME_OFFSET=void 0;let d=a.r(99853),e=a.r(88947),f=a.r(30190),g=a.r(78794),h=a.r(98126),i=a.r(15204),j="https://www.googleapis.com/auth/cloud-platform";c.EXPIRATION_TIME_OFFSET=3e5,c.EXTERNAL_ACCOUNT_TYPE="external_account",c.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";class k extends f.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#p=null;constructor(a){super(a);const b=(0,h.originalOrCamelOptions)(a),d=b.get("type");if(d&&d!==c.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${c.EXTERNAL_ACCOUNT_TYPE}" type but received "${a.type}"`);const e=b.get("client_id"),f=b.get("client_secret");this.tokenUrl=b.get("token_url")??"https://sts.{universeDomain}/v1/token".replace("{universeDomain}",this.universeDomain);const i=b.get("subject_token_type"),k=b.get("workforce_pool_user_project"),l=b.get("service_account_impersonation_url"),m=b.get("service_account_impersonation"),n=(0,h.originalOrCamelOptions)(m).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(b.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),e&&(this.clientAuth={confidentialClientType:"basic",clientId:e,clientSecret:f}),this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=b.get("scopes")||[j],this.cachedAccessToken=null,this.audience=b.get("audience"),this.subjectTokenType=i,this.workforcePoolUserProject=k;const o=RegExp("//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+");if(this.workforcePoolUserProject&&!this.audience.match(o))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=l,this.serviceAccountImpersonationLifetime=n,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=3600),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let a=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return a?.groups?.email||null}return null}setCredentials(a){super.setCredentials(a),this.cachedAccessToken=a}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async getProjectId(){let a=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(a){let b=await this.getRequestHeaders(),c={...k.RETRY_CONFIG,headers:b,url:`${this.cloudResourceManagerURL.toString()}${a}`};f.AuthClient.setMethodName(c,"getProjectId");let d=await this.transporter.request(c);return this.projectId=d.data.projectId,this.projectId}return null}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){this.#p=this.#p||this.#q();try{return await this.#p}finally{this.#p=null}}async #q(){let a=await this.retrieveSubjectToken(),b={grantType:"urn:ietf:params:oauth:grant-type:token-exchange",audience:this.audience,requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[j]:this.getScopesArray()},c=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,d=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),e=await this.stsCredential.exchangeToken(b,d,c);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(e.access_token):e.expires_in?this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+1e3*e.expires_in,res:e.res}:this.cachedAccessToken={access_token:e.access_token,res:e.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(a){let b=a.match(/\/projects\/([^/]+)/);return b?b[1]:null}async getImpersonatedAccessToken(a){let b={...k.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${a}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};f.AuthClient.setMethodName(b,"getImpersonatedAccessToken");let c=await this.transporter.request(b),d=c.data;return{access_token:d.accessToken,expiry_date:new Date(d.expireTime).getTime(),res:c}}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}getScopesArray(){return"string"==typeof this.scopes?[this.scopes]:this.scopes||[j]}getMetricsHeaderValue(){let a=process.version.replace(/^v/,""),b=void 0!==this.serviceAccountImpersonationUrl,c=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${a} auth/${i.pkg.version} google-byoid-sdk source/${c} sa-impersonation/${b} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}c.BaseExternalAccountClient=k},80689,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.FileSubjectTokenSupplier=void 0;let d=a.r(24361),e=a.r(22734),f=(0,d.promisify)(e.readFile??(()=>{})),g=(0,d.promisify)(e.realpath??(()=>{})),h=(0,d.promisify)(e.lstat??(()=>{}));c.FileSubjectTokenSupplier=class{filePath;formatType;subjectTokenFieldName;constructor(a){this.filePath=a.filePath,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName}async getSubjectToken(){let a,b=this.filePath;try{if(b=await g(b),!(await h(b)).isFile())throw Error()}catch(a){throw a instanceof Error&&(a.message=`The file at ${b} does not exist, or it is not a file. ${a.message}`),a}let c=await f(b,{encoding:"utf8"});if("text"===this.formatType?a=c:"json"===this.formatType&&this.subjectTokenFieldName&&(a=JSON.parse(c)[this.subjectTokenFieldName]),!a)throw Error("Unable to parse the subject_token from the credential_source file");return a}}},58405,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.UrlSubjectTokenSupplier=void 0;let d=a.r(30190);c.UrlSubjectTokenSupplier=class{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(a){this.url=a.url,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName,this.headers=a.headers,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getSubjectToken(a){let b,c={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};if(d.AuthClient.setMethodName(c,"getSubjectToken"),"text"===this.formatType?b=(await a.transporter.request(c)).data:"json"===this.formatType&&this.subjectTokenFieldName&&(b=(await a.transporter.request(c)).data[this.subjectTokenFieldName]),!b)throw Error("Unable to parse the subject_token from the credential_source URL");return b}}},61890,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.CertificateSubjectTokenSupplier=c.InvalidConfigurationError=c.CertificateSourceUnavailableError=c.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;let d=a.r(98126),e=a.r(22734),f=a.r(54799),g=a.r(24836);c.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class h extends Error{constructor(a){super(a),this.name="CertificateSourceUnavailableError"}}c.CertificateSourceUnavailableError=h;class i extends Error{constructor(a){super(a),this.name="InvalidConfigurationError"}}c.InvalidConfigurationError=i,c.CertificateSubjectTokenSupplier=class{certificateConfigPath;trustChainPath;cert;key;constructor(a){if(!a.useDefaultCertificateConfig&&!a.certificateConfigLocation)throw new i("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(a.useDefaultCertificateConfig&&a.certificateConfigLocation)throw new i("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=a.trustChainPath,this.certificateConfigPath=a.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new i("Cannot create mTLS Agent with missing certificate or key");return new g.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#r();let{certPath:a,keyPath:b}=await this.#s();return{cert:this.cert,key:this.key}=await this.#t(a,b),await this.#u(this.cert)}async #r(){let a=this.certificateConfigPath;if(a){if(await (0,d.isValidFile)(a))return a;throw new h(`Provided certificate config path is invalid: ${a}`)}let b=process.env[c.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(b){if(await (0,d.isValidFile)(b))return b;throw new h(`Path from environment variable "${c.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${b}`)}let e=(0,d.getWellKnownCertificateConfigFileLocation)();if(await (0,d.isValidFile)(e))return e;throw new h(`Could not find certificate configuration file. Searched override path, the "${c.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${e}).`)}async #s(){let a,b=this.certificateConfigPath;try{a=await e.promises.readFile(b,"utf8")}catch(a){throw new h(`Failed to read certificate config file at: ${b}`)}try{let c=JSON.parse(a),d=c?.cert_configs?.workload?.cert_path,e=c?.cert_configs?.workload?.key_path;if(!d||!e)throw new i(`Certificate config file (${b}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:d,keyPath:e}}catch(a){if(a instanceof i)throw a;throw new i(`Failed to parse certificate config from ${b}: ${a.message}`)}}async #t(a,b){let c,d;try{c=await e.promises.readFile(a),new f.X509Certificate(c)}catch(c){let b=c instanceof Error?c.message:String(c);throw new h(`Failed to read certificate file at ${a}: ${b}`)}try{d=await e.promises.readFile(b),(0,f.createPrivateKey)(d)}catch(c){let a=c instanceof Error?c.message:String(c);throw new h(`Failed to read private key file at ${b}: ${a}`)}return{cert:c,key:d}}async #u(a){let b=new f.X509Certificate(a);if(!this.trustChainPath)return JSON.stringify([b.raw.toString("base64")]);try{let a,c=((await e.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((a,b)=>{try{return new f.X509Certificate(a)}catch(c){let a=c instanceof Error?c.message:String(c);throw new i(`Failed to parse certificate at index ${b} in trust chain file ${this.trustChainPath}: ${a}`)}}),d=c.findIndex(a=>b.raw.equals(a.raw));if(-1===d)a=[b,...c];else if(0===d)a=c;else throw new i(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${d}).`);return JSON.stringify(a.map(a=>a.raw.toString("base64")))}catch(b){if(b instanceof i)throw b;let a=b instanceof Error?b.message:String(b);throw new h(`Failed to process certificate chain from ${this.trustChainPath}: ${a}`)}}}},32386,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IdentityPoolClient=void 0;let d=a.r(20382),e=a.r(98126),f=a.r(80689),g=a.r(58405),h=a.r(61890),i=a.r(78794),j=a.r(99853);class k extends d.BaseExternalAccountClient{subjectTokenSupplier;constructor(a){super(a);const b=(0,e.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("subject_token_supplier");if(!c&&!d)throw Error("A credential source or subject token supplier must be specified.");if(c&&d)throw Error("Only one of credential source or subject token supplier can be specified.");if(d)this.subjectTokenSupplier=d,this.credentialSourceType="programmatic";else{const a=(0,e.originalOrCamelOptions)(c),b=(0,e.originalOrCamelOptions)(a.get("format")),d=b.get("type")||"text",i=b.get("subject_token_field_name");if("json"!==d&&"text"!==d)throw Error(`Invalid credential_source format "${d}"`);if("json"===d&&!i)throw Error("Missing subject_token_field_name for JSON credential_source format");const j=a.get("file"),l=a.get("url"),m=a.get("certificate"),n=a.get("headers");if(j&&l||l&&m||j&&m)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(j)this.credentialSourceType="file",this.subjectTokenSupplier=new f.FileSubjectTokenSupplier({filePath:j,formatType:d,subjectTokenFieldName:i});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new g.UrlSubjectTokenSupplier({url:l,formatType:d,subjectTokenFieldName:i,headers:n,additionalGaxiosOptions:k.RETRY_CONFIG});else if(m){this.credentialSourceType="certificate";const a=new h.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:m.use_default_certificate_config,certificateConfigLocation:m.certificate_config_location,trustChainPath:m.trust_chain_path});this.subjectTokenSupplier=a}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let a=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof h.CertificateSubjectTokenSupplier){let a=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new i.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new j.Gaxios({agent:a})}),this.transporter=new j.Gaxios({...this.transporter.defaults||{},agent:a})}return a}}c.IdentityPoolClient=k},59660,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AwsRequestSigner=void 0;let d=a.r(99853),e=a.r(65726),f="AWS4-HMAC-SHA256";async function g(a,b,c){return await a.signWithHmacSha256(b,c)}async function h(a,b,c,d,e){let f=await g(a,`AWS4${b}`,c),h=await g(a,f,d),i=await g(a,h,e);return await g(a,i,"aws4_request")}async function i(a){let b=d.Gaxios.mergeHeaders(a.additionalAmzHeaders),c=a.requestPayload||"",i=a.host.split(".")[0],j=new Date,k=j.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),l=j.toISOString().replace(/[-]/g,"").replace(/T.*/,"");a.securityCredentials.token&&b.set("x-amz-security-token",a.securityCredentials.token);let m=d.Gaxios.mergeHeaders({host:a.host},b.has("date")?{}:{"x-amz-date":k},b),n="",o=[...m.keys()].sort();o.forEach(a=>{n+=`${a}:${m.get(a)}
`});let p=o.join(";"),q=await a.crypto.sha256DigestHex(c),r=`${a.method.toUpperCase()}
${a.canonicalUri}
${a.canonicalQuerystring}
${n}
${p}
${q}`,s=`${l}/${a.region}/${i}/aws4_request`,t=`${f}
${k}
${s}
`+await a.crypto.sha256DigestHex(r),u=await h(a.crypto,a.securityCredentials.secretAccessKey,l,a.region,i),v=await g(a.crypto,u,t),w=`${f} Credential=${a.securityCredentials.accessKeyId}/${s}, SignedHeaders=${p}, Signature=${(0,e.fromArrayBufferToHex)(v)}`;return{amzDate:b.has("date")?void 0:k,authorizationHeader:w,canonicalQuerystring:a.canonicalQuerystring}}c.AwsRequestSigner=class{getCredentials;region;crypto;constructor(a,b){this.getCredentials=a,this.region=b,this.crypto=(0,e.createCrypto)()}async getRequestOptions(a){if(!a.url)throw RangeError('"url" is required in "amzOptions"');let b="object"==typeof a.data?JSON.stringify(a.data):a.data,c=a.url,e=a.method||"GET",f=a.body||b,g=a.headers,h=await this.getCredentials(),j=new URL(c);if("string"!=typeof f&&void 0!==f)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${f}`);let k=await i({crypto:this.crypto,host:j.host,canonicalUri:j.pathname,canonicalQuerystring:j.search.slice(1),method:e,region:this.region,securityCredentials:h,requestPayload:f,additionalAmzHeaders:g}),l=d.Gaxios.mergeHeaders(k.amzDate?{"x-amz-date":k.amzDate}:{},{authorization:k.authorizationHeader,host:j.host},g||{});h.token&&d.Gaxios.mergeHeaders(l,{"x-amz-security-token":h.token});let m={url:c,method:e,headers:l};return void 0!==f&&(m.body=f),m}}},29723,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DefaultAwsSecurityCredentialsSupplier=void 0;let d=a.r(30190);c.DefaultAwsSecurityCredentialsSupplier=class{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(a){this.regionUrl=a.regionUrl,this.securityCredentialsUrl=a.securityCredentialsUrl,this.imdsV2SessionTokenUrl=a.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getAwsRegion(a){if(this.#v)return this.#v;let b=new Headers;if(!this.#v&&this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#w(a.transporter)),!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let c={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:b};d.AuthClient.setMethodName(c,"getAwsRegion");let e=await a.transporter.request(c);return e.data.substr(0,e.data.length-1)}async getAwsSecurityCredentials(a){if(this.#x)return this.#x;let b=new Headers;this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#w(a.transporter));let c=await this.#y(b,a.transporter),d=await this.#z(c,b,a.transporter);return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,token:d.Token}}async #w(a){let b={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return d.AuthClient.setMethodName(b,"#getImdsV2SessionToken"),(await a.request(b)).data}async #y(a,b){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let c={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:a};return d.AuthClient.setMethodName(c,"#getAwsRoleName"),(await b.request(c)).data}async #z(a,b,c){let e={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${a}`,headers:b};return d.AuthClient.setMethodName(e,"#retrieveAwsSecurityCredentials"),(await c.request(e)).data}get #v(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get #x(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}},77961,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AwsClient=void 0;let d=a.r(59660),e=a.r(20382),f=a.r(29723),g=a.r(98126),h=a.r(99853);class i extends e.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static #A="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(a){super(a);const b=(0,g.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("aws_security_credentials_supplier");if(!c&&!d)throw Error("A credential source or AWS security credentials supplier must be specified.");if(c&&d)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(d)this.awsSecurityCredentialsSupplier=d,this.regionalCredVerificationUrl=i.#A,this.credentialSourceType="programmatic";else{const a=(0,g.originalOrCamelOptions)(c);this.environmentId=a.get("environment_id");const b=a.get("region_url"),d=a.get("url"),e=a.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new f.DefaultAwsSecurityCredentialsSupplier({regionUrl:b,securityCredentialsUrl:d,imdsV2SessionTokenUrl:e}),this.regionalCredVerificationUrl=a.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let a=this.environmentId?.match(/^(aws)(\d+)$/);if(a&&this.regionalCredVerificationUrl){if(1!==parseInt(a[2],10))throw Error(`aws version "${a[2]}" is not supported in the current build.`)}else throw Error('No valid AWS "credential_source" provided')}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new d.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let a=await this.awsRequestSigner.getRequestOptions({...i.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),b=[];return h.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},a.headers).forEach((a,c)=>b.push({key:c,value:a})),encodeURIComponent(JSON.stringify({url:a.url,method:a.method,headers:b}))}}c.AwsClient=i},71544,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.InvalidSubjectTokenError=c.InvalidMessageFieldError=c.InvalidCodeFieldError=c.InvalidTokenTypeFieldError=c.InvalidExpirationTimeFieldError=c.InvalidSuccessFieldError=c.InvalidVersionFieldError=c.ExecutableResponseError=c.ExecutableResponse=void 0;let d="urn:ietf:params:oauth:token-type:saml2",e="urn:ietf:params:oauth:token-type:id_token",f="urn:ietf:params:oauth:token-type:jwt";c.ExecutableResponse=class{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(a){if(!a.version)throw new h("Executable response must contain a 'version' field.");if(void 0===a.success)throw new i("Executable response must contain a 'success' field.");if(this.version=a.version,this.success=a.success,this.success){if(this.expirationTime=a.expiration_time,this.tokenType=a.token_type,this.tokenType!==d&&this.tokenType!==e&&this.tokenType!==f)throw new j(`Executable response must contain a 'token_type' field when successful and it must be one of ${e}, ${f}, or ${d}.`);if(this.tokenType===d){if(!a.saml_response)throw new m(`Executable response must contain a 'saml_response' field when token_type=${d}.`);this.subjectToken=a.saml_response}else{if(!a.id_token)throw new m(`Executable response must contain a 'id_token' field when token_type=${e} or ${f}.`);this.subjectToken=a.id_token}}else{if(!a.code)throw new k("Executable response must contain a 'code' field when unsuccessful.");if(!a.message)throw new l("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=a.code,this.errorMessage=a.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return void 0!==this.expirationTime&&this.expirationTime<Math.round(Date.now()/1e3)}};class g extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}c.ExecutableResponseError=g;class h extends g{}c.InvalidVersionFieldError=h;class i extends g{}c.InvalidSuccessFieldError=i,c.InvalidExpirationTimeFieldError=class extends g{};class j extends g{}c.InvalidTokenTypeFieldError=j;class k extends g{}c.InvalidCodeFieldError=k;class l extends g{}c.InvalidMessageFieldError=l;class m extends g{}c.InvalidSubjectTokenError=m},20361,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PluggableAuthHandler=c.ExecutableError=void 0;let d=a.r(71544),e=a.r(33405),f=a.r(22734);class g extends Error{code;constructor(a,b){super(`The executable failed with exit code: ${b} and error message: ${a}.`),this.code=b,Object.setPrototypeOf(this,new.target.prototype)}}c.ExecutableError=g;class h{commandComponents;timeoutMillis;outputFile;constructor(a){if(!a.command)throw Error("No command provided.");if(this.commandComponents=h.parseCommand(a.command),this.timeoutMillis=a.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=a.outputFile}retrieveResponseFromExecutable(a){return new Promise((b,c)=>{let f=e.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(a)}}),h="";f.stdout.on("data",a=>{h+=a}),f.stderr.on("data",a=>{h+=a});let i=setTimeout(()=>(f.removeAllListeners(),f.kill(),c(Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);f.on("close",a=>{if(clearTimeout(i),0!==a)return c(new g(h,a.toString()));try{let a=JSON.parse(h),c=new d.ExecutableResponse(a);return b(c)}catch(a){if(a instanceof d.ExecutableResponseError)return c(a);return c(new d.ExecutableResponseError(`The executable returned an invalid response: ${h}`))}})})}async retrieveCachedResponse(){let a;if(!this.outputFile||0===this.outputFile.length)return;try{a=await f.promises.realpath(this.outputFile)}catch{return}if(!(await f.promises.lstat(a)).isFile())return;let b=await f.promises.readFile(a,{encoding:"utf8"});if(""!==b)try{let a=JSON.parse(b);if(new d.ExecutableResponse(a).isValid())return new d.ExecutableResponse(a);return}catch(a){if(a instanceof d.ExecutableResponseError)throw a;throw new d.ExecutableResponseError(`The output file contained an invalid response: ${b}`)}}static parseCommand(a){let b=a.match(/(?:[^\s"]+|"[^"]*")+/g);if(!b)throw Error(`Provided command: "${a}" could not be parsed.`);for(let a=0;a<b.length;a++)'"'===b[a][0]&&'"'===b[a].slice(-1)&&(b[a]=b[a].slice(1,-1));return b}}c.PluggableAuthHandler=h},18451,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PluggableAuthClient=c.ExecutableError=void 0;let d=a.r(20382),e=a.r(71544),f=a.r(20361);var g=a.r(20361);Object.defineProperty(c,"ExecutableError",{enumerable:!0,get:function(){return g.ExecutableError}});class h extends d.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(a){if(super(a),!a.credential_source.executable||(this.command=a.credential_source.executable.command,!this.command))throw Error('No valid Pluggable Auth "credential_source" provided.');if(void 0===a.credential_source.executable.timeout_millis)this.timeoutMillis=3e4;else if(this.timeoutMillis=a.credential_source.executable.timeout_millis,this.timeoutMillis<5e3||this.timeoutMillis>12e4)throw Error("Timeout must be between 5000120000 milliseconds.");this.outputFile=a.credential_source.executable.output_file,this.handler=new f.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){let a;if("1"!==process.env.GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES)throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");if(this.outputFile&&(a=await this.handler.retrieveCachedResponse()),!a){let b=new Map;b.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),b.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),b.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&b.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let c=this.getServiceAccountEmail();c&&b.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",c),a=await this.handler.retrieveResponseFromExecutable(b)}if(a.version>1)throw Error("Version of executable is not currently supported, maximum supported version is 1.");if(!a.success)throw new f.ExecutableError(a.errorMessage,a.errorCode);if(this.outputFile&&!a.expirationTime)throw new e.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(a.isExpired())throw Error("Executable response is expired.");return a.subjectToken}}c.PluggableAuthClient=h},50489,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ExternalAccountClient=void 0;let d=a.r(20382),e=a.r(32386),f=a.r(77961),g=a.r(18451);c.ExternalAccountClient=class{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(a){return a&&a.type===d.EXTERNAL_ACCOUNT_TYPE?a.credential_source?.environment_id?new f.AwsClient(a):a.credential_source?.executable?new g.PluggableAuthClient(a):new e.IdentityPoolClient(a):null}}},44737,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ExternalAccountAuthorizedUserClient=c.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;let d=a.r(30190),e=a.r(21575),f=a.r(99853),g=a.r(88947),h=a.r(20382);c.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class i extends e.OAuthClientAuthHandler{#B;constructor(a){super(a),this.#B=a.tokenRefreshEndpoint}async refreshToken(a,b){let c={...i.RETRY_CONFIG,url:this.#B,method:"POST",headers:b,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:a})};d.AuthClient.setMethodName(c,"refreshToken"),this.applyClientAuthenticationOptions(c);try{let a=await this.transporter.request(c),b=a.data;return b.res=a,b}catch(a){if(a instanceof f.GaxiosError&&a.response)throw(0,e.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}class j extends d.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(a){super(a),a.universe_domain&&(this.universeDomain=a.universe_domain),this.refreshToken=a.refresh_token;const b={confidentialClientType:"basic",clientId:a.client_id,clientSecret:a.client_secret};this.externalAccountAuthorizedUserHandler=new i({tokenRefreshEndpoint:a.token_url??"https://sts.{universeDomain}/v1/oauthtoken".replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:b}),this.cachedAccessToken=null,this.quotaProjectId=a.quota_project_id,"number"!=typeof a?.eagerRefreshThresholdMillis?this.eagerRefreshThresholdMillis=h.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!a?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=f.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=c.config.data instanceof g.Readable;if(!b&&(401===d||403===d)&&!e&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:a.access_token,expiry_date:new Date().getTime()+1e3*a.expires_in,res:a.res},void 0!==a.refresh_token&&(this.refreshToken=a.refresh_token),this.cachedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}c.ExternalAccountAuthorizedUserClient=j},35058,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GoogleAuth=c.GoogleAuthExceptionMessages=void 0;let d=a.r(33405),e=a.r(22734),f=a.r(99853),g=a.r(54145),h=a.r(46786),i=a.r(14747),j=a.r(65726),k=a.r(48889),l=a.r(70241),m=a.r(51747),n=a.r(42911),o=a.r(92114),p=a.r(61576),q=a.r(50489),r=a.r(20382),s=a.r(30190),t=a.r(44737),u=a.r(98126);c.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:"Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_CREDENTIALS_FOUND:"Unable to find credentials in current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:"Unable to detect a Universe Domain in the current environment.\nTo learn more about Universe Domain retrieval, visit: \nhttps://cloud.google.com/compute/docs/metadata/predefined-metadata-keys"},c.GoogleAuth=class{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#C=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(a={}){if(this._cachedProjectId=a.projectId||null,this.cachedCredential=a.authClient||null,this.keyFilename=a.keyFilename||a.keyFile,this.scopes=a.scopes,this.clientOptions=a.clientOptions||{},this.jsonContent=a.credentials||null,this.apiKey=a.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(c.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);a.universeDomain&&(this.clientOptions.universeDomain=a.universeDomain)}setGapicJWTValues(a){a.defaultServicePath=this.defaultServicePath,a.useJWTAccessWithScope=this.useJWTAccessWithScope,a.defaultScopes=this.defaultScopes}getProjectId(a){if(!a)return this.getProjectIdAsync();this.getProjectIdAsync().then(b=>a(null,b),a)}async getProjectIdOptional(){try{return await this.getProjectId()}catch(a){if(a instanceof Error&&a.message===c.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw a}}async findAndCacheProjectId(){let a=null;if(a||=await this.getProductionProjectId(),a||=await this.getFileProjectId(),a||=await this.getDefaultServiceProjectId(),a||=await this.getGCEProjectId(),a||=await this.getExternalAccountClientProjectId())return this._cachedProjectId=a,a;throw Error(c.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let a;try{a=await g.universe("universe-domain"),a||=s.DEFAULT_UNIVERSE}catch(b){if(b&&b?.response?.status===404)a=s.DEFAULT_UNIVERSE;else throw b}return a}async getUniverseDomain(){let a=(0,u.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{a??=(await this.getClient()).universeDomain}catch{a??=s.DEFAULT_UNIVERSE}return a}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(a={},b){let c;if("function"==typeof a?b=a:c=a,!b)return this.getApplicationDefaultAsync(c);this.getApplicationDefaultAsync(c).then(a=>b(null,a.credential,a.projectId),b)}async getApplicationDefaultAsync(a={}){let b;if(this.cachedCredential)return await this.#D(this.cachedCredential,null);if((b=await this._tryGetApplicationCredentialsFromEnvironmentVariable(a))||(b=await this._tryGetApplicationCredentialsFromWellKnownFile(a)))return b instanceof n.JWT?b.scopes=this.scopes:b instanceof r.BaseExternalAccountClient&&(b.scopes=this.getAnyScopes()),await this.#D(b);if(await this._checkIsGCE())return a.scopes=this.getAnyScopes(),await this.#D(new k.Compute(a));throw Error(c.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async #D(a,b=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let c=await this.getProjectIdOptional();return b&&(a.quotaProjectId=b),this.cachedCredential=a,{credential:a,projectId:c}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=g.getGCPResidency()||await g.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(a){let b=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!b||0===b.length)return null;try{return this._getApplicationCredentialsFromFilePath(b,a)}catch(a){throw a instanceof Error&&(a.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${a.message}`),a}}async _tryGetApplicationCredentialsFromWellKnownFile(a){let b=null;if(this._isWindows())b=process.env.APPDATA;else{let a=process.env.HOME;a&&(b=i.join(a,".config"))}return(b&&(b=i.join(b,"gcloud","application_default_credentials.json"),e.existsSync(b)||(b=null)),b)?await this._getApplicationCredentialsFromFilePath(b,a):null}async _getApplicationCredentialsFromFilePath(a,b={}){if(!a||0===a.length)throw Error("The file path is invalid.");try{if(a=e.realpathSync(a),!e.lstatSync(a).isFile())throw Error()}catch(b){throw b instanceof Error&&(b.message=`The file at ${a} does not exist, or it is not a file. ${b.message}`),b}let c=e.createReadStream(a);return this.fromStream(c,b)}fromImpersonatedJSON(a){if(!a)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if(a.type!==p.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${p.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!a.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!a.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let b=this.fromJSON(a.source_credentials);if(a.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${a.service_account_impersonation_url}`);let c=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(a.service_account_impersonation_url)?.groups?.target;if(!c)throw RangeError(`Cannot extract target principal from ${a.service_account_impersonation_url}`);let d=(this.scopes||a.scopes||this.defaultScopes)??[];return new p.Impersonated({...a,sourceClient:b,targetPrincipal:c,targetScopes:Array.isArray(d)?d:[d]})}fromJSON(a,b={}){let c,d=(0,u.originalOrCamelOptions)(b).get("universe_domain");return a.type===o.USER_REFRESH_ACCOUNT_TYPE?(c=new o.UserRefreshClient(b)).fromJSON(a):a.type===p.IMPERSONATED_ACCOUNT_TYPE?c=this.fromImpersonatedJSON(a):a.type===r.EXTERNAL_ACCOUNT_TYPE?(c=q.ExternalAccountClient.fromJSON({...a,...b})).scopes=this.getAnyScopes():a.type===t.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?c=new t.ExternalAccountAuthorizedUserClient({...a,...b}):(b.scopes=this.scopes,c=new n.JWT(b),this.setGapicJWTValues(c),c.fromJSON(a)),d&&(c.universeDomain=d),c}_cacheClientFromJSON(a,b){let c=this.fromJSON(a,b);return this.jsonContent=a,this.cachedCredential=c,c}fromStream(a,b={},c){let d={};if("function"==typeof b?c=b:d=b,!c)return this.fromStreamAsync(a,d);this.fromStreamAsync(a,d).then(a=>c(null,a),c)}fromStreamAsync(a,b){return new Promise((c,d)=>{if(!a)throw Error("Must pass in a stream containing the Google auth settings.");let e=[];a.setEncoding("utf8").on("error",d).on("data",a=>e.push(a)).on("end",()=>{try{try{let a=JSON.parse(e.join("")),d=this._cacheClientFromJSON(a,b);return c(d)}catch(b){if(!this.keyFilename)throw b;let a=new n.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),c(a)}}catch(a){return d(a)}})})}fromAPIKey(a,b={}){return new n.JWT({...b,apiKey:a})}_isWindows(){let a=h.platform();return!!a&&!!(a.length>=3)&&"win"===a.substring(0,3).toLowerCase()}async getDefaultServiceProjectId(){return new Promise(a=>{(0,d.exec)("gcloud config config-helper --format json",(b,c)=>{if(!b&&c)try{let b=JSON.parse(c).configuration.properties.core.project;a(b);return}catch(a){}a(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let a=await this.getClient();if(a&&a.projectId)return a.projectId}let a=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return a?a.projectId:null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==r.EXTERNAL_ACCOUNT_TYPE)return null;let a=await this.getClient();return await a.getProjectId()}async getGCEProjectId(){try{return await g.project("project-id")}catch(a){return null}}getCredentials(a){if(!a)return this.getCredentialsAsync();this.getCredentialsAsync().then(b=>a(null,b),a)}async getCredentialsAsync(){let a=await this.getClient();if(a instanceof p.Impersonated)return{client_email:a.getTargetPrincipal()};if(a instanceof r.BaseExternalAccountClient){let b=a.getServiceAccountEmail();if(b)return{client_email:b,universe_domain:a.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[a,b]=await Promise.all([g.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:a,universe_domain:b}}throw Error(c.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#C=this.#C||this.#E();try{return await this.#C}finally{this.#C=null}}async #E(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let a=i.resolve(this.keyFilename),b=e.createReadStream(a);return await this.fromStreamAsync(b,this.clientOptions)}if(this.apiKey){let a=await this.fromAPIKey(this.apiKey,this.clientOptions);a.scopes=this.scopes;let{credential:b}=await this.#D(a);return b}{let{credential:a}=await this.getApplicationDefaultAsync(this.clientOptions);return a}}async getIdTokenClient(a){let b=await this.getClient();if(!("fetchIdToken"in b))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new l.IdTokenClient({targetAudience:a,idTokenProvider:b})}async getAccessToken(){let a=await this.getClient();return(await a.getAccessToken()).token}async getRequestHeaders(a){return(await this.getClient()).getRequestHeaders(a)}async authorizeRequest(a={}){let b=a.url,c=await this.getClient(),d=await c.getRequestHeaders(b);return a.headers=f.Gaxios.mergeHeaders(a.headers,d),a}async fetch(...a){return(await this.getClient()).fetch(...a)}async request(a){return(await this.getClient()).request(a)}getEnv(){return(0,m.getEnv)()}async sign(a,b){let c=await this.getClient(),d=await this.getUniverseDomain();if(b=b||`https://iamcredentials.${d}/v1/projects/-/serviceAccounts/`,c instanceof p.Impersonated)return(await c.sign(a)).signedBlob;let e=(0,j.createCrypto)();if(c instanceof n.JWT&&c.key)return await e.sign(c.key,a);let f=await this.getCredentials();if(!f.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(e,f.client_email,a,b)}async signBlob(a,b,c,d){let e=new URL(d+`${b}:signBlob`);return(await this.request({method:"POST",url:e.href,data:{payload:a.encodeBase64StringUtf8(c)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}},79746,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IAMAuth=void 0,c.IAMAuth=class{selector;token;constructor(a,b){this.selector=a,this.token=b,this.selector=a,this.token=b}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}},43581,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DownscopedClient=c.EXPIRATION_TIME_OFFSET=c.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;let d=a.r(99853),e=a.r(88947),f=a.r(30190),g=a.r(78794);c.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,c.EXPIRATION_TIME_OFFSET=3e5;class h extends f.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(a,b={accessBoundary:{accessBoundaryRules:[]}}){if(super(a instanceof f.AuthClient?{}:a),a instanceof f.AuthClient?(this.authClient=a,this.credentialAccessBoundary=b):(this.authClient=a.authClient,this.credentialAccessBoundary=a.credentialAccessBoundary),0===this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length)throw Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>c.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${c.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(const a of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(0===a.availablePermissions.length)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(a){if(!a.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(a),this.cachedDownscopedAccessToken=a}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=(await this.authClient.getAccessToken()).token,b=await this.stsCredential.exchangeToken({grantType:"urn:ietf:params:oauth:grant-type:token-exchange",requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:"urn:ietf:params:oauth:token-type:access_token"},void 0,this.credentialAccessBoundary),c=this.authClient.credentials?.expiry_date||null,d=b.expires_in?new Date().getTime()+1e3*b.expires_in:c;return this.cachedDownscopedAccessToken={access_token:b.access_token,expiry_date:d,res:b.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}c.DownscopedClient=h},46183,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PassThroughClient=void 0;let d=a.r(30190);class e extends d.AuthClient{async request(a){return this.transporter.request(a)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}c.PassThroughClient=e},28684,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GoogleAuth=c.auth=c.PassThroughClient=c.ExternalAccountAuthorizedUserClient=c.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=c.ExecutableError=c.PluggableAuthClient=c.DownscopedClient=c.BaseExternalAccountClient=c.ExternalAccountClient=c.IdentityPoolClient=c.AwsRequestSigner=c.AwsClient=c.UserRefreshClient=c.LoginTicket=c.ClientAuthentication=c.OAuth2Client=c.CodeChallengeMethod=c.Impersonated=c.JWT=c.JWTAccess=c.IdTokenClient=c.IAMAuth=c.GCPEnv=c.Compute=c.DEFAULT_UNIVERSE=c.AuthClient=c.gaxios=c.gcpMetadata=void 0;let d=a.r(35058);Object.defineProperty(c,"GoogleAuth",{enumerable:!0,get:function(){return d.GoogleAuth}}),c.gcpMetadata=a.r(54145),c.gaxios=a.r(99853);var e=a.r(30190);Object.defineProperty(c,"AuthClient",{enumerable:!0,get:function(){return e.AuthClient}}),Object.defineProperty(c,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return e.DEFAULT_UNIVERSE}});var f=a.r(48889);Object.defineProperty(c,"Compute",{enumerable:!0,get:function(){return f.Compute}});var g=a.r(51747);Object.defineProperty(c,"GCPEnv",{enumerable:!0,get:function(){return g.GCPEnv}});var h=a.r(79746);Object.defineProperty(c,"IAMAuth",{enumerable:!0,get:function(){return h.IAMAuth}});var i=a.r(70241);Object.defineProperty(c,"IdTokenClient",{enumerable:!0,get:function(){return i.IdTokenClient}});var j=a.r(88329);Object.defineProperty(c,"JWTAccess",{enumerable:!0,get:function(){return j.JWTAccess}});var k=a.r(42911);Object.defineProperty(c,"JWT",{enumerable:!0,get:function(){return k.JWT}});var l=a.r(61576);Object.defineProperty(c,"Impersonated",{enumerable:!0,get:function(){return l.Impersonated}});var m=a.r(94347);Object.defineProperty(c,"CodeChallengeMethod",{enumerable:!0,get:function(){return m.CodeChallengeMethod}}),Object.defineProperty(c,"OAuth2Client",{enumerable:!0,get:function(){return m.OAuth2Client}}),Object.defineProperty(c,"ClientAuthentication",{enumerable:!0,get:function(){return m.ClientAuthentication}});var n=a.r(98463);Object.defineProperty(c,"LoginTicket",{enumerable:!0,get:function(){return n.LoginTicket}});var o=a.r(92114);Object.defineProperty(c,"UserRefreshClient",{enumerable:!0,get:function(){return o.UserRefreshClient}});var p=a.r(77961);Object.defineProperty(c,"AwsClient",{enumerable:!0,get:function(){return p.AwsClient}});var q=a.r(59660);Object.defineProperty(c,"AwsRequestSigner",{enumerable:!0,get:function(){return q.AwsRequestSigner}});var r=a.r(32386);Object.defineProperty(c,"IdentityPoolClient",{enumerable:!0,get:function(){return r.IdentityPoolClient}});var s=a.r(50489);Object.defineProperty(c,"ExternalAccountClient",{enumerable:!0,get:function(){return s.ExternalAccountClient}});var t=a.r(20382);Object.defineProperty(c,"BaseExternalAccountClient",{enumerable:!0,get:function(){return t.BaseExternalAccountClient}});var u=a.r(43581);Object.defineProperty(c,"DownscopedClient",{enumerable:!0,get:function(){return u.DownscopedClient}});var v=a.r(18451);Object.defineProperty(c,"PluggableAuthClient",{enumerable:!0,get:function(){return v.PluggableAuthClient}}),Object.defineProperty(c,"ExecutableError",{enumerable:!0,get:function(){return v.ExecutableError}});var w=a.r(44737);Object.defineProperty(c,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return w.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}}),Object.defineProperty(c,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return w.ExternalAccountAuthorizedUserClient}});var x=a.r(46183);Object.defineProperty(c,"PassThroughClient",{enumerable:!0,get:function(){return x.PassThroughClient}}),c.auth=new d.GoogleAuth},24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},88646,(a,b,c)=>{b.exports=a.x("node:stream/promises",()=>require("node:stream/promises"))},65514,(a,b,c)=>{"use strict";let d=["nodebuffer","arraybuffer","fragments"],e="undefined"!=typeof Blob;e&&d.push("blob"),b.exports={BINARY_TYPES:d,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:e,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},40352,(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=a.r(65514),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(b.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let a=(()=>{let a=Error("Cannot find module 'bufferutil'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.mask=function(b,c,d,e,g){g<48?f(b,c,d,e,g):a.mask(b,c,d,e,g)},b.exports.unmask=function(b,c){b.length<32?g(b,c):a.unmask(b,c)}}catch(a){}},29110,(a,b,c)=>{"use strict";let d=Symbol("kDone"),e=Symbol("kRun");b.exports=class{constructor(a){this[d]=()=>{this.pending--,this[e]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[e]()}[e](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[d])}}}},19199,(a,b,c)=>{"use strict";let d,e=a.r(6461),f=a.r(40352),g=a.r(29110),{kStatusCode:h}=a.r(65514),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");function p(a){this[n].push(a),this[l]+=a.length}function q(a){(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)?this[n].push(a):(this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",q),this.reset())}function r(a){(this[k]._inflate=null,this[o])?this[m](this[o]):(a[h]=1007,this[m](a))}b.exports=class{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",r),this._inflate.on("data",q)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",p)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}},55572,(a,b,c)=>{"use strict";let{isUtf8:d}=a.r(874),{hasBlob:e}=a.r(65514);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(b.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)b.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let a=(()=>{let a=Error("Cannot find module 'utf-8-validate'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.isValidUTF8=function(b){return b.length<32?f(b):a(b)}}catch(a){}},74160,(a,b,c)=>{"use strict";let{Writable:d}=a.r(88947),e=a.r(19199),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=a.r(65514),{concat:j,toArrayBuffer:k,unmask:l}=a.r(40352),{isValidStatusCode:m,isValidUTF8:n}=a.r(55572),o=Buffer[Symbol.species];b.exports=class extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0)return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop)this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);c>2097151?a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a))}haveLength(a){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}},10697,(a,b,c)=>{"use strict";let d,{Duplex:e}=a.r(88947),{randomFillSync:f}=a.r(54799),g=a.r(19199),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=a.r(65514),{isBlob:k,isValidStatusCode:l}=a.r(55572),{mask:m,toBuffer:n}=a.r(40352),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{this._socket.destroyed?s(this,Error("The socket was closed while data was being compressed"),d):(this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}b.exports=r},4049,(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=a.r(65514),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),b.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},20529,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(55572);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}b.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},89877,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(24836),f=a.r(21517),g=a.r(4446),h=a.r(55004),{randomBytes:i,createHash:j}=a.r(54799),{Duplex:k,Readable:l}=a.r(88947),{URL:m}=a.r(92509),n=a.r(19199),o=a.r(74160),p=a.r(10697),{isBlob:q}=a.r(55572),{BINARY_TYPES:r,EMPTY_BUFFER:s,GUID:t,kForOnEventAttribute:u,kListener:v,kStatusCode:w,kWebSocket:x,NOOP:y}=a.r(65514),{EventTarget:{addEventListener:z,removeEventListener:A}}=a.r(4049),{format:B,parse:C}=a.r(20529),{toBuffer:D}=a.r(40352),E=Symbol("kAborted"),F=[8,13],G=["CONNECTING","OPEN","CLOSING","CLOSED"],H=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class I extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=s,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=I.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:F[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!F.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${F.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void J(b,a);throw a}let s=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=p.createConnection||(q?L:K),p.defaultPort=p.defaultPort||s,p.port=h.port||s,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=B({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!H.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{M(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[E]||(o=b._req=null,J(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void M(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){J(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||M(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==I.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void M(b,c,"Invalid Upgrade header");let g=j("sha1").update(u+t).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void M(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void M(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void M(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=C(i)}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void M(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[x]=this,e[x]=this,a[x]=this,d.on("conclude",O),d.on("drain",P),d.on("error",Q),d.on("message",S),d.on("ping",T),d.on("pong",U),e.onerror=W,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Y),a.on("data",Z),a.on("end",$),a.on("error",_),this._readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===I.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=I.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),X(this)}}pause(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.ping(a||s,b,c))}pong(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.pong(a||s,b,c))}resume(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||s,d,c)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=I.CLOSING,this._socket.destroy())}}}function J(a,b){a._readyState=I.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function K(a){return a.path=a.socketPath,g.connect(a)}function L(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function M(a,b,c){a._readyState=I.CLOSING;let d=Error(c);Error.captureStackTrace(d,M),b.setHeader?(b[E]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(J,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function N(a,b,c){if(b){let c=q(b)?b.size:D(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${G[a.readyState]})`);process.nextTick(c,b)}}function O(a,b){let c=this[x];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[x]&&(c._socket.removeListener("data",Z),process.nextTick(V,c._socket),1005===a?c.close():c.close(a,b))}function P(){let a=this[x];a.isPaused||a._socket.resume()}function Q(a){let b=this[x];void 0!==b._socket[x]&&(b._socket.removeListener("data",Z),process.nextTick(V,b._socket),b.close(a[w])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function R(){this[x].emitClose()}function S(a,b){this[x].emit("message",a,b)}function T(a){let b=this[x];b._autoPong&&b.pong(a,!this._isServer,y),b.emit("ping",a)}function U(a){this[x].emit("pong",a)}function V(a){a.resume()}function W(a){let b=this[x];b.readyState!==I.CLOSED&&(b.readyState===I.OPEN&&(b._readyState=I.CLOSING,X(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function X(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),3e4)}function Y(){let a,b=this[x];this.removeListener("close",Y),this.removeListener("data",Z),this.removeListener("end",$),b._readyState=I.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[x]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",R),b._receiver.on("finish",R))}function Z(a){this[x]._receiver.write(a)||this.pause()}function $(){let a=this[x];a._readyState=I.CLOSING,a._receiver.end(),this.end()}function _(){let a=this[x];this.removeListener("error",_),this.on("error",y),a&&(a._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(I.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(I.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[u])return b[v];return null},set(b){for(let b of this.listeners(a))if(b[u]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[u]:!0})}})}),I.prototype.addEventListener=z,I.prototype.removeEventListener=A,b.exports=I},29e3,(a,b,c)=>{"use strict";a.r(89877);let{Duplex:d}=a.r(88947);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}b.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){a.readyState===a.CONNECTING?a.once("open",function(){h._final(b)}):null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){a.readyState===a.CONNECTING?a.once("open",function(){h._write(b,c,d)}):a.send(b,d)},h.on("end",f),h.on("error",g),h}},71553,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(55572);b.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},95837,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(21517),{Duplex:f}=a.r(88947),{createHash:g}=a.r(54799),h=a.r(20529),i=a.r(19199),j=a.r(71553),k=a.r(89877),{GUID:l,kWebSocket:m}=a.r(65514),n=/^[+/0-9A-Za-z]{22}==$/;function o(a){a._state=2,a.emit("close")}function p(){this.destroy()}function q(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function r(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,r),a.emit("wsClientError",d,c,b)}else q(c,d,e,f)}b.exports=class extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){const a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(o,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(o,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{o(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",p);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void r(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void r(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!n.test(e))return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void q(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){r(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],o={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),o[i.extensionName]=c)}catch(c){r(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return q(b,g||401,h,i);this.completeUpgrade(o,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return q(b,401)}this.completeUpgrade(o,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[m])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return q(e,503);let k=g("sha1").update(b+l).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],r=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),r._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",p),r.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(r),r.on("close",()=>{this.clients.delete(r),this._shouldEmitClose&&!this.clients.size&&process.nextTick(o,this)})),j(r,d)}}},14315,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isUnsafeProperty=function(a){return"__proto__"===a}},67984,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isDeepKey=function(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}},21619,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.toKey=function(a){return"string"==typeof a||"symbol"==typeof a?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}},49826,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.toString=function a(b){if(null==b)return"";if("string"==typeof b)return b;if(Array.isArray(b))return b.map(a).join(",");let c=String(b);return"0"===c&&Object.is(Number(b),-0)?"-0":c}},16270,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(49826),e=a.r(21619);c.toPath=function(a){if(Array.isArray(a))return a.map(e.toKey);if("symbol"==typeof a)return[a];a=d.toString(a);let b=[],c=a.length;if(0===c)return b;let f=0,g="",h="",i=!1;for(46===a.charCodeAt(0)&&(b.push(""),f++);f<c;){let d=a[f];h?"\\"===d&&f+1<c?g+=a[++f]:d===h?h="":g+=d:i?'"'===d||"'"===d?h=d:"]"===d?(i=!1,b.push(g),g=""):g+=d:"["===d?(i=!0,g&&(b.push(g),g="")):"."===d?g&&(b.push(g),g=""):g+=d,f++}return g&&b.push(g),b}},64093,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(14315),e=a.r(67984),f=a.r(21619),g=a.r(16270);c.get=function a(b,c,h){if(null==b)return h;switch(typeof c){case"string":{if(d.isUnsafeProperty(c))return h;let f=b[c];if(void 0===f)if(e.isDeepKey(c))return a(b,g.toPath(c),h);else return h;return f}case"number":case"symbol":{"number"==typeof c&&(c=f.toKey(c));let a=b[c];if(void 0===a)return h;return a}default:{if(Array.isArray(c)){var i=b,j=c,k=h;if(0===j.length)return k;let a=i;for(let b=0;b<j.length;b++){if(null==a||d.isUnsafeProperty(j[b]))return k;a=a[j[b]]}return void 0===a?k:a}if(c=Object.is(c?.valueOf(),-0)?"-0":String(c),d.isUnsafeProperty(c))return h;let a=b[c];if(void 0===a)return h;return a}}}},88804,(a,b,c)=>{b.exports=a.r(64093).get},67658,(a,b,c)=>{"use strict";var d=a.r(72131),e="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},f=d.useSyncExternalStore,g=d.useRef,h=d.useEffect,i=d.useMemo,j=d.useDebugValue;c.useSyncExternalStoreWithSelector=function(a,b,c,d,k){var l=g(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=f(a,(l=i(function(){function a(a){if(!h){if(h=!0,f=a,a=d(a),void 0!==k&&m.hasValue){var b=m.value;if(k(b,a))return g=b}return g=a}if(b=g,e(f,a))return b;var c=d(a);return void 0!==k&&k(b,c)?(f=a,b):(f=a,g=c)}var f,g,h=!1,i=void 0===c?null:c;return[function(){return a(b())},null===i?void 0:function(){return a(i())}]},[b,c,d,k]))[0],l[1]);return h(function(){m.hasValue=!0,m.value=n},[n]),j(n),n}},32473,(a,b,c)=>{"use strict";b.exports=a.r(67658)},47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},97514,(a,b,c)=>{"use strict";var d=a.r(72131),e=a.r(87610),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;c.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},64442,(a,b,c)=>{"use strict";b.exports=a.r(97514)},70371,(a,b,c)=>{"use strict";function d(a){return"symbol"==typeof a?1:null===a?2:void 0===a?3:4*(a!=a)}Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.compareValues=(a,b,c)=>{if(a!==b){let e=d(a),f=d(b);if(e===f&&0===e){if(a<b)return"desc"===c?1:-1;if(a>b)return"desc"===c?-1:1}return"desc"===c?f-e:e-f}return 0}},62039,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isSymbol=function(a){return"symbol"==typeof a||a instanceof Symbol}},71071,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(62039),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;c.isKey=function(a,b){return!Array.isArray(a)&&(!!("number"==typeof a||"boolean"==typeof a||null==a||d.isSymbol(a))||"string"==typeof a&&(f.test(a)||!e.test(a))||null!=b&&Object.hasOwn(b,a))}},1611,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(70371),e=a.r(71071),f=a.r(16270);c.orderBy=function(a,b,c,g){if(null==a)return[];c=g?void 0:c,Array.isArray(a)||(a=Object.values(a)),Array.isArray(b)||(b=null==b?[null]:[b]),0===b.length&&(b=[null]),Array.isArray(c)||(c=null==c?[]:[c]),c=c.map(a=>String(a));let h=(a,b)=>{let c=a;for(let a=0;a<b.length&&null!=c;++a)c=c[b[a]];return c},i=b.map(a=>(Array.isArray(a)&&1===a.length&&(a=a[0]),null==a||"function"==typeof a||Array.isArray(a)||e.isKey(a))?a:{key:a,path:f.toPath(a)});return a.map(a=>({original:a,criteria:i.map(b=>{var c,d;return c=b,null==(d=a)||null==c?d:"object"==typeof c&&"key"in c?Object.hasOwn(d,c.key)?d[c.key]:h(d,c.path):"function"==typeof c?c(d):Array.isArray(c)?h(d,c):"object"==typeof d?d[c]:d})})).slice().sort((a,b)=>{for(let e=0;e<i.length;e++){let f=d.compareValues(a.criteria[e],b.criteria[e],c[e]);if(0!==f)return f}return 0}).map(a=>a.original)}},52959,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.flatten=function(a,b=1){let c=[],d=Math.floor(b),e=(a,b)=>{for(let f=0;f<a.length;f++){let g=a[f];Array.isArray(g)&&b<d?e(g,b+1):c.push(g)}};return e(a,0),c}},36762,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=/^(?:0|[1-9]\d*)$/;c.isIndex=function(a,b=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<b;case"symbol":return!1;case"string":return d.test(a)}}},42671,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isLength=function(a){return Number.isSafeInteger(a)&&a>=0}},53673,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(42671);c.isArrayLike=function(a){return null!=a&&"function"!=typeof a&&d.isLength(a.length)}},22700,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isObject=function(a){return null!==a&&("object"==typeof a||"function"==typeof a)}},70655,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.eq=function(a,b){return a===b||Number.isNaN(a)&&Number.isNaN(b)}},18496,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(36762),e=a.r(53673),f=a.r(22700),g=a.r(70655);c.isIterateeCall=function(a,b,c){return!!f.isObject(c)&&(!!("number"==typeof b&&e.isArrayLike(c)&&d.isIndex(b))&&b<c.length||"string"==typeof b&&b in c)&&g.eq(c[b],a)}},58311,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(1611),e=a.r(52959),f=a.r(18496);c.sortBy=function(a,...b){let c=b.length;return c>1&&f.isIterateeCall(a,b[0],b[1])?b=[]:c>2&&f.isIterateeCall(b[0],b[1],b[2])&&(b=[b[0]]),d.orderBy(a,e.flatten(b),["asc"])}},81101,(a,b,c)=>{b.exports=a.r(58311).sortBy},70257,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.debounce=function(a,b,{signal:c,edges:d}={}){let e,f=null,g=null!=d&&d.includes("leading"),h=null==d||d.includes("trailing"),i=()=>{null!==f&&(a.apply(e,f),e=void 0,f=null)},j=null,k=()=>{null!=j&&clearTimeout(j),j=setTimeout(()=>{j=null,h&&i(),l()},b)},l=()=>{null!==j&&(clearTimeout(j),j=null),e=void 0,f=null},m=function(...a){if(c?.aborted)return;e=this,f=a;let b=null==j;k(),g&&b&&i()};return m.schedule=k,m.cancel=l,m.flush=()=>{i()},c?.addEventListener("abort",l,{once:!0}),m}},52844,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(70257);c.debounce=function(a,b=0,c={}){let e;"object"!=typeof c&&(c={});let{leading:f=!1,trailing:g=!0,maxWait:h}=c,i=[,,];f&&(i[0]="leading"),g&&(i[1]="trailing");let j=null,k=d.debounce(function(...b){e=a.apply(this,b),j=null},b,{edges:i}),l=function(...b){return null!=h&&(null===j&&(j=Date.now()),Date.now()-j>=h)?(e=a.apply(this,b),j=Date.now(),k.cancel(),k.schedule(),e):(k.apply(this,b),e)};return l.cancel=k.cancel,l.flush=()=>(k.flush(),e),l}},4855,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(52844);c.throttle=function(a,b=0,c={}){let{leading:e=!0,trailing:f=!0}=c;return d.debounce(a,b,{leading:e,maxWait:b,trailing:f})}},61349,(a,b,c)=>{b.exports=a.r(4855).throttle},36131,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(62039);c.toNumber=function(a){return d.isSymbol(a)?NaN:Number(a)}},55362,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(36131);c.toFinite=function(a){return a?(a=d.toNumber(a))===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a==a?a:0:0===a?a:0}},48127,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(18496),e=a.r(55362);c.range=function(a,b,c){c&&"number"!=typeof c&&d.isIterateeCall(a,b,c)&&(b=c=void 0),a=e.toFinite(a),void 0===b?(b=a,a=0):b=e.toFinite(b),c=void 0===c?a<b?1:-1:e.toFinite(c);let f=Math.max(Math.ceil((b-a)/(c||1)),0),g=Array(f);for(let b=0;b<f;b++)g[b]=a,a+=c;return g}},56161,(a,b,c)=>{b.exports=a.r(48127).range},53686,(a,b,c)=>{"use strict";var d=Object.prototype.hasOwnProperty,e="~";function f(){}function g(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function h(a,b,c,d,f){if("function"!=typeof c)throw TypeError("The listener must be a function");var h=new g(c,d||a,f),i=e?e+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function i(a,b){0==--a._eventsCount?a._events=new f:delete a._events[b]}function j(){this._events=new f,this._eventsCount=0}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(e=!1)),j.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)d.call(a,b)&&c.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},j.prototype.listeners=function(a){var b=e?e+a:a,c=this._events[b];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,g=Array(f);d<f;d++)g[d]=c[d].fn;return g},j.prototype.listenerCount=function(a){var b=e?e+a:a,c=this._events[b];return c?c.fn?1:c.length:0},j.prototype.emit=function(a,b,c,d,f,g){var h=e?e+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,f),!0;case 6:return k.fn.call(k.context,b,c,d,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},j.prototype.on=function(a,b,c){return h(this,a,b,c,!1)},j.prototype.once=function(a,b,c){return h(this,a,b,c,!0)},j.prototype.removeListener=function(a,b,c,d){var f=e?e+a:a;if(!this._events[f])return this;if(!b)return i(this,f),this;var g=this._events[f];if(g.fn)g.fn!==b||d&&!g.once||c&&g.context!==c||i(this,f);else{for(var h=0,j=[],k=g.length;h<k;h++)(g[h].fn!==b||d&&!g[h].once||c&&g[h].context!==c)&&j.push(g[h]);j.length?this._events[f]=1===j.length?j[0]:j:i(this,f)}return this},j.prototype.removeAllListeners=function(a){var b;return a?(b=e?e+a:a,this._events[b]&&i(this,b)):(this._events=new f,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=e,j.EventEmitter=j,b.exports=j},22060,(a,b,c)=>{"use strict";var d=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),j=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),n=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),q=Symbol.for("react.client.reference");function r(a){if("object"==typeof a&&null!==a){var b=a.$$typeof;switch(b){case d:switch(a=a.type){case f:case h:case g:case l:case m:case p:return a;default:switch(a=a&&a.$$typeof){case j:case k:case o:case n:case i:return a;default:return b}}case e:return b}}}c.ContextConsumer=i,c.ContextProvider=j,c.Element=d,c.ForwardRef=k,c.Fragment=f,c.Lazy=o,c.Memo=n,c.Portal=e,c.Profiler=h,c.StrictMode=g,c.Suspense=l,c.SuspenseList=m,c.isContextConsumer=function(a){return r(a)===i},c.isContextProvider=function(a){return r(a)===j},c.isElement=function(a){return"object"==typeof a&&null!==a&&a.$$typeof===d},c.isForwardRef=function(a){return r(a)===k},c.isFragment=function(a){return r(a)===f},c.isLazy=function(a){return r(a)===o},c.isMemo=function(a){return r(a)===n},c.isPortal=function(a){return r(a)===e},c.isProfiler=function(a){return r(a)===h},c.isStrictMode=function(a){return r(a)===g},c.isSuspense=function(a){return r(a)===l},c.isSuspenseList=function(a){return r(a)===m},c.isValidElementType=function(a){return"string"==typeof a||"function"==typeof a||a===f||a===h||a===g||a===l||a===m||"object"==typeof a&&null!==a&&(a.$$typeof===o||a.$$typeof===n||a.$$typeof===j||a.$$typeof===i||a.$$typeof===k||a.$$typeof===q||void 0!==a.getModuleId)||!1},c.typeOf=r},66539,(a,b,c)=>{"use strict";b.exports=a.r(22060)},81537,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isPlainObject=function(a){if("object"!=typeof a||null==a)return!1;if(null===Object.getPrototypeOf(a))return!0;if("[object Object]"!==Object.prototype.toString.call(a)){let b=a[Symbol.toStringTag];return null!=b&&!!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable&&a.toString()===`[object ${b}]`}let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}},3068,(a,b,c)=>{b.exports=a.r(81537).isPlainObject},40483,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.last=function(a){return a[a.length-1]}},32969,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.toArray=function(a){return Array.isArray(a)?a:Array.from(a)}},16642,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(40483),e=a.r(32969),f=a.r(53673);c.last=function(a){if(f.isArrayLike(a))return d.last(e.toArray(a))}},78375,(a,b,c)=>{b.exports=a.r(16642).last},13542,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.uniqBy=function(a,b){let c=new Map;for(let d=0;d<a.length;d++){let e=a[d],f=b(e);c.has(f)||c.set(f,e)}return Array.from(c.values())}},31540,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.identity=function(a){return a}},970,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isObjectLike=function(a){return"object"==typeof a&&null!==a}},90228,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(53673),e=a.r(970);c.isArrayLikeObject=function(a){return e.isObjectLike(a)&&d.isArrayLike(a)}},32100,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(64093);c.property=function(a){return function(b){return d.get(b,a)}}},79687,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isPrimitive=function(a){return null==a||"object"!=typeof a&&"function"!=typeof a}},71112,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(22700),e=a.r(79687),f=a.r(70655);function g(a,b,c,j){if(b===a)return!0;switch(typeof b){case"object":return function(a,b,c,d){if(null==b)return!0;if(Array.isArray(b))return h(a,b,c,d);if(b instanceof Map){var f=a,g=b,j=c,k=d;if(0===g.size)return!0;if(!(f instanceof Map))return!1;for(let[a,b]of g.entries())if(!1===j(f.get(a),b,a,f,g,k))return!1;return!0}if(b instanceof Set)return i(a,b,c,d);let l=Object.keys(b);if(null==a)return 0===l.length;if(0===l.length)return!0;if(d?.has(b))return d.get(b)===a;d?.set(b,a);try{for(let f=0;f<l.length;f++){let g=l[f];if(!e.isPrimitive(a)&&!(g in a)||void 0===b[g]&&void 0!==a[g]||null===b[g]&&null!==a[g]||!c(a[g],b[g],g,a,b,d))return!1}return!0}finally{d?.delete(b)}}(a,b,c,j);case"function":if(Object.keys(b).length>0)return g(a,{...b},c,j);return f.eq(a,b);default:if(!d.isObject(a))return f.eq(a,b);if("string"==typeof b)return""===b;return!0}}function h(a,b,c,d){if(0===b.length)return!0;if(!Array.isArray(a))return!1;let e=new Set;for(let f=0;f<b.length;f++){let g=b[f],h=!1;for(let i=0;i<a.length;i++){if(e.has(i))continue;let j=a[i],k=!1;if(c(j,g,f,a,b,d)&&(k=!0),k){e.add(i),h=!0;break}}if(!h)return!1}return!0}function i(a,b,c,d){return 0===b.size||a instanceof Set&&h([...a],[...b],c,d)}c.isMatchWith=function a(b,c,d){return"function"!=typeof d?a(b,c,()=>void 0):g(b,c,function a(b,c,e,f,h,i){let j=d(b,c,e,f,h,i);return void 0!==j?!!j:g(b,c,a,i)},new Map)},c.isSetMatch=i},35295,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(71112);c.isMatch=function(a,b){return d.isMatchWith(a,b,()=>void 0)}},81922,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.getSymbols=function(a){return Object.getOwnPropertySymbols(a).filter(b=>Object.prototype.propertyIsEnumerable.call(a,b))}},71755,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.getTag=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}},39792,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.argumentsTag="[object Arguments]",c.arrayBufferTag="[object ArrayBuffer]",c.arrayTag="[object Array]",c.bigInt64ArrayTag="[object BigInt64Array]",c.bigUint64ArrayTag="[object BigUint64Array]",c.booleanTag="[object Boolean]",c.dataViewTag="[object DataView]",c.dateTag="[object Date]",c.errorTag="[object Error]",c.float32ArrayTag="[object Float32Array]",c.float64ArrayTag="[object Float64Array]",c.functionTag="[object Function]",c.int16ArrayTag="[object Int16Array]",c.int32ArrayTag="[object Int32Array]",c.int8ArrayTag="[object Int8Array]",c.mapTag="[object Map]",c.numberTag="[object Number]",c.objectTag="[object Object]",c.regexpTag="[object RegExp]",c.setTag="[object Set]",c.stringTag="[object String]",c.symbolTag="[object Symbol]",c.uint16ArrayTag="[object Uint16Array]",c.uint32ArrayTag="[object Uint32Array]",c.uint8ArrayTag="[object Uint8Array]",c.uint8ClampedArrayTag="[object Uint8ClampedArray]"},11963,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c.isTypedArray=function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}},18844,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(81922),e=a.r(71755),f=a.r(39792),g=a.r(79687),h=a.r(11963);function i(a,b,c,d=new Map,k){let l=k?.(a,b,c,d);if(void 0!==l)return l;if(g.isPrimitive(a))return a;if(d.has(a))return d.get(a);if(Array.isArray(a)){let b=Array(a.length);d.set(a,b);for(let e=0;e<a.length;e++)b[e]=i(a[e],e,c,d,k);return Object.hasOwn(a,"index")&&(b.index=a.index),Object.hasOwn(a,"input")&&(b.input=a.input),b}if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp){let b=new RegExp(a.source,a.flags);return b.lastIndex=a.lastIndex,b}if(a instanceof Map){let b=new Map;for(let[e,f]of(d.set(a,b),a))b.set(e,i(f,e,c,d,k));return b}if(a instanceof Set){let b=new Set;for(let e of(d.set(a,b),a))b.add(i(e,void 0,c,d,k));return b}if("undefined"!=typeof Buffer&&Buffer.isBuffer(a))return a.subarray();if(h.isTypedArray(a)){let b=new(Object.getPrototypeOf(a)).constructor(a.length);d.set(a,b);for(let e=0;e<a.length;e++)b[e]=i(a[e],e,c,d,k);return b}if(a instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&a instanceof SharedArrayBuffer)return a.slice(0);if(a instanceof DataView){let b=new DataView(a.buffer.slice(0),a.byteOffset,a.byteLength);return d.set(a,b),j(b,a,c,d,k),b}if("undefined"!=typeof File&&a instanceof File){let b=new File([a],a.name,{type:a.type});return d.set(a,b),j(b,a,c,d,k),b}if("undefined"!=typeof Blob&&a instanceof Blob){let b=new Blob([a],{type:a.type});return d.set(a,b),j(b,a,c,d,k),b}if(a instanceof Error){let b=new a.constructor;return d.set(a,b),b.message=a.message,b.name=a.name,b.stack=a.stack,b.cause=a.cause,j(b,a,c,d,k),b}if(a instanceof Boolean){let b=new Boolean(a.valueOf());return d.set(a,b),j(b,a,c,d,k),b}if(a instanceof Number){let b=new Number(a.valueOf());return d.set(a,b),j(b,a,c,d,k),b}if(a instanceof String){let b=new String(a.valueOf());return d.set(a,b),j(b,a,c,d,k),b}if("object"==typeof a&&function(a){switch(e.getTag(a)){case f.argumentsTag:case f.arrayTag:case f.arrayBufferTag:case f.dataViewTag:case f.booleanTag:case f.dateTag:case f.float32ArrayTag:case f.float64ArrayTag:case f.int8ArrayTag:case f.int16ArrayTag:case f.int32ArrayTag:case f.mapTag:case f.numberTag:case f.objectTag:case f.regexpTag:case f.setTag:case f.stringTag:case f.symbolTag:case f.uint8ArrayTag:case f.uint8ClampedArrayTag:case f.uint16ArrayTag:case f.uint32ArrayTag:return!0;default:return!1}}(a)){let b=Object.create(Object.getPrototypeOf(a));return d.set(a,b),j(b,a,c,d,k),b}return a}function j(a,b,c=a,e,f){let g=[...Object.keys(b),...d.getSymbols(b)];for(let d=0;d<g.length;d++){let h=g[d],j=Object.getOwnPropertyDescriptor(a,h);(null==j||j.writable)&&(a[h]=i(b[h],h,c,e,f))}}c.cloneDeepWith=function(a,b){return i(a,void 0,a,new Map,b)},c.cloneDeepWithImpl=i,c.copyProperties=j},12188,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(18844);c.cloneDeep=function(a){return d.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}},45794,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(35295),e=a.r(12188);c.matches=function(a){return a=e.cloneDeep(a),b=>d.isMatch(b,a)}},84955,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(18844),e=a.r(39792);c.cloneDeepWith=function(a,b){return d.cloneDeepWith(a,(c,f,g,h)=>{let i=b?.(c,f,g,h);if(void 0!==i)return i;if("object"==typeof a)switch(Object.prototype.toString.call(a)){case e.numberTag:case e.stringTag:case e.booleanTag:{let b=new a.constructor(a?.valueOf());return d.copyProperties(b,a),b}case e.argumentsTag:{let b={};return d.copyProperties(b,a),b.length=a.length,b[Symbol.iterator]=a[Symbol.iterator],b}default:return}})}},37595,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(84955);c.cloneDeep=function(a){return d.cloneDeepWith(a)}},21864,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(71755);c.isArguments=function(a){return null!==a&&"object"==typeof a&&"[object Arguments]"===d.getTag(a)}},70767,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(67984),e=a.r(36762),f=a.r(21864),g=a.r(16270);c.has=function(a,b){let c;if(0===(c=Array.isArray(b)?b:"string"==typeof b&&d.isDeepKey(b)&&a?.[b]==null?g.toPath(b):[b]).length)return!1;let h=a;for(let a=0;a<c.length;a++){let b=c[a];if((null==h||!Object.hasOwn(h,b))&&!((Array.isArray(h)||f.isArguments(h))&&e.isIndex(b)&&b<h.length))return!1;h=h[b]}return!0}},31544,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(35295),e=a.r(21619),f=a.r(37595),g=a.r(64093),h=a.r(70767);c.matchesProperty=function(a,b){switch(typeof a){case"object":Object.is(a?.valueOf(),-0)&&(a="-0");break;case"number":a=e.toKey(a)}return b=f.cloneDeep(b),function(c){let e=g.get(c,a);return void 0===e?h.has(c,a):void 0===b?void 0===e:d.isMatch(e,b)}}},59111,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(31540),e=a.r(32100),f=a.r(45794),g=a.r(31544);c.iteratee=function(a){if(null==a)return d.identity;switch(typeof a){case"function":return a;case"object":if(Array.isArray(a)&&2===a.length)return g.matchesProperty(a[0],a[1]);return f.matches(a);case"string":case"symbol":case"number":return e.property(a)}}},60066,(a,b,c)=>{"use strict";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});let d=a.r(13542),e=a.r(31540),f=a.r(90228),g=a.r(59111);c.uniqBy=function(a,b=e.identity){return f.isArrayLikeObject(a)?d.uniqBy(Array.from(a),g.iteratee(b)):[]}},53451,(a,b,c)=>{b.exports=a.r(60066).uniqBy},40777,a=>{"use strict";let b,c,d,e,f,g,h,i,j,k;var l,m,n,o=a.i(87924),p=a.i(72131),q=a.i(38246),r=a.i(28684),s=a.i(22734),t=a.i(24868),u=a.i(81111),v=a.i(88646);a.i(29e3),a.i(74160),a.i(10697);var w=a.i(89877);a.i(95837),w.default;class x{}function y(a,b){return a.replace(/\{([^}]+)\}/g,(a,c)=>{if(Object.prototype.hasOwnProperty.call(b,c)){let a=b[c];return null!=a?String(a):""}throw Error(`Key '${c}' not found in valueMap.`)})}function z(a,b,c){for(let d=0;d<b.length-1;d++){let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))if(Array.isArray(c))a[f]=Array.from({length:c.length},()=>({}));else throw Error(`Value must be a list given an array path ${e}`);if(Array.isArray(a[f])){let e=a[f];if(Array.isArray(c))for(let a=0;a<e.length;a++)z(e[a],b.slice(d+1),c[a]);else for(let a of e)z(a,b.slice(d+1),c)}return}if(e.endsWith("[0]")){let f=e.slice(0,-3);f in a||(a[f]=[{}]),z(a[f][0],b.slice(d+1),c);return}a[e]&&"object"==typeof a[e]||(a[e]={}),a=a[e]}let d=b[b.length-1],e=a[d];if(void 0!==e){if(!c||"object"==typeof c&&0===Object.keys(c).length||c===e)return;if("object"==typeof e&&"object"==typeof c&&null!==e&&null!==c)Object.assign(e,c);else throw Error(`Cannot set value for an existing key. Key: ${d}`)}else"_self"!==d||"object"!=typeof c||null===c||Array.isArray(c)?a[d]=c:Object.assign(a,c)}function A(a,b,c){try{if(1===b.length&&"_self"===b[0])return a;for(let d=0;d<b.length;d++){if("object"!=typeof a||null===a)return c;let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))return c;{let e=a[f];if(!Array.isArray(e))return c;return e.map(a=>A(a,b.slice(d+1),c))}}a=a[e]}return a}catch(a){if(a instanceof TypeError)return c;throw a}}function B(a){if("string"!=typeof a)throw Error("fromImageBytes must be a string");return a}(kz=ln||(ln={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",kz.OUTCOME_OK="OUTCOME_OK",kz.OUTCOME_FAILED="OUTCOME_FAILED",kz.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(kA=lo||(lo={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",kA.PYTHON="PYTHON",(kB=lp||(lp={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",kB.SILENT="SILENT",kB.WHEN_IDLE="WHEN_IDLE",kB.INTERRUPT="INTERRUPT",(kC=lq||(lq={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",kC.STRING="STRING",kC.NUMBER="NUMBER",kC.INTEGER="INTEGER",kC.BOOLEAN="BOOLEAN",kC.ARRAY="ARRAY",kC.OBJECT="OBJECT",kC.NULL="NULL",(kD=lr||(lr={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",kD.MODE_DYNAMIC="MODE_DYNAMIC",(kE=ls||(ls={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",kE.NO_AUTH="NO_AUTH",kE.API_KEY_AUTH="API_KEY_AUTH",kE.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",kE.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",kE.OAUTH="OAUTH",kE.OIDC_AUTH="OIDC_AUTH",(kF=lt||(lt={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",kF.SIMPLE_SEARCH="SIMPLE_SEARCH",kF.ELASTIC_SEARCH="ELASTIC_SEARCH",(kG=lu||(lu={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",kG.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",kG.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",kG.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",kG.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",kG.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",kG.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",kG.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",kG.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",kG.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",kG.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(kH=lv||(lv={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",kH.SEVERITY="SEVERITY",kH.PROBABILITY="PROBABILITY",(kI=lw||(lw={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",kI.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",kI.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",kI.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",kI.BLOCK_NONE="BLOCK_NONE",kI.OFF="OFF",(kJ=lx||(lx={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",kJ.STOP="STOP",kJ.MAX_TOKENS="MAX_TOKENS",kJ.SAFETY="SAFETY",kJ.RECITATION="RECITATION",kJ.LANGUAGE="LANGUAGE",kJ.OTHER="OTHER",kJ.BLOCKLIST="BLOCKLIST",kJ.PROHIBITED_CONTENT="PROHIBITED_CONTENT",kJ.SPII="SPII",kJ.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",kJ.IMAGE_SAFETY="IMAGE_SAFETY",kJ.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",kJ.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",kJ.NO_IMAGE="NO_IMAGE",(kK=ly||(ly={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",kK.NEGLIGIBLE="NEGLIGIBLE",kK.LOW="LOW",kK.MEDIUM="MEDIUM",kK.HIGH="HIGH",(kL=lz||(lz={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",kL.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",kL.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",kL.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",kL.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(kM=lA||(lA={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",kM.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",kM.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",kM.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",kM.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(kN=lB||(lB={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",kN.SAFETY="SAFETY",kN.OTHER="OTHER",kN.BLOCKLIST="BLOCKLIST",kN.PROHIBITED_CONTENT="PROHIBITED_CONTENT",kN.IMAGE_SAFETY="IMAGE_SAFETY",kN.MODEL_ARMOR="MODEL_ARMOR",kN.JAILBREAK="JAILBREAK",(kO=lC||(lC={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",kO.ON_DEMAND="ON_DEMAND",kO.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(kP=lD||(lD={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",kP.TEXT="TEXT",kP.IMAGE="IMAGE",kP.AUDIO="AUDIO",(kQ=lE||(lE={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",kQ.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",kQ.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",kQ.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(kR=lF||(lF={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",kR.TUNING_MODE_FULL="TUNING_MODE_FULL",kR.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(kS=lG||(lG={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",kS.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",kS.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",kS.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",kS.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",kS.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",kS.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(kT=lH||(lH={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",kT.JOB_STATE_QUEUED="JOB_STATE_QUEUED",kT.JOB_STATE_PENDING="JOB_STATE_PENDING",kT.JOB_STATE_RUNNING="JOB_STATE_RUNNING",kT.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",kT.JOB_STATE_FAILED="JOB_STATE_FAILED",kT.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",kT.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",kT.JOB_STATE_PAUSED="JOB_STATE_PAUSED",kT.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",kT.JOB_STATE_UPDATING="JOB_STATE_UPDATING",kT.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(kU=lI||(lI={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",kU.TUNING_TASK_I2V="TUNING_TASK_I2V",kU.TUNING_TASK_T2V="TUNING_TASK_T2V",(kV=lJ||(lJ={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",kV.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",kV.BALANCED="BALANCED",kV.PRIORITIZE_COST="PRIORITIZE_COST",(kW=lK||(lK={})).UNSPECIFIED="UNSPECIFIED",kW.BLOCKING="BLOCKING",kW.NON_BLOCKING="NON_BLOCKING",(kX=lL||(lL={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",kX.MODE_DYNAMIC="MODE_DYNAMIC",(kY=lM||(lM={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",kY.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(kZ=lN||(lN={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",kZ.AUTO="AUTO",kZ.ANY="ANY",kZ.NONE="NONE",kZ.VALIDATED="VALIDATED",(k$=lO||(lO={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",k$.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",k$.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",k$.BLOCK_NONE="BLOCK_NONE",(k_=lP||(lP={})).DONT_ALLOW="DONT_ALLOW",k_.ALLOW_ADULT="ALLOW_ADULT",k_.ALLOW_ALL="ALLOW_ALL",(k0=lQ||(lQ={})).auto="auto",k0.en="en",k0.ja="ja",k0.ko="ko",k0.hi="hi",k0.zh="zh",k0.pt="pt",k0.es="es",(k1=lR||(lR={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",k1.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",k1.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",k1.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",k1.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(k2=lS||(lS={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",k2.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",k2.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",k2.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(k3=lT||(lT={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",k3.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",k3.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",k3.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(k4=lU||(lU={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",k4.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",k4.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",k4.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",k4.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",k4.EDIT_MODE_STYLE="EDIT_MODE_STYLE",k4.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",k4.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(k5=lV||(lV={})).FOREGROUND="FOREGROUND",k5.BACKGROUND="BACKGROUND",k5.PROMPT="PROMPT",k5.SEMANTIC="SEMANTIC",k5.INTERACTIVE="INTERACTIVE",(k6=lW||(lW={})).ASSET="ASSET",k6.STYLE="STYLE",(k7=lX||(lX={})).INSERT="INSERT",k7.REMOVE="REMOVE",k7.REMOVE_STATIC="REMOVE_STATIC",k7.OUTPAINT="OUTPAINT",(k8=lY||(lY={})).OPTIMIZED="OPTIMIZED",k8.LOSSLESS="LOSSLESS",(k9=lZ||(lZ={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",k9.PREFERENCE_TUNING="PREFERENCE_TUNING",(la=l$||(l$={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",la.PROCESSING="PROCESSING",la.ACTIVE="ACTIVE",la.FAILED="FAILED",(lb=l_||(l_={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",lb.UPLOADED="UPLOADED",lb.GENERATED="GENERATED",(lc=l0||(l0={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",lc.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",lc.RESPONSE_REJECTED="RESPONSE_REJECTED",lc.NEED_MORE_INPUT="NEED_MORE_INPUT",(ld=l1||(l1={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ld.TEXT="TEXT",ld.IMAGE="IMAGE",ld.VIDEO="VIDEO",ld.AUDIO="AUDIO",ld.DOCUMENT="DOCUMENT",(le=l2||(l2={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",le.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",le.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(lf=l3||(l3={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",lf.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",lf.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(lg=l4||(l4={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",lg.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",lg.NO_INTERRUPTION="NO_INTERRUPTION",(lh=l5||(l5={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",lh.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",lh.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(li=l6||(l6={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",li.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",li.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",li.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",li.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",li.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",li.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",li.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",li.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",li.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",li.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",li.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",li.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(lj=l7||(l7={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",lj.QUALITY="QUALITY",lj.DIVERSITY="DIVERSITY",lj.VOCALIZATION="VOCALIZATION",(lk=l8||(l8={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",lk.PLAY="PLAY",lk.PAUSE="PAUSE",lk.STOP="STOP",lk.RESET_CONTEXT="RESET_CONTEXT";class C{constructor(a){const b={};for(const c of a.headers.entries())b[c[0]]=c[1];this.headers=b,this.responseInternal=a}json(){return this.responseInternal.json()}}class D{get text(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let i="",j=!1,k=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"text"!==b&&"thought"!==b&&(null!==c||void 0!==c)&&k.push(b);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;j=!0,i+=a.text}}return k.length>0&&console.warn(`there are non-text parts ${k} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),j?i:void 0}get data(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let i="",j=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"inlineData"!==b&&(null!==c||void 0!==c)&&j.push(b);a.inlineData&&"string"==typeof a.inlineData.data&&(i+=atob(a.inlineData.data))}return j.length>0&&console.warn(`there are non-data parts ${j} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}get functionCalls(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let i=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.functionCall).map(a=>a.functionCall).filter(a=>void 0!==a);if((null==i?void 0:i.length)!==0)return i}get executableCode(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.executableCode).map(a=>a.executableCode).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.code}get codeExecutionResult(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.codeExecutionResult).map(a=>a.codeExecutionResult).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.output}}class E{}class F{}class G{}class H{}class I{}class J{}class K{}class L{}class M{}class N{}class O{_fromAPIResponse({apiResponse:a,isVertexAI:b}){let c,d=new O;if(b){let b,d,e,f,g,h;b={},null!=(d=A(a,["name"]))&&z(b,["name"],d),null!=(e=A(a,["metadata"]))&&z(b,["metadata"],e),null!=(f=A(a,["done"]))&&z(b,["done"],f),null!=(g=A(a,["error"]))&&z(b,["error"],g),null!=(h=A(a,["response"]))&&z(b,["response"],function(a){let b={},c=A(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=A(a,["_self"]))&&z(c,["video"],(e={},null!=(f=A(b=d,["gcsUri"]))&&z(e,["uri"],f),null!=(g=A(b,["bytesBase64Encoded"]))&&z(e,["videoBytes"],B(g)),null!=(h=A(b,["mimeType"]))&&z(e,["mimeType"],h),e)),c})),z(b,["generatedVideos"],a)}let d=A(a,["raiMediaFilteredCount"]);null!=d&&z(b,["raiMediaFilteredCount"],d);let e=A(a,["raiMediaFilteredReasons"]);return null!=e&&z(b,["raiMediaFilteredReasons"],e),b}(h)),c=b}else{let b,d,e,f,g,h;b={},null!=(d=A(a,["name"]))&&z(b,["name"],d),null!=(e=A(a,["metadata"]))&&z(b,["metadata"],e),null!=(f=A(a,["done"]))&&z(b,["done"],f),null!=(g=A(a,["error"]))&&z(b,["error"],g),null!=(h=A(a,["response","generateVideoResponse"]))&&z(b,["response"],function(a){let b={},c=A(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=A(a,["video"]))&&z(c,["video"],(e={},null!=(f=A(b=d,["uri"]))&&z(e,["uri"],f),null!=(g=A(b,["encodedVideo"]))&&z(e,["videoBytes"],B(g)),null!=(h=A(b,["encoding"]))&&z(e,["mimeType"],h),e)),c})),z(b,["generatedVideos"],a)}let d=A(a,["raiMediaFilteredCount"]);null!=d&&z(b,["raiMediaFilteredCount"],d);let e=A(a,["raiMediaFilteredReasons"]);return null!=e&&z(b,["raiMediaFilteredReasons"],e),b}(h)),c=b}return Object.assign(d,c),d}}class P{}class Q{}class R{}class S{}class T{}class U{}class V{}class W{get text(){var a,b,c;let d="",e=!1,f=[];for(let g of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(g))"text"!==a&&"thought"!==a&&null!==b&&f.push(a);if("string"==typeof g.text){if("boolean"==typeof g.thought&&g.thought)continue;e=!0,d+=g.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),e?d:void 0}get data(){var a,b,c;let d="",e=[];for(let f of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(f))"inlineData"!==a&&null!==b&&e.push(a);f.inlineData&&"string"==typeof f.inlineData.data&&(d+=atob(f.inlineData.data))}return e.length>0&&console.warn(`there are non-data parts ${e} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}}class X{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}function Y(a,b){if(!b||"string"!=typeof b)throw Error("model is required and must be a string");if(a.isVertexAI())if(b.startsWith("publishers/")||b.startsWith("projects/")||b.startsWith("models/"))return b;else{if(!(b.indexOf("/")>=0))return`publishers/google/models/${b}`;let a=b.split("/",2);return`publishers/${a[0]}/models/${a[1]}`}return b.startsWith("models/")||b.startsWith("tunedModels/")?b:`models/${b}`}function Z(a,b){let c=Y(a,b);return c?c.startsWith("publishers/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/${c}`:c.startsWith("models/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/publishers/google/${c}`:c:""}function $(a){return Array.isArray(a)?a.map(a=>_(a)):[_(a)]}function _(a){if("object"==typeof a&&null!==a)return a;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof a}`)}function aa(a){let b=_(a);if(b.mimeType&&b.mimeType.startsWith("image/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function ab(a){let b=_(a);if(b.mimeType&&b.mimeType.startsWith("audio/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function ac(a){if(null==a)throw Error("PartUnion is required");if("object"==typeof a)return a;if("string"==typeof a)return{text:a};throw Error(`Unsupported part type: ${typeof a}`)}function ad(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("PartListUnion is required");return Array.isArray(a)?a.map(a=>ac(a)):[ac(a)]}function ae(a){return null!=a&&"object"==typeof a&&"parts"in a&&Array.isArray(a.parts)}function af(a){return null!=a&&"object"==typeof a&&"functionCall"in a}function ag(a){return null!=a&&"object"==typeof a&&"functionResponse"in a}function ah(a){if(null==a)throw Error("ContentUnion is required");return ae(a)?a:{role:"user",parts:ad(a)}}function ai(a,b){if(!b)return[];if(a.isVertexAI()&&Array.isArray(b))return b.flatMap(a=>{let b=ah(a);return b.parts&&b.parts.length>0&&void 0!==b.parts[0].text?[b.parts[0].text]:[]});if(a.isVertexAI()){let a=ah(b);return a.parts&&a.parts.length>0&&void 0!==a.parts[0].text?[a.parts[0].text]:[]}return Array.isArray(b)?b.map(a=>ah(a)):[ah(b)]}function aj(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("contents are required");if(!Array.isArray(a)){if(af(a)||ag(a))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ah(a)]}let b=[],c=[],d=ae(a[0]);for(let e of a){let a=ae(e);if(a!=d)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)b.push(e);else if(af(e)||ag(e))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else c.push(e)}return d||b.push({role:"user",parts:ad(c)}),b}function ak(a){let b={},c=["items"],d=["anyOf"],e=["properties"];if(a.type&&a.anyOf)throw Error("type and anyOf cannot be both populated.");let f=a.anyOf;for(let[g,h]of(null!=f&&2==f.length&&("null"===f[0].type?(b.nullable=!0,a=f[1]):"null"===f[1].type&&(b.nullable=!0,a=f[0])),a.type instanceof Array&&function(a,b){a.includes("null")&&(b.nullable=!0);let c=a.filter(a=>"null"!==a);if(1===c.length)b.type=Object.values(lq).includes(c[0].toUpperCase())?c[0].toUpperCase():lq.TYPE_UNSPECIFIED;else for(let a of(b.anyOf=[],c))b.anyOf.push({type:Object.values(lq).includes(a.toUpperCase())?a.toUpperCase():lq.TYPE_UNSPECIFIED})}(a.type,b),Object.entries(a)))if(null!=h)if("type"==g){if("null"===h)throw Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;b.type=Object.values(lq).includes(h.toUpperCase())?h.toUpperCase():lq.TYPE_UNSPECIFIED}else if(c.includes(g))b[g]=ak(h);else if(d.includes(g)){let a=[];for(let c of h){if("null"==c.type){b.nullable=!0;continue}a.push(ak(c))}b[g]=a}else if(e.includes(g)){let a={};for(let[b,c]of Object.entries(h))a[b]=ak(c);b[g]=a}else{if("additionalProperties"===g)continue;b[g]=h}return b}function al(a){if("object"==typeof a)return a;if("string"==typeof a)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:a}}};throw Error(`Unsupported speechConfig type: ${typeof a}`)}function am(a){if("multiSpeakerVoiceConfig"in a)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return a}function an(a){if(a.functionDeclarations)for(let b of a.functionDeclarations)b.parameters&&(Object.keys(b.parameters).includes("$schema")?b.parametersJsonSchema||(b.parametersJsonSchema=b.parameters,delete b.parameters):b.parameters=ak(b.parameters)),b.response&&(Object.keys(b.response).includes("$schema")?b.responseJsonSchema||(b.responseJsonSchema=b.response,delete b.response):b.response=ak(b.response));return a}function ao(a){if(null==a)throw Error("tools is required");if(!Array.isArray(a))throw Error("tools is required and must be an array of Tools");let b=[];for(let c of a)b.push(c);return b}function ap(a,b){if("string"!=typeof b)throw Error("name must be a string");return function(a,b,c,d=1){let e=!b.startsWith(`${c}/`)&&b.split("/").length===d;if(a.isVertexAI())if(b.startsWith("projects/"))return b;else if(b.startsWith("locations/"))return`projects/${a.getProject()}/${b}`;else if(b.startsWith(`${c}/`))return`projects/${a.getProject()}/locations/${a.getLocation()}/${b}`;else if(e)return`projects/${a.getProject()}/locations/${a.getLocation()}/${c}/${b}`;else return b;return e?`${c}/${b}`:b}(a,b,"cachedContents")}function aq(a){switch(a){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return a}}function ar(a){return null!=a&&"object"==typeof a&&"video"in a}function as(a){return null!=a&&"object"==typeof a&&"uri"in a}function at(a){var b;let c;if(null!=a&&"object"==typeof a&&"name"in a&&(c=a.name),!as(a)||void 0!==(c=a.uri)){if(!ar(a)||void 0!==(c=null==(b=a.video)?void 0:b.uri)){if("string"==typeof a&&(c=a),void 0===c)throw Error("Could not extract file name from the provided input.");if(c.startsWith("https://")){let a=c.split("files/")[1].match(/[a-z0-9]+/);if(null===a)throw Error(`Could not extract file name from URI ${c}`);c=a[0]}else c.startsWith("files/")&&(c=c.split("files/")[1]);return c}}}function au(a,b){return a.isVertexAI()?b?"publishers/google/models":"models":b?"models":"tunedModels"}function av(a){for(let d of["models","tunedModels","publisherModels"]){var b,c;if(b=a,c=d,null!==b&&"object"==typeof b&&c in b)return a[d]}return[]}function aw(a,b){let c;if("string"==typeof b)if(a.isVertexAI())if(b.startsWith("gs://"))c={format:"jsonl",gcsUri:[b]};else if(b.startsWith("bq://"))c={format:"bigquery",bigqueryUri:b};else throw Error(`Unsupported string source for Vertex AI: ${b}`);else if(b.startsWith("files/"))c={fileName:b};else throw Error(`Unsupported string source for Gemini API: ${b}`);else if(Array.isArray(b)){if(a.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");c={inlinedRequests:b}}else c=b;let d=[c.gcsUri,c.bigqueryUri].filter(Boolean).length,e=[c.inlinedRequests,c.fileName].filter(Boolean).length;if(a.isVertexAI()){if(e>0||1!==d)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(d>0||1!==e)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return c}function ax(a){if("object"!=typeof a||null===a)return{};let b=a.inlinedResponses;if("object"!=typeof b||null===b)return a;let c=b.inlinedResponses;if(!Array.isArray(c)||0===c.length)return a;let d=!1;for(let a of c){if("object"!=typeof a||null===a)continue;let b=a.response;if("object"==typeof b&&null!==b&&void 0!==b.embedding){d=!0;break}}return d&&(a.inlinedEmbedContentResponses=a.inlinedResponses,delete a.inlinedResponses),a}function ay(a,b){if(!a.isVertexAI()){if(/batches\/[^/]+$/.test(b))return b.split("/").pop();throw Error(`Invalid batch job name: ${b}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(b))return b.split("/").pop();if(/^\d+$/.test(b))return b;throw Error(`Invalid batch job name: ${b}.`)}function az(a){if("BATCH_STATE_UNSPECIFIED"===a)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===a)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===a)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===a)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===a)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===a)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===a)return"JOB_STATE_EXPIRED";else return a}function aA(a){let b={},c=A(a,["name"]);null!=c&&z(b,["name"],c);let d=A(a,["metadata","displayName"]);null!=d&&z(b,["displayName"],d);let e=A(a,["metadata","state"]);null!=e&&z(b,["state"],az(e));let f=A(a,["metadata","createTime"]);null!=f&&z(b,["createTime"],f);let g=A(a,["metadata","endTime"]);null!=g&&z(b,["endTime"],g);let h=A(a,["metadata","updateTime"]);null!=h&&z(b,["updateTime"],h);let i=A(a,["metadata","model"]);null!=i&&z(b,["model"],i);let j=A(a,["metadata","output"]);return null!=j&&z(b,["dest"],function(a){let b={},c=A(a,["responsesFile"]);null!=c&&z(b,["fileName"],c);let d=A(a,["inlinedResponses","inlinedResponses"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e;return c={},null!=(d=A(b=a,["response"]))&&z(c,["response"],function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["content"]);null!=c&&z(b,["content"],c);let d=A(a,["citationMetadata"]);null!=d&&z(b,["citationMetadata"],function(a){let b={},c=A(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["citations"],a)}return b}(d));let e=A(a,["tokenCount"]);null!=e&&z(b,["tokenCount"],e);let f=A(a,["finishReason"]);null!=f&&z(b,["finishReason"],f);let g=A(a,["avgLogprobs"]);null!=g&&z(b,["avgLogprobs"],g);let h=A(a,["groundingMetadata"]);null!=h&&z(b,["groundingMetadata"],h);let i=A(a,["index"]);null!=i&&z(b,["index"],i);let j=A(a,["logprobsResult"]);null!=j&&z(b,["logprobsResult"],j);let k=A(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["safetyRatings"],a)}let l=A(a,["urlContextMetadata"]);return null!=l&&z(b,["urlContextMetadata"],l),b})(a))),z(b,["candidates"],a)}let e=A(a,["modelVersion"]);null!=e&&z(b,["modelVersion"],e);let f=A(a,["promptFeedback"]);null!=f&&z(b,["promptFeedback"],f);let g=A(a,["responseId"]);null!=g&&z(b,["responseId"],g);let h=A(a,["usageMetadata"]);return null!=h&&z(b,["usageMetadata"],h),b}(d)),null!=(e=A(b,["error"]))&&z(c,["error"],e),c})),z(b,["inlinedResponses"],a)}let e=A(a,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["inlinedEmbedContentResponses"],a)}return b}(ax(j))),b}function aB(a){var b,c;let d,e,f,g,h,i,j,k,l={},m=A(a,["name"]);null!=m&&z(l,["name"],m);let n=A(a,["displayName"]);null!=n&&z(l,["displayName"],n);let o=A(a,["state"]);null!=o&&z(l,["state"],az(o));let p=A(a,["error"]);null!=p&&z(l,["error"],p);let q=A(a,["createTime"]);null!=q&&z(l,["createTime"],q);let r=A(a,["startTime"]);null!=r&&z(l,["startTime"],r);let s=A(a,["endTime"]);null!=s&&z(l,["endTime"],s);let t=A(a,["updateTime"]);null!=t&&z(l,["updateTime"],t);let u=A(a,["model"]);null!=u&&z(l,["model"],u);let v=A(a,["inputConfig"]);null!=v&&z(l,["src"],(d={},null!=(e=A(c=v,["instancesFormat"]))&&z(d,["format"],e),null!=(f=A(c,["gcsSource","uris"]))&&z(d,["gcsUri"],f),null!=(g=A(c,["bigquerySource","inputUri"]))&&z(d,["bigqueryUri"],g),d));let w=A(a,["outputConfig"]);return null!=w&&z(l,["dest"],(b=ax(w),h={},null!=(i=A(b,["predictionsFormat"]))&&z(h,["format"],i),null!=(j=A(b,["gcsDestination","outputUriPrefix"]))&&z(h,["gcsUri"],j),null!=(k=A(b,["bigqueryDestination","outputUri"]))&&z(h,["bigqueryUri"],k),h)),l}function aC(a){let b={},c=A(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m;return c={},null!=(d=A(b=a,["functionCall"]))&&z(c,["functionCall"],d),null!=(e=A(b,["codeExecutionResult"]))&&z(c,["codeExecutionResult"],e),null!=(f=A(b,["executableCode"]))&&z(c,["executableCode"],f),null!=(g=A(b,["fileData"]))&&z(c,["fileData"],function(a){let b={};if(void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=A(a,["fileUri"]);null!=c&&z(b,["fileUri"],c);let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(g)),null!=(h=A(b,["functionResponse"]))&&z(c,["functionResponse"],h),null!=(i=A(b,["inlineData"]))&&z(c,["inlineData"],function(a){let b={},c=A(a,["data"]);if(null!=c&&z(b,["data"],c),void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(i)),null!=(j=A(b,["text"]))&&z(c,["text"],j),null!=(k=A(b,["thought"]))&&z(c,["thought"],k),null!=(l=A(b,["thoughtSignature"]))&&z(c,["thoughtSignature"],l),null!=(m=A(b,["videoMetadata"]))&&z(c,["videoMetadata"],m),c})),z(b,["parts"],a)}let d=A(a,["role"]);return null!=d&&z(b,["role"],d),b}function aD(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["_url","model"],Y(a,d));let e=A(b,["src"]);null!=e&&z(c,["batch","inputConfig"],function(a,b){let c={};if(void 0!==A(b,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==A(b,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==A(b,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let d=A(b,["fileName"]);null!=d&&z(c,["fileName"],d);let e=A(b,["inlinedRequests"]);if(null!=e){let b=e;Array.isArray(b)&&(b=b.map(b=>(function(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["request","model"],Y(a,d));let e=A(b,["contents"]);if(null!=e){let a=aj(e);Array.isArray(a)&&(a=a.map(a=>aC(a))),z(c,["request","contents"],a)}let f=A(b,["metadata"]);null!=f&&z(c,["metadata"],f);let g=A(b,["config"]);return null!=g&&z(c,["request","generationConfig"],function(a,b,c){let d={},e=A(b,["systemInstruction"]);void 0!==c&&null!=e&&z(c,["systemInstruction"],aC(ah(e)));let f=A(b,["temperature"]);null!=f&&z(d,["temperature"],f);let g=A(b,["topP"]);null!=g&&z(d,["topP"],g);let h=A(b,["topK"]);null!=h&&z(d,["topK"],h);let i=A(b,["candidateCount"]);null!=i&&z(d,["candidateCount"],i);let j=A(b,["maxOutputTokens"]);null!=j&&z(d,["maxOutputTokens"],j);let k=A(b,["stopSequences"]);null!=k&&z(d,["stopSequences"],k);let l=A(b,["responseLogprobs"]);null!=l&&z(d,["responseLogprobs"],l);let m=A(b,["logprobs"]);null!=m&&z(d,["logprobs"],m);let n=A(b,["presencePenalty"]);null!=n&&z(d,["presencePenalty"],n);let o=A(b,["frequencyPenalty"]);null!=o&&z(d,["frequencyPenalty"],o);let p=A(b,["seed"]);null!=p&&z(d,["seed"],p);let q=A(b,["responseMimeType"]);null!=q&&z(d,["responseMimeType"],q);let r=A(b,["responseSchema"]);null!=r&&z(d,["responseSchema"],ak(r));let s=A(b,["responseJsonSchema"]);if(null!=s&&z(d,["responseJsonSchema"],s),void 0!==A(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==A(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=A(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["category"]);if(null!=c&&z(b,["category"],c),void 0!==A(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=A(a,["threshold"]);return null!=d&&z(b,["threshold"],d),b})(a))),z(c,["safetySettings"],a)}let u=A(b,["tools"]);if(void 0!==c&&null!=u){let a=ao(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["functionDeclarations"],a)}if(void 0!==A(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=A(a,["googleSearchRetrieval"]);null!=d&&z(b,["googleSearchRetrieval"],d);let e=A(a,["googleMaps"]);null!=e&&z(b,["googleMaps"],function(a){let b={};if(void 0!==A(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=A(a,["enableWidget"]);return null!=c&&z(b,["enableWidget"],c),b}(e));let f=A(a,["computerUse"]);null!=f&&z(b,["computerUse"],f);let g=A(a,["codeExecution"]);if(null!=g&&z(b,["codeExecution"],g),void 0!==A(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=A(a,["googleSearch"]);null!=h&&z(b,["googleSearch"],function(a){let b={};if(void 0!==A(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");let c=A(a,["timeRangeFilter"]);return null!=c&&z(b,["timeRangeFilter"],c),b}(h));let i=A(a,["urlContext"]);return null!=i&&z(b,["urlContext"],i),b})(an(a)))),z(c,["tools"],a)}let v=A(b,["toolConfig"]);if(void 0!==c&&null!=v&&z(c,["toolConfig"],v),void 0!==A(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=A(b,["cachedContent"]);void 0!==c&&null!=w&&z(c,["cachedContent"],ap(a,w));let x=A(b,["responseModalities"]);null!=x&&z(d,["responseModalities"],x);let y=A(b,["mediaResolution"]);null!=y&&z(d,["mediaResolution"],y);let B=A(b,["speechConfig"]);if(null!=B&&z(d,["speechConfig"],al(B)),void 0!==A(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let C=A(b,["thinkingConfig"]);null!=C&&z(d,["thinkingConfig"],C);let D=A(b,["imageConfig"]);return null!=D&&z(d,["imageConfig"],D),d}(a,g,A(c,["request"],{}))),c})(a,b))),z(c,["requests","requests"],b)}return c}(a,aw(a,e)));let f=A(b,["config"]);return null!=f&&function(a,b){let c=A(a,["displayName"]);if(void 0!==b&&null!=c&&z(b,["batch","displayName"],c),void 0!==A(a,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(f,c),c}(ll=l9||(l9={})).PAGED_ITEM_BATCH_JOBS="batchJobs",ll.PAGED_ITEM_MODELS="models",ll.PAGED_ITEM_TUNING_JOBS="tuningJobs",ll.PAGED_ITEM_FILES="files",ll.PAGED_ITEM_CACHED_CONTENTS="cachedContents",ll.PAGED_ITEM_RAG_STORES="ragStores",ll.PAGED_ITEM_DOCUMENTS="documents";class aE{constructor(a,b,c,d){this.pageInternal=[],this.paramsInternal={},this.requestInternal=b,this.init(a,c,d)}init(a,b,c){var d,e;this.nameInternal=a,this.pageInternal=b[this.nameInternal]||[],this.sdkHttpResponseInternal=null==b?void 0:b.sdkHttpResponse,this.idxInternal=0;let f={config:{}};(f=c&&0!==Object.keys(c).length?"object"==typeof c?Object.assign({},c):c:{config:{}}).config&&(f.config.pageToken=b.nextPageToken),this.paramsInternal=f,this.pageInternalSize=null!=(e=null==(d=f.config)?void 0:d.pageSize)?e:this.pageInternal.length}initNextPage(a){this.init(this.nameInternal,a,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(a){return this.pageInternal[a]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let a=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:a,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let a=await this.requestInternal(this.params);return this.initNextPage(a),this.page}hasNextPage(){var a;return(null==(a=this.params.config)?void 0:a.pageToken)!==void 0}}class aF extends x{constructor(a){super(),this.apiClient=a,this.create=async a=>(this.apiClient.isVertexAI()&&(a.config=this.formatDestination(a.src,a.config)),this.createInternal(a)),this.createEmbeddings=async a=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(a)},this.list=async(a={})=>new aE(l9.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(a),a)}createInlinedGenerateContentRequest(a){let b=aD(this.apiClient,a),c=y("{model}:batchGenerateContent",b._url),d=b.batch.inputConfig.requests,e=d.requests,f=[];for(let a of e){let b=Object.assign({},a);if(b.systemInstruction){let a=b.systemInstruction;delete b.systemInstruction;let c=b.request;c.systemInstruction=a,b.request=c}f.push(b)}return d.requests=f,delete b.config,delete b._url,delete b._query,{path:c,body:b}}getGcsUri(a){return"string"==typeof a?a.startsWith("gs://")?a:void 0:!Array.isArray(a)&&a.gcsUri&&a.gcsUri.length>0?a.gcsUri[0]:void 0}getBigqueryUri(a){return"string"==typeof a?a.startsWith("bq://")?a:void 0:Array.isArray(a)?void 0:a.bigqueryUri}formatDestination(a,b){let c=b?Object.assign({},b):{},d=Date.now().toString();if(c.displayName||(c.displayName=`genaiBatchJob_${d}`),void 0===c.dest){let b=this.getGcsUri(a),e=this.getBigqueryUri(a);if(b)b.endsWith(".jsonl")?c.dest=`${b.slice(0,-6)}/dest`:c.dest=`${b}_dest_${d}`;else if(e)c.dest=`${e}_dest_${d}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return c}async createInternal(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI()){let d,e,i,j,k,l,m=(f=this.apiClient,d={},null!=(e=A(a,["model"]))&&z(d,["model"],Y(f,e)),null!=(i=A(a,["src"]))&&z(d,["inputConfig"],function(a){let b={},c=A(a,["format"]);null!=c&&z(b,["instancesFormat"],c);let d=A(a,["gcsUri"]);null!=d&&z(b,["gcsSource","uris"],d);let e=A(a,["bigqueryUri"]);if(null!=e&&z(b,["bigquerySource","inputUri"],e),void 0!==A(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==A(a,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return b}(aw(f,i))),null!=(j=A(a,["config"]))&&(k=A(j,["displayName"]),void 0!==d&&null!=k&&z(d,["displayName"],k),l=A(j,["dest"]),void 0!==d&&null!=l&&z(d,["outputConfig"],function(a){let b={},c=A(a,["format"]);null!=c&&z(b,["predictionsFormat"],c);let d=A(a,["gcsUri"]);null!=d&&z(b,["gcsDestination","outputUriPrefix"],d);let e=A(a,["bigqueryUri"]);if(null!=e&&z(b,["bigqueryDestination","outputUri"],e),void 0!==A(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==A(a,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==A(a,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return b}(function(a){if("string"!=typeof a)return a;if(a.startsWith("gs://"))return{format:"jsonl",gcsUri:a};if(a.startsWith("bq://"))return{format:"bigquery",bigqueryUri:a};throw Error(`Unsupported destination: ${a}`)}(l)))),d);return g=y("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>aB(a))}{let b=aD(this.apiClient,a);return g=y("{model}:batchGenerateContent",b._url),h=b._query,delete b._url,delete b._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>aA(a))}}async createEmbeddingsInternal(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let i,j,k,l,m,n,o,p,q=(d=this.apiClient,l={},null!=(m=A(a,["model"]))&&z(l,["_url","model"],Y(d,m)),null!=(n=A(a,["src"]))&&z(l,["batch","inputConfig"],(e=d,i={},null!=(j=A(f=n,["fileName"]))&&z(i,["file_name"],j),null!=(k=A(f,["inlinedRequests"]))&&z(i,["requests"],function(a,b){let c={},d=A(b,["contents"]);if(null!=d){let b=ai(a,d);Array.isArray(b)&&(b=b.map(a=>a)),z(c,["requests[]","request","content"],b)}let e=A(b,["config"]);return null!=e&&(z(c,["_self"],function(a,b){let c=A(a,["taskType"]);void 0!==b&&null!=c&&z(b,["requests[]","taskType"],c);let d=A(a,["title"]);void 0!==b&&null!=d&&z(b,["requests[]","title"],d);let e=A(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&z(b,["requests[]","outputDimensionality"],e),void 0!==A(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==A(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(e,c)),!function(a,b){for(let[c,d]of Object.entries(b)){let b=c.split("."),e=d.split("."),f=new Set,g=-1;for(let a=0;a<b.length;a++)if("*"===b[a]){g=a;break}if(-1!==g&&e.length>g)for(let a=g;a<e.length;a++){let b=e[a];"*"===b||b.endsWith("[]")||b.endsWith("[0]")||f.add(b)}!function a(b,c,d,e,f){if(e>=c.length||"object"!=typeof b||null===b)return;let g=c[e];if(g.endsWith("[]")){let h=g.slice(0,-2);if(h in b&&Array.isArray(b[h]))for(let g of b[h])a(g,c,d,e+1,f)}else if("*"===g){if("object"==typeof b&&null!==b&&!Array.isArray(b)){let a=Object.keys(b).filter(a=>!a.startsWith("_")&&!f.has(a)),c={};for(let d of a)c[d]=b[d];for(let[a,f]of Object.entries(c)){let c=[];for(let b of d.slice(e))"*"===b?c.push(a):c.push(b);z(b,c,f)}for(let c of a)delete b[c]}}else g in b&&a(b[g],c,d,e+1,f)}(a,b,e,0,f)}}(c,{"requests[].*":"requests[].request.*"})),c}(e,k)),i)),null!=(o=A(a,["config"]))&&(p=A(o,["displayName"]),void 0!==l&&null!=p&&z(l,["batch","displayName"],p)),l);return g=y("{model}:asyncBatchEmbedContent",q._url),h=q._query,delete q._url,delete q._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(q),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>aA(a))}}async get(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],ay(f,e)),d);return h=y("batchPredictionJobs/{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>aB(a))}{let b,c,f=(g=this.apiClient,b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],ay(g,c)),b);return h=y("batches/{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>aA(a))}}async cancel(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],ay(f,e)),d);h=y("batchPredictionJobs/{name}:cancel",g._url),i=g._query,delete g._url,delete g._query,await this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}else{let b,c,f=(g=this.apiClient,b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],ay(g,c)),b);h=y("batches/{name}:cancel",f._url),i=f._query,delete f._url,delete f._query,await this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal})}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h,i,j,k=(d={},null!=(e=A(a,["config"]))&&(h=A(e,["pageSize"]),void 0!==d&&null!=h&&z(d,["_query","pageSize"],h),i=A(e,["pageToken"]),void 0!==d&&null!=i&&z(d,["_query","pageToken"],i),j=A(e,["filter"]),void 0!==d&&null!=j&&z(d,["_query","filter"],j)),d);return f=y("batchPredictionJobs",k._url),g=k._query,delete k._url,delete k._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(k),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["nextPageToken"]);null!=d&&z(b,["nextPageToken"],d);let e=A(a,["batchPredictionJobs"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>aB(a))),z(b,["batchJobs"],a)}return b}(a),c=new V;return Object.assign(c,b),c})}{let b,c,h=(b={},null!=(c=A(a,["config"]))&&function(a,b){let c=A(a,["pageSize"]);void 0!==b&&null!=c&&z(b,["_query","pageSize"],c);let d=A(a,["pageToken"]);if(void 0!==b&&null!=d&&z(b,["_query","pageToken"],d),void 0!==A(a,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(c,b),b);return f=y("batches",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["nextPageToken"]);null!=d&&z(b,["nextPageToken"],d);let e=A(a,["operations"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>aA(a))),z(b,["batchJobs"],a)}return b}(a),c=new V;return Object.assign(c,b),c})}}async delete(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],ay(f,e)),d);return h=y("batchPredictionJobs/{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f;return b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),null!=(d=A(a,["name"]))&&z(b,["name"],d),null!=(e=A(a,["done"]))&&z(b,["done"],e),null!=(f=A(a,["error"]))&&z(b,["error"],f),b})}{let b,c,f=(g=this.apiClient,b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],ay(g,c)),b);return h=y("batches/{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f;return b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),null!=(d=A(a,["name"]))&&z(b,["name"],d),null!=(e=A(a,["done"]))&&z(b,["done"],e),null!=(f=A(a,["error"]))&&z(b,["error"],f),b})}}}function aG(a){let b={},c=A(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m;return c={},null!=(d=A(b=a,["functionCall"]))&&z(c,["functionCall"],d),null!=(e=A(b,["codeExecutionResult"]))&&z(c,["codeExecutionResult"],e),null!=(f=A(b,["executableCode"]))&&z(c,["executableCode"],f),null!=(g=A(b,["fileData"]))&&z(c,["fileData"],function(a){let b={};if(void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=A(a,["fileUri"]);null!=c&&z(b,["fileUri"],c);let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(g)),null!=(h=A(b,["functionResponse"]))&&z(c,["functionResponse"],h),null!=(i=A(b,["inlineData"]))&&z(c,["inlineData"],function(a){let b={},c=A(a,["data"]);if(null!=c&&z(b,["data"],c),void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(i)),null!=(j=A(b,["text"]))&&z(c,["text"],j),null!=(k=A(b,["thought"]))&&z(c,["thought"],k),null!=(l=A(b,["thoughtSignature"]))&&z(c,["thoughtSignature"],l),null!=(m=A(b,["videoMetadata"]))&&z(c,["videoMetadata"],m),c})),z(b,["parts"],a)}let d=A(a,["role"]);return null!=d&&z(b,["role"],d),b}class aH extends x{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new aE(l9.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(a),a)}async create(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j=(f=this.apiClient,d={},null!=(e=A(a,["model"]))&&z(d,["model"],Z(f,e)),null!=(g=A(a,["config"]))&&function(a,b){let c=A(a,["ttl"]);void 0!==b&&null!=c&&z(b,["ttl"],c);let d=A(a,["expireTime"]);void 0!==b&&null!=d&&z(b,["expireTime"],d);let e=A(a,["displayName"]);void 0!==b&&null!=e&&z(b,["displayName"],e);let f=A(a,["contents"]);if(void 0!==b&&null!=f){let a=aj(f);Array.isArray(a)&&(a=a.map(a=>a)),z(b,["contents"],a)}let g=A(a,["systemInstruction"]);void 0!==b&&null!=g&&z(b,["systemInstruction"],ah(g));let h=A(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==A(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=A(a,["description"]);null!=c&&z(b,["description"],c);let d=A(a,["name"]);null!=d&&z(b,["name"],d);let e=A(a,["parameters"]);null!=e&&z(b,["parameters"],e);let f=A(a,["parametersJsonSchema"]);null!=f&&z(b,["parametersJsonSchema"],f);let g=A(a,["response"]);null!=g&&z(b,["response"],g);let h=A(a,["responseJsonSchema"]);return null!=h&&z(b,["responseJsonSchema"],h),b})(a))),z(b,["functionDeclarations"],a)}let d=A(a,["retrieval"]);null!=d&&z(b,["retrieval"],d);let e=A(a,["googleSearchRetrieval"]);null!=e&&z(b,["googleSearchRetrieval"],e);let f=A(a,["googleMaps"]);null!=f&&z(b,["googleMaps"],f);let g=A(a,["computerUse"]);null!=g&&z(b,["computerUse"],g);let h=A(a,["codeExecution"]);null!=h&&z(b,["codeExecution"],h);let i=A(a,["enterpriseWebSearch"]);null!=i&&z(b,["enterpriseWebSearch"],i);let j=A(a,["googleSearch"]);null!=j&&z(b,["googleSearch"],j);let k=A(a,["urlContext"]);return null!=k&&z(b,["urlContext"],k),b})(a))),z(b,["tools"],a)}let i=A(a,["toolConfig"]);void 0!==b&&null!=i&&z(b,["toolConfig"],i);let j=A(a,["kmsKeyName"]);void 0!==b&&null!=j&&z(b,["encryption_spec","kmsKeyName"],j)}(g,d),d);return h=y("cachedContents",j._url),i=j._query,delete j._url,delete j._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(j),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b,c,f,j=(g=this.apiClient,b={},null!=(c=A(a,["model"]))&&z(b,["model"],Z(g,c)),null!=(f=A(a,["config"]))&&function(a,b){let c=A(a,["ttl"]);void 0!==b&&null!=c&&z(b,["ttl"],c);let d=A(a,["expireTime"]);void 0!==b&&null!=d&&z(b,["expireTime"],d);let e=A(a,["displayName"]);void 0!==b&&null!=e&&z(b,["displayName"],e);let f=A(a,["contents"]);if(void 0!==b&&null!=f){let a=aj(f);Array.isArray(a)&&(a=a.map(a=>aG(a))),z(b,["contents"],a)}let g=A(a,["systemInstruction"]);void 0!==b&&null!=g&&z(b,["systemInstruction"],aG(ah(g)));let h=A(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["functionDeclarations"],a)}if(void 0!==A(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=A(a,["googleSearchRetrieval"]);null!=d&&z(b,["googleSearchRetrieval"],d);let e=A(a,["googleMaps"]);null!=e&&z(b,["googleMaps"],function(a){let b={};if(void 0!==A(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=A(a,["enableWidget"]);return null!=c&&z(b,["enableWidget"],c),b}(e));let f=A(a,["computerUse"]);null!=f&&z(b,["computerUse"],f);let g=A(a,["codeExecution"]);if(null!=g&&z(b,["codeExecution"],g),void 0!==A(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=A(a,["googleSearch"]);null!=h&&z(b,["googleSearch"],function(a){let b={};if(void 0!==A(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");let c=A(a,["timeRangeFilter"]);return null!=c&&z(b,["timeRangeFilter"],c),b}(h));let i=A(a,["urlContext"]);return null!=i&&z(b,["urlContext"],i),b})(a))),z(b,["tools"],a)}let i=A(a,["toolConfig"]);if(void 0!==b&&null!=i&&z(b,["toolConfig"],i),void 0!==A(a,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(f,b),b);return h=y("cachedContents",j._url),i=j._query,delete j._url,delete j._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(j),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],ap(f,e)),d);return h=y("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b,c,f=(g=this.apiClient,b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],ap(g,c)),b);return h=y("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],ap(f,e)),d);return h=y("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),b),e=new Q;return Object.assign(e,d),e})}{let b,c,f=(g=this.apiClient,b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],ap(g,c)),b);return h=y("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),b),e=new Q;return Object.assign(e,d),e})}}async update(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l=(f=this.apiClient,d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],ap(f,e)),null!=(g=A(a,["config"]))&&(j=A(g,["ttl"]),void 0!==d&&null!=j&&z(d,["ttl"],j),k=A(g,["expireTime"]),void 0!==d&&null!=k&&z(d,["expireTime"],k)),d);return h=y("{name}",l._url),i=l._query,delete l._url,delete l._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b,c,f,j,k,l=(g=this.apiClient,b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],ap(g,c)),null!=(f=A(a,["config"]))&&(j=A(f,["ttl"]),void 0!==b&&null!=j&&z(b,["ttl"],j),k=A(f,["expireTime"]),void 0!==b&&null!=k&&z(b,["expireTime"],k)),b);return h=y("{name}",l._url),i=l._query,delete l._url,delete l._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h,i,j=(d={},null!=(e=A(a,["config"]))&&(h=A(e,["pageSize"]),void 0!==d&&null!=h&&z(d,["_query","pageSize"],h),i=A(e,["pageToken"]),void 0!==d&&null!=i&&z(d,["_query","pageToken"],i)),d);return f=y("cachedContents",j._url),g=j._query,delete j._url,delete j._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(j),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["nextPageToken"]);null!=d&&z(b,["nextPageToken"],d);let e=A(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["cachedContents"],a)}return b}(a),c=new R;return Object.assign(c,b),c})}{let b,c,h,i,j=(b={},null!=(c=A(a,["config"]))&&(h=A(c,["pageSize"]),void 0!==b&&null!=h&&z(b,["_query","pageSize"],h),i=A(c,["pageToken"]),void 0!==b&&null!=i&&z(b,["_query","pageToken"],i)),b);return f=y("cachedContents",j._url),g=j._query,delete j._url,delete j._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(j),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["nextPageToken"]);null!=d&&z(b,["nextPageToken"],d);let e=A(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["cachedContents"],a)}return b}(a),c=new R;return Object.assign(c,b),c})}}}function aI(a){return this instanceof aI?(this.v=a,this):new aI(a)}function aJ(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof aI?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function aK(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function aL(a){if(void 0===a.parts||0===a.parts.length)return!1;for(let b of a.parts)if(void 0===b||0===Object.keys(b).length)return!1;return!0}function aM(a){if(void 0===a||0===a.length)return[];let b=[],c=a.length,d=0;for(;d<c;)if("user"===a[d].role)b.push(a[d]),d++;else{let e=[],f=!0;for(;d<c&&"model"===a[d].role;)e.push(a[d]),f&&!aL(a[d])&&(f=!1),d++;f?b.push(...e):b.pop()}return b}"function"==typeof SuppressedError&&SuppressedError;class aN{constructor(a,b){this.modelsModule=a,this.apiClient=b}create(a){return new aO(this.apiClient,this.modelsModule,a.model,a.config,structuredClone(a.history))}}class aO{constructor(a,b,c,d={},e=[]){this.apiClient=a,this.modelsModule=b,this.model=c,this.config=d,this.history=e,this.sendPromise=Promise.resolve(),function(a){if(0!==a.length){for(let b of a)if("user"!==b.role&&"model"!==b.role)throw Error(`Role must be user or model, but got ${b.role}.`)}}(e)}async sendMessage(a){var b;await this.sendPromise;let c=ah(a.message),d=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});return this.sendPromise=(async()=>{var a,b,e;let f=await d,g=null==(b=null==(a=f.candidates)?void 0:a[0])?void 0:b.content,h=f.automaticFunctionCallingHistory,i=this.getHistory(!0).length,j=[];null!=h&&(j=null!=(e=h.slice(i))?e:[]),this.recordHistory(c,g?[g]:[],j)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),d}async sendMessageStream(a){var b;await this.sendPromise;let c=ah(a.message),d=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});this.sendPromise=d.then(()=>void 0).catch(()=>void 0);let e=await d;return this.processStreamResponse(e,c)}getHistory(a=!1){return structuredClone(a?aM(this.history):this.history)}processStreamResponse(a,b){var c,d;return aJ(this,arguments,function*(){var e,f,g,h;let i=[];try{for(var j,k=!0,l=aK(a);!(e=(j=yield aI(l.next())).done);k=!0){if(h=j.value,k=!1,function(a){var b;if(void 0==a.candidates||0===a.candidates.length)return!1;let c=null==(b=a.candidates[0])?void 0:b.content;return void 0!==c&&aL(c)}(h)){let a=null==(d=null==(c=h.candidates)?void 0:c[0])?void 0:d.content;void 0!==a&&i.push(a)}yield yield aI(h)}}catch(a){f={error:a}}finally{try{!k&&!e&&(g=l.return)&&(yield aI(g.call(l)))}finally{if(f)throw f.error}}this.recordHistory(b,i)})}recordHistory(a,b,c){let d=[];b.length>0&&b.every(a=>void 0!==a.role)?d=b:d.push({role:"model",parts:[]}),c&&c.length>0?this.history.push(...aM(c)):this.history.push(a),this.history.push(...d)}}class aP extends Error{constructor(a){super(a.message),this.name="ApiError",this.status=a.status,Object.setPrototypeOf(this,aP.prototype)}}class aQ extends x{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new aE(l9.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(a),a)}async upload(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(a.file,a.config).then(a=>a)}async download(a){await this.apiClient.downloadFile(a)}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j=(f={},null!=(g=A(a,["config"]))&&(h=A(g,["pageSize"]),void 0!==f&&null!=h&&z(f,["_query","pageSize"],h),i=A(g,["pageToken"]),void 0!==f&&null!=i&&z(f,["_query","pageToken"],i)),f);return d=y("files",j._url),e=j._query,delete j._url,delete j._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(j),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["nextPageToken"]);null!=d&&z(b,["nextPageToken"],d);let e=A(a,["files"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["files"],a)}return b}(a),c=new S;return Object.assign(c,b),c})}}async createInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=A(a,["file"]))&&z(f,["file"],g),f);return d=y("upload/v1beta/files",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b,c,d=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),b),e=new T;return Object.assign(e,d),e})}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=A(a,["name"]))&&z(f,["_url","file"],at(g)),f);return d=y("files/{file}",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=A(a,["name"]))&&z(f,["_url","file"],at(g)),f);return d=y("files/{file}",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),b),e=new U;return Object.assign(e,d),e})}}}function aR(a){let b={},c=A(a,["data"]);if(null!=c&&z(b,["data"],c),void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}function aS(a){let b={},c=A(a,["languageCode"]);null!=c&&z(b,["languageCode"],c);let d=A(a,["voiceConfig"]);if(null!=d&&z(b,["voiceConfig"],d),void 0!==A(a,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return b}function aT(a){let b={},c=A(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m;return c={},null!=(d=A(b=a,["functionCall"]))&&z(c,["functionCall"],d),null!=(e=A(b,["codeExecutionResult"]))&&z(c,["codeExecutionResult"],e),null!=(f=A(b,["executableCode"]))&&z(c,["executableCode"],f),null!=(g=A(b,["fileData"]))&&z(c,["fileData"],function(a){let b={};if(void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=A(a,["fileUri"]);null!=c&&z(b,["fileUri"],c);let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(g)),null!=(h=A(b,["functionResponse"]))&&z(c,["functionResponse"],h),null!=(i=A(b,["inlineData"]))&&z(c,["inlineData"],function(a){let b={},c=A(a,["data"]);if(null!=c&&z(b,["data"],c),void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(i)),null!=(j=A(b,["text"]))&&z(c,["text"],j),null!=(k=A(b,["thought"]))&&z(c,["thought"],k),null!=(l=A(b,["thoughtSignature"]))&&z(c,["thoughtSignature"],l),null!=(m=A(b,["videoMetadata"]))&&z(c,["videoMetadata"],m),c})),z(b,["parts"],a)}let d=A(a,["role"]);return null!=d&&z(b,["role"],d),b}function aU(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["_url","model"],Y(a,d));let e=A(b,["contents"]);if(null!=e){let a=aj(e);Array.isArray(a)&&(a=a.map(a=>aT(a))),z(c,["contents"],a)}let f=A(b,["config"]);return null!=f&&z(c,["generationConfig"],function(a,b,c){let d={},e=A(b,["systemInstruction"]);void 0!==c&&null!=e&&z(c,["systemInstruction"],aT(ah(e)));let f=A(b,["temperature"]);null!=f&&z(d,["temperature"],f);let g=A(b,["topP"]);null!=g&&z(d,["topP"],g);let h=A(b,["topK"]);null!=h&&z(d,["topK"],h);let i=A(b,["candidateCount"]);null!=i&&z(d,["candidateCount"],i);let j=A(b,["maxOutputTokens"]);null!=j&&z(d,["maxOutputTokens"],j);let k=A(b,["stopSequences"]);null!=k&&z(d,["stopSequences"],k);let l=A(b,["responseLogprobs"]);null!=l&&z(d,["responseLogprobs"],l);let m=A(b,["logprobs"]);null!=m&&z(d,["logprobs"],m);let n=A(b,["presencePenalty"]);null!=n&&z(d,["presencePenalty"],n);let o=A(b,["frequencyPenalty"]);null!=o&&z(d,["frequencyPenalty"],o);let p=A(b,["seed"]);null!=p&&z(d,["seed"],p);let q=A(b,["responseMimeType"]);null!=q&&z(d,["responseMimeType"],q);let r=A(b,["responseSchema"]);null!=r&&z(d,["responseSchema"],ak(r));let s=A(b,["responseJsonSchema"]);if(null!=s&&z(d,["responseJsonSchema"],s),void 0!==A(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==A(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=A(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["category"]);if(null!=c&&z(b,["category"],c),void 0!==A(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=A(a,["threshold"]);return null!=d&&z(b,["threshold"],d),b})(a))),z(c,["safetySettings"],a)}let u=A(b,["tools"]);if(void 0!==c&&null!=u){let a=ao(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["functionDeclarations"],a)}if(void 0!==A(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=A(a,["googleSearchRetrieval"]);null!=d&&z(b,["googleSearchRetrieval"],d);let e=A(a,["googleMaps"]);null!=e&&z(b,["googleMaps"],function(a){let b={};if(void 0!==A(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=A(a,["enableWidget"]);return null!=c&&z(b,["enableWidget"],c),b}(e));let f=A(a,["computerUse"]);null!=f&&z(b,["computerUse"],f);let g=A(a,["codeExecution"]);if(null!=g&&z(b,["codeExecution"],g),void 0!==A(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=A(a,["googleSearch"]);null!=h&&z(b,["googleSearch"],function(a){let b={};if(void 0!==A(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");let c=A(a,["timeRangeFilter"]);return null!=c&&z(b,["timeRangeFilter"],c),b}(h));let i=A(a,["urlContext"]);return null!=i&&z(b,["urlContext"],i),b})(an(a)))),z(c,["tools"],a)}let v=A(b,["toolConfig"]);if(void 0!==c&&null!=v&&z(c,["toolConfig"],v),void 0!==A(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=A(b,["cachedContent"]);void 0!==c&&null!=w&&z(c,["cachedContent"],ap(a,w));let x=A(b,["responseModalities"]);null!=x&&z(d,["responseModalities"],x);let y=A(b,["mediaResolution"]);null!=y&&z(d,["mediaResolution"],y);let B=A(b,["speechConfig"]);if(null!=B&&z(d,["speechConfig"],al(B)),void 0!==A(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let C=A(b,["thinkingConfig"]);null!=C&&z(d,["thinkingConfig"],C);let D=A(b,["imageConfig"]);return null!=D&&z(d,["imageConfig"],D),d}(a,f,c)),c}function aV(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["_url","model"],Y(a,d));let e=A(b,["contents"]);if(null!=e){let a=aj(e);Array.isArray(a)&&(a=a.map(a=>a)),z(c,["contents"],a)}let f=A(b,["config"]);return null!=f&&z(c,["generationConfig"],function(a,b,c){let d={},e=A(b,["systemInstruction"]);void 0!==c&&null!=e&&z(c,["systemInstruction"],ah(e));let f=A(b,["temperature"]);null!=f&&z(d,["temperature"],f);let g=A(b,["topP"]);null!=g&&z(d,["topP"],g);let h=A(b,["topK"]);null!=h&&z(d,["topK"],h);let i=A(b,["candidateCount"]);null!=i&&z(d,["candidateCount"],i);let j=A(b,["maxOutputTokens"]);null!=j&&z(d,["maxOutputTokens"],j);let k=A(b,["stopSequences"]);null!=k&&z(d,["stopSequences"],k);let l=A(b,["responseLogprobs"]);null!=l&&z(d,["responseLogprobs"],l);let m=A(b,["logprobs"]);null!=m&&z(d,["logprobs"],m);let n=A(b,["presencePenalty"]);null!=n&&z(d,["presencePenalty"],n);let o=A(b,["frequencyPenalty"]);null!=o&&z(d,["frequencyPenalty"],o);let p=A(b,["seed"]);null!=p&&z(d,["seed"],p);let q=A(b,["responseMimeType"]);null!=q&&z(d,["responseMimeType"],q);let r=A(b,["responseSchema"]);null!=r&&z(d,["responseSchema"],ak(r));let s=A(b,["responseJsonSchema"]);null!=s&&z(d,["responseJsonSchema"],s);let t=A(b,["routingConfig"]);null!=t&&z(d,["routingConfig"],t);let u=A(b,["modelSelectionConfig"]);null!=u&&z(d,["modelConfig"],u);let v=A(b,["safetySettings"]);if(void 0!==c&&null!=v){let a=v;Array.isArray(a)&&(a=a.map(a=>a)),z(c,["safetySettings"],a)}let w=A(b,["tools"]);if(void 0!==c&&null!=w){let a=ao(w);Array.isArray(a)&&(a=a.map(a=>a5(an(a)))),z(c,["tools"],a)}let x=A(b,["toolConfig"]);void 0!==c&&null!=x&&z(c,["toolConfig"],x);let y=A(b,["labels"]);void 0!==c&&null!=y&&z(c,["labels"],y);let B=A(b,["cachedContent"]);void 0!==c&&null!=B&&z(c,["cachedContent"],ap(a,B));let C=A(b,["responseModalities"]);null!=C&&z(d,["responseModalities"],C);let D=A(b,["mediaResolution"]);null!=D&&z(d,["mediaResolution"],D);let E=A(b,["speechConfig"]);null!=E&&z(d,["speechConfig"],a4(al(E)));let F=A(b,["audioTimestamp"]);null!=F&&z(d,["audioTimestamp"],F);let G=A(b,["thinkingConfig"]);null!=G&&z(d,["thinkingConfig"],G);let H=A(b,["imageConfig"]);return null!=H&&z(d,["imageConfig"],H),d}(a,f,c)),c}function aW(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["content"]);null!=c&&z(b,["content"],c);let d=A(a,["citationMetadata"]);null!=d&&z(b,["citationMetadata"],function(a){let b={},c=A(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["citations"],a)}return b}(d));let e=A(a,["tokenCount"]);null!=e&&z(b,["tokenCount"],e);let f=A(a,["finishReason"]);null!=f&&z(b,["finishReason"],f);let g=A(a,["avgLogprobs"]);null!=g&&z(b,["avgLogprobs"],g);let h=A(a,["groundingMetadata"]);null!=h&&z(b,["groundingMetadata"],h);let i=A(a,["index"]);null!=i&&z(b,["index"],i);let j=A(a,["logprobsResult"]);null!=j&&z(b,["logprobsResult"],j);let k=A(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["safetyRatings"],a)}let l=A(a,["urlContextMetadata"]);return null!=l&&z(b,["urlContextMetadata"],l),b})(a))),z(b,["candidates"],a)}let e=A(a,["modelVersion"]);null!=e&&z(b,["modelVersion"],e);let f=A(a,["promptFeedback"]);null!=f&&z(b,["promptFeedback"],f);let g=A(a,["responseId"]);null!=g&&z(b,["responseId"],g);let h=A(a,["usageMetadata"]);return null!=h&&z(b,["usageMetadata"],h),b}function aX(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["candidates"],a)}let e=A(a,["createTime"]);null!=e&&z(b,["createTime"],e);let f=A(a,["modelVersion"]);null!=f&&z(b,["modelVersion"],f);let g=A(a,["promptFeedback"]);null!=g&&z(b,["promptFeedback"],g);let h=A(a,["responseId"]);null!=h&&z(b,["responseId"],h);let i=A(a,["usageMetadata"]);return null!=i&&z(b,["usageMetadata"],i),b}function aY(a){let b={},c=A(a,["_self"]);null!=c&&z(b,["image"],aZ(c));let d=A(a,["raiFilteredReason"]);null!=d&&z(b,["raiFilteredReason"],d);let e=A(a,["_self"]);null!=e&&z(b,["safetyAttributes"],a3(e));let f=A(a,["prompt"]);return null!=f&&z(b,["enhancedPrompt"],f),b}function aZ(a){let b={},c=A(a,["gcsUri"]);null!=c&&z(b,["gcsUri"],c);let d=A(a,["bytesBase64Encoded"]);null!=d&&z(b,["imageBytes"],B(d));let e=A(a,["mimeType"]);return null!=e&&z(b,["mimeType"],e),b}function a$(a){let b={};if(void 0!==A(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let c=A(a,["imageBytes"]);null!=c&&z(b,["bytesBase64Encoded"],B(c));let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}function a_(a){let b={},c=A(a,["gcsUri"]);null!=c&&z(b,["gcsUri"],c);let d=A(a,["imageBytes"]);null!=d&&z(b,["bytesBase64Encoded"],B(d));let e=A(a,["mimeType"]);return null!=e&&z(b,["mimeType"],e),b}function a0(a){var b;let c,d,e,f,g={},h=A(a,["name"]);null!=h&&z(g,["name"],h);let i=A(a,["displayName"]);null!=i&&z(g,["displayName"],i);let j=A(a,["description"]);null!=j&&z(g,["description"],j);let k=A(a,["version"]);null!=k&&z(g,["version"],k);let l=A(a,["_self"]);null!=l&&z(g,["tunedModelInfo"],(c={},null!=(d=A(b=l,["baseModel"]))&&z(c,["baseModel"],d),null!=(e=A(b,["createTime"]))&&z(c,["createTime"],e),null!=(f=A(b,["updateTime"]))&&z(c,["updateTime"],f),c));let m=A(a,["inputTokenLimit"]);null!=m&&z(g,["inputTokenLimit"],m);let n=A(a,["outputTokenLimit"]);null!=n&&z(g,["outputTokenLimit"],n);let o=A(a,["supportedGenerationMethods"]);return null!=o&&z(g,["supportedActions"],o),g}function a1(a){var b;let c,d,e,f,g={},h=A(a,["name"]);null!=h&&z(g,["name"],h);let i=A(a,["displayName"]);null!=i&&z(g,["displayName"],i);let j=A(a,["description"]);null!=j&&z(g,["description"],j);let k=A(a,["versionId"]);null!=k&&z(g,["version"],k);let l=A(a,["deployedModels"]);if(null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>{let b,c,d;return b={},null!=(c=A(a,["endpoint"]))&&z(b,["name"],c),null!=(d=A(a,["deployedModelId"]))&&z(b,["deployedModelId"],d),b})),z(g,["endpoints"],a)}let m=A(a,["labels"]);null!=m&&z(g,["labels"],m);let n=A(a,["_self"]);null!=n&&z(g,["tunedModelInfo"],(c={},null!=(d=A(b=n,["labels","google-vertex-llm-tuning-base-model-id"]))&&z(c,["baseModel"],d),null!=(e=A(b,["createTime"]))&&z(c,["createTime"],e),null!=(f=A(b,["updateTime"]))&&z(c,["updateTime"],f),c));let o=A(a,["defaultCheckpointId"]);null!=o&&z(g,["defaultCheckpointId"],o);let p=A(a,["checkpoints"]);if(null!=p){let a=p;Array.isArray(a)&&(a=a.map(a=>a)),z(g,["checkpoints"],a)}return g}function a2(a){let b={},c=A(a,["safetyAttributes","categories"]);null!=c&&z(b,["categories"],c);let d=A(a,["safetyAttributes","scores"]);null!=d&&z(b,["scores"],d);let e=A(a,["contentType"]);return null!=e&&z(b,["contentType"],e),b}function a3(a){let b={},c=A(a,["safetyAttributes","categories"]);null!=c&&z(b,["categories"],c);let d=A(a,["safetyAttributes","scores"]);null!=d&&z(b,["scores"],d);let e=A(a,["contentType"]);return null!=e&&z(b,["contentType"],e),b}function a4(a){let b={},c=A(a,["languageCode"]);null!=c&&z(b,["languageCode"],c);let d=A(a,["voiceConfig"]);if(null!=d&&z(b,["voiceConfig"],d),void 0!==A(a,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return b}function a5(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==A(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=A(a,["description"]);null!=c&&z(b,["description"],c);let d=A(a,["name"]);null!=d&&z(b,["name"],d);let e=A(a,["parameters"]);null!=e&&z(b,["parameters"],e);let f=A(a,["parametersJsonSchema"]);null!=f&&z(b,["parametersJsonSchema"],f);let g=A(a,["response"]);null!=g&&z(b,["response"],g);let h=A(a,["responseJsonSchema"]);return null!=h&&z(b,["responseJsonSchema"],h),b})(a))),z(b,["functionDeclarations"],a)}let d=A(a,["retrieval"]);null!=d&&z(b,["retrieval"],d);let e=A(a,["googleSearchRetrieval"]);null!=e&&z(b,["googleSearchRetrieval"],e);let f=A(a,["googleMaps"]);null!=f&&z(b,["googleMaps"],f);let g=A(a,["computerUse"]);null!=g&&z(b,["computerUse"],g);let h=A(a,["codeExecution"]);null!=h&&z(b,["codeExecution"],h);let i=A(a,["enterpriseWebSearch"]);null!=i&&z(b,["enterpriseWebSearch"],i);let j=A(a,["googleSearch"]);null!=j&&z(b,["googleSearch"],j);let k=A(a,["urlContext"]);return null!=k&&z(b,["urlContext"],k),b}function a6(a){let b={},c=A(a,["uri"]);null!=c&&z(b,["uri"],c);let d=A(a,["videoBytes"]);null!=d&&z(b,["encodedVideo"],B(d));let e=A(a,["mimeType"]);return null!=e&&z(b,["encoding"],e),b}function a7(a){let b={},c=A(a,["uri"]);null!=c&&z(b,["gcsUri"],c);let d=A(a,["videoBytes"]);null!=d&&z(b,["bytesBase64Encoded"],B(d));let e=A(a,["mimeType"]);return null!=e&&z(b,["mimeType"],e),b}let a8="x-goog-api-client",a9=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ba{constructor(a){var b,c;this.clientOptions=Object.assign(Object.assign({},a),{project:a.project,location:a.location,apiKey:a.apiKey,vertexai:a.vertexai});const d={};this.clientOptions.vertexai?(d.apiVersion=null!=(b=this.clientOptions.apiVersion)?b:"v1beta1",d.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(d.apiVersion=null!=(c=this.clientOptions.apiVersion)?c:"v1beta",d.baseUrl="https://generativelanguage.googleapis.com/"),d.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=d,a.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(d,a.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var a;return null!=(a=this.clientOptions.vertexai)&&a}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(a){if(!a||void 0===a.baseUrl||void 0===a.apiVersion)throw Error("HTTP options are not correctly set.");let b=[a.baseUrl.endsWith("/")?a.baseUrl.slice(0,-1):a.baseUrl];return a.apiVersion&&""!==a.apiVersion&&b.push(a.apiVersion),b.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let a=new URL(this.getBaseUrl());return a.protocol="http:"==a.protocol?"ws":"wss",a.toString()}setBaseUrl(a){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=a;else throw Error("HTTP options are not correctly set.")}constructUrl(a,b,c){let d=[this.getRequestUrlInternal(b)];return c&&d.push(this.getBaseResourcePath()),""!==a&&d.push(a),new URL(`${d.join("/")}`)}shouldPrependVertexProjectPath(a){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||a.path.startsWith("projects/")||"GET"===a.httpMethod&&a.path.startsWith("publishers/google/models"))}async request(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);if(a.queryParams)for(let[b,c]of Object.entries(a.queryParams))d.searchParams.append(b,String(c));let e={};if("GET"===a.httpMethod){if(a.body&&"{}"!==a.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else e.body=a.body;return e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.unaryApiCall(d,e,a.httpMethod)}patchHttpOptions(a,b){let c=JSON.parse(JSON.stringify(a));for(let[a,d]of Object.entries(b))"object"==typeof d?c[a]=Object.assign(Object.assign({},c[a]),d):void 0!==d&&(c[a]=d);return c}async requestStream(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);d.searchParams.has("alt")&&"sse"===d.searchParams.get("alt")||d.searchParams.set("alt","sse");let e={};return e.body=a.body,e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.streamApiCall(d,e,a.httpMethod)}async includeExtraHttpOptionsToRequestInit(a,b,c,d){if(b&&b.timeout||d){let c=new AbortController,e=c.signal;if(b.timeout&&(null==b?void 0:b.timeout)>0){let a=setTimeout(()=>c.abort(),b.timeout);a&&"function"==typeof a.unref&&a.unref()}d&&d.addEventListener("abort",()=>{c.abort()}),a.signal=e}return b&&null!==b.extraBody&&function(a,b){if(!b||0===Object.keys(b).length)return;if(a.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let c={};if("string"==typeof a.body&&a.body.length>0)try{let b=JSON.parse(a.body);if("object"!=typeof b||null===b||Array.isArray(b))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");c=b}catch(a){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}a.body=JSON.stringify(function a(b,c){let d=Object.assign({},b);for(let b in c)if(Object.prototype.hasOwnProperty.call(c,b)){let e=c[b],f=d[b];e&&"object"==typeof e&&!Array.isArray(e)&&f&&"object"==typeof f&&!Array.isArray(f)?d[b]=a(f,e):(f&&e&&typeof f!=typeof e&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${b}". Original type: ${typeof f}, New type: ${typeof e}. Overwriting.`),d[b]=e)}return d}(c,b))}(a,b.extraBody),a.headers=await this.getHeadersInternal(b,c),a}async unaryApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await bb(a),new C(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}async streamApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await bb(a),this.processStreamResponse(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}processStreamResponse(a){var b;return aJ(this,arguments,function*(){let c=null==(b=null==a?void 0:a.body)?void 0:b.getReader(),d=new TextDecoder("utf-8");if(!c)throw Error("Response body is empty");try{let b="";for(;;){let{done:e,value:f}=yield aI(c.read());if(e){if(b.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let g=d.decode(f,{stream:!0});try{let a=JSON.parse(g);if("error"in a){let b=JSON.parse(JSON.stringify(a.error)),c=b.status,d=b.code,e=`got status: ${c}. ${JSON.stringify(a)}`;if(d>=400&&d<600)throw new aP({message:e,status:d})}}catch(a){if("ApiError"===a.name)throw a}let h=(b+=g).match(a9);for(;h;){let c=h[1];try{let d=new Response(c,{headers:null==a?void 0:a.headers,status:null==a?void 0:a.status,statusText:null==a?void 0:a.statusText});yield yield aI(new C(d)),h=(b=b.slice(h[0].length)).match(a9)}catch(a){throw Error(`exception parsing stream chunk ${c}. ${a}`)}}}}finally{c.releaseLock()}})}async apiCall(a,b){return fetch(a,b).catch(a=>{throw Error(`exception ${a} sending request`)})}getDefaultHeaders(){let a={},b="google-genai-sdk/1.28.0 "+this.clientOptions.userAgentExtra;return a["User-Agent"]=b,a[a8]=b,a["Content-Type"]="application/json",a}async getHeadersInternal(a,b){let c=new Headers;if(a&&a.headers){for(let[b,d]of Object.entries(a.headers))c.append(b,d);a.timeout&&a.timeout>0&&c.append("X-Server-Timeout",String(Math.ceil(a.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(c,b),c}async uploadFile(a,b){var c,d;let e={};null!=b&&(e.mimeType=b.mimeType,e.name=b.name,e.displayName=b.displayName),e.name&&!e.name.startsWith("files/")&&(e.name=`files/${e.name}`);let f=this.clientOptions.uploader,g=await f.stat(a);e.sizeBytes=String(g.size);let h=null!=(c=null==b?void 0:b.mimeType)?c:g.type;if(void 0===h||""===h)throw Error("Can not determine mimeType. Please provide mimeType in the config.");e.mimeType=h;let i="";"string"==typeof a&&(i=null!=(d=(i=a.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?d:"");let j=await this.fetchUploadUrl(e,i,b);return f.upload(a,j,this)}async downloadFile(a){let b=this.clientOptions.downloader;await b.download(a,this)}async fetchUploadUrl(a,b,c){var d;let e={};e=(null==c?void 0:c.httpOptions)?c.httpOptions:{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${a.mimeType}`},b?{"X-Goog-Upload-File-Name":b}:{})};let f={file:a},g=await this.request({path:y("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:e});if(!g||!(null==g?void 0:g.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let h=null==(d=null==g?void 0:g.headers)?void 0:d["x-goog-upload-url"];if(void 0===h)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function bb(a){var b;if(void 0===a)throw Error("response is undefined");if(!a.ok){let c=a.status,d=JSON.stringify((null==(b=a.headers.get("content-type"))?void 0:b.includes("application/json"))?await a.json():{error:{message:await a.text(),code:a.status,status:a.statusText}});if(c>=400&&c<600)throw new aP({message:d,status:c});throw Error(d)}}function bc(a){for(let c of a){var b;if(null!==(b=c)&&"object"==typeof b&&b instanceof be||"object"==typeof c&&"inputSchema"in c)return!0}return!1}function bd(a){var b;let c=null!=(b=a[a8])?b:"";a[a8]=(c+" mcp_used/unknown").trimStart()}class be{constructor(a=[],b){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=a,this.config=b}static create(a,b){return new be(a,b)}async initialize(){var a,b,c,d;if(this.mcpTools.length>0)return;let e={},f=[];for(let j of this.mcpClients)try{for(var g,h=!0,i=(b=void 0,aK(function(a,b=100){return aJ(this,arguments,function*(){let c,d=0;for(;d<b;){let b=yield aI(a.listTools({cursor:c}));for(let a of b.tools)yield yield aI(a),d++;if(!b.nextCursor)break;c=b.nextCursor}})}(j)));!(a=(g=await i.next()).done);h=!0){d=g.value,h=!1,f.push(d);let a=d.name;if(e[a])throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);e[a]=j}}catch(a){b={error:a}}finally{try{!h&&!a&&(c=i.return)&&await c.call(i)}finally{if(b)throw b.error}}this.mcpTools=f,this.functionNameToMcpClient=e}async tool(){return await this.initialize(),function(a,b={}){let c=[],d=new Set;for(let e of a){let a=e.name;if(d.has(a))throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);d.add(a);let f=function(a,b={}){let c={name:a.name,description:a.description,parametersJsonSchema:a.inputSchema};return a.outputSchema&&(c.responseJsonSchema=a.outputSchema),b.behavior&&(c.behavior=b.behavior),{functionDeclarations:[c]}}(e,b);f.functionDeclarations&&c.push(...f.functionDeclarations)}return{functionDeclarations:c}}(this.mcpTools,this.config)}async callTool(a){await this.initialize();let b=[];for(let c of a)if(c.name in this.functionNameToMcpClient){let a,d=this.functionNameToMcpClient[c.name];this.config.timeout&&(a={timeout:this.config.timeout});let e=await d.callTool({name:c.name,arguments:c.args},void 0,a);b.push({functionResponse:{name:c.name,response:e.isError?{error:e}:e}})}return b}}async function bf(a,b,c){let d=new X;Object.assign(d,c.data instanceof Blob?JSON.parse(await c.data.text()):JSON.parse(c.data)),b(d)}class bg{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c}async connect(a){var b,c;let d;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let e=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),g=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),i=`${e}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${h}`,j=()=>{},k=new Promise(a=>{j=a}),l=a.callbacks,m=this.apiClient,n={onopen:function(){j({})},onmessage:a=>{bf(m,l.onmessage,a)},onerror:null!=(b=null==l?void 0:l.onerror)?b:function(a){},onclose:null!=(c=null==l?void 0:l.onclose)?c:function(a){}},o=this.webSocketFactory.create(i,(d={},g.forEach((a,b)=>{d[b]=a}),d),n);o.connect(),await k;let p=Y(this.apiClient,a.model);return o.send(JSON.stringify({setup:{model:p}})),new bh(o,this.apiClient)}}class bh{constructor(a,b){this.conn=a,this.apiClient=b}async setWeightedPrompts(a){if(!a.weightedPrompts||0===Object.keys(a.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let b=function(a){let b={},c=A(a,["weightedPrompts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["weightedPrompts"],a)}return b}(a);this.conn.send(JSON.stringify({clientContent:b}))}async setMusicGenerationConfig(a){let b,c;a.musicGenerationConfig||(a.musicGenerationConfig={});let d=(b={},null!=(c=A(a,["musicGenerationConfig"]))&&z(b,["musicGenerationConfig"],c),b);this.conn.send(JSON.stringify(d))}sendPlaybackControl(a){this.conn.send(JSON.stringify({playbackControl:a}))}play(){this.sendPlaybackControl(l8.PLAY)}pause(){this.sendPlaybackControl(l8.PAUSE)}stop(){this.sendPlaybackControl(l8.STOP)}resetContext(){this.sendPlaybackControl(l8.RESET_CONTEXT)}close(){this.conn.close()}}async function bi(a,b,c){let d=new W,e=JSON.parse(c.data instanceof Blob?await c.data.text():c.data instanceof ArrayBuffer?new TextDecoder().decode(c.data):c.data);if(a.isVertexAI()){let a,b,c,f,g,h,i,j;Object.assign(d,(a={},null!=(b=A(e,["setupComplete"]))&&z(a,["setupComplete"],b),null!=(c=A(e,["serverContent"]))&&z(a,["serverContent"],c),null!=(f=A(e,["toolCall"]))&&z(a,["toolCall"],f),null!=(g=A(e,["toolCallCancellation"]))&&z(a,["toolCallCancellation"],g),null!=(h=A(e,["usageMetadata"]))&&z(a,["usageMetadata"],function(a){let b={},c=A(a,["promptTokenCount"]);null!=c&&z(b,["promptTokenCount"],c);let d=A(a,["cachedContentTokenCount"]);null!=d&&z(b,["cachedContentTokenCount"],d);let e=A(a,["candidatesTokenCount"]);null!=e&&z(b,["responseTokenCount"],e);let f=A(a,["toolUsePromptTokenCount"]);null!=f&&z(b,["toolUsePromptTokenCount"],f);let g=A(a,["thoughtsTokenCount"]);null!=g&&z(b,["thoughtsTokenCount"],g);let h=A(a,["totalTokenCount"]);null!=h&&z(b,["totalTokenCount"],h);let i=A(a,["promptTokensDetails"]);if(null!=i){let a=i;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["promptTokensDetails"],a)}let j=A(a,["cacheTokensDetails"]);if(null!=j){let a=j;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["cacheTokensDetails"],a)}let k=A(a,["candidatesTokensDetails"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["responseTokensDetails"],a)}let l=A(a,["toolUsePromptTokensDetails"]);if(null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["toolUsePromptTokensDetails"],a)}let m=A(a,["trafficType"]);return null!=m&&z(b,["trafficType"],m),b}(h)),null!=(i=A(e,["goAway"]))&&z(a,["goAway"],i),null!=(j=A(e,["sessionResumptionUpdate"]))&&z(a,["sessionResumptionUpdate"],j),a))}else Object.assign(d,e);b(d)}class bj{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c,this.music=new bg(this.apiClient,this.auth,this.webSocketFactory)}async connect(a){var b,c,d,e,f,g,h,i;let j,k;if(a.config&&a.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion(),n=this.apiClient.getHeaders();a.config&&a.config.tools&&bc(a.config.tools)&&bd(n);let o=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(n);if(this.apiClient.isVertexAI())j=`${l}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(o,j);else{let a=this.apiClient.getApiKey(),b="BidiGenerateContent",c="key";(null==a?void 0:a.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==m&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",c="access_token"),j=`${l}/ws/google.ai.generativelanguage.${m}.GenerativeService.${b}?${c}=${a}`}let p=()=>{},q=new Promise(a=>{p=a}),r=a.callbacks,s=this.apiClient,t={onopen:function(){var a;null==(a=null==r?void 0:r.onopen)||a.call(r),p({})},onmessage:a=>{bi(s,r.onmessage,a)},onerror:null!=(b=null==r?void 0:r.onerror)?b:function(a){},onclose:null!=(c=null==r?void 0:r.onclose)?c:function(a){}},u=this.webSocketFactory.create(j,(k={},o.forEach((a,b)=>{k[b]=a}),k),t);u.connect(),await q;let v=Y(this.apiClient,a.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){let a=this.apiClient.getProject(),b=this.apiClient.getLocation();v=`projects/${a}/locations/${b}/`+v}let w={};this.apiClient.isVertexAI()&&(null==(d=a.config)?void 0:d.responseModalities)===void 0&&(void 0===a.config?a.config={responseModalities:[lD.AUDIO]}:a.config.responseModalities=[lD.AUDIO]),(null==(e=a.config)?void 0:e.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let x=null!=(g=null==(f=a.config)?void 0:f.tools)?g:[],y=[];for(let a of x)this.isCallableTool(a)?y.push(await a.tool()):y.push(a);y.length>0&&(a.config.tools=y);let B={model:v,config:a.config,callbacks:a.callbacks};if(this.apiClient.isVertexAI()){let a,b,c;h=this.apiClient,a={},null!=(b=A(B,["model"]))&&z(a,["setup","model"],Y(h,b)),null!=(c=A(B,["config"]))&&z(a,["config"],function(a,b){let c=A(a,["generationConfig"]);void 0!==b&&null!=c&&z(b,["setup","generationConfig"],function(a){let b={},c=A(a,["modelSelectionConfig"]);null!=c&&z(b,["modelConfig"],c);let d=A(a,["audioTimestamp"]);null!=d&&z(b,["audioTimestamp"],d);let e=A(a,["candidateCount"]);null!=e&&z(b,["candidateCount"],e);let f=A(a,["enableAffectiveDialog"]);null!=f&&z(b,["enableAffectiveDialog"],f);let g=A(a,["frequencyPenalty"]);null!=g&&z(b,["frequencyPenalty"],g);let h=A(a,["logprobs"]);null!=h&&z(b,["logprobs"],h);let i=A(a,["maxOutputTokens"]);null!=i&&z(b,["maxOutputTokens"],i);let j=A(a,["mediaResolution"]);null!=j&&z(b,["mediaResolution"],j);let k=A(a,["presencePenalty"]);null!=k&&z(b,["presencePenalty"],k);let l=A(a,["responseJsonSchema"]);null!=l&&z(b,["responseJsonSchema"],l);let m=A(a,["responseLogprobs"]);null!=m&&z(b,["responseLogprobs"],m);let n=A(a,["responseMimeType"]);null!=n&&z(b,["responseMimeType"],n);let o=A(a,["responseModalities"]);null!=o&&z(b,["responseModalities"],o);let p=A(a,["responseSchema"]);null!=p&&z(b,["responseSchema"],p);let q=A(a,["routingConfig"]);null!=q&&z(b,["routingConfig"],q);let r=A(a,["seed"]);null!=r&&z(b,["seed"],r);let s=A(a,["speechConfig"]);null!=s&&z(b,["speechConfig"],aS(s));let t=A(a,["stopSequences"]);null!=t&&z(b,["stopSequences"],t);let u=A(a,["temperature"]);null!=u&&z(b,["temperature"],u);let v=A(a,["thinkingConfig"]);null!=v&&z(b,["thinkingConfig"],v);let w=A(a,["topK"]);null!=w&&z(b,["topK"],w);let x=A(a,["topP"]);if(null!=x&&z(b,["topP"],x),void 0!==A(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(c));let d=A(a,["responseModalities"]);void 0!==b&&null!=d&&z(b,["setup","generationConfig","responseModalities"],d);let e=A(a,["temperature"]);void 0!==b&&null!=e&&z(b,["setup","generationConfig","temperature"],e);let f=A(a,["topP"]);void 0!==b&&null!=f&&z(b,["setup","generationConfig","topP"],f);let g=A(a,["topK"]);void 0!==b&&null!=g&&z(b,["setup","generationConfig","topK"],g);let h=A(a,["maxOutputTokens"]);void 0!==b&&null!=h&&z(b,["setup","generationConfig","maxOutputTokens"],h);let i=A(a,["mediaResolution"]);void 0!==b&&null!=i&&z(b,["setup","generationConfig","mediaResolution"],i);let j=A(a,["seed"]);void 0!==b&&null!=j&&z(b,["setup","generationConfig","seed"],j);let k=A(a,["speechConfig"]);void 0!==b&&null!=k&&z(b,["setup","generationConfig","speechConfig"],aS(am(k)));let l=A(a,["thinkingConfig"]);void 0!==b&&null!=l&&z(b,["setup","generationConfig","thinkingConfig"],l);let m=A(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&z(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=A(a,["systemInstruction"]);void 0!==b&&null!=n&&z(b,["setup","systemInstruction"],ah(n));let o=A(a,["tools"]);if(void 0!==b&&null!=o){let a=ao(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==A(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=A(a,["description"]);null!=c&&z(b,["description"],c);let d=A(a,["name"]);null!=d&&z(b,["name"],d);let e=A(a,["parameters"]);null!=e&&z(b,["parameters"],e);let f=A(a,["parametersJsonSchema"]);null!=f&&z(b,["parametersJsonSchema"],f);let g=A(a,["response"]);null!=g&&z(b,["response"],g);let h=A(a,["responseJsonSchema"]);return null!=h&&z(b,["responseJsonSchema"],h),b})(a))),z(b,["functionDeclarations"],a)}let d=A(a,["retrieval"]);null!=d&&z(b,["retrieval"],d);let e=A(a,["googleSearchRetrieval"]);null!=e&&z(b,["googleSearchRetrieval"],e);let f=A(a,["googleMaps"]);null!=f&&z(b,["googleMaps"],f);let g=A(a,["computerUse"]);null!=g&&z(b,["computerUse"],g);let h=A(a,["codeExecution"]);null!=h&&z(b,["codeExecution"],h);let i=A(a,["enterpriseWebSearch"]);null!=i&&z(b,["enterpriseWebSearch"],i);let j=A(a,["googleSearch"]);null!=j&&z(b,["googleSearch"],j);let k=A(a,["urlContext"]);return null!=k&&z(b,["urlContext"],k),b})(an(a)))),z(b,["setup","tools"],a)}let p=A(a,["sessionResumption"]);void 0!==b&&null!=p&&z(b,["setup","sessionResumption"],p);let q=A(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&z(b,["setup","inputAudioTranscription"],q);let r=A(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&z(b,["setup","outputAudioTranscription"],r);let s=A(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&z(b,["setup","realtimeInputConfig"],s);let t=A(a,["contextWindowCompression"]);void 0!==b&&null!=t&&z(b,["setup","contextWindowCompression"],t);let u=A(a,["proactivity"]);return void 0!==b&&null!=u&&z(b,["setup","proactivity"],u),{}}(c,a)),w=a}else{let a,b,c;i=this.apiClient,a={},null!=(b=A(B,["model"]))&&z(a,["setup","model"],Y(i,b)),null!=(c=A(B,["config"]))&&z(a,["config"],function(a,b){let c=A(a,["generationConfig"]);void 0!==b&&null!=c&&z(b,["setup","generationConfig"],c);let d=A(a,["responseModalities"]);void 0!==b&&null!=d&&z(b,["setup","generationConfig","responseModalities"],d);let e=A(a,["temperature"]);void 0!==b&&null!=e&&z(b,["setup","generationConfig","temperature"],e);let f=A(a,["topP"]);void 0!==b&&null!=f&&z(b,["setup","generationConfig","topP"],f);let g=A(a,["topK"]);void 0!==b&&null!=g&&z(b,["setup","generationConfig","topK"],g);let h=A(a,["maxOutputTokens"]);void 0!==b&&null!=h&&z(b,["setup","generationConfig","maxOutputTokens"],h);let i=A(a,["mediaResolution"]);void 0!==b&&null!=i&&z(b,["setup","generationConfig","mediaResolution"],i);let j=A(a,["seed"]);void 0!==b&&null!=j&&z(b,["setup","generationConfig","seed"],j);let k=A(a,["speechConfig"]);void 0!==b&&null!=k&&z(b,["setup","generationConfig","speechConfig"],am(k));let l=A(a,["thinkingConfig"]);void 0!==b&&null!=l&&z(b,["setup","generationConfig","thinkingConfig"],l);let m=A(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&z(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=A(a,["systemInstruction"]);void 0!==b&&null!=n&&z(b,["setup","systemInstruction"],function(a){let b={},c=A(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m;return c={},null!=(d=A(b=a,["functionCall"]))&&z(c,["functionCall"],d),null!=(e=A(b,["codeExecutionResult"]))&&z(c,["codeExecutionResult"],e),null!=(f=A(b,["executableCode"]))&&z(c,["executableCode"],f),null!=(g=A(b,["fileData"]))&&z(c,["fileData"],function(a){let b={};if(void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=A(a,["fileUri"]);null!=c&&z(b,["fileUri"],c);let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(g)),null!=(h=A(b,["functionResponse"]))&&z(c,["functionResponse"],h),null!=(i=A(b,["inlineData"]))&&z(c,["inlineData"],aR(i)),null!=(j=A(b,["text"]))&&z(c,["text"],j),null!=(k=A(b,["thought"]))&&z(c,["thought"],k),null!=(l=A(b,["thoughtSignature"]))&&z(c,["thoughtSignature"],l),null!=(m=A(b,["videoMetadata"]))&&z(c,["videoMetadata"],m),c})),z(b,["parts"],a)}let d=A(a,["role"]);return null!=d&&z(b,["role"],d),b}(ah(n)));let o=A(a,["tools"]);if(void 0!==b&&null!=o){let a=ao(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["functionDeclarations"],a)}if(void 0!==A(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=A(a,["googleSearchRetrieval"]);null!=d&&z(b,["googleSearchRetrieval"],d);let e=A(a,["googleMaps"]);null!=e&&z(b,["googleMaps"],function(a){let b={};if(void 0!==A(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=A(a,["enableWidget"]);return null!=c&&z(b,["enableWidget"],c),b}(e));let f=A(a,["computerUse"]);null!=f&&z(b,["computerUse"],f);let g=A(a,["codeExecution"]);if(null!=g&&z(b,["codeExecution"],g),void 0!==A(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=A(a,["googleSearch"]);null!=h&&z(b,["googleSearch"],function(a){let b={};if(void 0!==A(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");let c=A(a,["timeRangeFilter"]);return null!=c&&z(b,["timeRangeFilter"],c),b}(h));let i=A(a,["urlContext"]);return null!=i&&z(b,["urlContext"],i),b})(an(a)))),z(b,["setup","tools"],a)}let p=A(a,["sessionResumption"]);void 0!==b&&null!=p&&z(b,["setup","sessionResumption"],function(a){let b={},c=A(a,["handle"]);if(null!=c&&z(b,["handle"],c),void 0!==A(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=A(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&z(b,["setup","inputAudioTranscription"],q);let r=A(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&z(b,["setup","outputAudioTranscription"],r);let s=A(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&z(b,["setup","realtimeInputConfig"],s);let t=A(a,["contextWindowCompression"]);void 0!==b&&null!=t&&z(b,["setup","contextWindowCompression"],t);let u=A(a,["proactivity"]);return void 0!==b&&null!=u&&z(b,["setup","proactivity"],u),{}}(c,a)),w=a}return delete w.config,u.send(JSON.stringify(w)),new bl(u,this.apiClient)}isCallableTool(a){return"callTool"in a&&"function"==typeof a.callTool}}let bk={turnComplete:!0};class bl{constructor(a,b){this.conn=a,this.apiClient=b}tLiveClientContent(a,b){if(null!==b.turns&&void 0!==b.turns){let c=[];try{c=aj(b.turns),a.isVertexAI()||(c=c.map(a=>aT(a)))}catch(a){throw Error(`Failed to parse client content "turns", type: '${typeof b.turns}'`)}return{clientContent:{turns:c,turnComplete:b.turnComplete}}}return{clientContent:{turnComplete:b.turnComplete}}}tLiveClienttToolResponse(a,b){let c=[];if(null==b.functionResponses||0===(c=Array.isArray(b.functionResponses)?b.functionResponses:[b.functionResponses]).length)throw Error("functionResponses is required.");for(let b of c){if("object"!=typeof b||null===b||!("name"in b)||!("response"in b))throw Error(`Could not parse function response, type '${typeof b}'.`);if(!a.isVertexAI()&&!("id"in b))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:c}}}sendClientContent(a){a=Object.assign(Object.assign({},bk),a);let b=this.tLiveClientContent(this.apiClient,a);this.conn.send(JSON.stringify(b))}sendRealtimeInput(a){let b={};b=this.apiClient.isVertexAI()?{realtimeInput:function(a){let b={},c=A(a,["media"]);if(null!=c){let a=$(c);Array.isArray(a)&&(a=a.map(a=>a)),z(b,["mediaChunks"],a)}let d=A(a,["audio"]);null!=d&&z(b,["audio"],ab(d));let e=A(a,["audioStreamEnd"]);null!=e&&z(b,["audioStreamEnd"],e);let f=A(a,["video"]);null!=f&&z(b,["video"],aa(f));let g=A(a,["text"]);null!=g&&z(b,["text"],g);let h=A(a,["activityStart"]);null!=h&&z(b,["activityStart"],h);let i=A(a,["activityEnd"]);return null!=i&&z(b,["activityEnd"],i),b}(a)}:{realtimeInput:function(a){let b={},c=A(a,["media"]);if(null!=c){let a=$(c);Array.isArray(a)&&(a=a.map(a=>aR(a))),z(b,["mediaChunks"],a)}let d=A(a,["audio"]);null!=d&&z(b,["audio"],aR(ab(d)));let e=A(a,["audioStreamEnd"]);null!=e&&z(b,["audioStreamEnd"],e);let f=A(a,["video"]);null!=f&&z(b,["video"],aR(aa(f)));let g=A(a,["text"]);null!=g&&z(b,["text"],g);let h=A(a,["activityStart"]);null!=h&&z(b,["activityStart"],h);let i=A(a,["activityEnd"]);return null!=i&&z(b,["activityEnd"],i),b}(a)},this.conn.send(JSON.stringify(b))}sendToolResponse(a){if(null==a.functionResponses)throw Error("Tool response parameters are required.");let b=this.tLiveClienttToolResponse(this.apiClient,a);this.conn.send(JSON.stringify(b))}close(){this.conn.close()}}function bm(a){var b,c,d;if(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.disable)return!0;let e=!1;for(let b of null!=(c=null==a?void 0:a.tools)?c:[])if(bn(b)){e=!0;break}if(!e)return!0;let f=null==(d=null==a?void 0:a.automaticFunctionCalling)?void 0:d.maximumRemoteCalls;return(!(!f||!(f<0)&&Number.isInteger(f))||0==f)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0)}function bn(a){return"callTool"in a&&"function"==typeof a.callTool}function bo(a){var b;return!(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.ignoreCallHistory)}class bp extends x{constructor(a){super(),this.apiClient=a,this.generateContent=async a=>{var b,c,d,e,f,g,h,i,j,k,l;let m,n,o=await this.processParamsMaybeAddMcpUsage(a);if(this.maybeMoveToResponseJsonSchem(a),!(null!=(i=null==(h=null==(g=a.config)?void 0:g.tools)?void 0:h.some(a=>bn(a)))&&i)||bm(a.config))return await this.generateContentInternal(o);if(null!=(l=null==(k=null==(j=a.config)?void 0:j.tools)?void 0:k.some(a=>!bn(a)))&&l)throw Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p=aj(o.contents),q=null!=(d=null==(c=null==(b=o.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,r=0;for(;r<q&&(m=await this.generateContentInternal(o)).functionCalls&&0!==m.functionCalls.length;){let b=m.candidates[0].content,c=[];for(let b of null!=(f=null==(e=a.config)?void 0:e.tools)?f:[])if(bn(b)){let a=await b.callTool(m.functionCalls);c.push(...a)}r++,n={role:"user",parts:c},o.contents=aj(o.contents),o.contents.push(b),o.contents.push(n),bo(o.config)&&(p.push(b),p.push(n))}return bo(o.config)&&(m.automaticFunctionCallingHistory=p),m},this.generateContentStream=async a=>{if(this.maybeMoveToResponseJsonSchem(a),!bm(a.config))return await this.processAfcStream(a);{let b=await this.processParamsMaybeAddMcpUsage(a);return await this.generateContentStreamInternal(b)}},this.generateImages=async a=>await this.generateImagesInternal(a).then(a=>{var b;let c,d=[];if(null==a?void 0:a.generatedImages)for(let e of a.generatedImages)e&&(null==e?void 0:e.safetyAttributes)&&(null==(b=null==e?void 0:e.safetyAttributes)?void 0:b.contentType)==="Positive Prompt"?c=null==e?void 0:e.safetyAttributes:d.push(e);return c?{generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:a.sdkHttpResponse}:{generatedImages:d,sdkHttpResponse:a.sdkHttpResponse}}),this.list=async a=>{var b;let c={config:Object.assign(Object.assign({},{queryBase:!0}),null==a?void 0:a.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase)if(null==(b=c.config)?void 0:b.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else c.config.filter="labels.tune-type:*";return new aE(l9.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(c),c)},this.editImage=async a=>{let b={model:a.model,prompt:a.prompt,referenceImages:[],config:a.config};return a.referenceImages&&a.referenceImages&&(b.referenceImages=a.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(b)},this.upscaleImage=async a=>{let b={numberOfImages:1,mode:"upscale"};a.config&&(b=Object.assign(Object.assign({},b),a.config));let c={model:a.model,image:a.image,upscaleFactor:a.upscaleFactor,config:b};return await this.upscaleImageInternal(c)},this.generateVideos=async a=>{var b,c,d,e,f,g;if((a.prompt||a.image||a.video)&&a.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(b=a.video)?void 0:b.uri)&&(null==(c=a.video)?void 0:c.videoBytes)?a.video={uri:a.video.uri,mimeType:a.video.mimeType}:(null==(e=null==(d=a.source)?void 0:d.video)?void 0:e.uri)&&(null==(g=null==(f=a.source)?void 0:f.video)?void 0:g.videoBytes)&&(a.source.video={uri:a.source.video.uri,mimeType:a.source.video.mimeType})),await this.generateVideosInternal(a)}}maybeMoveToResponseJsonSchem(a){a.config&&a.config.responseSchema&&!a.config.responseJsonSchema&&Object.keys(a.config.responseSchema).includes("$schema")&&(a.config.responseJsonSchema=a.config.responseSchema,delete a.config.responseSchema)}async processParamsMaybeAddMcpUsage(a){var b,c,d;let e=null==(b=a.config)?void 0:b.tools;if(!e)return a;let f=await Promise.all(e.map(async a=>bn(a)?await a.tool():a)),g={model:a.model,contents:a.contents,config:Object.assign(Object.assign({},a.config),{tools:f})};if(g.config.tools=f,a.config&&a.config.tools&&bc(a.config.tools)){let b=Object.assign({},null!=(d=null==(c=a.config.httpOptions)?void 0:c.headers)?d:{});0===Object.keys(b).length&&(b=this.apiClient.getDefaultHeaders()),bd(b),g.config.httpOptions=Object.assign(Object.assign({},a.config.httpOptions),{headers:b})}return g}async initAfcToolsMap(a){var b,c,d;let e=new Map;for(let f of null!=(c=null==(b=a.config)?void 0:b.tools)?c:[])if(bn(f))for(let a of null!=(d=(await f.tool()).functionDeclarations)?d:[]){if(!a.name)throw Error("Function declaration name is required.");if(e.has(a.name))throw Error(`Duplicate tool declaration name: ${a.name}`);e.set(a.name,f)}return e}async processAfcStream(a){var b,c,d;let e=null!=(d=null==(c=null==(b=a.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,f=!1,g=0;return function(a,b,c){var d,h;return aJ(this,arguments,function*(){for(var i,j,k,l;g<e;){f&&(g++,f=!1);let p=yield aI(a.processParamsMaybeAddMcpUsage(c)),q=yield aI(a.generateContentStreamInternal(p)),r=[],s=[];try{for(var m,n=!0,o=(j=void 0,aK(q));!(i=(m=yield aI(o.next())).done);n=!0)if(l=m.value,n=!1,yield yield aI(l),l.candidates&&(null==(d=l.candidates[0])?void 0:d.content)){for(let a of(s.push(l.candidates[0].content),null!=(h=l.candidates[0].content.parts)?h:[]))if(g<e&&a.functionCall){if(!a.functionCall.name)throw Error("Function call name was not returned by the model.");if(b.has(a.functionCall.name)){let c=yield aI(b.get(a.functionCall.name).callTool([a.functionCall]));r.push(...c)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${a.functionCall.name}`)}}}catch(a){j={error:a}}finally{try{!n&&!i&&(k=o.return)&&(yield aI(k.call(o)))}finally{if(j)throw j.error}}if(r.length>0){f=!0;let a=new D;a.candidates=[{content:{role:"user",parts:r}}],yield yield aI(a);let b=[];b.push(...s),b.push({role:"user",parts:r});let d=aj(c.contents).concat(b);c.contents=d}else break}})}(this,await this.initAfcToolsMap(a),a)}async generateContentInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=aV(this.apiClient,a);return f=y("{model}:generateContent",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=aX(a),c=new D;return Object.assign(c,b),c})}{let b=aU(this.apiClient,a);return f=y("{model}:generateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=aW(a),c=new D;return Object.assign(c,b),c})}}async generateContentStreamInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=aV(this.apiClient,a);return f=y("{model}:streamGenerateContent?alt=sse",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(function(a){return aJ(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=aK(a);!(b=(f=yield aI(h.next())).done);g=!0){e=f.value,g=!1;let a=aX((yield aI(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new D;Object.assign(b,a),yield yield aI(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield aI(d.call(h)))}finally{if(c)throw c.error}}})})}{let b=aU(this.apiClient,a);return f=y("{model}:streamGenerateContent?alt=sse",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(function(a){return aJ(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=aK(a);!(b=(f=yield aI(h.next())).done);g=!0){e=f.value,g=!1;let a=aW((yield aI(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new D;Object.assign(b,a),yield yield aI(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield aI(d.call(h)))}finally{if(c)throw c.error}}})})}}async embedContent(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c,d,e,f,g,h={},i=A(b,["model"]);null!=i&&z(h,["_url","model"],Y(a,i));let j=A(b,["contents"]);if(null!=j){let b=ai(a,j);Array.isArray(b)&&(b=b.map(a=>a)),z(h,["instances[]","content"],b)}let k=A(b,["config"]);return null!=k&&(c=A(k,["taskType"]),void 0!==h&&null!=c&&z(h,["instances[]","task_type"],c),d=A(k,["title"]),void 0!==h&&null!=d&&z(h,["instances[]","title"],d),e=A(k,["outputDimensionality"]),void 0!==h&&null!=e&&z(h,["parameters","outputDimensionality"],e),f=A(k,["mimeType"]),void 0!==h&&null!=f&&z(h,["instances[]","mimeType"],f),g=A(k,["autoTruncate"]),void 0!==h&&null!=g&&z(h,["parameters","autoTruncate"],g)),h}(this.apiClient,a);return f=y("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["predictions[]","embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=A(a,["values"]))&&z(c,["values"],d),null!=(e=A(a,["statistics"]))&&z(c,["statistics"],(f={},null!=(g=A(b=e,["truncated"]))&&z(f,["truncated"],g),null!=(h=A(b,["token_count"]))&&z(f,["tokenCount"],h),f)),c})),z(b,["embeddings"],a)}let e=A(a,["metadata"]);return null!=e&&z(b,["metadata"],e),b}(a),c=new E;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["_url","model"],Y(a,d));let e=A(b,["contents"]);if(null!=e){let b=ai(a,e);Array.isArray(b)&&(b=b.map(a=>a)),z(c,["requests[]","content"],b)}let f=A(b,["config"]);null!=f&&function(a,b){let c=A(a,["taskType"]);void 0!==b&&null!=c&&z(b,["requests[]","taskType"],c);let d=A(a,["title"]);void 0!==b&&null!=d&&z(b,["requests[]","title"],d);let e=A(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&z(b,["requests[]","outputDimensionality"],e),void 0!==A(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==A(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(f,c);let g=A(b,["model"]);return void 0!==g&&z(c,["requests[]","model"],Y(a,g)),c}(this.apiClient,a);return f=y("{model}:batchEmbedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["embeddings"],a)}let e=A(a,["metadata"]);return null!=e&&z(b,["metadata"],e),b}(a),c=new E;return Object.assign(c,b),c})}}async generateImagesInternal(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,B,C,D,E=(f=this.apiClient,d={},null!=(e=A(a,["model"]))&&z(d,["_url","model"],Y(f,e)),null!=(g=A(a,["prompt"]))&&z(d,["instances[0]","prompt"],g),null!=(j=A(a,["config"]))&&(k=A(j,["outputGcsUri"]),void 0!==d&&null!=k&&z(d,["parameters","storageUri"],k),l=A(j,["negativePrompt"]),void 0!==d&&null!=l&&z(d,["parameters","negativePrompt"],l),m=A(j,["numberOfImages"]),void 0!==d&&null!=m&&z(d,["parameters","sampleCount"],m),n=A(j,["aspectRatio"]),void 0!==d&&null!=n&&z(d,["parameters","aspectRatio"],n),o=A(j,["guidanceScale"]),void 0!==d&&null!=o&&z(d,["parameters","guidanceScale"],o),p=A(j,["seed"]),void 0!==d&&null!=p&&z(d,["parameters","seed"],p),q=A(j,["safetyFilterLevel"]),void 0!==d&&null!=q&&z(d,["parameters","safetySetting"],q),r=A(j,["personGeneration"]),void 0!==d&&null!=r&&z(d,["parameters","personGeneration"],r),s=A(j,["includeSafetyAttributes"]),void 0!==d&&null!=s&&z(d,["parameters","includeSafetyAttributes"],s),t=A(j,["includeRaiReason"]),void 0!==d&&null!=t&&z(d,["parameters","includeRaiReason"],t),u=A(j,["language"]),void 0!==d&&null!=u&&z(d,["parameters","language"],u),v=A(j,["outputMimeType"]),void 0!==d&&null!=v&&z(d,["parameters","outputOptions","mimeType"],v),w=A(j,["outputCompressionQuality"]),void 0!==d&&null!=w&&z(d,["parameters","outputOptions","compressionQuality"],w),x=A(j,["addWatermark"]),void 0!==d&&null!=x&&z(d,["parameters","addWatermark"],x),B=A(j,["labels"]),void 0!==d&&null!=B&&z(d,["labels"],B),C=A(j,["imageSize"]),void 0!==d&&null!=C&&z(d,["parameters","sampleImageSize"],C),D=A(j,["enhancePrompt"]),void 0!==d&&null!=D&&z(d,["parameters","enhancePrompt"],D)),d);return h=y("{model}:predict",E._url),i=E._query,delete E._url,delete E._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(E),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>aY(a))),z(b,["generatedImages"],a)}let e=A(a,["positivePromptSafetyAttributes"]);return null!=e&&z(b,["positivePromptSafetyAttributes"],a3(e)),b}(a),c=new F;return Object.assign(c,b),c})}{let b,c,f,j,k=(g=this.apiClient,b={},null!=(c=A(a,["model"]))&&z(b,["_url","model"],Y(g,c)),null!=(f=A(a,["prompt"]))&&z(b,["instances[0]","prompt"],f),null!=(j=A(a,["config"]))&&function(a,b){if(void 0!==A(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==A(a,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let c=A(a,["numberOfImages"]);void 0!==b&&null!=c&&z(b,["parameters","sampleCount"],c);let d=A(a,["aspectRatio"]);void 0!==b&&null!=d&&z(b,["parameters","aspectRatio"],d);let e=A(a,["guidanceScale"]);if(void 0!==b&&null!=e&&z(b,["parameters","guidanceScale"],e),void 0!==A(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let f=A(a,["safetyFilterLevel"]);void 0!==b&&null!=f&&z(b,["parameters","safetySetting"],f);let g=A(a,["personGeneration"]);void 0!==b&&null!=g&&z(b,["parameters","personGeneration"],g);let h=A(a,["includeSafetyAttributes"]);void 0!==b&&null!=h&&z(b,["parameters","includeSafetyAttributes"],h);let i=A(a,["includeRaiReason"]);void 0!==b&&null!=i&&z(b,["parameters","includeRaiReason"],i);let j=A(a,["language"]);void 0!==b&&null!=j&&z(b,["parameters","language"],j);let k=A(a,["outputMimeType"]);void 0!==b&&null!=k&&z(b,["parameters","outputOptions","mimeType"],k);let l=A(a,["outputCompressionQuality"]);if(void 0!==b&&null!=l&&z(b,["parameters","outputOptions","compressionQuality"],l),void 0!==A(a,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==A(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let m=A(a,["imageSize"]);if(void 0!==b&&null!=m&&z(b,["parameters","sampleImageSize"],m),void 0!==A(a,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(j,b),b);return h=y("{model}:predict",k._url),i=k._query,delete k._url,delete k._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(k),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>{var b,c;let d,e,f,g,h,i,j;return d={},null!=(e=A(b=a,["_self"]))&&z(d,["image"],(f={},null!=(g=A(c=e,["bytesBase64Encoded"]))&&z(f,["imageBytes"],B(g)),null!=(h=A(c,["mimeType"]))&&z(f,["mimeType"],h),f)),null!=(i=A(b,["raiFilteredReason"]))&&z(d,["raiFilteredReason"],i),null!=(j=A(b,["_self"]))&&z(d,["safetyAttributes"],a2(j)),d})),z(b,["generatedImages"],a)}let e=A(a,["positivePromptSafetyAttributes"]);return null!=e&&z(b,["positivePromptSafetyAttributes"],a2(e)),b}(a),c=new F;return Object.assign(c,b),c})}}async editImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=A(b,["model"]);null!=u&&z(t,["_url","model"],Y(a,u));let v=A(b,["prompt"]);null!=v&&z(t,["instances[0]","prompt"],v);let w=A(b,["referenceImages"]);if(null!=w){let a=w;Array.isArray(a)&&(a=a.map(a=>(function(a){let b,c,d,e,f,g,h,i={},j=A(a,["referenceImage"]);null!=j&&z(i,["referenceImage"],a_(j));let k=A(a,["referenceId"]);null!=k&&z(i,["referenceId"],k);let l=A(a,["referenceType"]);null!=l&&z(i,["referenceType"],l);let m=A(a,["maskImageConfig"]);null!=m&&z(i,["maskImageConfig"],(b={},null!=(c=A(m,["maskMode"]))&&z(b,["maskMode"],c),null!=(d=A(m,["segmentationClasses"]))&&z(b,["maskClasses"],d),null!=(e=A(m,["maskDilation"]))&&z(b,["dilation"],e),b));let n=A(a,["controlImageConfig"]);null!=n&&z(i,["controlImageConfig"],(f={},null!=(g=A(n,["controlType"]))&&z(f,["controlType"],g),null!=(h=A(n,["enableControlImageComputation"]))&&z(f,["computeControl"],h),f));let o=A(a,["styleImageConfig"]);null!=o&&z(i,["styleImageConfig"],o);let p=A(a,["subjectImageConfig"]);return null!=p&&z(i,["subjectImageConfig"],p),i})(a))),z(t,["instances[0]","referenceImages"],a)}let x=A(b,["config"]);return null!=x&&(c=A(x,["outputGcsUri"]),void 0!==t&&null!=c&&z(t,["parameters","storageUri"],c),d=A(x,["negativePrompt"]),void 0!==t&&null!=d&&z(t,["parameters","negativePrompt"],d),e=A(x,["numberOfImages"]),void 0!==t&&null!=e&&z(t,["parameters","sampleCount"],e),f=A(x,["aspectRatio"]),void 0!==t&&null!=f&&z(t,["parameters","aspectRatio"],f),g=A(x,["guidanceScale"]),void 0!==t&&null!=g&&z(t,["parameters","guidanceScale"],g),h=A(x,["seed"]),void 0!==t&&null!=h&&z(t,["parameters","seed"],h),i=A(x,["safetyFilterLevel"]),void 0!==t&&null!=i&&z(t,["parameters","safetySetting"],i),j=A(x,["personGeneration"]),void 0!==t&&null!=j&&z(t,["parameters","personGeneration"],j),k=A(x,["includeSafetyAttributes"]),void 0!==t&&null!=k&&z(t,["parameters","includeSafetyAttributes"],k),l=A(x,["includeRaiReason"]),void 0!==t&&null!=l&&z(t,["parameters","includeRaiReason"],l),m=A(x,["language"]),void 0!==t&&null!=m&&z(t,["parameters","language"],m),n=A(x,["outputMimeType"]),void 0!==t&&null!=n&&z(t,["parameters","outputOptions","mimeType"],n),o=A(x,["outputCompressionQuality"]),void 0!==t&&null!=o&&z(t,["parameters","outputOptions","compressionQuality"],o),p=A(x,["addWatermark"]),void 0!==t&&null!=p&&z(t,["parameters","addWatermark"],p),q=A(x,["labels"]),void 0!==t&&null!=q&&z(t,["labels"],q),r=A(x,["editMode"]),void 0!==t&&null!=r&&z(t,["parameters","editMode"],r),s=A(x,["baseSteps"]),void 0!==t&&null!=s&&z(t,["parameters","editConfig","baseSteps"],s)),t}(this.apiClient,a);return d=y("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>aY(a))),z(b,["generatedImages"],a)}return b}(a),c=new G;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(a){var b,c,d;let e="",f={};if(this.apiClient.isVertexAI()){let g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=(d=this.apiClient,g={},null!=(h=A(a,["model"]))&&z(g,["_url","model"],Y(d,h)),null!=(i=A(a,["image"]))&&z(g,["instances[0]","image"],a_(i)),null!=(j=A(a,["upscaleFactor"]))&&z(g,["parameters","upscaleConfig","upscaleFactor"],j),null!=(k=A(a,["config"]))&&(l=A(k,["outputGcsUri"]),void 0!==g&&null!=l&&z(g,["parameters","storageUri"],l),m=A(k,["safetyFilterLevel"]),void 0!==g&&null!=m&&z(g,["parameters","safetySetting"],m),n=A(k,["personGeneration"]),void 0!==g&&null!=n&&z(g,["parameters","personGeneration"],n),o=A(k,["includeRaiReason"]),void 0!==g&&null!=o&&z(g,["parameters","includeRaiReason"],o),p=A(k,["outputMimeType"]),void 0!==g&&null!=p&&z(g,["parameters","outputOptions","mimeType"],p),q=A(k,["outputCompressionQuality"]),void 0!==g&&null!=q&&z(g,["parameters","outputOptions","compressionQuality"],q),r=A(k,["enhanceInputImage"]),void 0!==g&&null!=r&&z(g,["parameters","upscaleConfig","enhanceInputImage"],r),s=A(k,["imagePreservationFactor"]),void 0!==g&&null!=s&&z(g,["parameters","upscaleConfig","imagePreservationFactor"],s),t=A(k,["labels"]),void 0!==g&&null!=t&&z(g,["labels"],t),u=A(k,["numberOfImages"]),void 0!==g&&null!=u&&z(g,["parameters","sampleCount"],u),v=A(k,["mode"]),void 0!==g&&null!=v&&z(g,["parameters","mode"],v)),g);return e=y("{model}:predict",w._url),f=w._query,delete w._url,delete w._query,this.apiClient.request({path:e,queryParams:f,body:JSON.stringify(w),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>aY(a))),z(b,["generatedImages"],a)}return b}(a),c=new H;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(a){var b,c,d;let e="",f={};if(this.apiClient.isVertexAI()){let g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=(d=this.apiClient,g={},null!=(h=A(a,["model"]))&&z(g,["_url","model"],Y(d,h)),null!=(i=A(a,["source"]))&&function(a,b){let c=A(a,["prompt"]);void 0!==b&&null!=c&&z(b,["instances[0]","prompt"],c);let d=A(a,["personImage"]);void 0!==b&&null!=d&&z(b,["instances[0]","personImage","image"],a_(d));let e=A(a,["productImages"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>{let b,c;return b={},null!=(c=A(a,["productImage"]))&&z(b,["image"],a_(c)),b})),z(b,["instances[0]","productImages"],a)}}(i,g),null!=(j=A(a,["config"]))&&(k=A(j,["numberOfImages"]),void 0!==g&&null!=k&&z(g,["parameters","sampleCount"],k),l=A(j,["baseSteps"]),void 0!==g&&null!=l&&z(g,["parameters","editConfig","baseSteps"],l),m=A(j,["outputGcsUri"]),void 0!==g&&null!=m&&z(g,["parameters","storageUri"],m),n=A(j,["seed"]),void 0!==g&&null!=n&&z(g,["parameters","seed"],n),o=A(j,["safetyFilterLevel"]),void 0!==g&&null!=o&&z(g,["parameters","safetySetting"],o),p=A(j,["personGeneration"]),void 0!==g&&null!=p&&z(g,["parameters","personGeneration"],p),q=A(j,["addWatermark"]),void 0!==g&&null!=q&&z(g,["parameters","addWatermark"],q),r=A(j,["outputMimeType"]),void 0!==g&&null!=r&&z(g,["parameters","outputOptions","mimeType"],r),s=A(j,["outputCompressionQuality"]),void 0!==g&&null!=s&&z(g,["parameters","outputOptions","compressionQuality"],s),t=A(j,["enhancePrompt"]),void 0!==g&&null!=t&&z(g,["parameters","enhancePrompt"],t),u=A(j,["labels"]),void 0!==g&&null!=u&&z(g,["labels"],u)),g);return e=y("{model}:predict",v._url),f=v._query,delete v._url,delete v._query,this.apiClient.request({path:e,queryParams:f,body:JSON.stringify(v),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=A(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>aY(a))),z(b,["generatedImages"],a)}return b}(a),c=new I;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI()){let i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=(d=this.apiClient,n={},null!=(o=A(a,["model"]))&&z(n,["_url","model"],Y(d,o)),null!=(p=A(a,["source"]))&&(e=p,f=n,k=A(e,["prompt"]),void 0!==f&&null!=k&&z(f,["instances[0]","prompt"],k),l=A(e,["image"]),void 0!==f&&null!=l&&z(f,["instances[0]","image"],a_(l)),m=A(e,["scribbleImage"]),void 0!==f&&null!=m&&z(f,["instances[0]","scribble"],(i={},null!=(j=A(m,["image"]))&&z(i,["image"],a_(j)),i))),null!=(q=A(a,["config"]))&&(r=A(q,["mode"]),void 0!==n&&null!=r&&z(n,["parameters","mode"],r),s=A(q,["maxPredictions"]),void 0!==n&&null!=s&&z(n,["parameters","maxPredictions"],s),t=A(q,["confidenceThreshold"]),void 0!==n&&null!=t&&z(n,["parameters","confidenceThreshold"],t),u=A(q,["maskDilation"]),void 0!==n&&null!=u&&z(n,["parameters","maskDilation"],u),v=A(q,["binaryColorThreshold"]),void 0!==n&&null!=v&&z(n,["parameters","binaryColorThreshold"],v),w=A(q,["labels"]),void 0!==n&&null!=w&&z(n,["labels"],w)),n);return g=y("{model}:predict",x._url),h=x._query,delete x._url,delete x._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(x),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=A(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["_self"]);null!=c&&z(b,["mask"],aZ(c));let d=A(a,["labels"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["labels"],a)}return b})(a))),z(b,["generatedMasks"],a)}return b}(a),c=new J;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async get(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=A(a,["model"]))&&z(d,["_url","name"],Y(f,e)),d);return h=y("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a1(a))}{let b,c,f=(g=this.apiClient,b={},null!=(c=A(a,["model"]))&&z(b,["_url","name"],Y(g,c)),b);return h=y("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a0(a))}}async listInternal(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l,m=(f=this.apiClient,d={},null!=(e=A(a,["config"]))&&(g=A(e,["pageSize"]),void 0!==d&&null!=g&&z(d,["_query","pageSize"],g),j=A(e,["pageToken"]),void 0!==d&&null!=j&&z(d,["_query","pageToken"],j),k=A(e,["filter"]),void 0!==d&&null!=k&&z(d,["_query","filter"],k),l=A(e,["queryBase"]),void 0!==d&&null!=l&&z(d,["_url","models_url"],au(f,l))),d);return h=y("{models_url}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["nextPageToken"]);null!=d&&z(b,["nextPageToken"],d);let e=A(a,["_self"]);if(null!=e){let a=av(e);Array.isArray(a)&&(a=a.map(a=>a1(a))),z(b,["models"],a)}return b}(a),c=new K;return Object.assign(c,b),c})}{let b,c,f,j,k,l,m=(g=this.apiClient,b={},null!=(c=A(a,["config"]))&&(f=A(c,["pageSize"]),void 0!==b&&null!=f&&z(b,["_query","pageSize"],f),j=A(c,["pageToken"]),void 0!==b&&null!=j&&z(b,["_query","pageToken"],j),k=A(c,["filter"]),void 0!==b&&null!=k&&z(b,["_query","filter"],k),l=A(c,["queryBase"]),void 0!==b&&null!=l&&z(b,["_url","models_url"],au(g,l))),b);return h=y("{models_url}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["nextPageToken"]);null!=d&&z(b,["nextPageToken"],d);let e=A(a,["_self"]);if(null!=e){let a=av(e);Array.isArray(a)&&(a=a.map(a=>a0(a))),z(b,["models"],a)}return b}(a),c=new K;return Object.assign(c,b),c})}}async update(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l,m=(f=this.apiClient,d={},null!=(e=A(a,["model"]))&&z(d,["_url","model"],Y(f,e)),null!=(g=A(a,["config"]))&&(j=A(g,["displayName"]),void 0!==d&&null!=j&&z(d,["displayName"],j),k=A(g,["description"]),void 0!==d&&null!=k&&z(d,["description"],k),l=A(g,["defaultCheckpointId"]),void 0!==d&&null!=l&&z(d,["defaultCheckpointId"],l)),d);return h=y("{model}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a1(a))}{let b,c,f,j,k,l,m=(g=this.apiClient,b={},null!=(c=A(a,["model"]))&&z(b,["_url","name"],Y(g,c)),null!=(f=A(a,["config"]))&&(j=A(f,["displayName"]),void 0!==b&&null!=j&&z(b,["displayName"],j),k=A(f,["description"]),void 0!==b&&null!=k&&z(b,["description"],k),l=A(f,["defaultCheckpointId"]),void 0!==b&&null!=l&&z(b,["defaultCheckpointId"],l)),b);return h=y("{name}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a0(a))}}async delete(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=A(a,["model"]))&&z(d,["_url","name"],Y(f,e)),d);return h=y("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),b),e=new L;return Object.assign(e,d),e})}{let b,c,f=(g=this.apiClient,b={},null!=(c=A(a,["model"]))&&z(b,["_url","name"],Y(g,c)),b);return h=y("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),b),e=new L;return Object.assign(e,d),e})}}async countTokens(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["_url","model"],Y(a,d));let e=A(b,["contents"]);if(null!=e){let a=aj(e);Array.isArray(a)&&(a=a.map(a=>a)),z(c,["contents"],a)}let f=A(b,["config"]);return null!=f&&function(a,b){let c=A(a,["systemInstruction"]);void 0!==b&&null!=c&&z(b,["systemInstruction"],ah(c));let d=A(a,["tools"]);if(void 0!==b&&null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a5(a))),z(b,["tools"],a)}let e=A(a,["generationConfig"]);void 0!==b&&null!=e&&z(b,["generationConfig"],function(a){let b={},c=A(a,["modelSelectionConfig"]);null!=c&&z(b,["modelConfig"],c);let d=A(a,["audioTimestamp"]);null!=d&&z(b,["audioTimestamp"],d);let e=A(a,["candidateCount"]);null!=e&&z(b,["candidateCount"],e);let f=A(a,["enableAffectiveDialog"]);null!=f&&z(b,["enableAffectiveDialog"],f);let g=A(a,["frequencyPenalty"]);null!=g&&z(b,["frequencyPenalty"],g);let h=A(a,["logprobs"]);null!=h&&z(b,["logprobs"],h);let i=A(a,["maxOutputTokens"]);null!=i&&z(b,["maxOutputTokens"],i);let j=A(a,["mediaResolution"]);null!=j&&z(b,["mediaResolution"],j);let k=A(a,["presencePenalty"]);null!=k&&z(b,["presencePenalty"],k);let l=A(a,["responseJsonSchema"]);null!=l&&z(b,["responseJsonSchema"],l);let m=A(a,["responseLogprobs"]);null!=m&&z(b,["responseLogprobs"],m);let n=A(a,["responseMimeType"]);null!=n&&z(b,["responseMimeType"],n);let o=A(a,["responseModalities"]);null!=o&&z(b,["responseModalities"],o);let p=A(a,["responseSchema"]);null!=p&&z(b,["responseSchema"],p);let q=A(a,["routingConfig"]);null!=q&&z(b,["routingConfig"],q);let r=A(a,["seed"]);null!=r&&z(b,["seed"],r);let s=A(a,["speechConfig"]);null!=s&&z(b,["speechConfig"],a4(s));let t=A(a,["stopSequences"]);null!=t&&z(b,["stopSequences"],t);let u=A(a,["temperature"]);null!=u&&z(b,["temperature"],u);let v=A(a,["thinkingConfig"]);null!=v&&z(b,["thinkingConfig"],v);let w=A(a,["topK"]);null!=w&&z(b,["topK"],w);let x=A(a,["topP"]);if(null!=x&&z(b,["topP"],x),void 0!==A(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(e))}(f,c),c}(this.apiClient,a);return f=y("{model}:countTokens",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),null!=(d=A(a,["totalTokens"]))&&z(b,["totalTokens"],d),b),f=new M;return Object.assign(f,e),f})}{let b=function(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["_url","model"],Y(a,d));let e=A(b,["contents"]);if(null!=e){let a=aj(e);Array.isArray(a)&&(a=a.map(a=>aT(a))),z(c,["contents"],a)}let f=A(b,["config"]);return null!=f&&function(a){if(void 0!==A(a,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==A(a,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==A(a,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(f),c}(this.apiClient,a);return f=y("{model}:countTokens",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f=(b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),null!=(d=A(a,["totalTokens"]))&&z(b,["totalTokens"],d),null!=(e=A(a,["cachedContentTokenCount"]))&&z(b,["cachedContentTokenCount"],e),b),g=new M;return Object.assign(g,f),g})}}async computeTokens(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=A(b,["model"]);null!=d&&z(c,["_url","model"],Y(a,d));let e=A(b,["contents"]);if(null!=e){let a=aj(e);Array.isArray(a)&&(a=a.map(a=>a)),z(c,["contents"],a)}return c}(this.apiClient,a);return d=y("{model}:computeTokens",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=A(a,["sdkHttpResponse"]);null!=c&&z(b,["sdkHttpResponse"],c);let d=A(a,["tokensInfo"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["tokensInfo"],a)}return b}(a),c=new N;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(a){var b,c,d,e,f,g,h,i,j,k;let l="",m={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,n,o,p,q,r,s=(f=this.apiClient,j={},null!=(k=A(a,["model"]))&&z(j,["_url","model"],Y(f,k)),null!=(n=A(a,["prompt"]))&&z(j,["instances[0]","prompt"],n),null!=(o=A(a,["image"]))&&z(j,["instances[0]","image"],a_(o)),null!=(p=A(a,["video"]))&&z(j,["instances[0]","video"],a7(p)),null!=(q=A(a,["source"]))&&(h=q,i=j,d=A(h,["prompt"]),void 0!==i&&null!=d&&z(i,["instances[0]","prompt"],d),e=A(h,["image"]),void 0!==i&&null!=e&&z(i,["instances[0]","image"],a_(e)),g=A(h,["video"]),void 0!==i&&null!=g&&z(i,["instances[0]","video"],a7(g))),null!=(r=A(a,["config"]))&&function(a,b){var c;let d,e,f,g=A(a,["numberOfVideos"]);void 0!==b&&null!=g&&z(b,["parameters","sampleCount"],g);let h=A(a,["outputGcsUri"]);void 0!==b&&null!=h&&z(b,["parameters","storageUri"],h);let i=A(a,["fps"]);void 0!==b&&null!=i&&z(b,["parameters","fps"],i);let j=A(a,["durationSeconds"]);void 0!==b&&null!=j&&z(b,["parameters","durationSeconds"],j);let k=A(a,["seed"]);void 0!==b&&null!=k&&z(b,["parameters","seed"],k);let l=A(a,["aspectRatio"]);void 0!==b&&null!=l&&z(b,["parameters","aspectRatio"],l);let m=A(a,["resolution"]);void 0!==b&&null!=m&&z(b,["parameters","resolution"],m);let n=A(a,["personGeneration"]);void 0!==b&&null!=n&&z(b,["parameters","personGeneration"],n);let o=A(a,["pubsubTopic"]);void 0!==b&&null!=o&&z(b,["parameters","pubsubTopic"],o);let p=A(a,["negativePrompt"]);void 0!==b&&null!=p&&z(b,["parameters","negativePrompt"],p);let q=A(a,["enhancePrompt"]);void 0!==b&&null!=q&&z(b,["parameters","enhancePrompt"],q);let r=A(a,["generateAudio"]);void 0!==b&&null!=r&&z(b,["parameters","generateAudio"],r);let s=A(a,["lastFrame"]);void 0!==b&&null!=s&&z(b,["instances[0]","lastFrame"],a_(s));let t=A(a,["referenceImages"]);if(void 0!==b&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e;return c={},null!=(d=A(b=a,["image"]))&&z(c,["image"],a_(d)),null!=(e=A(b,["referenceType"]))&&z(c,["referenceType"],e),c})),z(b,["instances[0]","referenceImages"],a)}let u=A(a,["mask"]);void 0!==b&&null!=u&&z(b,["instances[0]","mask"],(d={},null!=(e=A(c=u,["image"]))&&z(d,["_self"],a_(e)),null!=(f=A(c,["maskMode"]))&&z(d,["maskMode"],f),d));let v=A(a,["compressionQuality"]);void 0!==b&&null!=v&&z(b,["parameters","compressionQuality"],v)}(r,j),j);return l=y("{model}:predictLongRunning",s._url),m=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:m,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b,c,d,e,f,g,h=(b={},null!=(c=A(a,["name"]))&&z(b,["name"],c),null!=(d=A(a,["metadata"]))&&z(b,["metadata"],d),null!=(e=A(a,["done"]))&&z(b,["done"],e),null!=(f=A(a,["error"]))&&z(b,["error"],f),null!=(g=A(a,["response"]))&&z(b,["response"],function(a){let b={},c=A(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=A(a,["_self"]))&&z(c,["video"],(e={},null!=(f=A(b=d,["gcsUri"]))&&z(e,["uri"],f),null!=(g=A(b,["bytesBase64Encoded"]))&&z(e,["videoBytes"],B(g)),null!=(h=A(b,["mimeType"]))&&z(e,["mimeType"],h),e)),c})),z(b,["generatedVideos"],a)}let d=A(a,["raiMediaFilteredCount"]);null!=d&&z(b,["raiMediaFilteredCount"],d);let e=A(a,["raiMediaFilteredReasons"]);return null!=e&&z(b,["raiMediaFilteredReasons"],e),b}(g)),b),i=new O;return Object.assign(i,h),i})}{let b,c,f,h,i,n,o,p,q,r,s=(g=this.apiClient,h={},null!=(i=A(a,["model"]))&&z(h,["_url","model"],Y(g,i)),null!=(n=A(a,["prompt"]))&&z(h,["instances[0]","prompt"],n),null!=(o=A(a,["image"]))&&z(h,["instances[0]","image"],a$(o)),null!=(p=A(a,["video"]))&&z(h,["instances[0]","video"],a6(p)),null!=(q=A(a,["source"]))&&(j=q,k=h,b=A(j,["prompt"]),void 0!==k&&null!=b&&z(k,["instances[0]","prompt"],b),c=A(j,["image"]),void 0!==k&&null!=c&&z(k,["instances[0]","image"],a$(c)),f=A(j,["video"]),void 0!==k&&null!=f&&z(k,["instances[0]","video"],a6(f))),null!=(r=A(a,["config"]))&&function(a,b){let c=A(a,["numberOfVideos"]);if(void 0!==b&&null!=c&&z(b,["parameters","sampleCount"],c),void 0!==A(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==A(a,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let d=A(a,["durationSeconds"]);if(void 0!==b&&null!=d&&z(b,["parameters","durationSeconds"],d),void 0!==A(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let e=A(a,["aspectRatio"]);void 0!==b&&null!=e&&z(b,["parameters","aspectRatio"],e);let f=A(a,["resolution"]);void 0!==b&&null!=f&&z(b,["parameters","resolution"],f);let g=A(a,["personGeneration"]);if(void 0!==b&&null!=g&&z(b,["parameters","personGeneration"],g),void 0!==A(a,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let h=A(a,["negativePrompt"]);void 0!==b&&null!=h&&z(b,["parameters","negativePrompt"],h);let i=A(a,["enhancePrompt"]);if(void 0!==b&&null!=i&&z(b,["parameters","enhancePrompt"],i),void 0!==A(a,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let j=A(a,["lastFrame"]);void 0!==b&&null!=j&&z(b,["instances[0]","lastFrame"],a$(j));let k=A(a,["referenceImages"]);if(void 0!==b&&null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e;return c={},null!=(d=A(b=a,["image"]))&&z(c,["image"],a$(d)),null!=(e=A(b,["referenceType"]))&&z(c,["referenceType"],e),c})),z(b,["instances[0]","referenceImages"],a)}if(void 0!==A(a,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==A(a,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(r,h),h);return l=y("{model}:predictLongRunning",s._url),m=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:m,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>{let b,c,d,e,f,g,h=(b={},null!=(c=A(a,["name"]))&&z(b,["name"],c),null!=(d=A(a,["metadata"]))&&z(b,["metadata"],d),null!=(e=A(a,["done"]))&&z(b,["done"],e),null!=(f=A(a,["error"]))&&z(b,["error"],f),null!=(g=A(a,["response","generateVideoResponse"]))&&z(b,["response"],function(a){let b={},c=A(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=A(a,["video"]))&&z(c,["video"],(e={},null!=(f=A(b=d,["uri"]))&&z(e,["uri"],f),null!=(g=A(b,["encodedVideo"]))&&z(e,["videoBytes"],B(g)),null!=(h=A(b,["encoding"]))&&z(e,["mimeType"],h),e)),c})),z(b,["generatedVideos"],a)}let d=A(a,["raiMediaFilteredCount"]);null!=d&&z(b,["raiMediaFilteredCount"],d);let e=A(a,["raiMediaFilteredReasons"]);return null!=e&&z(b,["raiMediaFilteredReasons"],e),b}(g)),b),i=new O;return Object.assign(i,h),i})}}}class bq extends x{constructor(a){super(),this.apiClient=a}async getVideosOperation(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async get(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,isVertexAI:!1})}}async getVideosOperationInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h=(d={},null!=(e=A(a,["operationName"]))&&z(d,["_url","operationName"],e),d);return f=y("{operationName}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}{let b,c,h=(b={},null!=(c=A(a,["operationName"]))&&z(b,["_url","operationName"],c),b);return f=y("{operationName}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json())}}async fetchPredictVideosOperationInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f,g,h,i=(f={},null!=(g=A(a,["operationName"]))&&z(f,["operationName"],g),null!=(h=A(a,["resourceName"]))&&z(f,["_url","resourceName"],h),f);return d=y("{resourceName}:fetchPredictOperation",i._url),e=i._query,delete i._url,delete i._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}throw Error("This method is only supported by the Vertex AI.")}}class br extends x{constructor(a){super(),this.apiClient=a}async create(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let i,j,k,l,m,n,o,p,q,r,s=(d=this.apiClient,l={},null!=(m=A(a,["config"]))&&z(l,["config"],(n=A(m,["expireTime"]),void 0!==l&&null!=n&&z(l,["expireTime"],n),o=A(m,["newSessionExpireTime"]),void 0!==l&&null!=o&&z(l,["newSessionExpireTime"],o),p=A(m,["uses"]),void 0!==l&&null!=p&&z(l,["uses"],p),q=A(m,["liveConnectConstraints"]),void 0!==l&&null!=q&&z(l,["bidiGenerateContentSetup"],(e=d,i={},null!=(j=A(f=q,["model"]))&&z(i,["setup","model"],Y(e,j)),null!=(k=A(f,["config"]))&&z(i,["config"],function(a,b){let c=A(a,["generationConfig"]);void 0!==b&&null!=c&&z(b,["setup","generationConfig"],c);let d=A(a,["responseModalities"]);void 0!==b&&null!=d&&z(b,["setup","generationConfig","responseModalities"],d);let e=A(a,["temperature"]);void 0!==b&&null!=e&&z(b,["setup","generationConfig","temperature"],e);let f=A(a,["topP"]);void 0!==b&&null!=f&&z(b,["setup","generationConfig","topP"],f);let g=A(a,["topK"]);void 0!==b&&null!=g&&z(b,["setup","generationConfig","topK"],g);let h=A(a,["maxOutputTokens"]);void 0!==b&&null!=h&&z(b,["setup","generationConfig","maxOutputTokens"],h);let i=A(a,["mediaResolution"]);void 0!==b&&null!=i&&z(b,["setup","generationConfig","mediaResolution"],i);let j=A(a,["seed"]);void 0!==b&&null!=j&&z(b,["setup","generationConfig","seed"],j);let k=A(a,["speechConfig"]);void 0!==b&&null!=k&&z(b,["setup","generationConfig","speechConfig"],am(k));let l=A(a,["thinkingConfig"]);void 0!==b&&null!=l&&z(b,["setup","generationConfig","thinkingConfig"],l);let m=A(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&z(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=A(a,["systemInstruction"]);void 0!==b&&null!=n&&z(b,["setup","systemInstruction"],function(a){let b={},c=A(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m;return c={},null!=(d=A(b=a,["functionCall"]))&&z(c,["functionCall"],d),null!=(e=A(b,["codeExecutionResult"]))&&z(c,["codeExecutionResult"],e),null!=(f=A(b,["executableCode"]))&&z(c,["executableCode"],f),null!=(g=A(b,["fileData"]))&&z(c,["fileData"],function(a){let b={};if(void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=A(a,["fileUri"]);null!=c&&z(b,["fileUri"],c);let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(g)),null!=(h=A(b,["functionResponse"]))&&z(c,["functionResponse"],h),null!=(i=A(b,["inlineData"]))&&z(c,["inlineData"],function(a){let b={},c=A(a,["data"]);if(null!=c&&z(b,["data"],c),void 0!==A(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=A(a,["mimeType"]);return null!=d&&z(b,["mimeType"],d),b}(i)),null!=(j=A(b,["text"]))&&z(c,["text"],j),null!=(k=A(b,["thought"]))&&z(c,["thought"],k),null!=(l=A(b,["thoughtSignature"]))&&z(c,["thoughtSignature"],l),null!=(m=A(b,["videoMetadata"]))&&z(c,["videoMetadata"],m),c})),z(b,["parts"],a)}let d=A(a,["role"]);return null!=d&&z(b,["role"],d),b}(ah(n)));let o=A(a,["tools"]);if(void 0!==b&&null!=o){let a=ao(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=A(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z(b,["functionDeclarations"],a)}if(void 0!==A(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=A(a,["googleSearchRetrieval"]);null!=d&&z(b,["googleSearchRetrieval"],d);let e=A(a,["googleMaps"]);null!=e&&z(b,["googleMaps"],function(a){let b={};if(void 0!==A(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=A(a,["enableWidget"]);return null!=c&&z(b,["enableWidget"],c),b}(e));let f=A(a,["computerUse"]);null!=f&&z(b,["computerUse"],f);let g=A(a,["codeExecution"]);if(null!=g&&z(b,["codeExecution"],g),void 0!==A(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=A(a,["googleSearch"]);null!=h&&z(b,["googleSearch"],function(a){let b={};if(void 0!==A(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");let c=A(a,["timeRangeFilter"]);return null!=c&&z(b,["timeRangeFilter"],c),b}(h));let i=A(a,["urlContext"]);return null!=i&&z(b,["urlContext"],i),b})(an(a)))),z(b,["setup","tools"],a)}let p=A(a,["sessionResumption"]);void 0!==b&&null!=p&&z(b,["setup","sessionResumption"],function(a){let b={},c=A(a,["handle"]);if(null!=c&&z(b,["handle"],c),void 0!==A(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=A(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&z(b,["setup","inputAudioTranscription"],q);let r=A(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&z(b,["setup","outputAudioTranscription"],r);let s=A(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&z(b,["setup","realtimeInputConfig"],s);let t=A(a,["contextWindowCompression"]);void 0!==b&&null!=t&&z(b,["setup","contextWindowCompression"],t);let u=A(a,["proactivity"]);return void 0!==b&&null!=u&&z(b,["setup","proactivity"],u),{}}(k,i)),i)),r=A(m,["lockAdditionalFields"]),void 0!==l&&null!=r&&z(l,["fieldMask"],r),{})),l);g=y("auth_tokens",s._url),h=s._query,delete s.config,delete s._url,delete s._query;let t=function(a,b){let c=null,d=a.bidiGenerateContentSetup;if("object"==typeof d&&null!==d&&"setup"in d){let b=d.setup;"object"==typeof b&&null!==b?(a.bidiGenerateContentSetup=b,c=b):delete a.bidiGenerateContentSetup}else void 0!==d&&delete a.bidiGenerateContentSetup;let e=a.fieldMask;if(c){let d=function(a){let b=[];for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)){let d=a[c];if("object"==typeof d&&null!=d&&Object.keys(d).length>0){let a=Object.keys(d).map(a=>`${c}.${a}`);b.push(...a)}else b.push(c)}return b.join(",")}(c);if(Array.isArray(null==b?void 0:b.lockAdditionalFields)&&(null==b?void 0:b.lockAdditionalFields.length)===0)d?a.fieldMask=d:delete a.fieldMask;else if((null==b?void 0:b.lockAdditionalFields)&&b.lockAdditionalFields.length>0&&null!==e&&Array.isArray(e)&&e.length>0){let b=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];e.length>0&&(c=e.map(a=>b.includes(a)?`generationConfig.${a}`:a));let f=[];d&&f.push(d),c.length>0&&f.push(...c),f.length>0?a.fieldMask=f.join(","):delete a.fieldMask}else delete a.fieldMask}else null!==e&&Array.isArray(e)&&e.length>0?a.fieldMask=e.join(","):delete a.fieldMask;return a}(s,a.config);return this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}}let bs="x-goog-api-key",bt="https://www.googleapis.com/auth/cloud-platform";class bu{constructor(a){if(void 0!==a.apiKey){this.apiKey=a.apiKey;return}const b=function(a){let b;if(!a)return{scopes:[bt]};if((b=a).scopes){if("string"==typeof b.scopes&&b.scopes!==bt||Array.isArray(b.scopes)&&0>b.scopes.indexOf(bt))throw Error(`Invalid auth scopes. Scopes must include: ${bt}`)}else b.scopes=[bt];return b}(a.googleAuthOptions);this.googleAuth=new r.GoogleAuth(b)}async addAuthHeaders(a,b){if(void 0!==this.apiKey){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(a);return}return this.addGoogleAuthHeaders(a,b)}addKeyHeader(a){if(null===a.get(bs)){if(void 0===this.apiKey)throw Error("Trying to set API key header but apiKey is not set");a.append(bs,this.apiKey)}}async addGoogleAuthHeaders(a,b){if(void 0===this.googleAuth)throw Error("Trying to set google-auth headers but googleAuth is unset");for(let[c,d]of(await this.googleAuth.getRequestHeaders(b)))null===a.get(c)&&a.append(c,d)}}class bv{async download(a,b){if(a.downloadPath){let c=await bw(a,b);if(c instanceof C){let b=(0,s.createWriteStream)(a.downloadPath);u.Readable.fromWeb(c.responseInternal.body).pipe(b),await (0,v.finished)(b)}else try{await (0,t.writeFile)(a.downloadPath,c,{encoding:"base64"})}catch(b){throw Error(`Failed to write file to ${a.downloadPath}: ${b}`)}}}}async function bw(a,b){var c,d,e;let f=at(a.file);if(void 0!==f)return await b.request({path:`files/${f}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:null==(c=a.config)?void 0:c.httpOptions,abortSignal:null==(d=a.config)?void 0:d.abortSignal});if(ar(a.file)){let b=null==(e=a.file.video)?void 0:e.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download generated video, Uri or videoBytes not found.")}if(as(a.file)){let b=a.file.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download video, Uri or videoBytes not found.")}throw Error("Unsupported file type")}class bx{create(a,b,c){return new by(a,b,c)}}class by{constructor(a,b,c){this.url=a,this.headers=b,this.callbacks=c}connect(){this.ws=new w.default(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(a){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(a)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}function bz(a,b){let c,d,e,f={},g=A(a,["sdkHttpResponse"]);null!=g&&z(f,["sdkHttpResponse"],g);let h=A(a,["name"]);null!=h&&z(f,["name"],h);let i=A(a,["state"]);null!=i&&z(f,["state"],aq(i));let j=A(a,["createTime"]);null!=j&&z(f,["createTime"],j);let k=A(a,["tuningTask","startTime"]);null!=k&&z(f,["startTime"],k);let l=A(a,["tuningTask","completeTime"]);null!=l&&z(f,["endTime"],l);let m=A(a,["updateTime"]);null!=m&&z(f,["updateTime"],m);let n=A(a,["description"]);null!=n&&z(f,["description"],n);let o=A(a,["baseModel"]);null!=o&&z(f,["baseModel"],o);let p=A(a,["_self"]);return null!=p&&z(f,["tunedModel"],(c={},null!=(d=A(p,["name"]))&&z(c,["model"],d),null!=(e=A(p,["name"]))&&z(c,["endpoint"],e),c)),f}function bA(a,b){let c={},d=A(a,["sdkHttpResponse"]);null!=d&&z(c,["sdkHttpResponse"],d);let e=A(a,["name"]);null!=e&&z(c,["name"],e);let f=A(a,["state"]);null!=f&&z(c,["state"],aq(f));let g=A(a,["createTime"]);null!=g&&z(c,["createTime"],g);let h=A(a,["startTime"]);null!=h&&z(c,["startTime"],h);let i=A(a,["endTime"]);null!=i&&z(c,["endTime"],i);let j=A(a,["updateTime"]);null!=j&&z(c,["updateTime"],j);let k=A(a,["error"]);null!=k&&z(c,["error"],k);let l=A(a,["description"]);null!=l&&z(c,["description"],l);let m=A(a,["baseModel"]);null!=m&&z(c,["baseModel"],m);let n=A(a,["tunedModel"]);null!=n&&z(c,["tunedModel"],n);let o=A(a,["preTunedModel"]);null!=o&&z(c,["preTunedModel"],o);let p=A(a,["supervisedTuningSpec"]);null!=p&&z(c,["supervisedTuningSpec"],p);let q=A(a,["preferenceOptimizationSpec"]);null!=q&&z(c,["preferenceOptimizationSpec"],q);let r=A(a,["tuningDataStats"]);null!=r&&z(c,["tuningDataStats"],r);let s=A(a,["encryptionSpec"]);null!=s&&z(c,["encryptionSpec"],s);let t=A(a,["partnerModelTuningSpec"]);null!=t&&z(c,["partnerModelTuningSpec"],t);let u=A(a,["customBaseModel"]);null!=u&&z(c,["customBaseModel"],u);let v=A(a,["experiment"]);null!=v&&z(c,["experiment"],v);let w=A(a,["labels"]);null!=w&&z(c,["labels"],w);let x=A(a,["outputUri"]);null!=x&&z(c,["outputUri"],x);let y=A(a,["pipelineJob"]);null!=y&&z(c,["pipelineJob"],y);let B=A(a,["serviceAccount"]);null!=B&&z(c,["serviceAccount"],B);let C=A(a,["tunedModelDisplayName"]);null!=C&&z(c,["tunedModelDisplayName"],C);let D=A(a,["veoTuningSpec"]);return null!=D&&z(c,["veoTuningSpec"],D),c}function bB(a,b){let c={},d=A(a,["gcsUri"]);null!=d&&z(c,["validationDatasetUri"],d);let e=A(a,["vertexDatasetResource"]);return null!=e&&z(c,["validationDatasetUri"],e),c}class bC extends x{constructor(a){super(),this.apiClient=a,this.get=async a=>await this.getInternal(a),this.list=async(a={})=>new aE(l9.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.tune=async a=>{var b;if(this.apiClient.isVertexAI())if(a.baseModel.startsWith("projects/")){let c={tunedModelName:a.baseModel};(null==(b=a.config)?void 0:b.preTunedModelCheckpointId)&&(c.checkpointId=a.config.preTunedModelCheckpointId);let d=Object.assign(Object.assign({},a),{preTunedModel:c});return d.baseModel=void 0,await this.tuneInternal(d)}else{let b=Object.assign({},a);return await this.tuneInternal(b)}{let b=Object.assign({},a),c=await this.tuneMldevInternal(b),d="";return void 0!==c.metadata&&void 0!==c.metadata.tunedModel?d=c.metadata.tunedModel:void 0!==c.name&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:lH.JOB_STATE_QUEUED}}}}async getInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h=(d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],e),d);return f=y("{name}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>bA(a))}{let b,c,h=(b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],c),b);return f=y("{name}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>bz(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h,i,j,k=(d={},null!=(e=A(a,["config"]))&&(h=A(e,["pageSize"]),void 0!==d&&null!=h&&z(d,["_query","pageSize"],h),i=A(e,["pageToken"]),void 0!==d&&null!=i&&z(d,["_query","pageToken"],i),j=A(e,["filter"]),void 0!==d&&null!=j&&z(d,["_query","filter"],j)),d);return f=y("tuningJobs",k._url),g=k._query,delete k._url,delete k._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(k),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=A(a,["sdkHttpResponse"]);null!=d&&z(c,["sdkHttpResponse"],d);let e=A(a,["nextPageToken"]);null!=e&&z(c,["nextPageToken"],e);let f=A(a,["tuningJobs"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>bA(a))),z(c,["tuningJobs"],a)}return c}(a),c=new P;return Object.assign(c,b),c})}{let b,c,h,i,j,k=(b={},null!=(c=A(a,["config"]))&&(h=A(c,["pageSize"]),void 0!==b&&null!=h&&z(b,["_query","pageSize"],h),i=A(c,["pageToken"]),void 0!==b&&null!=i&&z(b,["_query","pageToken"],i),j=A(c,["filter"]),void 0!==b&&null!=j&&z(b,["_query","filter"],j)),b);return f=y("tunedModels",k._url),g=k._query,delete k._url,delete k._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(k),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=A(a,["sdkHttpResponse"]);null!=d&&z(c,["sdkHttpResponse"],d);let e=A(a,["nextPageToken"]);null!=e&&z(c,["nextPageToken"],e);let f=A(a,["tunedModels"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>bz(a))),z(c,["tuningJobs"],a)}return c}(a),c=new P;return Object.assign(c,b),c})}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h=(d={},null!=(e=A(a,["name"]))&&z(d,["_url","name"],e),d);f=y("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}else{let b,c,h=(b={},null!=(c=A(a,["name"]))&&z(b,["_url","name"],c),b);f=y("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal})}}async tuneInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f,g,h,i,j,k=(f={},null!=(g=A(a,["baseModel"]))&&z(f,["baseModel"],g),null!=(h=A(a,["preTunedModel"]))&&z(f,["preTunedModel"],h),null!=(i=A(a,["trainingDataset"]))&&function(a,b,c){let d=A(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=A(a,["gcsUri"]);void 0!==b&&null!=c&&z(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===d){let c=A(a,["gcsUri"]);void 0!==b&&null!=c&&z(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let e=A(c,["config","method"]);if(void 0===e&&(e="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===e){let c=A(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&z(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===e){let c=A(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&z(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(void 0!==A(a,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(i,f,a),null!=(j=A(a,["config"]))&&function(a,b,c){let d=A(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=A(a,["validationDataset"]);void 0!==b&&null!=c&&z(b,["supervisedTuningSpec"],bB(c))}else if("PREFERENCE_TUNING"===d){let c=A(a,["validationDataset"]);void 0!==b&&null!=c&&z(b,["preferenceOptimizationSpec"],bB(c))}let e=A(a,["tunedModelDisplayName"]);void 0!==b&&null!=e&&z(b,["tunedModelDisplayName"],e);let f=A(a,["description"]);void 0!==b&&null!=f&&z(b,["description"],f);let g=A(c,["config","method"]);if(void 0===g&&(g="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===g){let c=A(a,["epochCount"]);void 0!==b&&null!=c&&z(b,["supervisedTuningSpec","hyperParameters","epochCount"],c)}else if("PREFERENCE_TUNING"===g){let c=A(a,["epochCount"]);void 0!==b&&null!=c&&z(b,["preferenceOptimizationSpec","hyperParameters","epochCount"],c)}let h=A(c,["config","method"]);if(void 0===h&&(h="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===h){let c=A(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&z(b,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c)}else if("PREFERENCE_TUNING"===h){let c=A(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&z(b,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],c)}let i=A(c,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let c=A(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&z(b,["supervisedTuningSpec","exportLastCheckpointOnly"],c)}else if("PREFERENCE_TUNING"===i){let c=A(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&z(b,["preferenceOptimizationSpec","exportLastCheckpointOnly"],c)}let j=A(c,["config","method"]);if(void 0===j&&(j="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===j){let c=A(a,["adapterSize"]);void 0!==b&&null!=c&&z(b,["supervisedTuningSpec","hyperParameters","adapterSize"],c)}else if("PREFERENCE_TUNING"===j){let c=A(a,["adapterSize"]);void 0!==b&&null!=c&&z(b,["preferenceOptimizationSpec","hyperParameters","adapterSize"],c)}if(void 0!==A(a,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==A(a,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let k=A(a,["labels"]);void 0!==b&&null!=k&&z(b,["labels"],k);let l=A(a,["beta"]);void 0!==b&&null!=l&&z(b,["preferenceOptimizationSpec","hyperParameters","beta"],l)}(j,f,a),f);return d=y("tuningJobs",k._url),e=k._query,delete k._url,delete k._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(k),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>bA(a))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j,k=(f={},null!=(g=A(a,["baseModel"]))&&z(f,["baseModel"],g),null!=(h=A(a,["preTunedModel"]))&&z(f,["preTunedModel"],h),null!=(i=A(a,["trainingDataset"]))&&function(a,b){if(void 0!==A(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==A(a,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let c=A(a,["examples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),z({},["examples","examples"],a)}}(i),null!=(j=A(a,["config"]))&&function(a,b,c){if(void 0!==A(a,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let d=A(a,["tunedModelDisplayName"]);if(void 0!==b&&null!=d&&z(b,["displayName"],d),void 0!==A(a,["description"]))throw Error("description parameter is not supported in Gemini API.");let e=A(a,["epochCount"]);void 0!==b&&null!=e&&z(b,["tuningTask","hyperparameters","epochCount"],e);let f=A(a,["learningRateMultiplier"]);if(null!=f&&z({},["tuningTask","hyperparameters","learningRateMultiplier"],f),void 0!==A(a,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==A(a,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==A(a,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let g=A(a,["batchSize"]);void 0!==b&&null!=g&&z(b,["tuningTask","hyperparameters","batchSize"],g);let h=A(a,["learningRate"]);if(void 0!==b&&null!=h&&z(b,["tuningTask","hyperparameters","learningRate"],h),void 0!==A(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==A(a,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(j,f),f);return d=y("tunedModels",k._url),e=k._query,delete k._url,delete k._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(k),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f,g;return b={},null!=(c=A(a,["sdkHttpResponse"]))&&z(b,["sdkHttpResponse"],c),null!=(d=A(a,["name"]))&&z(b,["name"],d),null!=(e=A(a,["metadata"]))&&z(b,["metadata"],e),null!=(f=A(a,["done"]))&&z(b,["done"],f),null!=(g=A(a,["error"]))&&z(b,["error"],g),b})}}}let bD="x-goog-upload-status";async function bE(a,b,c){var d,e,f;let g=0,h=0,i=new C(new Response),j="upload";for(g=a.size;h<g;){let f=Math.min(8388608,g-h),k=a.slice(h,h+f);h+f>=g&&(j+=", finalize");let l=0,m=1e3;for(;l<3&&(null==(d=null==(i=await c.request({path:"",body:k,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":String(h),"Content-Length":String(f)}}}))?void 0:i.headers)||!d[bD]);)l++,await bG(m),m*=2;if(h+=f,(null==(e=null==i?void 0:i.headers)?void 0:e[bD])!=="active")break;if(g<=h)throw Error("All content has been uploaded, but the upload status is not finalized.")}let k=await (null==i?void 0:i.json());if((null==(f=null==i?void 0:i.headers)?void 0:f[bD])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return k.file}async function bF(a){return{size:a.size,type:a.type}}function bG(a){return new Promise(b=>setTimeout(b,a))}class bH{async stat(a){let b={size:0,type:void 0};return"string"==typeof a?(b.size=(await t.stat(a)).size,b.type=this.inferMimeType(a),b):await bF(a)}async upload(a,b,c){return"string"==typeof a?await this.uploadFileFromPath(a,b,c):bE(a,b,c)}inferMimeType(a){return({aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"})[a.slice(a.lastIndexOf(".")+1).toLowerCase()]}async uploadFileFromPath(a,b,c){var d,e,f;let g,h=0,i=0,j=new C(new Response),k="upload";try{if(!(g=await t.open(a,"r")))throw Error("Failed to open file");for(h=(await g.stat()).size;i<h;){let a=Math.min(8388608,h-i);i+a>=h&&(k+=", finalize");let f=new Uint8Array(a),{bytesRead:l}=await g.read(f,0,a,i);if(l!==a)throw Error(`Failed to read ${a} bytes from file at offset ${i}. bytes actually read: ${l}`);let m=new Blob([f]),n=0,o=1e3;for(;n<3&&(null==(d=null==(j=await c.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":k,"X-Goog-Upload-Offset":String(i),"Content-Length":String(l)}}}))?void 0:j.headers)||!d[bD]);)n++,await bG(o),o*=2;if(i+=l,(null==(e=null==j?void 0:j.headers)?void 0:e[bD])!=="active")break;if(h<=i)throw Error("All content has been uploaded, but the upload status is not finalized.")}let l=await (null==j?void 0:j.json());if((null==(f=null==j?void 0:j.headers)?void 0:f[bD])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return l.file}finally{g&&await g.close()}}}class bI{constructor(a){var b,c,f,g,h,i;if((a.project||a.location)&&a.apiKey)throw Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=null!=(c=null!=(b=a.vertexai)?b:function(a){var b;return void 0!==(b=bJ(a))&&"true"===b.toLowerCase()}("GOOGLE_GENAI_USE_VERTEXAI"))&&c;const j=function(){let a=bJ("GOOGLE_API_KEY"),b=bJ("GEMINI_API_KEY");return a&&b&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),a||b||void 0}(),k=bJ("GOOGLE_CLOUD_PROJECT"),l=bJ("GOOGLE_CLOUD_LOCATION");this.apiKey=null!=(f=a.apiKey)?f:j,this.project=null!=(g=a.project)?g:k,this.location=null!=(h=a.location)?h:l,a.vertexai&&((null==(i=a.googleAuthOptions)?void 0:i.credentials)&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(k||l)&&a.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(a.project||a.location)&&j?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(k||l)&&j&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),this.location||this.apiKey||(this.location="global"));const m=function(a,b,c,f){return(null==a?void 0:a.baseUrl)?a.baseUrl:b?null!=e?e:c:null!=d?d:f}(a.httpOptions,a.vertexai,bJ("GOOGLE_VERTEX_BASE_URL"),bJ("GOOGLE_GEMINI_BASE_URL"));m&&(a.httpOptions?a.httpOptions.baseUrl=m:a.httpOptions={baseUrl:m}),this.apiVersion=a.apiVersion;const n=new bu({apiKey:this.apiKey,googleAuthOptions:a.googleAuthOptions});this.apiClient=new ba({auth:n,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:a.httpOptions,userAgentExtra:"gl-node/"+process.version,uploader:new bH,downloader:new bv}),this.models=new bp(this.apiClient),this.live=new bj(this.apiClient,n,new bx),this.batches=new aF(this.apiClient),this.chats=new aN(this.models,this.apiClient),this.caches=new aH(this.apiClient),this.files=new aQ(this.apiClient),this.operations=new bq(this.apiClient),this.authTokens=new br(this.apiClient),this.tunings=new bC(this.apiClient)}}function bJ(a){var b,c,d;return null!=(d=null==(c=null==(b=null==process?void 0:process.env)?void 0:b[a])?void 0:c.trim())?d:void 0}var bK=a.i(81737),bL=a.i(70106);let bM=(0,bL.default)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),bN=(0,bL.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),bO=(0,bL.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var bP=a.i(96221),bQ=a.i(16201);let bR=(0,bL.default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),bS=(0,bL.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),bT=(0,bL.default)("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),bU=({onPostCreated:a})=>{let[b,c]=(0,p.useState)(null),[d,e]=(0,p.useState)([]),[f,g]=(0,p.useState)(""),[h,i]=(0,p.useState)(!1),[j,k]=(0,p.useState)(null),l=(0,p.useRef)(null),[m,n]=(0,p.useState)([]),[q,r]=(0,p.useState)("new"),[s,t]=(0,p.useState)(!1),u=bK.PLATFORMS.map(a=>a.id).join(", "),v=`You are 'ContentOS AI', an expert social media strategist. Your goal is to have a friendly and helpful conversation with the user to brainstorm and create a social media post.

1.  Start by introducing yourself and asking what the user wants to promote or talk about.
2.  Guide the conversation to gather these key details:
    *   A clear **topic**.
    *   One or more target **platforms** from this list: ${u}.
    *   A specific **content type** (e.g., engaging, educational, promotional).
    *   A desired **tone** (e.g., professional, casual, humorous).
3.  Once you have all the information, summarize the plan and ask the user for confirmation to proceed with generating the content. Use markdown for your summary (bolding and bullet points).
4.  **IMPORTANT**: After the user confirms, your VERY NEXT response must be ONLY the generated content as a single JSON object, enclosed in a markdown code block like this:
    \`\`\`json
    {
      "topic": "A brief, descriptive topic summary",
      "twitter": "...",
      "linkedin": "...",
      "imageSuggestion": "...",
      "videoSuggestion": "..."
    }
    \`\`\`
    Only include keys in the JSON for the platforms the user selected. Do not add any text or explanation before or after the JSON block in that final message.`;(0,p.useEffect)(()=>{try{let a=localStorage.getItem("socialMediaChatHistory");if(a){let b=JSON.parse(a),c=b.filter(a=>!a.id.startsWith("temp-"));n(c),c.length!==b.length&&localStorage.setItem("socialMediaChatHistory",JSON.stringify(c))}}catch(a){console.error("Could not parse chat history from localStorage",a)}x(!0)},[]),(0,p.useEffect)(()=>{l.current?.scrollTo({top:l.current.scrollHeight,behavior:"smooth"})},[d]),(0,p.useEffect)(()=>{if(d.length>1&&"new"===q){let a=d.find(a=>"user"===a.role),b=a?a.content.substring(0,40)+(a.content.length>40?"...":""):"Untitled Chat",c={id:"temp-"+Date.now(),title:b,timestamp:new Date().toISOString(),messages:d};n(a=>{let b=[c,...a.filter(a=>!a.id.startsWith("temp-"))];return localStorage.setItem("socialMediaChatHistory",JSON.stringify(b)),b})}},[d,q]);let w=()=>{if(d.length<=1)return;let a=d.find(a=>"user"===a.role),b=a?a.content.substring(0,40)+(a.content.length>40?"...":""):"Untitled Chat",c={id:crypto.randomUUID(),title:b,timestamp:new Date().toISOString(),messages:d};n(a=>{let b=[c,...a.filter(a=>!a.id.startsWith("temp-"))];return localStorage.setItem("socialMediaChatHistory",JSON.stringify(b)),b})},x=(a=!1)=>{a||"new"!==q||w();try{let a=new bI({apiKey:"AIzaSyAKztOeoF7i42xaQ5tHKC18jrQZl4IS91o"}).chats.create({model:"gemini-2.5-flash",config:{systemInstruction:v}});c(a),e([{role:"model",content:"Hello! I'm your AI Content Strategist. What brilliant idea or product are we working on today?"}]),r("new"),k(null)}catch(a){console.error(a),k("Failed to initialize AI strategist. Please check your API key and refresh.")}},y=async a=>{if(a.preventDefault(),!f.trim()||h||!b||"new"!==q)return;let c={role:"user",content:f};e(a=>[...a,c]),g(""),i(!0),k(null);try{let a=await b.sendMessageStream({message:f}),c="";for await(let b of(e(a=>[...a,{role:"model",content:""}]),a))c+=b.text,e(a=>{let b=[...a];return b[b.length-1].content=c,b});let d=c.match(/```json\n([\s\S]*?)\n```/);if(d&&d[1])try{let a=JSON.parse(d[1]);e(b=>{let c=[...b];return c[c.length-1]={role:"system",content:"Here is the content we came up with. Ready to create this post?",postData:a},c})}catch(a){console.error("JSON parsing error:",a),k("The AI returned a plan, but it wasn't formatted correctly. You can ask it to try again.")}}catch(a){console.error(a),k(a instanceof Error?a.message:"An unexpected error occurred."),e(a=>[...a,{role:"system",content:"Sorry, I ran into a problem. Please try again."}])}finally{i(!1)}},z=({msg:b})=>{let c,d,e,f,g,h="user"===b.role,i="model"===b.role;return"system"===b.role&&b.postData?(0,o.jsxs)("div",{className:"bg-white rounded-lg p-4 my-2 text-sm text-charcoal border border-charcoal shadow-lg",children:[(0,o.jsx)("p",{className:"font-semibold mb-4",children:b.content}),(0,o.jsxs)("div",{className:"bg-light-gray p-3 rounded-md mb-4",children:[(0,o.jsxs)("h4",{className:"font-bold text-charcoal-dark mb-2",children:["Topic: ",(0,o.jsx)("span",{className:"font-normal",children:b.postData.topic})]}),(0,o.jsx)("p",{className:"text-xs text-slate whitespace-pre-wrap",children:JSON.stringify(b.postData,null,2)})]}),(0,o.jsxs)("button",{onClick:()=>(b=>{let{topic:c,imageSuggestion:d,videoSuggestion:e,...f}=b,g=Object.keys(f).filter(a=>bK.PLATFORMS.some(b=>b.id===a));0===g.length?k("The generated content didn't specify any valid platforms."):(a({id:crypto.randomUUID(),topic:c||"AI Generated Content",platforms:g,content:{...f,imageSuggestion:d,videoSuggestion:e},status:"draft",createdAt:new Date().toISOString(),isGeneratingImage:!1,isGeneratingVideo:!1,videoGenerationStatus:""}),w(),x())})(b.postData),className:"w-full flex items-center justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-charcoal hover:bg-charcoal-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-charcoal",children:[(0,o.jsx)(bQ.CheckCircle,{className:"w-5 h-5 mr-2"}),"Accept & Create Post"]})]}):(0,o.jsxs)("div",{className:`flex items-start gap-3 my-4 ${h?"flex-row-reverse":""}`,children:[(0,o.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${h?"bg-charcoal":"bg-slate"}`,children:h?(0,o.jsx)(bO,{className:"w-5 h-5 text-white"}):(0,o.jsx)(bN,{className:"w-5 h-5 text-white"})}),(0,o.jsx)("div",{className:`p-3 rounded-lg max-w-2xl text-base ${h?"bg-charcoal text-white":"bg-light-gray text-gray-900"}`,children:i?(c=b.content.split("\n"),d=[],e=[],f=a=>a.split(/(\*\*.*?\*\*)/g).filter(Boolean).map((a,b)=>a.startsWith("**")&&a.endsWith("**")?(0,o.jsx)("strong",{children:a.slice(2,-2)},b):a),g=()=>{e.length>0&&(d.push((0,o.jsx)("ul",{className:"list-disc list-inside space-y-1 my-2",children:e},`ul-${d.length}`)),e=[])},c.forEach((a,b)=>{a.trim().startsWith("* ")?e.push((0,o.jsx)("li",{className:"pl-2",children:f(a.trim().substring(2))},b)):(g(),""!==a.trim()&&d.push((0,o.jsx)("p",{children:f(a)},b)))}),g(),(0,o.jsx)("div",{className:"space-y-2",children:d})):(0,o.jsx)("p",{className:"whitespace-pre-wrap",children:b.content})})]})};return(0,o.jsxs)("div",{className:"max-w-7xl mx-auto h-full flex flex-row gap-6",children:[s&&(0,o.jsxs)("div",{className:"w-1/3 lg:w-1/4 bg-white rounded-lg shadow-xl flex flex-col h-full border border-slate/30",children:[(0,o.jsx)("div",{className:"p-4 border-b border-slate/30",children:(0,o.jsxs)("button",{onClick:()=>x(),className:"w-full flex items-center justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-charcoal hover:bg-charcoal-dark",children:[(0,o.jsx)(bR,{className:"w-5 h-5 mr-2"}),"New Chat"]})}),(0,o.jsxs)("div",{className:"flex-1 overflow-y-auto p-2",children:[(0,o.jsx)("h3",{className:"px-2 pb-2 text-xs font-semibold text-slate uppercase tracking-wider",children:"History"}),(0,o.jsx)("nav",{className:"space-y-1",children:m.map(a=>(0,o.jsxs)("button",{onClick:()=>{"new"===q&&w(),e(a.messages),r(a.id),c(null),i(!1)},className:`w-full text-left flex flex-col p-2 rounded-md transition-colors ${q===a.id?"bg-light-gray":"hover:bg-slate/10"}`,children:[(0,o.jsx)("p",{className:"text-sm font-medium text-charcoal-dark truncate",children:a.title}),(0,o.jsx)("p",{className:"text-xs text-slate",children:new Date(a.timestamp).toLocaleDateString()})]},a.id))})]})]}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-3xl font-bold text-charcoal-dark",children:"AI Content Strategist"}),(0,o.jsx)("button",{onClick:()=>t(!s),className:"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors",title:s?"Hide History":"Show History",children:s?(0,o.jsx)(bT,{className:"w-5 h-5"}):(0,o.jsx)(bS,{className:"w-5 h-5"})})]}),(0,o.jsxs)("div",{className:"flex-grow bg-white rounded-lg shadow-xl flex flex-col p-4 min-h-0 border border-slate/30",children:[(0,o.jsxs)("div",{ref:l,className:"flex-1 overflow-y-auto pr-2",children:[d.map((a,b)=>(0,o.jsx)(z,{msg:a},b)),h&&(0,o.jsxs)("div",{className:"flex items-start gap-3 my-4",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate flex items-center justify-center flex-shrink-0",children:(0,o.jsx)(bN,{className:"w-5 h-5 text-white"})}),(0,o.jsx)("div",{className:"p-3 rounded-lg bg-light-gray text-charcoal flex items-center",children:(0,o.jsx)(bP.Loader2,{className:"w-5 h-5 animate-spin text-slate"})})]})]}),(0,o.jsxs)("div",{className:"mt-4 border-t border-slate/30 pt-4",children:[j&&(0,o.jsx)("p",{className:"text-red-400 text-sm text-center mb-2",children:j}),(0,o.jsxs)("form",{onSubmit:y,className:"flex items-center gap-3",children:[(0,o.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"new"!==q?"Viewing history (read-only)":"Let's brainstorm some content...",className:"flex-1 bg-white border border-slate/30 rounded-full shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-3 px-5",disabled:h||"new"!==q}),(0,o.jsx)("button",{type:"submit",disabled:h||!f.trim()||"new"!==q,className:"p-3 rounded-full text-white bg-charcoal hover:bg-charcoal-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-charcoal disabled:bg-slate disabled:cursor-not-allowed transition-colors",children:(0,o.jsx)(bM,{className:"w-5 h-5"})})]})]})]})]})]})},bV=async(a,b,c)=>{let d=new bI({apiKey:"AIzaSyAKztOeoF7i42xaQ5tHKC18jrQZl4IS91o"}),e=c?`

User's specific guidance: "${c}"
Make sure to incorporate this guidance into your improvements.`:"",f=`
        You are a creative prompt engineer for an advanced generative AI.
        Your task is to take a user's idea and expand it into a rich, detailed, and evocative prompt that will produce a stunning visual.
        For an ${b}, focus on cinematic quality, lighting, composition, and mood.
        Do NOT add any explanatory text, markdown, or preamble. Return ONLY the improved prompt text.

        Original idea: "${a}"${e}
    `;try{return((await d.models.generateContent({model:"gemini-2.5-flash",contents:f})).text??"").trim()}catch(a){throw console.error("Error improving prompt:",a),Error("Failed to improve prompt.")}},bW=async a=>{try{let b=new bI({apiKey:"AIzaSyAKztOeoF7i42xaQ5tHKC18jrQZl4IS91o"}),c=(await b.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:a}]},config:{responseModalities:[lD.IMAGE]}})).candidates??[];if(0===c.length)throw Error("No candidates in response");for(let a of c[0]?.content?.parts??[])if(a.inlineData&&a.inlineData.data){let b=a.inlineData.data;return`data:image/png;base64,${b}`}throw Error("No image data found in response.")}catch(a){throw console.error("Error generating image:",a),Error("Failed to generate image.")}},bX=async a=>{try{let b=new bI({apiKey:"AIzaSyAKztOeoF7i42xaQ5tHKC18jrQZl4IS91o"});return await b.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:a,config:{numberOfVideos:1,resolution:"720p",aspectRatio:"9:16"}})}catch(a){if(console.error("Error starting video generation:",a),a instanceof Error&&a.message.includes("Requested entity was not found"))throw Error("API_KEY_INVALID");throw a}},bY=async a=>{try{let b=new bI({apiKey:"AIzaSyAKztOeoF7i42xaQ5tHKC18jrQZl4IS91o"});return await b.operations.getVideosOperation({operation:a})}catch(a){if(console.error("Error checking video status:",a),a instanceof Error&&a.message.includes("Requested entity was not found"))throw Error("API_KEY_INVALID");throw a}},bZ=async a=>{try{let b=await fetch(`${a}&key=AIzaSyAKztOeoF7i42xaQ5tHKC18jrQZl4IS91o`);if(!b.ok)throw Error(`Failed to fetch video: ${b.statusText}`);let c=await b.blob();return URL.createObjectURL(c)}catch(a){throw console.error("Error fetching video data:",a),a}},b$=async(a,b,c=5)=>{let d=new bI({apiKey:"AIzaSyAKztOeoF7i42xaQ5tHKC18jrQZl4IS91o"}),e=b.map(a=>{let b=bK.PLATFORMS.find(b=>b.id===a);return`- ${b?.name}: Be mindful of its audience and character limit of ${b?.characterLimit}.`}).join("\n"),f=`
        You are an expert social media strategist. Your task is to repurpose the following long-form content into ${c} distinct, engaging social media posts.

        **Long-form Content:**
        ${a}

        **Target Platforms:**
        ${e}

        Create ${c} unique posts. Each post should:
        1. Focus on a different angle, key point, or insight from the content
        2. Be tailored for the specified platforms
        3. Include engaging hooks and calls-to-action
        4. Have a clear, specific topic/focus
        5. Include image and video suggestions

        Return the response as a JSON array of ${c} post objects. Each object must have:
        - "topic": A brief description of the post's focus
        - "platforms": Array of platform names (${b.join(", ")})
        - "content": Object with keys for each platform (${b.join(", ")}) plus "imageSuggestion" and "videoSuggestion"

        Do not include any markdown formatting or explanatory text outside of the JSON array.
    `,g={type:lq.OBJECT,properties:{topic:{type:lq.STRING},platforms:{type:lq.ARRAY,items:{type:lq.STRING}},content:{type:lq.OBJECT,properties:{...b.reduce((a,b)=>(a[b]={type:lq.STRING},a),{}),imageSuggestion:{type:lq.STRING},videoSuggestion:{type:lq.STRING}}}}},h={type:lq.ARRAY,items:g};try{let a=((await d.models.generateContent({model:"gemini-2.5-flash",contents:f,config:{responseMimeType:"application/json",responseSchema:h}})).text??"").trim();return(a=>{if(!a)throw Error("Empty JSON response");let b=a.trim();b=b.replace(/^```(?:json)?\s*/i,"").replace(/```\s*$/i,"").trim();try{return JSON.parse(b)}catch{}let c=b.indexOf("{"),d=b.indexOf("["),e=-1,f="";if(-1!==d&&(-1===c||d<c)?(e=d,f="["):-1!==c&&(e=c,f="{"),-1===e)throw Error("No JSON found in response");let g="["===f?"]":"}",h=0,i=!1,j=!1;for(let a=e;a<b.length;a++){let c=b[a];if(i)j||'"'!==c||(i=!1),j=!j&&"\\"===c;else if('"'===c)i=!0;else if(c===f)h++;else if(c===g&&0==--h)return JSON.parse(b.slice(e,a+1).replace(/,\s*([}\]])/g,"$1"))}throw Error("Failed to extract valid JSON")})(a)}catch(a){throw console.error("Error repurposing content:",a),Error("Failed to repurpose content. Please try again.")}},b_=(a,b)=>b.some(b=>a instanceof b),b0=new WeakMap,b1=new WeakMap,b2=new WeakMap,b3={get(a,b,c){if(a instanceof IDBTransaction){if("done"===b)return b0.get(a);if("store"===b)return c.objectStoreNames[1]?void 0:c.objectStore(c.objectStoreNames[0])}return b4(a[b])},set:(a,b,c)=>(a[b]=c,!0),has:(a,b)=>a instanceof IDBTransaction&&("done"===b||"store"===b)||b in a};function b4(a){if(a instanceof IDBRequest){let b;return b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("success",e),a.removeEventListener("error",f)},e=()=>{b(b4(a.result)),d()},f=()=>{c(a.error),d()};a.addEventListener("success",e),a.addEventListener("error",f)}),b2.set(b,a),b}if(b1.has(a))return b1.get(a);let d=function(a){if("function"==typeof a)return(c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(a)?function(...b){return a.apply(b5(this),b),b4(this.request)}:function(...b){return b4(a.apply(b5(this),b))};return(a instanceof IDBTransaction&&function(a){if(b0.has(a))return;let b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("complete",e),a.removeEventListener("error",f),a.removeEventListener("abort",f)},e=()=>{b(),d()},f=()=>{c(a.error||new DOMException("AbortError","AbortError")),d()};a.addEventListener("complete",e),a.addEventListener("error",f),a.addEventListener("abort",f)});b0.set(a,b)}(a),b_(a,b||(b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(a,b3):a}(a);return d!==a&&(b1.set(a,d),b2.set(d,a)),d}let b5=a=>b2.get(a),b6=["get","getKey","getAll","getAllKeys","count"],b7=["put","add","delete","clear"],b8=new Map;function b9(a,b){if(!(a instanceof IDBDatabase&&!(b in a)&&"string"==typeof b))return;if(b8.get(b))return b8.get(b);let c=b.replace(/FromIndex$/,""),d=b!==c,e=b7.includes(c);if(!(c in(d?IDBIndex:IDBObjectStore).prototype)||!(e||b6.includes(c)))return;let f=async function(a,...b){let f=this.transaction(a,e?"readwrite":"readonly"),g=f.store;return d&&(g=g.index(b.shift())),(await Promise.all([g[c](...b),e&&f.done]))[0]};return b8.set(b,f),f}b3={...j=b3,get:(a,b,c)=>b9(a,b)||j.get(a,b,c),has:(a,b)=>!!b9(a,b)||j.has(a,b)};let ca=["continue","continuePrimaryKey","advance"],cb={},cc=new WeakMap,cd=new WeakMap,ce={get(a,b){if(!ca.includes(b))return a[b];let c=cb[b];return c||(c=cb[b]=function(...a){cc.set(this,cd.get(this)[b](...a))}),c}};async function*cf(...a){let b=this;if(b instanceof IDBCursor||(b=await b.openCursor(...a)),!b)return;let c=new Proxy(b,ce);for(cd.set(c,b),b2.set(c,b5(b));b;)yield c,b=await (cc.get(c)||b.continue()),cc.delete(c)}function cg(a,b){return b===Symbol.asyncIterator&&b_(a,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===b&&b_(a,[IDBIndex,IDBObjectStore])}b3={...k=b3,get:(a,b,c)=>cg(a,b)?cf:k.get(a,b,c),has:(a,b)=>cg(a,b)||k.has(a,b)};let ch=null;async function ci(){return ch||(ch=await function(a,b,{blocked:c,upgrade:d,blocking:e,terminated:f}={}){let g=indexedDB.open(a,1),h=b4(g);return d&&g.addEventListener("upgradeneeded",a=>{d(b4(g.result),a.oldVersion,a.newVersion,b4(g.transaction),a)}),c&&g.addEventListener("blocked",a=>c(a.oldVersion,a.newVersion,a)),h.then(a=>{f&&a.addEventListener("close",()=>f()),e&&a.addEventListener("versionchange",a=>e(a.oldVersion,a.newVersion,a))}).catch(()=>{}),h}("social-media-os-db",0,{upgrade(a){let b=a.createObjectStore("media",{keyPath:"id"});b.createIndex("by-date","createdAt"),b.createIndex("by-type","type"),b.createIndex("by-source","source")}}))}async function cj(a){let b=await ci();await b.put("media",a)}async function ck(){let a=await ci();return(await a.getAll("media")).sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime())}async function cl(a){let b=await ci();await b.delete("media",a)}async function cm(a,b,c){let d={id:crypto.randomUUID(),name:`${b}_${new Date().getTime()}`,type:b,url:a,size:0,tags:c?[c]:[],createdAt:new Date().toISOString(),source:"ai-generated",usedInPosts:[]};return await cj(d),d}async function cn(a){return new Promise(b=>{let c=document.createElement("video");c.src=a,c.crossOrigin="anonymous",c.addEventListener("loadeddata",()=>{c.currentTime=1}),c.addEventListener("seeked",()=>{let a=document.createElement("canvas");a.width=c.videoWidth,a.height=c.videoHeight;let d=a.getContext("2d");d?(d.drawImage(c,0,0,a.width,a.height),b(a.toDataURL("image/jpeg",.7))):b("")})})}async function co(a){let b,c=URL.createObjectURL(a),d=a.type.startsWith("image/")?"image":"video";"video"===d&&(b=await cn(c));let e={id:crypto.randomUUID(),name:a.name,type:d,url:c,thumbnailUrl:b,size:a.size,tags:[],createdAt:new Date().toISOString(),source:"uploaded",usedInPosts:[]};return await cj(e),e}async function cp(){let a=await ck(),b=a.reduce((a,b)=>a+b.size,0);return{totalAssets:a.length,totalSize:b}}let cq=(0,bL.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),cr=(0,bL.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),cs=(0,bL.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var ct=a.i(14548),cu=a.i(81560),cv=a.i(73570);let cw=(0,bL.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var cx=a.i(8406),cy=a.i(77156),cz=a.i(33508);let cA=(0,bL.default)("CircleArrowRight",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]),cB=(0,bL.default)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),cC=(0,bL.default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),cD=(0,bL.default)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),cE=({post:a,onClose:b})=>{let[c,d]=(0,p.useState)(a.platforms[0]??"twitter");return(0,p.useEffect)(()=>{let a=a=>{"Escape"===a.key&&b()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[b]),(0,o.jsxs)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",onClick:b,children:[(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-slate/30",onClick:a=>a.stopPropagation(),children:[(0,o.jsxs)("header",{className:"flex justify-between items-center p-4 border-b border-slate/30 flex-shrink-0",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-charcoal-dark",children:"Post Preview"}),(0,o.jsx)("button",{onClick:b,className:"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors",children:(0,o.jsx)(cz.X,{className:"w-6 h-6"})})]}),(0,o.jsxs)("div",{className:"p-6 overflow-y-auto",children:[(0,o.jsx)(()=>(0,o.jsx)("div",{className:"flex items-center border-b border-slate/30 mb-4",children:a.platforms.map(a=>{let b=bK.PLATFORMS.find(b=>b.id===a);if(!b)return null;let{icon:e,name:f}=b;return(0,o.jsxs)("button",{onClick:()=>d(a),className:`flex items-center gap-2 px-4 py-3 border-b-2 font-medium transition-colors ${c===a?"border-charcoal text-charcoal-dark":"border-transparent text-slate hover:text-charcoal-dark"}`,children:[(0,o.jsx)(e,{className:"w-5 h-5"}),(0,o.jsx)("span",{children:f})]},a)})}),{}),(0,o.jsx)(({platform:b})=>{let c=bK.PLATFORMS.find(a=>a.id===b);if(!c)return null;let d=a.content?.[b]||"";return a.generatedImage||a.generatedVideoUrl,(0,o.jsxs)("div",{className:"bg-light-gray rounded-lg p-4 w-full max-w-lg mx-auto border border-slate/30",children:[(0,o.jsxs)("div",{className:"flex items-center mb-4",children:[(0,o.jsx)("div",{className:"w-11 h-11 bg-charcoal rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:"AI"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"font-semibold text-charcoal-dark leading-tight",children:"AI Content OS (Preview)"}),(0,o.jsxs)("p",{className:"text-xs text-slate",children:["Posting to ",c.name]})]})]}),(0,o.jsx)("p",{className:"text-charcoal text-sm mb-4 whitespace-pre-wrap",children:d}),a.generatedImage?(0,o.jsx)("img",{src:a.generatedImage,alt:"Generated content",className:"rounded-lg w-full border border-slate/30 mb-4"}):a.generatedVideoUrl?(0,o.jsx)("video",{src:a.generatedVideoUrl,controls:!0,className:"rounded-lg w-full border border-slate/30 mb-4"}):a.content?.imageSuggestion?(0,o.jsxs)("div",{className:"bg-white rounded-lg w-full aspect-video flex flex-col items-center justify-center text-slate p-4 mb-4 border border-slate/30",children:[(0,o.jsx)(cr,{className:"w-12 h-12 mb-2"}),(0,o.jsxs)("p",{className:"text-center text-xs italic",children:['Image will be generated for: "',a.content.imageSuggestion,'"']})]}):a.content?.videoSuggestion&&(0,o.jsxs)("div",{className:"bg-white rounded-lg w-full aspect-video flex flex-col items-center justify-center text-slate p-4 mb-4 border border-slate/30",children:[(0,o.jsx)(cq,{className:"w-12 h-12 mb-2"}),(0,o.jsxs)("p",{className:"text-center text-xs italic",children:['Video will be generated for: "',a.content.videoSuggestion,'"']})]}),(0,o.jsxs)("div",{className:"pt-3 border-t border-slate/30 flex justify-around text-slate",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded-md",children:[(0,o.jsx)(cB,{className:"w-5 h-5"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:"Like"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded-md",children:[(0,o.jsx)(cC,{className:"w-5 h-5"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:"Comment"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded-md",children:[(0,o.jsx)(cD,{className:"w-5 h-5"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:"Repost"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded-md",children:[(0,o.jsx)(bM,{className:"w-5 h-5"}),(0,o.jsx)("span",{className:"text-sm font-medium",children:"Send"})]})]})]})},{platform:c})]})]}),(0,o.jsx)("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
                .animate-fade-in {
                    animation: fade-in 0.2s ease-out forwards;
                }
            `})]})},cF=({post:a,onUpdatePost:b,onDeletePost:c,isApiKeyReady:d,onSelectKey:e,resetApiKeyStatus:f})=>{let[g,h]=(0,p.useState)(!1),[i,j]=(0,p.useState)(a.content??{}),[k,l]=(0,p.useState)(a.platforms[0]??"twitter"),[m,n]=(0,p.useState)({image:!1,video:!1}),[q,r]=(0,p.useState)(!1),[s,t]=(0,p.useState)(null),[u,v]=(0,p.useState)("");(0,p.useEffect)(()=>{g||j(a.content??{})},[a.content,g]);let w=(a,b)=>{j(c=>({...c,[a]:b}))},x=c=>{b({...a,status:c})},y=a=>{t(a),v("")},z=async()=>{if(!s)return;let a="image"===s?"imageSuggestion":"videoSuggestion",b=i[a];if(b){n(a=>({...a,[s]:!0})),t(null);try{let c=await bV(b,s,u);j(b=>({...b,[a]:c}))}catch(a){console.error(`Error improving ${s} suggestion:`,a)}finally{n(a=>({...a,[s]:!1})),v("")}}},A=async()=>{if(i.imageSuggestion){b({...a,isGeneratingImage:!0,generatedImage:void 0});try{let c=await bW(i.imageSuggestion);await cm(c,"image",a.topic),b({...a,generatedImage:c,isGeneratingImage:!1,content:i})}catch(c){console.error(c),b({...a,isGeneratingImage:!1})}}},B=async()=>{if(i.videoSuggestion)try{b({...a,isGeneratingVideo:!0,videoGenerationStatus:"Starting...",generatedVideoUrl:void 0});let c=await bX(i.videoSuggestion);b({...a,videoGenerationStatus:"Processing...",videoOperation:c,content:i})}catch(c){c instanceof Error&&"API_KEY_INVALID"===c.message&&f(),b({...a,isGeneratingVideo:!1,videoGenerationStatus:"Generation failed."})}},C=({platform:a})=>{let b=bK.PLATFORMS.find(b=>b.id===a);if(!b)return null;let{icon:c}=b;return(0,o.jsx)("button",{onClick:()=>l(a),className:`flex items-center space-x-2 px-3 py-2 rounded-t-lg transition-colors duration-200 border-b-2 ${k===a?"border-charcoal text-charcoal-dark":"border-transparent text-slate hover:text-charcoal-dark"}`,children:(0,o.jsx)(c,{className:"w-5 h-5"})})},D=({onClick:a,icon:b,label:c,className:d,disabled:e})=>(0,o.jsxs)("button",{onClick:a,disabled:e,className:`flex items-center justify-center text-xs font-semibold py-2.5 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md ${d}`,children:[(0,o.jsx)(b,{className:`w-4 h-4 ${c?"mr-2":""} ${e&&(c.includes("Generating")||c.includes("Improving")||c.includes("Processing"))?"animate-spin":""}`}),c&&(0,o.jsx)("span",{children:c})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-lg flex flex-col overflow-hidden border border-slate/30",children:[(0,o.jsxs)("div",{className:"p-4 bg-light-gray",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsx)("p",{className:"font-bold text-lg text-charcoal-dark pr-2 break-words flex-1",children:a.topic}),(0,o.jsx)(({status:a})=>{let b=bK.STATUS_CONFIG[a];return(0,o.jsx)("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full text-white ${b.color}`,children:b.label})},{status:a.status})]}),(0,o.jsx)("p",{className:"text-xs text-slate mt-1",children:`Created: ${new Date(a.createdAt).toLocaleString()}`})]}),(0,o.jsxs)("div",{className:"flex-grow p-4 space-y-4",children:[(0,o.jsx)("div",{className:"flex border-b border-slate/30",children:a.platforms.map(a=>(0,o.jsx)(C,{platform:a},a))}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(cs,{className:"w-4 h-4 text-charcoal"}),(0,o.jsx)("p",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Content"})]}),(0,o.jsx)("div",{className:"bg-slate/5 border border-slate/20 p-4 rounded-lg",children:(0,o.jsx)("textarea",{readOnly:!g,value:i?.[k]||"",onChange:a=>{var b;return b=a.target.value,void j(a=>({...a,[k]:b}))},className:`w-full h-40 bg-transparent text-charcoal resize-none focus:outline-none text-sm leading-relaxed ${g?"focus:ring-2 focus:ring-charcoal rounded p-2":""}`})})]}),g?(0,o.jsxs)(o.Fragment,{children:[a.content?.imageSuggestion&&(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(cr,{className:"w-4 h-4 text-teal-600"}),(0,o.jsx)("label",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Picture Script"})]}),(0,o.jsxs)("div",{className:"bg-teal-50 border border-teal-200 p-4 rounded-lg space-y-3",children:[(0,o.jsx)("textarea",{value:i.imageSuggestion||"",onChange:a=>w("imageSuggestion",a.target.value),className:"w-full h-24 bg-white p-3 rounded-md text-sm text-charcoal resize-none focus:outline-none focus:ring-2 focus:ring-teal-500 border border-teal-300",placeholder:"Describe the image you want to generate..."}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsx)(D,{onClick:()=>y("image"),disabled:m.image,icon:m.image?bP.Loader2:cx.Sparkles,label:m.image?"Improving...":"Improve",className:"w-full bg-amber-500 hover:bg-amber-600 text-black"}),(0,o.jsx)(D,{onClick:A,disabled:a.isGeneratingImage,icon:a.isGeneratingImage?bP.Loader2:cr,label:a.isGeneratingImage?"Generating...":"Regenerate",className:"w-full text-white bg-teal-600 hover:bg-teal-700"})]}),a.generatedImage&&(0,o.jsx)("img",{src:a.generatedImage,alt:"Generated",className:"rounded-lg w-full mt-2 border border-teal-300"})]})]}),a.content?.videoSuggestion&&(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(cq,{className:"w-4 h-4 text-purple-600"}),(0,o.jsx)("label",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Video Script"})]}),(0,o.jsxs)("div",{className:"bg-purple-50 border border-purple-200 p-4 rounded-lg space-y-3",children:[(0,o.jsx)("textarea",{value:i.videoSuggestion||"",onChange:a=>w("videoSuggestion",a.target.value),className:"w-full h-24 bg-white p-3 rounded-md text-sm text-charcoal resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-300",placeholder:"Describe the video you want to generate..."}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,o.jsx)(D,{onClick:()=>y("video"),disabled:m.video,icon:m.video?bP.Loader2:cx.Sparkles,label:m.video?"Improving...":"Improve",className:"w-full bg-amber-500 hover:bg-amber-600 text-black"}),d||a.generatedVideoUrl?(0,o.jsx)(D,{onClick:B,disabled:a.isGeneratingVideo,icon:a.isGeneratingVideo?bP.Loader2:cq,label:a.isGeneratingVideo?a.videoGenerationStatus.split(" ")[0]:"Regenerate",className:"w-full text-white bg-purple-600 hover:bg-purple-700"}):(0,o.jsxs)("button",{onClick:e,className:"flex items-center justify-center gap-2 p-2 bg-yellow-900/50 rounded text-xs text-yellow-200 underline hover:text-white",children:[(0,o.jsx)(cv.AlertTriangle,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"}),(0,o.jsx)("span",{children:"Select key to generate"})]})]}),a.generatedVideoUrl&&(0,o.jsx)("video",{src:a.generatedVideoUrl,controls:!0,className:"rounded-lg w-full mt-2 border border-purple-300"})]})]})]}):(0,o.jsxs)(o.Fragment,{children:[a.content?.imageSuggestion&&(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(cr,{className:"w-4 h-4 text-teal-600"}),(0,o.jsx)("p",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Picture Script"})]}),(0,o.jsxs)("div",{className:"bg-teal-50 border border-teal-200 p-4 rounded-lg space-y-3",children:[(0,o.jsxs)("p",{className:"text-slate text-xs italic leading-relaxed",children:['"',a.content?.imageSuggestion,'"']}),a.generatedImage?(0,o.jsx)("img",{src:a.generatedImage,alt:"Generated",className:"rounded-lg w-full border border-teal-300"}):(0,o.jsx)(D,{onClick:A,disabled:a.isGeneratingImage,icon:a.isGeneratingImage?bP.Loader2:cr,label:a.isGeneratingImage?"Generating...":"Generate Image",className:"w-full text-white bg-teal-600 hover:bg-teal-700"})]})]}),a.content?.videoSuggestion&&(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(cq,{className:"w-4 h-4 text-purple-600"}),(0,o.jsx)("p",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Video Script"})]}),(0,o.jsxs)("div",{className:"bg-purple-50 border border-purple-200 p-4 rounded-lg space-y-3",children:[(0,o.jsxs)("p",{className:"text-slate text-xs italic leading-relaxed",children:['"',a.content?.videoSuggestion,'"']}),a.generatedVideoUrl?(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("video",{src:a.generatedVideoUrl,controls:!0,className:"rounded-lg w-full border border-purple-300"}),(0,o.jsx)("a",{href:a.generatedVideoUrl,download:`video_${a.id}.mp4`,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 bg-black/50 p-1.5 rounded-full text-white hover:bg-black/80 transition-colors",children:(0,o.jsx)(cw,{className:"w-4 h-4"})})]}):d?(0,o.jsx)(D,{onClick:B,disabled:a.isGeneratingVideo,icon:a.isGeneratingVideo?bP.Loader2:cq,label:a.isGeneratingVideo?a.videoGenerationStatus.split(" ")[0]:"Generate Video",className:"w-full text-white bg-purple-600 hover:bg-purple-700"}):(0,o.jsxs)("button",{onClick:e,className:"flex items-center justify-center gap-2 w-full p-2 bg-yellow-900/50 rounded text-xs text-yellow-200 underline hover:text-white transition-colors",children:[(0,o.jsx)(cv.AlertTriangle,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"}),(0,o.jsx)("span",{children:"Select key to generate"})]})]})]})]})]}),(0,o.jsx)("div",{className:"p-4 bg-light-gray flex flex-wrap gap-3 justify-between items-center border-t border-slate/20",children:g?(0,o.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,o.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,o.jsx)(D,{onClick:()=>{b({...a,content:i}),h(!1)},icon:ct.Save,label:"Save Changes",className:"bg-green-600 hover:bg-green-700 text-white"}),(0,o.jsx)(D,{onClick:()=>{h(!1),j(a.content)},icon:cz.X,label:"Cancel",className:"bg-gray-500 hover:bg-gray-600 text-white"}),(0,o.jsx)(D,{onClick:()=>r(!0),icon:cy.Eye,label:"Preview",className:"bg-blue-600 hover:bg-blue-700 text-white"})]}),(0,o.jsx)(D,{onClick:()=>c(a.id),icon:cu.Trash2,label:"",className:"bg-red-600 hover:bg-red-700 text-white w-10 h-10"})]}):(0,o.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,o.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,o.jsx)(D,{onClick:()=>h(!0),icon:cs,label:"Edit",className:"bg-charcoal hover:bg-charcoal-dark text-white"}),(0,o.jsx)(D,{onClick:()=>r(!0),icon:cy.Eye,label:"Preview",className:"bg-blue-600 hover:bg-blue-700 text-white"}),"draft"===a.status&&(0,o.jsx)(D,{onClick:()=>x("needs approval"),icon:bM,label:"Request Approval",className:"bg-yellow-500 hover:bg-yellow-600 text-black font-bold"}),"needs approval"===a.status&&(0,o.jsx)(D,{onClick:()=>x("approved"),icon:bQ.CheckCircle,label:"Approve",className:"bg-cyan-500 hover:bg-cyan-600 text-white"}),"approved"===a.status&&(0,o.jsx)(D,{onClick:()=>x("ready to publish"),icon:cA,label:"Finalize & Move",className:"bg-charcoal hover:bg-charcoal-dark text-white"})]}),(0,o.jsx)(D,{onClick:()=>c(a.id),icon:cu.Trash2,label:"",className:"bg-red-600 hover:bg-red-700 text-white w-10 h-10"})]})})]}),q&&(0,o.jsx)(cE,{post:{...a,content:i},onClose:()=>r(!1)}),(0,o.jsx)(()=>s?(0,o.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>t(null),children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg flex flex-col border border-slate/30",onClick:a=>a.stopPropagation(),children:[(0,o.jsxs)("header",{className:"flex justify-between items-center p-6 border-b border-slate/30",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h2",{className:"text-xl font-bold text-charcoal-dark",children:["Improve ","image"===s?"Picture":"Video"," Script"]}),(0,o.jsx)("p",{className:"text-sm text-slate mt-1",children:"Provide guidance to enhance the script"})]}),(0,o.jsx)("button",{onClick:()=>t(null),className:"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors",children:(0,o.jsx)(cz.X,{className:"w-6 h-6"})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-charcoal mb-2",children:"What would you like to improve? (Optional)"}),(0,o.jsx)("textarea",{value:u,onChange:a=>v(a.target.value),onKeyDown:a=>a.stopPropagation(),placeholder:'e.g., "Make it more cinematic", "Add more details about lighting", "Focus on emotional impact"...',className:"w-full h-32 px-4 py-3 bg-white border border-slate/30 rounded-lg text-charcoal focus:ring-2 focus:ring-charcoal focus:border-transparent resize-none text-sm leading-relaxed",autoFocus:!0}),(0,o.jsx)("p",{className:"text-xs text-slate mt-2",children:"Leave empty to use AI's default improvement suggestions"})]}),(0,o.jsxs)("div",{className:"flex gap-3",children:[(0,o.jsxs)("button",{onClick:z,className:"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-amber-500 hover:bg-amber-600 text-black font-semibold rounded-lg transition-all shadow-sm hover:shadow-md",children:[(0,o.jsx)(cx.Sparkles,{className:"w-4 h-4"}),"Improve Script"]}),(0,o.jsx)("button",{onClick:()=>t(null),className:"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-charcoal font-semibold rounded-lg transition-all",children:"Cancel"})]})]})]})}):null,{})]})},cG=(0,bL.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),cH=({onSearchChange:a,onStatusChange:b,onPlatformChange:c,showStatusFilter:d=!0,excludeStatuses:e=[]})=>(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg mb-6 flex flex-col md:flex-row items-center gap-4 border border-slate/30",children:[(0,o.jsxs)("div",{className:"relative w-full md:flex-1",children:[(0,o.jsx)(cG,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate w-5 h-5"}),(0,o.jsx)("input",{type:"text",placeholder:"Search by topic...",onChange:b=>a(b.target.value),className:"w-full bg-white border border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-2 pl-10"})]}),(0,o.jsxs)("div",{className:"flex w-full md:w-auto gap-4",children:[d&&(0,o.jsxs)("select",{onChange:a=>b(a.target.value),className:"w-full bg-white border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-2 capitalize",children:[(0,o.jsx)("option",{value:"all",children:"All Statuses"}),Object.entries(bK.STATUS_CONFIG).filter(([a])=>!e.includes(a)).map(([a,{label:b}])=>(0,o.jsx)("option",{value:a,children:b},a))]}),(0,o.jsxs)("select",{onChange:a=>c(a.target.value),className:"w-full bg-white border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-2",children:[(0,o.jsx)("option",{value:"all",children:"All Platforms"}),bK.PLATFORMS.map(a=>(0,o.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]});var cI=a.i(13749);let cJ=(0,bL.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),cK=({posts:a})=>{let[b,c]=(0,p.useState)(new Date),d=new Date(b.getFullYear(),b.getMonth(),1),e=new Date(b.getFullYear(),b.getMonth()+1,0),f=d.getDay(),g=Array.from({length:e.getDate()},(a,b)=>b+1),h=Array.from({length:f}),i=a=>{c(b=>new Date(b.getFullYear(),b.getMonth()+a,1))},j=({status:a})=>(0,o.jsx)("div",{className:`w-2 h-2 rounded-full ${bK.STATUS_CONFIG[a].color}`,title:bK.STATUS_CONFIG[a].label});return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-slate/30",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("button",{onClick:()=>i(-1),className:"p-2 rounded-full hover:bg-slate/10",children:(0,o.jsx)(cI.ChevronLeft,{className:"w-6 h-6"})}),(0,o.jsx)("h3",{className:"text-xl font-semibold text-charcoal-dark",children:b.toLocaleString("default",{month:"long",year:"numeric"})}),(0,o.jsx)("button",{onClick:()=>i(1),className:"p-2 rounded-full hover:bg-slate/10",children:(0,o.jsx)(cJ,{className:"w-6 h-6"})})]}),(0,o.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-slate mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,o.jsx)("div",{children:a},a))}),(0,o.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[h.map((a,b)=>(0,o.jsx)("div",{className:"border border-slate/30 rounded-md h-28"},`empty-${b}`)),g.map(c=>{let d=a.filter(a=>{if("scheduled"!==a.status||!a.scheduledAt)return!1;let d=new Date(a.scheduledAt);return d.getFullYear()===b.getFullYear()&&d.getMonth()===b.getMonth()&&d.getDate()===c}),e=new Date().getFullYear()===b.getFullYear()&&new Date().getMonth()===b.getMonth()&&new Date().getDate()===c;return(0,o.jsxs)("div",{className:`border border-slate/30 rounded-md h-28 p-2 text-left flex flex-col ${e?"bg-charcoal/10":""}`,children:[(0,o.jsx)("span",{className:"font-semibold text-charcoal-dark",children:c}),(0,o.jsx)("div",{className:"flex-grow overflow-y-auto mt-1 space-y-1",children:d.map(a=>(0,o.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-charcoal truncate",children:[(0,o.jsx)(j,{status:a.status}),(0,o.jsx)("p",{className:"truncate",children:a.topic})]},a.id))})]},c)})]})]})},cL=(0,bL.default)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),cM=(0,bL.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),cN=({posts:a,onUpdatePost:b,onDeletePost:c,isApiKeyReady:d,onSelectKey:e,resetApiKeyStatus:f,connectedAccounts:g})=>{let[h,i]=(0,p.useState)("grid"),[j,k]=(0,p.useState)(""),[l,m]=(0,p.useState)("all"),[n,q]=(0,p.useState)("all"),r=(0,p.useMemo)(()=>a.filter(a=>!["ready to publish","scheduled","published"].includes(a.status)),[a]),s=(0,p.useMemo)(()=>r.filter(a=>{let b=a.topic.toLowerCase().includes(j.toLowerCase()),c="all"===l||a.status===l,d="all"===n||a.platforms.includes(n);return b&&c&&d}),[r,j,l,n]),t=({mode:a,icon:b,label:c})=>(0,o.jsxs)("button",{onClick:()=>i(a),className:`flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ${h===a?"bg-charcoal text-white":"bg-white hover:bg-slate/10 border border-slate/30"}`,children:[(0,o.jsx)(b,{className:"w-4 h-4 mr-2"}),c]});return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[(0,o.jsx)("h2",{className:"text-3xl font-bold text-charcoal-dark",children:"Manage & Finalize Posts"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 bg-light-gray p-1 rounded-lg",children:[(0,o.jsx)(t,{mode:"grid",icon:cL,label:"Grid"}),(0,o.jsx)(t,{mode:"calendar",icon:cM,label:"Calendar"})]})]}),(0,o.jsx)(cH,{onSearchChange:k,onStatusChange:m,onPlatformChange:q,excludeStatuses:["published","scheduled","ready to publish"]}),"grid"===h?0===r.length?(0,o.jsxs)("div",{className:"text-center py-20",children:[(0,o.jsx)("h2",{className:"text-3xl font-semibold text-slate",children:"Your content queue is empty!"}),(0,o.jsx)("p",{className:"text-slate mt-2",children:'Go to "Create Content" to generate a new post, or check "Published" for finalized items.'})]}):0===s.length?(0,o.jsxs)("div",{className:"text-center py-20",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold text-slate",children:"No Posts Match Your Filters"}),(0,o.jsx)("p",{className:"text-slate mt-2",children:"Try adjusting your search or selected filters."})]}):(0,o.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(a=>(0,o.jsx)(cF,{post:a,onUpdatePost:b,onDeletePost:c,isApiKeyReady:d,onSelectKey:e,resetApiKeyStatus:f,connectedAccounts:g},a.id))}):(0,o.jsx)(cK,{posts:s})]})};var cO=Symbol.for("immer-nothing"),cP=Symbol.for("immer-draftable"),cQ=Symbol.for("immer-state");function cR(a){throw Error(`[Immer] minified error nr: ${a}. Full error at: https://bit.ly/3cXEKWf`)}var cS=Object.getPrototypeOf;function cT(a){return!!a&&!!a[cQ]}function cU(a){return!!a&&(cX(a)||Array.isArray(a)||!!a[cP]||!!a.constructor?.[cP]||c0(a)||c1(a))}var cV=Object.prototype.constructor.toString(),cW=new WeakMap;function cX(a){if(!a||"object"!=typeof a)return!1;let b=Object.getPrototypeOf(a);if(null===b||b===Object.prototype)return!0;let c=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;if(c===Object)return!0;if("function"!=typeof c)return!1;let d=cW.get(c);return void 0===d&&(d=Function.toString.call(c),cW.set(c,d)),d===cV}function cY(a,b,c=!0){0===cZ(a)?(c?Reflect.ownKeys(a):Object.keys(a)).forEach(c=>{b(c,a[c],a)}):a.forEach((c,d)=>b(d,c,a))}function cZ(a){let b=a[cQ];return b?b.type_:Array.isArray(a)?1:c0(a)?2:3*!!c1(a)}function c$(a,b){return 2===cZ(a)?a.has(b):Object.prototype.hasOwnProperty.call(a,b)}function c_(a,b,c){let d=cZ(a);2===d?a.set(b,c):3===d?a.add(c):a[b]=c}function c0(a){return a instanceof Map}function c1(a){return a instanceof Set}function c2(a){return a.copy_||a.base_}function c3(a,b){if(c0(a))return new Map(a);if(c1(a))return new Set(a);if(Array.isArray(a))return Array.prototype.slice.call(a);let c=cX(a);if(!0!==b&&("class_only"!==b||c)){let b=cS(a);return null!==b&&c?{...a}:Object.assign(Object.create(b),a)}{let b=Object.getOwnPropertyDescriptors(a);delete b[cQ];let c=Reflect.ownKeys(b);for(let d=0;d<c.length;d++){let e=c[d],f=b[e];!1===f.writable&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(b[e]={configurable:!0,writable:!0,enumerable:f.enumerable,value:a[e]})}return Object.create(cS(a),b)}}function c4(a,b=!1){return c6(a)||cT(a)||!cU(a)||(cZ(a)>1&&Object.defineProperties(a,{set:c5,add:c5,clear:c5,delete:c5}),Object.freeze(a),b&&Object.values(a).forEach(a=>c4(a,!0))),a}var c5={value:function(){cR(2)}};function c6(a){return null===a||"object"!=typeof a||Object.isFrozen(a)}var c7={};function c8(a){let b=c7[a];return b||cR(0,a),b}function c9(a,b){b&&(c8("Patches"),a.patches_=[],a.inversePatches_=[],a.patchListener_=b)}function da(a){db(a),a.drafts_.forEach(dd),a.drafts_=null}function db(a){a===ma&&(ma=a.parent_)}function dc(a){return ma={drafts_:[],parent_:ma,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dd(a){let b=a[cQ];0===b.type_||1===b.type_?b.revoke_():b.revoked_=!0}function de(a,b){b.unfinalizedDrafts_=b.drafts_.length;let c=b.drafts_[0];return void 0!==a&&a!==c?(c[cQ].modified_&&(da(b),cR(4)),cU(a)&&(a=df(b,a),b.parent_||dh(b,a)),b.patches_&&c8("Patches").generateReplacementPatches_(c[cQ].base_,a,b.patches_,b.inversePatches_)):a=df(b,c,[]),da(b),b.patches_&&b.patchListener_(b.patches_,b.inversePatches_),a!==cO?a:void 0}function df(a,b,c){if(c6(b))return b;let d=a.immer_.shouldUseStrictIteration(),e=b[cQ];if(!e)return cY(b,(d,f)=>dg(a,e,b,d,f,c),d),b;if(e.scope_!==a)return b;if(!e.modified_)return dh(a,e.base_,!0),e.base_;if(!e.finalized_){e.finalized_=!0,e.scope_.unfinalizedDrafts_--;let b=e.copy_,f=b,g=!1;3===e.type_&&(f=new Set(b),b.clear(),g=!0),cY(f,(d,f)=>dg(a,e,b,d,f,c,g),d),dh(a,b,!1),c&&a.patches_&&c8("Patches").generatePatches_(e,c,a.patches_,a.inversePatches_)}return e.copy_}function dg(a,b,c,d,e,f,g){if(null==e||"object"!=typeof e&&!g)return;let h=c6(e);if(!h||g){if(cT(e)){let g=df(a,e,f&&b&&3!==b.type_&&!c$(b.assigned_,d)?f.concat(d):void 0);if(c_(c,d,g),!cT(g))return;a.canAutoFreeze_=!1}else g&&c.add(e);if(cU(e)&&!h){if(!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||b&&b.base_&&b.base_[d]===e&&h)return;df(a,e),(!b||!b.scope_.parent_)&&"symbol"!=typeof d&&(c0(c)?c.has(d):Object.prototype.propertyIsEnumerable.call(c,d))&&dh(a,e)}}}function dh(a,b,c=!1){!a.parent_&&a.immer_.autoFreeze_&&a.canAutoFreeze_&&c4(b,c)}var di={get(a,b){if(b===cQ)return a;let c=c2(a);if(!c$(c,b)){var d;let e;return d=a,(e=dl(c,b))?"value"in e?e.value:e.get?.call(d.draft_):void 0}let e=c[b];return a.finalized_||!cU(e)?e:e===dk(a.base_,b)?(dn(a),a.copy_[b]=dp(e,a)):e},has:(a,b)=>b in c2(a),ownKeys:a=>Reflect.ownKeys(c2(a)),set(a,b,c){let d=dl(c2(a),b);if(d?.set)return d.set.call(a.draft_,c),!0;if(!a.modified_){let d=dk(c2(a),b),e=d?.[cQ];if(e&&e.base_===c)return a.copy_[b]=c,a.assigned_[b]=!1,!0;if((c===d?0!==c||1/c==1/d:c!=c&&d!=d)&&(void 0!==c||c$(a.base_,b)))return!0;dn(a),dm(a)}return!!(a.copy_[b]===c&&(void 0!==c||b in a.copy_)||Number.isNaN(c)&&Number.isNaN(a.copy_[b]))||(a.copy_[b]=c,a.assigned_[b]=!0,!0)},deleteProperty:(a,b)=>(void 0!==dk(a.base_,b)||b in a.base_?(a.assigned_[b]=!1,dn(a),dm(a)):delete a.assigned_[b],a.copy_&&delete a.copy_[b],!0),getOwnPropertyDescriptor(a,b){let c=c2(a),d=Reflect.getOwnPropertyDescriptor(c,b);return d?{writable:!0,configurable:1!==a.type_||"length"!==b,enumerable:d.enumerable,value:c[b]}:d},defineProperty(){cR(11)},getPrototypeOf:a=>cS(a.base_),setPrototypeOf(){cR(12)}},dj={};function dk(a,b){let c=a[cQ];return(c?c2(c):a)[b]}function dl(a,b){if(!(b in a))return;let c=cS(a);for(;c;){let a=Object.getOwnPropertyDescriptor(c,b);if(a)return a;c=cS(c)}}function dm(a){!a.modified_&&(a.modified_=!0,a.parent_&&dm(a.parent_))}function dn(a){a.copy_||(a.copy_=c3(a.base_,a.scope_.immer_.useStrictShallowCopy_))}function dp(a,b){let c=c0(a)?c8("MapSet").proxyMap_(a,b):c1(a)?c8("MapSet").proxySet_(a,b):function(a,b){let c=Array.isArray(a),d={type_:+!!c,scope_:b?b.scope_:ma,modified_:!1,finalized_:!1,assigned_:{},parent_:b,base_:a,draft_:null,copy_:null,revoke_:null,isManual_:!1},e=d,f=di;c&&(e=[d],f=dj);let{revoke:g,proxy:h}=Proxy.revocable(e,f);return d.draft_=h,d.revoke_=g,h}(a,b);return(b?b.scope_:ma).drafts_.push(c),c}function dq(a){return cT(a)||cR(10,a),function a(b){let c;if(!cU(b)||c6(b))return b;let d=b[cQ],e=!0;if(d){if(!d.modified_)return d.base_;d.finalized_=!0,c=c3(b,d.scope_.immer_.useStrictShallowCopy_),e=d.scope_.immer_.shouldUseStrictIteration()}else c=c3(b,!0);return cY(c,(b,d)=>{c_(c,b,a(d))},e),d&&(d.finalized_=!1),c}(a)}cY(di,(a,b)=>{dj[a]=function(){return arguments[0]=arguments[0][0],b.apply(this,arguments)}}),dj.deleteProperty=function(a,b){return dj.set.call(this,a,b,void 0)},dj.set=function(a,b,c){return di.set.call(this,a[0],b,c,a[0])};var dr=new class{constructor(a){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(a,b,c)=>{let d;if("function"==typeof a&&"function"!=typeof b){let c=b;b=a;let d=this;return function(a=c,...e){return d.produce(a,a=>b.call(this,a,...e))}}if("function"!=typeof b&&cR(6),void 0!==c&&"function"!=typeof c&&cR(7),cU(a)){let e=dc(this),f=dp(a,void 0),g=!0;try{d=b(f),g=!1}finally{g?da(e):db(e)}return c9(e,c),de(d,e)}if(a&&"object"==typeof a)cR(1,a);else{if(void 0===(d=b(a))&&(d=a),d===cO&&(d=void 0),this.autoFreeze_&&c4(d,!0),c){let b=[],e=[];c8("Patches").generateReplacementPatches_(a,d,b,e),c(b,e)}return d}},this.produceWithPatches=(a,b)=>{let c,d;return"function"==typeof a?(b,...c)=>this.produceWithPatches(b,b=>a(b,...c)):[this.produce(a,b,(a,b)=>{c=a,d=b}),c,d]},"boolean"==typeof a?.autoFreeze&&this.setAutoFreeze(a.autoFreeze),"boolean"==typeof a?.useStrictShallowCopy&&this.setUseStrictShallowCopy(a.useStrictShallowCopy),"boolean"==typeof a?.useStrictIteration&&this.setUseStrictIteration(a.useStrictIteration)}createDraft(a){cU(a)||cR(8),cT(a)&&(a=dq(a));let b=dc(this),c=dp(a,void 0);return c[cQ].isManual_=!0,db(b),c}finishDraft(a,b){let c=a&&a[cQ];c&&c.isManual_||cR(9);let{scope_:d}=c;return c9(d,b),de(void 0,d)}setAutoFreeze(a){this.autoFreeze_=a}setUseStrictShallowCopy(a){this.useStrictShallowCopy_=a}setUseStrictIteration(a){this.useStrictIteration_=a}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(a,b){let c;for(c=b.length-1;c>=0;c--){let d=b[c];if(0===d.path.length&&"replace"===d.op){a=d.value;break}}c>-1&&(b=b.slice(c+1));let d=c8("Patches").applyPatches_;return cT(a)?d(a,b):this.produce(a,a=>d(a,b))}}().produce,ds=a=>Array.isArray(a)?a:[a],dt=0,du=class{revision=dt;_value;_lastValue;_isEqual=dv;constructor(a,b=dv){this._value=this._lastValue=a,this._isEqual=b}get value(){return this._value}set value(a){this.value!==a&&(this._value=a,this.revision=++dt)}};function dv(a,b){return a===b}function dw(a){return a instanceof du||console.warn("Not a valid cell! ",a),a.value}var dx=(a,b)=>!1;function dy(){return function(a,b=dv){return new du(null,b)}(0,dx)}var dz=a=>{let b=a.collectionTag;null===b&&(b=a.collectionTag=dy()),dw(b)};Symbol();var dA=0,dB=Object.getPrototypeOf({}),dC=class{constructor(a){this.value=a,this.value=a,this.tag.value=a}proxy=new Proxy(this,dD);tag=dy();tags={};children={};collectionTag=null;id=dA++},dD={get:(a,b)=>(function(){let{value:c}=a,d=Reflect.get(c,b);if("symbol"==typeof b||b in dB)return d;if("object"==typeof d&&null!==d){var e;let c=a.children[b];return void 0===c&&(c=a.children[b]=Array.isArray(e=d)?new dE(e):new dC(e)),c.tag&&dw(c.tag),c.proxy}{let c=a.tags[b];return void 0===c&&((c=a.tags[b]=dy()).value=d),dw(c),d}})(),ownKeys:a=>(dz(a),Reflect.ownKeys(a.value)),getOwnPropertyDescriptor:(a,b)=>Reflect.getOwnPropertyDescriptor(a.value,b),has:(a,b)=>Reflect.has(a.value,b)},dE=class{constructor(a){this.value=a,this.value=a,this.tag.value=a}proxy=new Proxy([this],dF);tag=dy();tags={};children={};collectionTag=null;id=dA++},dF={get:([a],b)=>("length"===b&&dz(a),dD.get(a,b)),ownKeys:([a])=>dD.ownKeys(a),getOwnPropertyDescriptor:([a],b)=>dD.getOwnPropertyDescriptor(a,b),has:([a],b)=>dD.has(a,b)},dG="undefined"!=typeof WeakRef?WeakRef:class{constructor(a){this.value=a}deref(){return this.value}};function dH(){return{s:0,v:void 0,o:null,p:null}}function dI(a,b={}){let c,d=dH(),{resultEqualityCheck:e}=b,f=0;function g(){let b,g=d,{length:h}=arguments;for(let a=0;a<h;a++){let b=arguments[a];if("function"==typeof b||"object"==typeof b&&null!==b){let a=g.o;null===a&&(g.o=a=new WeakMap);let c=a.get(b);void 0===c?(g=dH(),a.set(b,g)):g=c}else{let a=g.p;null===a&&(g.p=a=new Map);let c=a.get(b);void 0===c?(g=dH(),a.set(b,g)):g=c}}let i=g;if(1===g.s)b=g.v;else if(b=a.apply(null,arguments),f++,e){let a=c?.deref?.()??c;null!=a&&e(a,b)&&(b=a,0!==f&&f--),c="object"==typeof b&&null!==b||"function"==typeof b?new dG(b):b}return i.s=1,i.v=b,b}return g.clearCache=()=>{d=dH(),g.resetResultsCount()},g.resultsCount=()=>f,g.resetResultsCount=()=>{f=0},g}var dJ=function(a,...b){let c="function"==typeof a?{memoize:a,memoizeOptions:b}:a,d=(...a)=>{let b,d,e=0,f=0,g={},h=a.pop();"object"==typeof h&&(g=h,h=a.pop()),function(a,b=`expected a function, instead received ${typeof a}`){if("function"!=typeof a)throw TypeError(b)}(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);let{memoize:i,memoizeOptions:j=[],argsMemoize:k=dI,argsMemoizeOptions:l=[],devModeChecks:m={}}={...c,...g},n=ds(j),o=ds(l),p=(!function(a,b="expected all items to be functions, instead received the following types: "){if(!a.every(a=>"function"==typeof a)){let c=a.map(a=>"function"==typeof a?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw TypeError(`${b}[${c}]`)}}(b=Array.isArray(a[0])?a[0]:a,"createSelector expects all input-selectors to be functions, but received the following types: "),b),q=i(function(){return e++,h.apply(null,arguments)},...n);return Object.assign(k(function(){f++;let a=function(a,b){let c=[],{length:d}=a;for(let e=0;e<d;e++)c.push(a[e].apply(null,b));return c}(p,arguments);return d=q.apply(null,a)},...o),{resultFunc:h,memoizedResultFunc:q,dependencies:p,dependencyRecomputations:()=>f,resetDependencyRecomputations:()=>{f=0},lastResult:()=>d,recomputations:()=>e,resetRecomputations:()=>{e=0},memoize:i,argsMemoize:k})};return Object.assign(d,{withTypes:()=>d}),d}(dI),dK=Object.assign((a,b=dJ)=>{!function(a,b=`expected an object, instead received ${typeof a}`){if("object"!=typeof a)throw TypeError(b)}(a,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof a}`);let c=Object.keys(a);return b(c.map(b=>a[b]),(...a)=>a.reduce((a,b,d)=>(a[c[d]]=b,a),{}))},{withTypes:()=>dK});function dL(a){return`Minified Redux error #${a}; visit https://redux.js.org/Errors?code=${a} for the full message or use the non-minified dev environment for full errors. `}var dM="function"==typeof Symbol&&Symbol.observable||"@@observable",dN=()=>Math.random().toString(36).substring(7).split("").join("."),dO={INIT:`@@redux/INIT${dN()}`,REPLACE:`@@redux/REPLACE${dN()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dN()}`};function dP(a){if("object"!=typeof a||null===a)return!1;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b||null===Object.getPrototypeOf(a)}function dQ(a){let b,c=Object.keys(a),d={};for(let b=0;b<c.length;b++){let e=c[b];"function"==typeof a[e]&&(d[e]=a[e])}let e=Object.keys(d);try{Object.keys(d).forEach(a=>{let b=d[a];if(void 0===b(void 0,{type:dO.INIT}))throw Error(dL(12));if(void 0===b(void 0,{type:dO.PROBE_UNKNOWN_ACTION()}))throw Error(dL(13))})}catch(a){b=a}return function(a={},c){if(b)throw b;let f=!1,g={};for(let b=0;b<e.length;b++){let h=e[b],i=d[h],j=a[h],k=i(j,c);if(void 0===k)throw c&&c.type,Error(dL(14));g[h]=k,f=f||k!==j}return(f=f||e.length!==Object.keys(a).length)?g:a}}function dR(...a){return 0===a.length?a=>a:1===a.length?a[0]:a.reduce((a,b)=>(...c)=>a(b(...c)))}function dS(a){return dP(a)&&"type"in a&&"string"==typeof a.type}function dT(a){return({dispatch:b,getState:c})=>d=>e=>"function"==typeof e?e(b,c,a):d(e)}var dU=dT(),dV=function(){if(0!=arguments.length)return"object"==typeof arguments[0]?dR:dR.apply(null,arguments)};function dW(a,b){function c(...d){if(b){let c=b(...d);if(!c)throw Error(eC(0));return{type:a,payload:c.payload,..."meta"in c&&{meta:c.meta},..."error"in c&&{error:c.error}}}return{type:a,payload:d[0]}}return c.toString=()=>`${a}`,c.type=a,c.match=b=>dS(b)&&b.type===a,c}var dX=class a extends Array{constructor(...b){super(...b),Object.setPrototypeOf(this,a.prototype)}static get[Symbol.species](){return a}concat(...a){return super.concat.apply(this,a)}prepend(...b){return 1===b.length&&Array.isArray(b[0])?new a(...b[0].concat(this)):new a(...b.concat(this))}};function dY(a){return cU(a)?dr(a,()=>{}):a}function dZ(a,b,c){return a.has(b)?a.get(b):a.set(b,c(b)).get(b)}var d$="RTK_autoBatch",d_=()=>a=>({payload:a,meta:{[d$]:!0}}),d0=a=>b=>{setTimeout(b,a)},d1=(a={type:"raf"})=>b=>(...c)=>{let d=b(...c),e=!0,f=!1,g=!1,h=new Set,i="tick"===a.type?queueMicrotask:"raf"===a.type?d0(10):"callback"===a.type?a.queueNotification:d0(a.timeout),j=()=>{g=!1,f&&(f=!1,h.forEach(a=>a()))};return Object.assign({},d,{subscribe(a){let b=d.subscribe(()=>e&&a());return h.add(a),()=>{b(),h.delete(a)}},dispatch(a){try{return(f=!(e=!a?.meta?.[d$]))&&!g&&(g=!0,i(j)),d.dispatch(a)}finally{e=!0}}})};function d2(a){let b,c={},d=[],e={addCase(a,b){let d="string"==typeof a?a:a.type;if(!d)throw Error(eC(28));if(d in c)throw Error(eC(29));return c[d]=b,e},addAsyncThunk:(a,b)=>(b.pending&&(c[a.pending.type]=b.pending),b.rejected&&(c[a.rejected.type]=b.rejected),b.fulfilled&&(c[a.fulfilled.type]=b.fulfilled),b.settled&&d.push({matcher:a.settled,reducer:b.settled}),e),addMatcher:(a,b)=>(d.push({matcher:a,reducer:b}),e),addDefaultCase:a=>(b=a,e)};return a(e),[c,d,b]}var d3=Symbol.for("rtk-slice-createasyncthunk"),d4=((lm=d4||{}).reducer="reducer",lm.reducerWithPrepare="reducerWithPrepare",lm.asyncThunk="asyncThunk",lm),d5=function({creators:a}={}){let b=a?.asyncThunk?.[d3];return function(a){let c,{name:d,reducerPath:e=d}=a;if(!d)throw Error(eC(11));let f=("function"==typeof a.reducers?a.reducers(function(){function a(a,b){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...b}}return a.withTypes=()=>a,{reducer:a=>Object.assign({[a.name]:(...b)=>a(...b)}[a.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(a,b)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:b}),asyncThunk:a}}()):a.reducers)||{},g=Object.keys(f),h={},i={},j={},k=[],l={addCase(a,b){let c="string"==typeof a?a:a.type;if(!c)throw Error(eC(12));if(c in i)throw Error(eC(13));return i[c]=b,l},addMatcher:(a,b)=>(k.push({matcher:a,reducer:b}),l),exposeAction:(a,b)=>(j[a]=b,l),exposeCaseReducer:(a,b)=>(h[a]=b,l)};function m(){let[b={},c=[],d]="function"==typeof a.extraReducers?d2(a.extraReducers):[a.extraReducers],e={...b,...i};return function(a,b){let c,[d,e,f]=d2(b);if("function"==typeof a)c=()=>dY(a());else{let b=dY(a);c=()=>b}function g(a=c(),b){let h=[d[b.type],...e.filter(({matcher:a})=>a(b)).map(({reducer:a})=>a)];return 0===h.filter(a=>!!a).length&&(h=[f]),h.reduce((a,c)=>{if(c)if(cT(a)){let d=c(a,b);return void 0===d?a:d}else{if(cU(a))return dr(a,a=>c(a,b));let d=c(a,b);if(void 0===d){if(null===a)return a;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}return a},a)}return g.getInitialState=c,g}(a.initialState,a=>{for(let b in e)a.addCase(b,e[b]);for(let b of k)a.addMatcher(b.matcher,b.reducer);for(let b of c)a.addMatcher(b.matcher,b.reducer);d&&a.addDefaultCase(d)})}g.forEach(c=>{let e=f[c],g={reducerName:c,type:`${d}/${c}`,createNotation:"function"==typeof a.reducers};"asyncThunk"===e._reducerDefinitionType?function({type:a,reducerName:b},c,d,e){if(!e)throw Error(eC(18));let{payloadCreator:f,fulfilled:g,pending:h,rejected:i,settled:j,options:k}=c,l=e(a,f,k);d.exposeAction(b,l),g&&d.addCase(l.fulfilled,g),h&&d.addCase(l.pending,h),i&&d.addCase(l.rejected,i),j&&d.addMatcher(l.settled,j),d.exposeCaseReducer(b,{fulfilled:g||d6,pending:h||d6,rejected:i||d6,settled:j||d6})}(g,e,l,b):function({type:a,reducerName:b,createNotation:c},d,e){let f,g;if("reducer"in d){if(c&&"reducerWithPrepare"!==d._reducerDefinitionType)throw Error(eC(17));f=d.reducer,g=d.prepare}else f=d;e.addCase(a,f).exposeCaseReducer(b,f).exposeAction(b,g?dW(a,g):dW(a))}(g,e,l)});let n=a=>a,o=new Map,p=new WeakMap;function q(a,b){return c||(c=m()),c(a,b)}function r(){return c||(c=m()),c.getInitialState()}function s(b,c=!1){function d(a){let e=a[b];return void 0===e&&c&&(e=dZ(p,d,r)),e}function e(b=n){let d=dZ(o,c,()=>new WeakMap);return dZ(d,b,()=>{let d={};for(let[e,f]of Object.entries(a.selectors??{}))d[e]=function(a,b,c,d){function e(f,...g){let h=b(f);return void 0===h&&d&&(h=c()),a(h,...g)}return e.unwrapped=a,e}(f,b,()=>dZ(p,b,r),c);return d})}return{reducerPath:b,getSelectors:e,get selectors(){return e(d)},selectSlice:d}}let t={name:d,reducer:q,actions:j,caseReducers:h,getInitialState:r,...s(e),injectInto(a,{reducerPath:b,...c}={}){let d=b??e;return a.inject({reducerPath:d,reducer:q},c),{...t,...s(d,!0)}}};return t}}();function d6(){}var d7="listener",d8="completed",d9="cancelled",ea=`task-${d9}`,eb=`task-${d8}`,ec=`${d7}-${d9}`,ed=`${d7}-${d8}`,ee=class{constructor(a){this.code=a,this.message=`task ${d9} (reason: ${a})`}name="TaskAbortError";message},ef=(a,b)=>{if("function"!=typeof a)throw TypeError(eC(32))},eg=()=>{},eh=(a,b=eg)=>(a.catch(b),a),ei=(a,b)=>(a.addEventListener("abort",b,{once:!0}),()=>a.removeEventListener("abort",b)),ej=(a,b)=>{let c=a.signal;c.aborted||("reason"in c||Object.defineProperty(c,"reason",{enumerable:!0,value:b,configurable:!0,writable:!0}),a.abort(b))},ek=a=>{if(a.aborted){let{reason:b}=a;throw new ee(b)}};function el(a,b){let c=eg;return new Promise((d,e)=>{let f=()=>e(new ee(a.reason));a.aborted?f():(c=ei(a,f),b.finally(()=>c()).then(d,e))}).finally(()=>{c=eg})}var em=async(a,b)=>{try{await Promise.resolve();let b=await a();return{status:"ok",value:b}}catch(a){return{status:a instanceof ee?"cancelled":"rejected",error:a}}finally{b?.()}},en=a=>b=>eh(el(a,b).then(b=>(ek(a),b))),eo=a=>{let b=en(a);return a=>b(new Promise(b=>setTimeout(b,a)))},{assign:ep}=Object,eq={},er="listenerMiddleware",es=a=>{let{type:b,actionCreator:c,matcher:d,predicate:e,effect:f}=a;if(b)e=dW(b).match;else if(c)b=c.type,e=c.match;else if(d)e=d;else if(e);else throw Error(eC(21));return ef(f,"options.listener"),{predicate:e,type:b,effect:f}},et=ep(a=>{let{type:b,predicate:c,effect:d}=es(a);return{id:((a=21)=>{let b="",c=a;for(;c--;)b+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return b})(),effect:d,type:b,predicate:c,pending:new Set,unsubscribe:()=>{throw Error(eC(22))}}},{withTypes:()=>et}),eu=(a,b)=>{let{type:c,effect:d,predicate:e}=es(b);return Array.from(a.values()).find(a=>("string"==typeof c?a.type===c:a.predicate===e)&&a.effect===d)},ev=a=>{a.pending.forEach(a=>{ej(a,ec)})},ew=(a,b,c)=>{try{a(b,c)}catch(a){setTimeout(()=>{throw a},0)}},ex=ep(dW(`${er}/add`),{withTypes:()=>ex}),ey=dW(`${er}/removeAll`),ez=ep(dW(`${er}/remove`),{withTypes:()=>ez}),eA=(...a)=>{console.error(`${er}/error`,...a)},eB=(a={})=>{let b=new Map,c=new Map,{extra:d,onError:e=eA}=a;ef(e,"onError");let f=a=>{var c;return(c=eu(b,a)??et(a)).unsubscribe=()=>b.delete(c.id),b.set(c.id,c),a=>{c.unsubscribe(),a?.cancelActive&&ev(c)}};ep(f,{withTypes:()=>f});let g=a=>{let c=eu(b,a);return c&&(c.unsubscribe(),a.cancelActive&&ev(c)),!!c};ep(g,{withTypes:()=>g});let h=async(a,g,h,i)=>{var j,k;let l,m=new AbortController,n=(j=m.signal,l=async(a,b)=>{ek(j);let c=()=>{},d=[new Promise((b,d)=>{let e=f({predicate:a,effect:(a,c)=>{c.unsubscribe(),b([a,c.getState(),c.getOriginalState()])}});c=()=>{e(),d()}})];null!=b&&d.push(new Promise(a=>setTimeout(a,b,null)));try{let a=await el(j,Promise.race(d));return ek(j),a}finally{c()}},(a,b)=>eh(l(a,b))),o=[];try{let e;a.pending.add(m),e=c.get(a)??0,c.set(a,e+1),await Promise.resolve(a.effect(g,ep({},h,{getOriginalState:i,condition:(a,b)=>n(a,b).then(Boolean),take:n,delay:eo(m.signal),pause:en(m.signal),extra:d,signal:m.signal,fork:(k=m.signal,(a,b)=>{ef(a,"taskExecutor");let c=new AbortController;ei(k,()=>ej(c,k.reason));let d=em(async()=>{ek(k),ek(c.signal);let b=await a({pause:en(c.signal),delay:eo(c.signal),signal:c.signal});return ek(c.signal),b},()=>ej(c,eb));return b?.autoJoin&&o.push(d.catch(eg)),{result:en(k)(d),cancel(){ej(c,ea)}}}),unsubscribe:a.unsubscribe,subscribe:()=>{b.set(a.id,a)},cancelActiveListeners:()=>{a.pending.forEach((a,b,c)=>{a!==m&&(ej(a,ec),c.delete(a))})},cancel:()=>{ej(m,ec),a.pending.delete(m)},throwIfCancelled:()=>{ek(m.signal)}})))}catch(a){a instanceof ee||ew(e,a,{raisedBy:"effect"})}finally{let b;await Promise.all(o),ej(m,ed),1===(b=c.get(a)??1)?c.delete(a):c.set(a,b-1),a.pending.delete(m)}},i=()=>{for(let a of c.keys())ev(a);b.clear()};return{middleware:a=>c=>d=>{let j;if(!dS(d))return c(d);if(ex.match(d))return f(d.payload);if(ey.match(d))return void i();if(ez.match(d))return g(d.payload);let k=a.getState(),l=()=>{if(k===eq)throw Error(eC(23));return k};try{if(j=c(d),b.size>0){let c=a.getState();for(let f of Array.from(b.values())){let b=!1;try{b=f.predicate(d,c,k)}catch(a){b=!1,ew(e,a,{raisedBy:"predicate"})}b&&h(f,d,a,l)}}}finally{k=eq}return j},startListening:f,stopListening:g,clearListeners:i}};function eC(a){return`Minified Redux Toolkit error #${a}; visit https://redux-toolkit.js.org/Errors?code=${a} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");var eD=a.i(88804),eE=a=>0===a?0:a>0?1:-1,eF=a=>"number"==typeof a&&a!=+a,eG=a=>"string"==typeof a&&a.indexOf("%")===a.length-1,eH=a=>("number"==typeof a||a instanceof Number)&&!eF(a),eI=a=>eH(a)||"string"==typeof a,eJ=0,eK=a=>{var b=++eJ;return"".concat(a||"").concat(b)},eL=function(a,b){var c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!eH(a)&&"string"!=typeof a)return d;if(eG(a)){if(null==b)return d;var f=a.indexOf("%");c=b*parseFloat(a.slice(0,f))/100}else c=+a;return eF(c)&&(c=d),e&&null!=b&&c>b&&(c=b),c},eM=a=>{if(!Array.isArray(a))return!1;for(var b=a.length,c={},d=0;d<b;d++)if(c[a[d]])return!0;else c[a[d]]=!0;return!1};function eN(a,b,c){return eH(a)&&eH(b)?a+c*(b-a):b}var eO=a=>null==a?a:"".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));function eP(a,b){if(b){var c=Number.parseInt(b,10);if(!eF(c))return null==a?void 0:a[c]}}var eQ=d5({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:a=>{null==a.eventEmitter&&(a.eventEmitter=Symbol("rechartsEventEmitter"))}}}),eR=eQ.reducer,{createEventEmitter:eS}=eQ.actions,eT=(a.i(32473),{notify(){},get:()=>[]}),eU="undefined"!=typeof navigator&&"ReactNative"===navigator.product,eV=eU?p.useLayoutEffect:p.useEffect,eW=Symbol.for("react-redux-context"),eX="undefined"!=typeof globalThis?globalThis:{},eY=function(){if(!p.createContext)return{};let a=eX[eW]??=new Map,b=a.get(p.createContext);return b||(b=p.createContext(null),a.set(p.createContext,b)),b}(),eZ=function(a){let{children:b,context:c,serverState:d,store:e}=a,f=p.useMemo(()=>{let a=function(a,b){let c,d=eT,e=0,f=!1;function g(){j.onStateChange&&j.onStateChange()}function h(){if(e++,!c){let b,e;c=a.subscribe(g),b=null,e=null,d={clear(){b=null,e=null},notify(){let a=b;for(;a;)a.callback(),a=a.next},get(){let a=[],c=b;for(;c;)a.push(c),c=c.next;return a},subscribe(a){let c=!0,d=e={callback:a,next:null,prev:e};return d.prev?d.prev.next=d:b=d,function(){c&&null!==b&&(c=!1,d.next?d.next.prev=d.prev:e=d.prev,d.prev?d.prev.next=d.next:b=d.next)}}}}}function i(){e--,c&&0===e&&(c(),c=void 0,d.clear(),d=eT)}let j={addNestedSub:function(a){h();let b=d.subscribe(a),c=!1;return()=>{c||(c=!0,b(),i())}},notifyNestedSubs:function(){d.notify()},handleChangeWrapper:g,isSubscribed:function(){return f},trySubscribe:function(){f||(f=!0,h())},tryUnsubscribe:function(){f&&(f=!1,i())},getListeners:()=>d};return j}(e);return{store:e,subscription:a,getServerState:d?()=>d:void 0}},[e,d]),g=p.useMemo(()=>e.getState(),[e]);return eV(()=>{let{subscription:a}=f;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),g!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[f,g]),p.createElement((c||eY).Provider,{value:f},b)};function e$(a=eY){return function(){return p.useContext(a)}}var e_=e$(),e0={active:!1,index:null,dataKey:void 0,coordinate:void 0},e1=d5({name:"tooltip",initialState:{itemInteraction:{click:e0,hover:e0},axisInteraction:{click:e0,hover:e0},keyboardInteraction:e0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(a,b){a.tooltipItemPayloads.push(b.payload)},prepare:d_()},removeTooltipEntrySettings:{reducer(a,b){var c=dq(a).tooltipItemPayloads.indexOf(b.payload);c>-1&&a.tooltipItemPayloads.splice(c,1)},prepare:d_()},setTooltipSettingsState(a,b){a.settings=b.payload},setActiveMouseOverItemIndex(a,b){a.syncInteraction.active=!1,a.keyboardInteraction.active=!1,a.itemInteraction.hover.active=!0,a.itemInteraction.hover.index=b.payload.activeIndex,a.itemInteraction.hover.dataKey=b.payload.activeDataKey,a.itemInteraction.hover.coordinate=b.payload.activeCoordinate},mouseLeaveChart(a){a.itemInteraction.hover.active=!1,a.axisInteraction.hover.active=!1},mouseLeaveItem(a){a.itemInteraction.hover.active=!1},setActiveClickItemIndex(a,b){a.syncInteraction.active=!1,a.itemInteraction.click.active=!0,a.keyboardInteraction.active=!1,a.itemInteraction.click.index=b.payload.activeIndex,a.itemInteraction.click.dataKey=b.payload.activeDataKey,a.itemInteraction.click.coordinate=b.payload.activeCoordinate},setMouseOverAxisIndex(a,b){a.syncInteraction.active=!1,a.axisInteraction.hover.active=!0,a.keyboardInteraction.active=!1,a.axisInteraction.hover.index=b.payload.activeIndex,a.axisInteraction.hover.dataKey=b.payload.activeDataKey,a.axisInteraction.hover.coordinate=b.payload.activeCoordinate},setMouseClickAxisIndex(a,b){a.syncInteraction.active=!1,a.keyboardInteraction.active=!1,a.axisInteraction.click.active=!0,a.axisInteraction.click.index=b.payload.activeIndex,a.axisInteraction.click.dataKey=b.payload.activeDataKey,a.axisInteraction.click.coordinate=b.payload.activeCoordinate},setSyncInteraction(a,b){a.syncInteraction=b.payload},setKeyboardInteraction(a,b){a.keyboardInteraction.active=b.payload.active,a.keyboardInteraction.index=b.payload.activeIndex,a.keyboardInteraction.coordinate=b.payload.activeCoordinate,a.keyboardInteraction.dataKey=b.payload.activeDataKey}}}),{addTooltipEntrySettings:e2,removeTooltipEntrySettings:e3,setTooltipSettingsState:e4,setActiveMouseOverItemIndex:e5,mouseLeaveItem:e6,mouseLeaveChart:e7,setActiveClickItemIndex:e8,setMouseOverAxisIndex:e9,setMouseClickAxisIndex:fa,setSyncInteraction:fb,setKeyboardInteraction:fc}=e1.actions,fd=e1.reducer,fe=d5({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(a,b){if(a.chartData=b.payload,null==b.payload){a.dataStartIndex=0,a.dataEndIndex=0;return}b.payload.length>0&&a.dataEndIndex!==b.payload.length-1&&(a.dataEndIndex=b.payload.length-1)},setComputedData(a,b){a.computedData=b.payload},setDataStartEndIndexes(a,b){var{startIndex:c,endIndex:d}=b.payload;null!=c&&(a.dataStartIndex=c),null!=d&&(a.dataEndIndex=d)}}}),{setChartData:ff,setDataStartEndIndexes:fg,setComputedData:fh}=fe.actions,fi=fe.reducer,fj=d5({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(a,b){a.layoutType=b.payload},setChartSize(a,b){a.width=b.payload.width,a.height=b.payload.height},setMargin(a,b){var c,d,e,f;a.margin.top=null!=(c=b.payload.top)?c:0,a.margin.right=null!=(d=b.payload.right)?d:0,a.margin.bottom=null!=(e=b.payload.bottom)?e:0,a.margin.left=null!=(f=b.payload.left)?f:0},setScale(a,b){a.scale=b.payload}}}),{setMargin:fk,setLayout:fl,setChartSize:fm,setScale:fn}=fj.actions,fo=fj.reducer,fp=a.i(64442),fq=(0,p.createContext)(null),fr=a=>a,fs=()=>{var a=(0,p.useContext)(fq);return a?a.store.dispatch:fr},ft=()=>{},fu=()=>ft,fv=(a,b)=>a===b;function fw(a){var b=(0,p.useContext)(fq);return(0,fp.useSyncExternalStoreWithSelector)(b?b.subscription.addNestedSub:fu,b?b.store.getState:ft,b?b.store.getState:ft,b?a:ft,fv)}var fx=a.i(81101),fy=a=>a.legend.settings,fz=dJ([a=>a.legend.payload,fy],(a,b)=>{var{itemSorter:c}=b,d=a.flat(1);return c?(0,fx.default)(d,c):d});function fA(a){return"object"==typeof a&&"length"in a?a:Array.from(a)}function fB(a){return function(){return a}}function fC(a,b){if((e=a.length)>1)for(var c,d,e,f=1,g=a[b[0]],h=g.length;f<e;++f)for(d=g,g=a[b[f]],c=0;c<h;++c)g[c][1]+=g[c][0]=isNaN(d[c][1])?d[c][0]:d[c][1]}function fD(a){for(var b=a.length,c=Array(b);--b>=0;)c[b]=b;return c}function fE(a,b){return a[b]}function fF(a){let b=[];return b.key=a,b}function fG(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function fH(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?fG(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):fG(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}Array.prototype.slice;var fI=Math.PI/180,fJ=(a,b,c,d)=>({x:a+Math.cos(-fI*d)*c,y:b+Math.sin(-fI*d)*c}),fK=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(a-(c.left||0)-(c.right||0)),Math.abs(b-(c.top||0)-(c.bottom||0)))/2};function fL(a,b,c){return Array.isArray(a)&&a&&b+c!==0?a.slice(b,c+1):a}function fM(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function fN(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?fM(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):fM(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function fO(a,b,c){return null==a||null==b?c:eI(b)?(0,eD.default)(a,b,c):"function"==typeof b?b(a):c}var fP=(a,b)=>"horizontal"===a&&"xAxis"===b||"vertical"===a&&"yAxis"===b||"centric"===a&&"angleAxis"===b||"radial"===a&&"radiusAxis"===b,fQ={sign:a=>{var b=a.length;if(!(b<=0))for(var c=0,d=a[0].length;c<d;++c)for(var e=0,f=0,g=0;g<b;++g){var h=eF(a[g][c][1])?a[g][c][0]:a[g][c][1];h>=0?(a[g][c][0]=e,a[g][c][1]=e+h,e=a[g][c][1]):(a[g][c][0]=f,a[g][c][1]=f+h,f=a[g][c][1])}},expand:function(a,b){if((d=a.length)>0){for(var c,d,e,f=0,g=a[0].length;f<g;++f){for(e=c=0;c<d;++c)e+=a[c][f][1]||0;if(e)for(c=0;c<d;++c)a[c][f][1]/=e}fC(a,b)}},none:fC,silhouette:function(a,b){if((c=a.length)>0){for(var c,d=0,e=a[b[0]],f=e.length;d<f;++d){for(var g=0,h=0;g<c;++g)h+=a[g][d][1]||0;e[d][1]+=e[d][0]=-h/2}fC(a,b)}},wiggle:function(a,b){if((e=a.length)>0&&(d=(c=a[b[0]]).length)>0){for(var c,d,e,f=0,g=1;g<d;++g){for(var h=0,i=0,j=0;h<e;++h){for(var k=a[b[h]],l=k[g][1]||0,m=(l-(k[g-1][1]||0))/2,n=0;n<h;++n){var o=a[b[n]];m+=(o[g][1]||0)-(o[g-1][1]||0)}i+=l,j+=m*l}c[g-1][1]+=c[g-1][0]=f,i&&(f-=j/i)}c[g-1][1]+=c[g-1][0]=f,fC(a,b)}},positive:a=>{var b=a.length;if(!(b<=0))for(var c=0,d=a[0].length;c<d;++c)for(var e=0,f=0;f<b;++f){var g=eF(a[f][c][1])?a[f][c][0]:a[f][c][1];g>=0?(a[f][c][0]=e,a[f][c][1]=e+g,e=a[f][c][1]):(a[f][c][0]=0,a[f][c][1]=0)}}},fR=a=>{var{axis:b,ticks:c,offset:d,bandSize:e,entry:f,index:g}=a;if("category"===b.type)return c[g]?c[g].coordinate+d:null;var h=fO(f,b.dataKey,b.scale.domain()[g]);return null==h?null:b.scale(h)-e/2+d},fS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fU=(a,b,c)=>{if(a&&a.scale&&a.scale.bandwidth){var d=a.scale.bandwidth();if(!c||d>0)return d}if(a&&b&&b.length>=2){for(var e=(0,fx.default)(b,a=>a.coordinate),f=1/0,g=1,h=e.length;g<h;g++){var i=e[g],j=e[g-1];f=Math.min((i.coordinate||0)-(j.coordinate||0),f)}return f===1/0?0:f}return c?void 0:0};function fV(a){var{tooltipEntrySettings:b,dataKey:c,payload:d,value:e,name:f}=a;return fN(fN({},b),{},{dataKey:c,payload:d,value:e,name:f})}function fW(a,b){return a?String(a):"string"==typeof b?b:void 0}var fX=a=>a.layout.width,fY=a=>a.layout.height,fZ=a=>a.layout.scale,f$=a=>a.layout.margin,f_=dJ(a=>a.cartesianAxis.xAxis,a=>Object.values(a)),f0=dJ(a=>a.cartesianAxis.yAxis,a=>Object.values(a)),f1="data-recharts-item-index",f2="data-recharts-item-data-key";function f3(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function f4(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?f3(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):f3(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var f5=dJ([fX,fY,f$,a=>a.brush.height,function(a){return f0(a).reduce((a,b)=>"left"!==b.orientation||b.mirror||b.hide?a:a+("number"==typeof b.width?b.width:60),0)},function(a){return f0(a).reduce((a,b)=>"right"!==b.orientation||b.mirror||b.hide?a:a+("number"==typeof b.width?b.width:60),0)},function(a){return f_(a).reduce((a,b)=>"top"!==b.orientation||b.mirror||b.hide?a:a+b.height,0)},function(a){return f_(a).reduce((a,b)=>"bottom"!==b.orientation||b.mirror||b.hide?a:a+b.height,0)},fy,a=>a.legend.size],(a,b,c,d,e,f,g,h,i,j)=>{var k={left:(c.left||0)+e,right:(c.right||0)+f},l=f4(f4({},{top:(c.top||0)+g,bottom:(c.bottom||0)+h}),k),m=l.bottom;l.bottom+=d;var n=a-(l=((a,b,c)=>{if(b&&c){var{width:d,height:e}=c,{align:f,verticalAlign:g,layout:h}=b;if(("vertical"===h||"horizontal"===h&&"middle"===g)&&"center"!==f&&eH(a[f]))return fN(fN({},a),{},{[f]:a[f]+(d||0)});if(("horizontal"===h||"vertical"===h&&"center"===f)&&"middle"!==g&&eH(a[g]))return fN(fN({},a),{},{[g]:a[g]+(e||0)})}return a})(l,i,j)).left-l.right,o=b-l.top-l.bottom;return f4(f4({brushBottom:m},l),{},{width:Math.max(n,0),height:Math.max(o,0)})}),f6=dJ(f5,a=>({x:a.left,y:a.top,width:a.width,height:a.height})),f7=dJ(fX,fY,(a,b)=>({x:0,y:0,width:a,height:b})),f8=(0,p.createContext)(null),f9=()=>null!=(0,p.useContext)(f8),ga=a=>a.brush,gb=dJ([ga,f5,f$],(a,b,c)=>({height:a.height,x:eH(a.x)?a.x:b.left,y:eH(a.y)?a.y:b.top+b.height+b.brushBottom-((null==c?void 0:c.bottom)||0),width:eH(a.width)?a.width:b.width}));function gc(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}var gd=a.i(61349),ge=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e]},gf=(a,b,c)=>{var{width:d="100%",height:e="100%",aspect:f,maxHeight:g}=c,h=eG(d)?a:Number(d),i=eG(e)?b:Number(e);return f&&f>0&&(h?i=h/f:i&&(h=i*f),g&&i>g&&(i=g)),{calculatedWidth:h,calculatedHeight:i}},gg={width:0,height:0,overflow:"visible"},gh={width:0,overflowX:"visible"},gi={height:0,overflowY:"visible"},gj={};function gk(a){return Number.isFinite(a)}function gl(a){return"number"==typeof a&&a>0&&Number.isFinite(a)}function gm(){return(gm=Object.assign.bind()).apply(null,arguments)}function gn(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function go(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?gn(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):gn(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var gp=(0,p.createContext)({width:-1,height:-1});function gq(a){var{children:b,width:c,height:d}=a,e=(0,p.useMemo)(()=>({width:c,height:d}),[c,d]);return c<=0||d<=0?null:p.createElement(gp.Provider,{value:e},b)}var gr=()=>(0,p.useContext)(gp),gs=(0,p.forwardRef)((a,b)=>{var{aspect:c,initialDimension:d={width:-1,height:-1},width:e,height:f,minWidth:g=0,minHeight:h,maxHeight:i,children:j,debounce:k=0,id:l,className:m,onResize:n,style:o={}}=a,q=(0,p.useRef)(null),r=(0,p.useRef)();r.current=n,(0,p.useImperativeHandle)(b,()=>q.current);var[s,t]=(0,p.useState)({containerWidth:d.width,containerHeight:d.height}),u=(0,p.useCallback)((a,b)=>{t(c=>{var d=Math.round(a),e=Math.round(b);return c.containerWidth===d&&c.containerHeight===e?c:{containerWidth:d,containerHeight:e}})},[]);(0,p.useEffect)(()=>{var a=a=>{var b,{width:c,height:d}=a[0].contentRect;u(c,d),null==(b=r.current)||b.call(r,c,d)};k>0&&(a=(0,gd.default)(a,k,{trailing:!0,leading:!1}));var b=new ResizeObserver(a),{width:c,height:d}=q.current.getBoundingClientRect();return u(c,d),b.observe(q.current),()=>{b.disconnect()}},[u,k]);var{containerWidth:v,containerHeight:w}=s;ge(!c||c>0,"The aspect(%s) must be greater than zero.",c);var{calculatedWidth:x,calculatedHeight:y}=gf(v,w,{width:e,height:f,aspect:c,maxHeight:i});return ge(x>0||y>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",x,y,e,f,g,h,c),p.createElement("div",{id:l?"".concat(l):void 0,className:gc("recharts-responsive-container",m),style:go(go({},o),{},{width:e,height:f,minWidth:g,minHeight:h,maxHeight:i}),ref:q},p.createElement("div",{style:(a=>{var{width:b,height:c}=a,d=eG(b),e=eG(c);return d&&e?gg:d?gh:e?gi:gj})({width:e,height:f})},p.createElement(gq,{width:x,height:y},j)))}),gt=(0,p.forwardRef)((a,b)=>{var c=gr();if(gl(c.width)&&gl(c.height))return a.children;var{width:d,height:e}=function(a){var{width:b,height:c,aspect:d}=a,e=b,f=c;return void 0===e&&void 0===f?(e="100%",f="100%"):void 0===e?e=d&&d>0?void 0:"100%":void 0===f&&(f=d&&d>0?void 0:"100%"),{width:e,height:f}}({width:a.width,height:a.height,aspect:a.aspect}),{calculatedWidth:f,calculatedHeight:g}=gf(void 0,void 0,{width:d,height:e,aspect:a.aspect,maxHeight:a.maxHeight});return eH(f)&&eH(g)?p.createElement(gq,{width:f,height:g},a.children):p.createElement(gs,gm({},a,{width:d,height:e,ref:b}))}),gu=()=>{var a,b=f9(),c=fw(f6),d=fw(gb),e=null==(a=fw(ga))?void 0:a.padding;return b&&d&&e?{width:d.width-e.left-e.right,height:d.height-e.top-e.bottom,x:e.left,y:e.top}:c},gv={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},gw=a=>a.layout.layoutType,gx=a=>{var b=fs(),c=f9(),{width:d,height:e}=a,f=gr(),g=d,h=e;return f&&(g=f.width>0?f.width:d,h=f.height>0?f.height:e),(0,p.useEffect)(()=>{!c&&gl(g)&&gl(h)&&b(fm({width:g,height:h}))},[b,c,g,h]),null},gy=a.i(56161);function gz(a,b){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(b).domain(a)}return this}function gA(a,b){switch(arguments.length){case 0:break;case 1:"function"==typeof a?this.interpolator(a):this.range(a);break;default:this.domain(a),"function"==typeof b?this.interpolator(b):this.range(b)}return this}a.s([],62346),a.i(62346),a.s([],75333),a.i(75333);class gB extends Map{constructor(a,b=gD){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:b}}),null!=a)for(const[b,c]of a)this.set(b,c)}get(a){return super.get(gC(this,a))}has(a){return super.has(gC(this,a))}set(a,b){return super.set(function({_intern:a,_key:b},c){let d=b(c);return a.has(d)?a.get(d):(a.set(d,c),c)}(this,a),b)}delete(a){return super.delete(function({_intern:a,_key:b},c){let d=b(c);return a.has(d)&&(c=a.get(d),a.delete(d)),c}(this,a))}}function gC({_intern:a,_key:b},c){let d=b(c);return a.has(d)?a.get(d):c}function gD(a){return null!==a&&"object"==typeof a?a.valueOf():a}let gE=Symbol("implicit");function gF(){var a=new gB,b=[],c=[],d=gE;function e(e){let f=a.get(e);if(void 0===f){if(d!==gE)return d;a.set(e,f=b.push(e)-1)}return c[f%c.length]}return e.domain=function(c){if(!arguments.length)return b.slice();for(let d of(b=[],a=new gB,c))a.has(d)||a.set(d,b.push(d)-1);return e},e.range=function(a){return arguments.length?(c=Array.from(a),e):c.slice()},e.unknown=function(a){return arguments.length?(d=a,e):d},e.copy=function(){return gF(b,c).unknown(d)},gz.apply(e,arguments),e}function gG(){var a,b,c=gF().unknown(void 0),d=c.domain,e=c.range,f=0,g=1,h=!1,i=0,j=0,k=.5;function l(){var c=d().length,l=g<f,m=l?g:f,n=l?f:g;a=(n-m)/Math.max(1,c-i+2*j),h&&(a=Math.floor(a)),m+=(n-m-a*(c-i))*k,b=a*(1-i),h&&(m=Math.round(m),b=Math.round(b));var o=(function(a,b,c){a*=1,b*=1,c=(e=arguments.length)<2?(b=a,a=0,1):e<3?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=Array(e);++d<e;)f[d]=a+d*c;return f})(c).map(function(b){return m+a*b});return e(l?o.reverse():o)}return delete c.unknown,c.domain=function(a){return arguments.length?(d(a),l()):d()},c.range=function(a){return arguments.length?([f,g]=a,f*=1,g*=1,l()):[f,g]},c.rangeRound=function(a){return[f,g]=a,f*=1,g*=1,h=!0,l()},c.bandwidth=function(){return b},c.step=function(){return a},c.round=function(a){return arguments.length?(h=!!a,l()):h},c.padding=function(a){return arguments.length?(i=Math.min(1,j=+a),l()):i},c.paddingInner=function(a){return arguments.length?(i=Math.min(1,a),l()):i},c.paddingOuter=function(a){return arguments.length?(j=+a,l()):j},c.align=function(a){return arguments.length?(k=Math.max(0,Math.min(1,a)),l()):k},c.copy=function(){return gG(d(),[f,g]).round(h).paddingInner(i).paddingOuter(j).align(k)},gz.apply(l(),arguments)}function gH(){return function a(b){var c=b.copy;return b.padding=b.paddingOuter,delete b.paddingInner,delete b.paddingOuter,b.copy=function(){return a(c())},b}(gG.apply(null,arguments).paddingInner(1))}let gI=Math.sqrt(50),gJ=Math.sqrt(10),gK=Math.sqrt(2);function gL(a,b,c){let d,e,f,g=(b-a)/Math.max(0,c),h=Math.floor(Math.log10(g)),i=g/Math.pow(10,h),j=i>=gI?10:i>=gJ?5:i>=gK?2:1;return(h<0?(d=Math.round(a*(f=Math.pow(10,-h)/j)),e=Math.round(b*f),d/f<a&&++d,e/f>b&&--e,f=-f):(d=Math.round(a/(f=Math.pow(10,h)*j)),e=Math.round(b/f),d*f<a&&++d,e*f>b&&--e),e<d&&.5<=c&&c<2)?gL(a,b,2*c):[d,e,f]}function gM(a,b,c){if(b*=1,a*=1,!((c*=1)>0))return[];if(a===b)return[a];let d=b<a,[e,f,g]=d?gL(b,a,c):gL(a,b,c);if(!(f>=e))return[];let h=f-e+1,i=Array(h);if(d)if(g<0)for(let a=0;a<h;++a)i[a]=-((f-a)/g);else for(let a=0;a<h;++a)i[a]=(f-a)*g;else if(g<0)for(let a=0;a<h;++a)i[a]=-((e+a)/g);else for(let a=0;a<h;++a)i[a]=(e+a)*g;return i}function gN(a,b,c){return gL(a*=1,b*=1,c*=1)[2]}function gO(a,b,c){b*=1,a*=1,c*=1;let d=b<a,e=d?gN(b,a,c):gN(a,b,c);return(d?-1:1)*(e<0?-(1/e):e)}function gP(a,b){return null==a||null==b?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function gQ(a,b){return null==a||null==b?NaN:b<a?-1:b>a?1:b>=a?0:NaN}function gR(a){let b,c,d;function e(a,d,f=0,g=a.length){if(f<g){if(0!==b(d,d))return g;do{let b=f+g>>>1;0>c(a[b],d)?f=b+1:g=b}while(f<g)}return f}return 2!==a.length?(b=gP,c=(b,c)=>gP(a(b),c),d=(b,c)=>a(b)-c):(b=a===gP||a===gQ?a:gS,c=a,d=a),{left:e,center:function(a,b,c=0,f=a.length){let g=e(a,b,c,f-1);return g>c&&d(a[g-1],b)>-d(a[g],b)?g-1:g},right:function(a,d,e=0,f=a.length){if(e<f){if(0!==b(d,d))return f;do{let b=e+f>>>1;0>=c(a[b],d)?e=b+1:f=b}while(e<f)}return e}}}function gS(){return 0}function gT(a){return null===a?NaN:+a}let gU=gR(gP),gV=gU.right;function gW(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function gX(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function gY(){}gU.left,gR(gT).center;var gZ="\\s*([+-]?\\d+)\\s*",g$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",g_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g0=/^#([0-9a-f]{3,8})$/,g1=RegExp(`^rgb\\(${gZ},${gZ},${gZ}\\)$`),g2=RegExp(`^rgb\\(${g_},${g_},${g_}\\)$`),g3=RegExp(`^rgba\\(${gZ},${gZ},${gZ},${g$}\\)$`),g4=RegExp(`^rgba\\(${g_},${g_},${g_},${g$}\\)$`),g5=RegExp(`^hsl\\(${g$},${g_},${g_}\\)$`),g6=RegExp(`^hsla\\(${g$},${g_},${g_},${g$}\\)$`),g7={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function g8(){return this.rgb().formatHex()}function g9(){return this.rgb().formatRgb()}function ha(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=g0.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?hb(b):3===c?new he(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1):8===c?hc(b>>24&255,b>>16&255,b>>8&255,(255&b)/255):4===c?hc(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|240&b,((15&b)<<4|15&b)/255):null):(b=g1.exec(a))?new he(b[1],b[2],b[3],1):(b=g2.exec(a))?new he(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=g3.exec(a))?hc(b[1],b[2],b[3],b[4]):(b=g4.exec(a))?hc(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=g5.exec(a))?hk(b[1],b[2]/100,b[3]/100,1):(b=g6.exec(a))?hk(b[1],b[2]/100,b[3]/100,b[4]):g7.hasOwnProperty(a)?hb(g7[a]):"transparent"===a?new he(NaN,NaN,NaN,0):null}function hb(a){return new he(a>>16&255,a>>8&255,255&a,1)}function hc(a,b,c,d){return d<=0&&(a=b=c=NaN),new he(a,b,c,d)}function hd(a,b,c,d){var e;return 1==arguments.length?((e=a)instanceof gY||(e=ha(e)),e)?new he((e=e.rgb()).r,e.g,e.b,e.opacity):new he:new he(a,b,c,null==d?1:d)}function he(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function hf(){return`#${hj(this.r)}${hj(this.g)}${hj(this.b)}`}function hg(){let a=hh(this.opacity);return`${1===a?"rgb(":"rgba("}${hi(this.r)}, ${hi(this.g)}, ${hi(this.b)}${1===a?")":`, ${a})`}`}function hh(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function hi(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function hj(a){return((a=hi(a))<16?"0":"")+a.toString(16)}function hk(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new hm(a,b,c,d)}function hl(a){if(a instanceof hm)return new hm(a.h,a.s,a.l,a.opacity);if(a instanceof gY||(a=ha(a)),!a)return new hm;if(a instanceof hm)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+(c<d)*6:c===f?(d-b)/h+2:(b-c)/h+4,h/=i<.5?f+e:2-f-e,g*=60):h=i>0&&i<1?0:g,new hm(g,h,i,a.opacity)}function hm(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function hn(a){return(a=(a||0)%360)<0?a+360:a}function ho(a){return Math.max(0,Math.min(1,a||0))}function hp(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}function hq(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}gW(gY,ha,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:g8,formatHex:g8,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return hl(this).formatHsl()},formatRgb:g9,toString:g9}),gW(he,hd,gX(gY,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new he(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new he(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new he(hi(this.r),hi(this.g),hi(this.b),hh(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hf,formatHex:hf,formatHex8:function(){return`#${hj(this.r)}${hj(this.g)}${hj(this.b)}${hj((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:hg,toString:hg})),gW(hm,function(a,b,c,d){return 1==arguments.length?hl(a):new hm(a,b,c,null==d?1:d)},gX(gY,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new hm(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new hm(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new he(hp(a>=240?a-240:a+120,e,d),hp(a,e,d),hp(a<120?a+240:a-120,e,d),this.opacity)},clamp(){return new hm(hn(this.h),ho(this.s),ho(this.l),hh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=hh(this.opacity);return`${1===a?"hsl(":"hsla("}${hn(this.h)}, ${100*ho(this.s)}%, ${100*ho(this.l)}%${1===a?")":`, ${a})`}`}}));let hr=a=>()=>a;function hs(a,b){var c=b-a;return c?function(b){return a+b*c}:hr(isNaN(a)?b:a)}let ht=function a(b){var c,d=1==(c=+b)?hs:function(a,b){var d,e,f;return b-a?(d=a,e=b,d=Math.pow(d,f=c),e=Math.pow(e,f)-d,f=1/f,function(a){return Math.pow(d+a*e,f)}):hr(isNaN(a)?b:a)};function e(a,b){var c=d((a=hd(a)).r,(b=hd(b)).r),e=d(a.g,b.g),f=d(a.b,b.b),g=hs(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}return e.gamma=a,e}(1);function hu(a){return function(b){var c,d,e=b.length,f=Array(e),g=Array(e),h=Array(e);for(c=0;c<e;++c)d=hd(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}function hv(a,b){return a*=1,b*=1,function(c){return a*(1-c)+b*c}}hu(function(a){var b=a.length-1;return function(c){var d=c<=0?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=d<b-1?a[d+2]:2*f-e;return hq((c-d/b)*b,g,e,f,h)}}),hu(function(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return hq((c-d/b)*b,e,f,g,h)}});var hw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hx=RegExp(hw.source,"g");function hy(a,b){var c,d,e=typeof b;return null==b||"boolean"===e?hr(b):("number"===e?hv:"string"===e?(d=ha(b))?(b=d,ht):function(a,b){var c,d,e,f,g,h=hw.lastIndex=hx.lastIndex=0,i=-1,j=[],k=[];for(a+="",b+="";(e=hw.exec(a))&&(f=hx.exec(b));)(g=f.index)>h&&(g=b.slice(h,g),j[i]?j[i]+=g:j[++i]=g),(e=e[0])===(f=f[0])?j[i]?j[i]+=f:j[++i]=f:(j[++i]=null,k.push({i:i,x:hv(e,f)})),h=hx.lastIndex;return h<b.length&&(g=b.slice(h),j[i]?j[i]+=g:j[++i]=g),j.length<2?k[0]?(c=k[0].x,function(a){return c(a)+""}):(d=b,function(){return d}):(b=k.length,function(a){for(var c,d=0;d<b;++d)j[(c=k[d]).i]=c.x(a);return j.join("")})}:b instanceof ha?ht:b instanceof Date?function(a,b){var c=new Date;return a*=1,b*=1,function(d){return c.setTime(a*(1-d)+b*d),c}}:!ArrayBuffer.isView(c=b)||c instanceof DataView?Array.isArray(b)?function(a,b){var c,d=b?b.length:0,e=a?Math.min(d,a.length):0,f=Array(e),g=Array(d);for(c=0;c<e;++c)f[c]=hy(a[c],b[c]);for(;c<d;++c)g[c]=b[c];return function(a){for(c=0;c<e;++c)g[c]=f[c](a);return g}}:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?function(a,b){var c,d={},e={};for(c in(null===a||"object"!=typeof a)&&(a={}),(null===b||"object"!=typeof b)&&(b={}),b)c in a?d[c]=hy(a[c],b[c]):e[c]=b[c];return function(a){for(c in d)e[c]=d[c](a);return e}}:hv:function(a,b){b||(b=[]);var c,d=a?Math.min(b.length,a.length):0,e=b.slice();return function(f){for(c=0;c<d;++c)e[c]=a[c]*(1-f)+b[c]*f;return e}})(a,b)}function hz(a,b){return a*=1,b*=1,function(c){return Math.round(a*(1-c)+b*c)}}function hA(a){return+a}var hB=[0,1];function hC(a){return a}function hD(a,b){var c;return(b-=a*=1)?function(c){return(c-a)/b}:(c=isNaN(b)?NaN:.5,function(){return c})}function hE(a,b,c){var d=a[0],e=a[1],f=b[0],g=b[1];return e<d?(d=hD(e,d),f=c(g,f)):(d=hD(d,e),f=c(f,g)),function(a){return f(d(a))}}function hF(a,b,c){var d=Math.min(a.length,b.length)-1,e=Array(d),f=Array(d),g=-1;for(a[d]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<d;)e[g]=hD(a[g],a[g+1]),f[g]=c(b[g],b[g+1]);return function(b){var c=gV(a,b,1,d)-1;return f[c](e[c](b))}}function hG(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function hH(){var a,b,c,d,e,f,g=hB,h=hB,i=hy,j=hC;function k(){var a,b,c,i=Math.min(g.length,h.length);return j!==hC&&(a=g[0],b=g[i-1],a>b&&(c=a,a=b,b=c),j=function(c){return Math.max(a,Math.min(b,c))}),d=i>2?hF:hE,e=f=null,l}function l(b){return null==b||isNaN(b*=1)?c:(e||(e=d(g.map(a),h,i)))(a(j(b)))}return l.invert=function(c){return j(b((f||(f=d(h,g.map(a),hv)))(c)))},l.domain=function(a){return arguments.length?(g=Array.from(a,hA),k()):g.slice()},l.range=function(a){return arguments.length?(h=Array.from(a),k()):h.slice()},l.rangeRound=function(a){return h=Array.from(a),i=hz,k()},l.clamp=function(a){return arguments.length?(j=!!a||hC,k()):j!==hC},l.interpolate=function(a){return arguments.length?(i=a,k()):i},l.unknown=function(a){return arguments.length?(c=a,l):c},function(c,d){return a=c,b=d,k()}}function hI(){return hH()(hC,hC)}function hJ(a,b){if((c=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e"))<0)return null;var c,d=a.slice(0,c);return[d.length>1?d[0]+d.slice(2):d,+a.slice(c+1)]}function hK(a){return(a=hJ(Math.abs(a)))?a[1]:NaN}var hL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hM(a){var b;if(!(b=hL.exec(a)))throw Error("invalid format: "+a);return new hN({fill:b[1],align:b[2],sign:b[3],symbol:b[4],zero:b[5],width:b[6],comma:b[7],precision:b[8]&&b[8].slice(1),trim:b[9],type:b[10]})}function hN(a){this.fill=void 0===a.fill?" ":a.fill+"",this.align=void 0===a.align?">":a.align+"",this.sign=void 0===a.sign?"-":a.sign+"",this.symbol=void 0===a.symbol?"":a.symbol+"",this.zero=!!a.zero,this.width=void 0===a.width?void 0:+a.width,this.comma=!!a.comma,this.precision=void 0===a.precision?void 0:+a.precision,this.trim=!!a.trim,this.type=void 0===a.type?"":a.type+""}function hO(a,b){var c=hJ(a,b);if(!c)return a+"";var d=c[0],e=c[1];return e<0?"0."+Array(-e).join("0")+d:d.length>e+1?d.slice(0,e+1)+"."+d.slice(e+1):d+Array(e-d.length+2).join("0")}hM.prototype=hN.prototype,hN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let hP={"%":(a,b)=>(100*a).toFixed(b),b:a=>Math.round(a).toString(2),c:a=>a+"",d:function(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)},e:(a,b)=>a.toExponential(b),f:(a,b)=>a.toFixed(b),g:(a,b)=>a.toPrecision(b),o:a=>Math.round(a).toString(8),p:(a,b)=>hO(100*a,b),r:hO,s:function(a,b){var c=hJ(a,b);if(!c)return a+"";var d=c[0],e=c[1],f=e-(mb=3*Math.max(-8,Math.min(8,Math.floor(e/3))))+1,g=d.length;return f===g?d:f>g?d+Array(f-g+1).join("0"):f>0?d.slice(0,f)+"."+d.slice(f):"0."+Array(1-f).join("0")+hJ(a,Math.max(0,b+f-1))[0]},X:a=>Math.round(a).toString(16).toUpperCase(),x:a=>Math.round(a).toString(16)};function hQ(a){return a}var hR=Array.prototype.map,hS=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function hT(a,b,c,d){var e,f,g=gO(a,b,c);switch((d=hM(null==d?",f":d)).type){case"s":var h=Math.max(Math.abs(a),Math.abs(b));return null!=d.precision||isNaN(f=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(hK(h)/3)))-hK(Math.abs(g))))||(d.precision=f),me(d,h);case"":case"e":case"g":case"p":case"r":null!=d.precision||isNaN(f=Math.max(0,hK(Math.abs(Math.max(Math.abs(a),Math.abs(b)))-(e=Math.abs(e=g)))-hK(e))+1)||(d.precision=f-("e"===d.type));break;case"f":case"%":null!=d.precision||isNaN(f=Math.max(0,-hK(Math.abs(g))))||(d.precision=f-("%"===d.type)*2)}return md(d)}function hU(a){var b=a.domain;return a.ticks=function(a){var c=b();return gM(c[0],c[c.length-1],null==a?10:a)},a.tickFormat=function(a,c){var d=b();return hT(d[0],d[d.length-1],null==a?10:a,c)},a.nice=function(c){null==c&&(c=10);var d,e,f=b(),g=0,h=f.length-1,i=f[g],j=f[h],k=10;for(j<i&&(e=i,i=j,j=e,e=g,g=h,h=e);k-- >0;){if((e=gN(i,j,c))===d)return f[g]=i,f[h]=j,b(f);if(e>0)i=Math.floor(i/e)*e,j=Math.ceil(j/e)*e;else if(e<0)i=Math.ceil(i*e)/e,j=Math.floor(j*e)/e;else break;d=e}return a},a}function hV(){var a=hI();return a.copy=function(){return hG(a,hV())},gz.apply(a,arguments),hU(a)}function hW(a){var b;function c(a){return null==a||isNaN(a*=1)?b:a}return c.invert=c,c.domain=c.range=function(b){return arguments.length?(a=Array.from(b,hA),c):a.slice()},c.unknown=function(a){return arguments.length?(b=a,c):b},c.copy=function(){return hW(a).unknown(b)},a=arguments.length?Array.from(a,hA):[0,1],hU(c)}function hX(a,b){a=a.slice();var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function hY(a){return Math.log(a)}function hZ(a){return Math.exp(a)}function h$(a){return-Math.log(-a)}function h_(a){return-Math.exp(-a)}function h0(a){return isFinite(a)?+("1e"+a):a<0?0:a}function h1(a){return(b,c)=>-a(-b,c)}function h2(a){let b,c,d=a(hY,hZ),e=d.domain,f=10;function g(){var g,h;return b=(g=f)===Math.E?Math.log:10===g&&Math.log10||2===g&&Math.log2||(g=Math.log(g),a=>Math.log(a)/g),c=10===(h=f)?h0:h===Math.E?Math.exp:a=>Math.pow(h,a),e()[0]<0?(b=h1(b),c=h1(c),a(h$,h_)):a(hY,hZ),d}return d.base=function(a){return arguments.length?(f=+a,g()):f},d.domain=function(a){return arguments.length?(e(a),g()):e()},d.ticks=a=>{let d,g,h=e(),i=h[0],j=h[h.length-1],k=j<i;k&&([i,j]=[j,i]);let l=b(i),m=b(j),n=null==a?10:+a,o=[];if(!(f%1)&&m-l<n){if(l=Math.floor(l),m=Math.ceil(m),i>0){for(;l<=m;++l)for(d=1;d<f;++d)if(!((g=l<0?d/c(-l):d*c(l))<i)){if(g>j)break;o.push(g)}}else for(;l<=m;++l)for(d=f-1;d>=1;--d)if(!((g=l>0?d/c(-l):d*c(l))<i)){if(g>j)break;o.push(g)}2*o.length<n&&(o=gM(i,j,n))}else o=gM(l,m,Math.min(m-l,n)).map(c);return k?o.reverse():o},d.tickFormat=(a,e)=>{if(null==a&&(a=10),null==e&&(e=10===f?"s":","),"function"!=typeof e&&(f%1||null!=(e=hM(e)).precision||(e.trim=!0),e=md(e)),a===1/0)return e;let g=Math.max(1,f*a/d.ticks().length);return a=>{let d=a/c(Math.round(b(a)));return d*f<f-.5&&(d*=f),d<=g?e(a):""}},d.nice=()=>e(hX(e(),{floor:a=>c(Math.floor(b(a))),ceil:a=>c(Math.ceil(b(a)))})),d}function h3(){let a=h2(hH()).domain([1,10]);return a.copy=()=>hG(a,h3()).base(a.base()),gz.apply(a,arguments),a}function h4(a){return function(b){return Math.sign(b)*Math.log1p(Math.abs(b/a))}}function h5(a){return function(b){return Math.sign(b)*Math.expm1(Math.abs(b))*a}}function h6(a){var b=1,c=a(h4(1),h5(b));return c.constant=function(c){return arguments.length?a(h4(b=+c),h5(b)):b},hU(c)}function h7(){var a=h6(hH());return a.copy=function(){return hG(a,h7()).constant(a.constant())},gz.apply(a,arguments)}function h8(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function h9(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function ia(a){return a<0?-a*a:a*a}function ib(a){var b=a(hC,hC),c=1;return b.exponent=function(b){return arguments.length?1==(c=+b)?a(hC,hC):.5===c?a(h9,ia):a(h8(c),h8(1/c)):c},hU(b)}function ic(){var a=ib(hH());return a.copy=function(){return hG(a,ic()).exponent(a.exponent())},gz.apply(a,arguments),a}function id(){return ic.apply(null,arguments).exponent(.5)}function ie(a){return Math.sign(a)*a*a}function ig(){var a,b=hI(),c=[0,1],d=!1;function e(c){var e,f=Math.sign(e=b(c))*Math.sqrt(Math.abs(e));return isNaN(f)?a:d?Math.round(f):f}return e.invert=function(a){return b.invert(ie(a))},e.domain=function(a){return arguments.length?(b.domain(a),e):b.domain()},e.range=function(a){return arguments.length?(b.range((c=Array.from(a,hA)).map(ie)),e):c.slice()},e.rangeRound=function(a){return e.range(a).round(!0)},e.round=function(a){return arguments.length?(d=!!a,e):d},e.clamp=function(a){return arguments.length?(b.clamp(a),e):b.clamp()},e.unknown=function(b){return arguments.length?(a=b,e):a},e.copy=function(){return ig(b.domain(),c).round(d).clamp(b.clamp()).unknown(a)},gz.apply(e,arguments),hU(e)}function ih(a,b){let c;if(void 0===b)for(let b of a)null!=b&&(c<b||void 0===c&&b>=b)&&(c=b);else{let d=-1;for(let e of a)null!=(e=b(e,++d,a))&&(c<e||void 0===c&&e>=e)&&(c=e)}return c}function ii(a,b){let c;if(void 0===b)for(let b of a)null!=b&&(c>b||void 0===c&&b>=b)&&(c=b);else{let d=-1;for(let e of a)null!=(e=b(e,++d,a))&&(c>e||void 0===c&&e>=e)&&(c=e)}return c}function ij(a,b){return(null==a||!(a>=a))-(null==b||!(b>=b))||(a<b?-1:+(a>b))}function ik(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function il(){var a,b=[],c=[],d=[];function e(){var a=0,e=Math.max(1,c.length);for(d=Array(e-1);++a<e;)d[a-1]=function(a,b,c=gT){if(!(!(d=a.length)||isNaN(b*=1))){if(b<=0||d<2)return+c(a[0],0,a);if(b>=1)return+c(a[d-1],d-1,a);var d,e=(d-1)*b,f=Math.floor(e),g=+c(a[f],f,a);return g+(c(a[f+1],f+1,a)-g)*(e-f)}}(b,a/e);return f}function f(b){return null==b||isNaN(b*=1)?a:c[gV(d,b)]}return f.invertExtent=function(a){var e=c.indexOf(a);return e<0?[NaN,NaN]:[e>0?d[e-1]:b[0],e<d.length?d[e]:b[b.length-1]]},f.domain=function(a){if(!arguments.length)return b.slice();for(let c of(b=[],a))null==c||isNaN(c*=1)||b.push(c);return b.sort(gP),e()},f.range=function(a){return arguments.length?(c=Array.from(a),e()):c.slice()},f.unknown=function(b){return arguments.length?(a=b,f):a},f.quantiles=function(){return d.slice()},f.copy=function(){return il().domain(b).range(c).unknown(a)},gz.apply(f,arguments)}function im(){var a,b=0,c=1,d=1,e=[.5],f=[0,1];function g(b){return null!=b&&b<=b?f[gV(e,b,0,d)]:a}function h(){var a=-1;for(e=Array(d);++a<d;)e[a]=((a+1)*c-(a-d)*b)/(d+1);return g}return g.domain=function(a){return arguments.length?([b,c]=a,b*=1,c*=1,h()):[b,c]},g.range=function(a){return arguments.length?(d=(f=Array.from(a)).length-1,h()):f.slice()},g.invertExtent=function(a){var g=f.indexOf(a);return g<0?[NaN,NaN]:g<1?[b,e[0]]:g>=d?[e[d-1],c]:[e[g-1],e[g]]},g.unknown=function(b){return arguments.length&&(a=b),g},g.thresholds=function(){return e.slice()},g.copy=function(){return im().domain([b,c]).range(f).unknown(a)},gz.apply(hU(g),arguments)}function io(){var a,b=[.5],c=[0,1],d=1;function e(e){return null!=e&&e<=e?c[gV(b,e,0,d)]:a}return e.domain=function(a){return arguments.length?(d=Math.min((b=Array.from(a)).length,c.length-1),e):b.slice()},e.range=function(a){return arguments.length?(c=Array.from(a),d=Math.min(b.length,c.length-1),e):c.slice()},e.invertExtent=function(a){var d=c.indexOf(a);return[b[d-1],b[d]]},e.unknown=function(b){return arguments.length?(a=b,e):a},e.copy=function(){return io().domain(b).range(c).unknown(a)},gz.apply(e,arguments)}md=(mc=function(a){var b,c,d,e=void 0===a.grouping||void 0===a.thousands?hQ:(b=hR.call(a.grouping,Number),c=a.thousands+"",function(a,d){for(var e=a.length,f=[],g=0,h=b[0],i=0;e>0&&h>0&&(i+h+1>d&&(h=Math.max(1,d-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>d));)h=b[g=(g+1)%b.length];return f.reverse().join(c)}),f=void 0===a.currency?"":a.currency[0]+"",g=void 0===a.currency?"":a.currency[1]+"",h=void 0===a.decimal?".":a.decimal+"",i=void 0===a.numerals?hQ:(d=hR.call(a.numerals,String),function(a){return a.replace(/[0-9]/g,function(a){return d[+a]})}),j=void 0===a.percent?"%":a.percent+"",k=void 0===a.minus?"â":a.minus+"",l=void 0===a.nan?"NaN":a.nan+"";function m(a){var b=(a=hM(a)).fill,c=a.align,d=a.sign,m=a.symbol,n=a.zero,o=a.width,p=a.comma,q=a.precision,r=a.trim,s=a.type;"n"===s?(p=!0,s="g"):hP[s]||(void 0===q&&(q=12),r=!0,s="g"),(n||"0"===b&&"="===c)&&(n=!0,b="0",c="=");var t="$"===m?f:"#"===m&&/[boxX]/.test(s)?"0"+s.toLowerCase():"",u="$"===m?g:/[%p]/.test(s)?j:"",v=hP[s],w=/[defgprs%]/.test(s);function x(a){var f,g,j,m=t,x=u;if("c"===s)x=v(a)+x,a="";else{var y=(a*=1)<0||1/a<0;if(a=isNaN(a)?l:v(Math.abs(a),q),r&&(a=function(a){a:for(var b,c=a.length,d=1,e=-1;d<c;++d)switch(a[d]){case".":e=b=d;break;case"0":0===e&&(e=d),b=d;break;default:if(!+a[d])break a;e>0&&(e=0)}return e>0?a.slice(0,e)+a.slice(b+1):a}(a)),y&&0==+a&&"+"!==d&&(y=!1),m=(y?"("===d?d:k:"-"===d||"("===d?"":d)+m,x=("s"===s?hS[8+mb/3]:"")+x+(y&&"("===d?")":""),w){for(f=-1,g=a.length;++f<g;)if(48>(j=a.charCodeAt(f))||j>57){x=(46===j?h+a.slice(f+1):a.slice(f))+x,a=a.slice(0,f);break}}}p&&!n&&(a=e(a,1/0));var z=m.length+a.length+x.length,A=z<o?Array(o-z+1).join(b):"";switch(p&&n&&(a=e(A+a,A.length?o-x.length:1/0),A=""),c){case"<":a=m+a+x+A;break;case"=":a=m+A+a+x;break;case"^":a=A.slice(0,z=A.length>>1)+m+a+x+A.slice(z);break;default:a=A+m+a+x}return i(a)}return q=void 0===q?6:/[gprs]/.test(s)?Math.max(1,Math.min(21,q)):Math.max(0,Math.min(20,q)),x.toString=function(){return a+""},x}return{format:m,formatPrefix:function(a,b){var c=m(((a=hM(a)).type="f",a)),d=3*Math.max(-8,Math.min(8,Math.floor(hK(b)/3))),e=Math.pow(10,-d),f=hS[8+d/3];return function(a){return c(e*a)+f}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,me=mc.formatPrefix;let ip=new Date,iq=new Date;function ir(a,b,c,d){function e(b){return a(b=0==arguments.length?new Date:new Date(+b)),b}return e.floor=b=>(a(b=new Date(+b)),b),e.ceil=c=>(a(c=new Date(c-1)),b(c,1),a(c),c),e.round=a=>{let b=e(a),c=e.ceil(a);return a-b<c-a?b:c},e.offset=(a,c)=>(b(a=new Date(+a),null==c?1:Math.floor(c)),a),e.range=(c,d,f)=>{let g,h=[];if(c=e.ceil(c),f=null==f?1:Math.floor(f),!(c<d)||!(f>0))return h;do h.push(g=new Date(+c)),b(c,f),a(c);while(g<c&&c<d)return h},e.filter=c=>ir(b=>{if(b>=b)for(;a(b),!c(b);)b.setTime(b-1)},(a,d)=>{if(a>=a)if(d<0)for(;++d<=0;)for(;b(a,-1),!c(a););else for(;--d>=0;)for(;b(a,1),!c(a););}),c&&(e.count=(b,d)=>(ip.setTime(+b),iq.setTime(+d),a(ip),a(iq),Math.floor(c(ip,iq))),e.every=a=>isFinite(a=Math.floor(a))&&a>0?a>1?e.filter(d?b=>d(b)%a==0:b=>e.count(0,b)%a==0):e:null),e}let is=ir(a=>{a.setMonth(0,1),a.setHours(0,0,0,0)},(a,b)=>{a.setFullYear(a.getFullYear()+b)},(a,b)=>b.getFullYear()-a.getFullYear(),a=>a.getFullYear());is.every=a=>isFinite(a=Math.floor(a))&&a>0?ir(b=>{b.setFullYear(Math.floor(b.getFullYear()/a)*a),b.setMonth(0,1),b.setHours(0,0,0,0)},(b,c)=>{b.setFullYear(b.getFullYear()+c*a)}):null,is.range;let it=ir(a=>{a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCFullYear(a.getUTCFullYear()+b)},(a,b)=>b.getUTCFullYear()-a.getUTCFullYear(),a=>a.getUTCFullYear());it.every=a=>isFinite(a=Math.floor(a))&&a>0?ir(b=>{b.setUTCFullYear(Math.floor(b.getUTCFullYear()/a)*a),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},(b,c)=>{b.setUTCFullYear(b.getUTCFullYear()+c*a)}):null,it.range;let iu=ir(a=>{a.setDate(1),a.setHours(0,0,0,0)},(a,b)=>{a.setMonth(a.getMonth()+b)},(a,b)=>b.getMonth()-a.getMonth()+(b.getFullYear()-a.getFullYear())*12,a=>a.getMonth());iu.range;let iv=ir(a=>{a.setUTCDate(1),a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCMonth(a.getUTCMonth()+b)},(a,b)=>b.getUTCMonth()-a.getUTCMonth()+(b.getUTCFullYear()-a.getUTCFullYear())*12,a=>a.getUTCMonth());iv.range;function iw(a){return ir(b=>{b.setDate(b.getDate()-(b.getDay()+7-a)%7),b.setHours(0,0,0,0)},(a,b)=>{a.setDate(a.getDate()+7*b)},(a,b)=>(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*6e4)/6048e5)}let ix=iw(0),iy=iw(1),iz=iw(2),iA=iw(3),iB=iw(4),iC=iw(5),iD=iw(6);function iE(a){return ir(b=>{b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7),b.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCDate(a.getUTCDate()+7*b)},(a,b)=>(b-a)/6048e5)}ix.range,iy.range,iz.range,iA.range,iB.range,iC.range,iD.range;let iF=iE(0),iG=iE(1),iH=iE(2),iI=iE(3),iJ=iE(4),iK=iE(5),iL=iE(6);iF.range,iG.range,iH.range,iI.range,iJ.range,iK.range,iL.range;let iM=ir(a=>a.setHours(0,0,0,0),(a,b)=>a.setDate(a.getDate()+b),(a,b)=>(b-a-(b.getTimezoneOffset()-a.getTimezoneOffset())*6e4)/864e5,a=>a.getDate()-1);iM.range;let iN=ir(a=>{a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCDate(a.getUTCDate()+b)},(a,b)=>(b-a)/864e5,a=>a.getUTCDate()-1);iN.range;let iO=ir(a=>{a.setUTCHours(0,0,0,0)},(a,b)=>{a.setUTCDate(a.getUTCDate()+b)},(a,b)=>(b-a)/864e5,a=>Math.floor(a/864e5));iO.range;let iP=ir(a=>{a.setTime(a-a.getMilliseconds()-1e3*a.getSeconds()-6e4*a.getMinutes())},(a,b)=>{a.setTime(+a+36e5*b)},(a,b)=>(b-a)/36e5,a=>a.getHours());iP.range;let iQ=ir(a=>{a.setUTCMinutes(0,0,0)},(a,b)=>{a.setTime(+a+36e5*b)},(a,b)=>(b-a)/36e5,a=>a.getUTCHours());iQ.range;let iR=ir(a=>{a.setTime(a-a.getMilliseconds()-1e3*a.getSeconds())},(a,b)=>{a.setTime(+a+6e4*b)},(a,b)=>(b-a)/6e4,a=>a.getMinutes());iR.range;let iS=ir(a=>{a.setUTCSeconds(0,0)},(a,b)=>{a.setTime(+a+6e4*b)},(a,b)=>(b-a)/6e4,a=>a.getUTCMinutes());iS.range;let iT=ir(a=>{a.setTime(a-a.getMilliseconds())},(a,b)=>{a.setTime(+a+1e3*b)},(a,b)=>(b-a)/1e3,a=>a.getUTCSeconds());iT.range;let iU=ir(()=>{},(a,b)=>{a.setTime(+a+b)},(a,b)=>b-a);function iV(a,b,c,d,e,f){let g=[[iT,1,1e3],[iT,5,5e3],[iT,15,15e3],[iT,30,3e4],[f,1,6e4],[f,5,3e5],[f,15,9e5],[f,30,18e5],[e,1,36e5],[e,3,108e5],[e,6,216e5],[e,12,432e5],[d,1,864e5],[d,2,1728e5],[c,1,6048e5],[b,1,2592e6],[b,3,7776e6],[a,1,31536e6]];function h(b,c,d){let e=Math.abs(c-b)/d,f=gR(([,,a])=>a).right(g,e);if(f===g.length)return a.every(gO(b/31536e6,c/31536e6,d));if(0===f)return iU.every(Math.max(gO(b,c,d),1));let[h,i]=g[e/g[f-1][2]<g[f][2]/e?f-1:f];return h.every(i)}return[function(a,b,c){let d=b<a;d&&([a,b]=[b,a]);let e=c&&"function"==typeof c.range?c:h(a,b,c),f=e?e.range(a,+b+1):[];return d?f.reverse():f},h]}iU.every=a=>isFinite(a=Math.floor(a))&&a>0?a>1?ir(b=>{b.setTime(Math.floor(b/a)*a)},(b,c)=>{b.setTime(+b+c*a)},(b,c)=>(c-b)/a):iU:null,iU.range;let[iW,iX]=iV(it,iv,iF,iO,iQ,iS),[iY,iZ]=iV(is,iu,ix,iM,iP,iR);function i$(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return b.setFullYear(a.y),b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function i_(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return b.setUTCFullYear(a.y),b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function i0(a,b,c){return{y:a,m:b,d:c,H:0,M:0,S:0,L:0}}var i1={"-":"",_:" ",0:"0"},i2=/^\s*\d+/,i3=/^%/,i4=/[\\^$*+?|[\]().{}]/g;function i5(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?Array(c-f+1).join(b)+e:e)}function i6(a){return a.replace(i4,"\\$&")}function i7(a){return RegExp("^(?:"+a.map(i6).join("|")+")","i")}function i8(a){return new Map(a.map((a,b)=>[a.toLowerCase(),b]))}function i9(a,b,c){var d=i2.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function ja(a,b,c){var d=i2.exec(b.slice(c,c+1));return d?(a.u=+d[0],c+d[0].length):-1}function jb(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.U=+d[0],c+d[0].length):-1}function jc(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.V=+d[0],c+d[0].length):-1}function jd(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.W=+d[0],c+d[0].length):-1}function je(a,b,c){var d=i2.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function jf(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.y=+d[0]+(+d[0]>68?1900:2e3),c+d[0].length):-1}function jg(a,b,c){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(c,c+6));return d?(a.Z=d[1]?0:-(d[2]+(d[3]||"00")),c+d[0].length):-1}function jh(a,b,c){var d=i2.exec(b.slice(c,c+1));return d?(a.q=3*d[0]-3,c+d[0].length):-1}function ji(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function jj(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function jk(a,b,c){var d=i2.exec(b.slice(c,c+3));return d?(a.m=0,a.d=+d[0],c+d[0].length):-1}function jl(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function jm(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function jn(a,b,c){var d=i2.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function jo(a,b,c){var d=i2.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function jp(a,b,c){var d=i2.exec(b.slice(c,c+6));return d?(a.L=Math.floor(d[0]/1e3),c+d[0].length):-1}function jq(a,b,c){var d=i3.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function jr(a,b,c){var d=i2.exec(b.slice(c));return d?(a.Q=+d[0],c+d[0].length):-1}function js(a,b,c){var d=i2.exec(b.slice(c));return d?(a.s=+d[0],c+d[0].length):-1}function jt(a,b){return i5(a.getDate(),b,2)}function ju(a,b){return i5(a.getHours(),b,2)}function jv(a,b){return i5(a.getHours()%12||12,b,2)}function jw(a,b){return i5(1+iM.count(is(a),a),b,3)}function jx(a,b){return i5(a.getMilliseconds(),b,3)}function jy(a,b){return jx(a,b)+"000"}function jz(a,b){return i5(a.getMonth()+1,b,2)}function jA(a,b){return i5(a.getMinutes(),b,2)}function jB(a,b){return i5(a.getSeconds(),b,2)}function jC(a){var b=a.getDay();return 0===b?7:b}function jD(a,b){return i5(ix.count(is(a)-1,a),b,2)}function jE(a){var b=a.getDay();return b>=4||0===b?iB(a):iB.ceil(a)}function jF(a,b){return a=jE(a),i5(iB.count(is(a),a)+(4===is(a).getDay()),b,2)}function jG(a){return a.getDay()}function jH(a,b){return i5(iy.count(is(a)-1,a),b,2)}function jI(a,b){return i5(a.getFullYear()%100,b,2)}function jJ(a,b){return i5((a=jE(a)).getFullYear()%100,b,2)}function jK(a,b){return i5(a.getFullYear()%1e4,b,4)}function jL(a,b){var c=a.getDay();return i5((a=c>=4||0===c?iB(a):iB.ceil(a)).getFullYear()%1e4,b,4)}function jM(a){var b=a.getTimezoneOffset();return(b>0?"-":(b*=-1,"+"))+i5(b/60|0,"0",2)+i5(b%60,"0",2)}function jN(a,b){return i5(a.getUTCDate(),b,2)}function jO(a,b){return i5(a.getUTCHours(),b,2)}function jP(a,b){return i5(a.getUTCHours()%12||12,b,2)}function jQ(a,b){return i5(1+iN.count(it(a),a),b,3)}function jR(a,b){return i5(a.getUTCMilliseconds(),b,3)}function jS(a,b){return jR(a,b)+"000"}function jT(a,b){return i5(a.getUTCMonth()+1,b,2)}function jU(a,b){return i5(a.getUTCMinutes(),b,2)}function jV(a,b){return i5(a.getUTCSeconds(),b,2)}function jW(a){var b=a.getUTCDay();return 0===b?7:b}function jX(a,b){return i5(iF.count(it(a)-1,a),b,2)}function jY(a){var b=a.getUTCDay();return b>=4||0===b?iJ(a):iJ.ceil(a)}function jZ(a,b){return a=jY(a),i5(iJ.count(it(a),a)+(4===it(a).getUTCDay()),b,2)}function j$(a){return a.getUTCDay()}function j_(a,b){return i5(iG.count(it(a)-1,a),b,2)}function j0(a,b){return i5(a.getUTCFullYear()%100,b,2)}function j1(a,b){return i5((a=jY(a)).getUTCFullYear()%100,b,2)}function j2(a,b){return i5(a.getUTCFullYear()%1e4,b,4)}function j3(a,b){var c=a.getUTCDay();return i5((a=c>=4||0===c?iJ(a):iJ.ceil(a)).getUTCFullYear()%1e4,b,4)}function j4(){return"+0000"}function j5(){return"%"}function j6(a){return+a}function j7(a){return Math.floor(a/1e3)}function j8(a){return new Date(a)}function j9(a){return a instanceof Date?+a:+new Date(+a)}function ka(a,b,c,d,e,f,g,h,i,j){var k=hI(),l=k.invert,m=k.domain,n=j(".%L"),o=j(":%S"),p=j("%I:%M"),q=j("%I %p"),r=j("%a %d"),s=j("%b %d"),t=j("%B"),u=j("%Y");function v(a){return(i(a)<a?n:h(a)<a?o:g(a)<a?p:f(a)<a?q:d(a)<a?e(a)<a?r:s:c(a)<a?t:u)(a)}return k.invert=function(a){return new Date(l(a))},k.domain=function(a){return arguments.length?m(Array.from(a,j9)):m().map(j8)},k.ticks=function(b){var c=m();return a(c[0],c[c.length-1],null==b?10:b)},k.tickFormat=function(a,b){return null==b?v:j(b)},k.nice=function(a){var c=m();return a&&"function"==typeof a.range||(a=b(c[0],c[c.length-1],null==a?10:a)),a?m(hX(c,a)):k},k.copy=function(){return hG(k,ka(a,b,c,d,e,f,g,h,i,j))},k}function kb(){return gz.apply(ka(iY,iZ,is,iu,ix,iM,iP,iR,iT,mg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kc(){return gz.apply(ka(iW,iX,it,iv,iF,iN,iQ,iS,iT,mh).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kd(){var a,b,c,d,e,f=0,g=1,h=hC,i=!1;function j(b){return null==b||isNaN(b*=1)?e:h(0===c?.5:(b=(d(b)-a)*c,i?Math.max(0,Math.min(1,b)):b))}function k(a){return function(b){var c,d;return arguments.length?([c,d]=b,h=a(c,d),j):[h(0),h(1)]}}return j.domain=function(e){return arguments.length?([f,g]=e,a=d(f*=1),b=d(g*=1),c=a===b?0:1/(b-a),j):[f,g]},j.clamp=function(a){return arguments.length?(i=!!a,j):i},j.interpolator=function(a){return arguments.length?(h=a,j):h},j.range=k(hy),j.rangeRound=k(hz),j.unknown=function(a){return arguments.length?(e=a,j):e},function(e){return d=e,a=e(f),b=e(g),c=a===b?0:1/(b-a),j}}function ke(a,b){return b.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function kf(){var a=hU(kd()(hC));return a.copy=function(){return ke(a,kf())},gA.apply(a,arguments)}function kg(){var a=h2(kd()).domain([1,10]);return a.copy=function(){return ke(a,kg()).base(a.base())},gA.apply(a,arguments)}function kh(){var a=h6(kd());return a.copy=function(){return ke(a,kh()).constant(a.constant())},gA.apply(a,arguments)}function ki(){var a=ib(kd());return a.copy=function(){return ke(a,ki()).exponent(a.exponent())},gA.apply(a,arguments)}function kj(){return ki.apply(null,arguments).exponent(.5)}function kk(){var a=[],b=hC;function c(c){if(null!=c&&!isNaN(c*=1))return b((gV(a,c,1)-1)/(a.length-1))}return c.domain=function(b){if(!arguments.length)return a.slice();for(let c of(a=[],b))null==c||isNaN(c*=1)||a.push(c);return a.sort(gP),c},c.interpolator=function(a){return arguments.length?(b=a,c):b},c.range=function(){return a.map((c,d)=>b(d/(a.length-1)))},c.quantiles=function(b){return Array.from({length:b+1},(c,d)=>(function(a,b,c){if(!(!(d=(a=Float64Array.from(function*(a,b){if(void 0===b)for(let b of a)null!=b&&(b*=1)>=b&&(yield b);else{let c=-1;for(let d of a)null!=(d=b(d,++c,a))&&(d*=1)>=d&&(yield d)}}(a,void 0))).length)||isNaN(b*=1))){if(b<=0||d<2)return ii(a);if(b>=1)return ih(a);var d,e=(d-1)*b,f=Math.floor(e),g=ih((function a(b,c,d=0,e=1/0,f){if(c=Math.floor(c),d=Math.floor(Math.max(0,d)),e=Math.floor(Math.min(b.length-1,e)),!(d<=c&&c<=e))return b;for(f=void 0===f?ij:function(a=gP){if(a===gP)return ij;if("function"!=typeof a)throw TypeError("compare is not a function");return(b,c)=>{let d=a(b,c);return d||0===d?d:(0===a(c,c))-(0===a(b,b))}}(f);e>d;){if(e-d>600){let g=e-d+1,h=c-d+1,i=Math.log(g),j=.5*Math.exp(2*i/3),k=.5*Math.sqrt(i*j*(g-j)/g)*(h-g/2<0?-1:1),l=Math.max(d,Math.floor(c-h*j/g+k)),m=Math.min(e,Math.floor(c+(g-h)*j/g+k));a(b,c,l,m,f)}let g=b[c],h=d,i=e;for(ik(b,d,c),f(b[e],g)>0&&ik(b,d,e);h<i;){for(ik(b,h,i),++h,--i;0>f(b[h],g);)++h;for(;f(b[i],g)>0;)--i}0===f(b[d],g)?ik(b,d,i):ik(b,++i,e),i<=c&&(d=i+1),c<=i&&(e=i-1)}return b})(a,f).subarray(0,f+1));return g+(ii(a.subarray(f+1))-g)*(e-f)}})(a,d/b))},c.copy=function(){return kk(b).domain(a)},gA.apply(c,arguments)}function kl(){var a,b,c,d,e,f,g,h=0,i=.5,j=1,k=1,l=hC,m=!1;function n(a){return isNaN(a*=1)?g:(a=.5+((a=+f(a))-b)*(k*a<k*b?d:e),l(m?Math.max(0,Math.min(1,a)):a))}function o(a){return function(b){var c,d,e;return arguments.length?([c,d,e]=b,l=function(a,b){void 0===b&&(b=a,a=hy);for(var c=0,d=b.length-1,e=b[0],f=Array(d<0?0:d);c<d;)f[c]=a(e,e=b[++c]);return function(a){var b=Math.max(0,Math.min(d-1,Math.floor(a*=d)));return f[b](a-b)}}(a,[c,d,e]),n):[l(0),l(.5),l(1)]}}return n.domain=function(g){return arguments.length?([h,i,j]=g,a=f(h*=1),b=f(i*=1),c=f(j*=1),d=a===b?0:.5/(b-a),e=b===c?0:.5/(c-b),k=b<a?-1:1,n):[h,i,j]},n.clamp=function(a){return arguments.length?(m=!!a,n):m},n.interpolator=function(a){return arguments.length?(l=a,n):l},n.range=o(hy),n.rangeRound=o(hz),n.unknown=function(a){return arguments.length?(g=a,n):g},function(g){return f=g,a=g(h),b=g(i),c=g(j),d=a===b?0:.5/(b-a),e=b===c?0:.5/(c-b),k=b<a?-1:1,n}}function km(){var a=hU(kl()(hC));return a.copy=function(){return ke(a,km())},gA.apply(a,arguments)}function kn(){var a=h2(kl()).domain([.1,1,10]);return a.copy=function(){return ke(a,kn()).base(a.base())},gA.apply(a,arguments)}function ko(){var a=h6(kl());return a.copy=function(){return ke(a,ko()).constant(a.constant())},gA.apply(a,arguments)}function kp(){var a=ib(kl());return a.copy=function(){return ke(a,kp()).exponent(a.exponent())},gA.apply(a,arguments)}function kq(){return kp.apply(null,arguments).exponent(.5)}mg=(mf=function(a){var b=a.dateTime,c=a.date,d=a.time,e=a.periods,f=a.days,g=a.shortDays,h=a.months,i=a.shortMonths,j=i7(e),k=i8(e),l=i7(f),m=i8(f),n=i7(g),o=i8(g),p=i7(h),q=i8(h),r=i7(i),s=i8(i),t={a:function(a){return g[a.getDay()]},A:function(a){return f[a.getDay()]},b:function(a){return i[a.getMonth()]},B:function(a){return h[a.getMonth()]},c:null,d:jt,e:jt,f:jy,g:jJ,G:jL,H:ju,I:jv,j:jw,L:jx,m:jz,M:jA,p:function(a){return e[+(a.getHours()>=12)]},q:function(a){return 1+~~(a.getMonth()/3)},Q:j6,s:j7,S:jB,u:jC,U:jD,V:jF,w:jG,W:jH,x:null,X:null,y:jI,Y:jK,Z:jM,"%":j5},u={a:function(a){return g[a.getUTCDay()]},A:function(a){return f[a.getUTCDay()]},b:function(a){return i[a.getUTCMonth()]},B:function(a){return h[a.getUTCMonth()]},c:null,d:jN,e:jN,f:jS,g:j1,G:j3,H:jO,I:jP,j:jQ,L:jR,m:jT,M:jU,p:function(a){return e[+(a.getUTCHours()>=12)]},q:function(a){return 1+~~(a.getUTCMonth()/3)},Q:j6,s:j7,S:jV,u:jW,U:jX,V:jZ,w:j$,W:j_,x:null,X:null,y:j0,Y:j2,Z:j4,"%":j5},v={a:function(a,b,c){var d=n.exec(b.slice(c));return d?(a.w=o.get(d[0].toLowerCase()),c+d[0].length):-1},A:function(a,b,c){var d=l.exec(b.slice(c));return d?(a.w=m.get(d[0].toLowerCase()),c+d[0].length):-1},b:function(a,b,c){var d=r.exec(b.slice(c));return d?(a.m=s.get(d[0].toLowerCase()),c+d[0].length):-1},B:function(a,b,c){var d=p.exec(b.slice(c));return d?(a.m=q.get(d[0].toLowerCase()),c+d[0].length):-1},c:function(a,c,d){return y(a,b,c,d)},d:jj,e:jj,f:jp,g:jf,G:je,H:jl,I:jl,j:jk,L:jo,m:ji,M:jm,p:function(a,b,c){var d=j.exec(b.slice(c));return d?(a.p=k.get(d[0].toLowerCase()),c+d[0].length):-1},q:jh,Q:jr,s:js,S:jn,u:ja,U:jb,V:jc,w:i9,W:jd,x:function(a,b,d){return y(a,c,b,d)},X:function(a,b,c){return y(a,d,b,c)},y:jf,Y:je,Z:jg,"%":jq};function w(a,b){return function(c){var d,e,f,g=[],h=-1,i=0,j=a.length;for(c instanceof Date||(c=new Date(+c));++h<j;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=i1[d=a.charAt(++h)])?d=a.charAt(++h):e="e"===d?" ":"0",(f=b[d])&&(d=f(c,e)),g.push(d),i=h+1);return g.push(a.slice(i,h)),g.join("")}}function x(a,b){return function(c){var d,e,f=i0(1900,void 0,1);if(y(f,a,c+="",0)!=c.length)return null;if("Q"in f)return new Date(f.Q);if("s"in f)return new Date(1e3*f.s+("L"in f?f.L:0));if(!b||"Z"in f||(f.Z=0),"p"in f&&(f.H=f.H%12+12*f.p),void 0===f.m&&(f.m="q"in f?f.q:0),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(d=(e=(d=i_(i0(f.y,0,1))).getUTCDay())>4||0===e?iG.ceil(d):iG(d),d=iN.offset(d,(f.V-1)*7),f.y=d.getUTCFullYear(),f.m=d.getUTCMonth(),f.d=d.getUTCDate()+(f.w+6)%7):(d=(e=(d=i$(i0(f.y,0,1))).getDay())>4||0===e?iy.ceil(d):iy(d),d=iM.offset(d,(f.V-1)*7),f.y=d.getFullYear(),f.m=d.getMonth(),f.d=d.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:+("W"in f)),e="Z"in f?i_(i0(f.y,0,1)).getUTCDay():i$(i0(f.y,0,1)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(e+5)%7:f.w+7*f.U-(e+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,i_(f)):i$(f)}}function y(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;g<h;){if(d>=i)return -1;if(37===(e=b.charCodeAt(g++))){if(!(f=v[(e=b.charAt(g++))in i1?b.charAt(g++):e])||(d=f(a,c,d))<0)return -1}else if(e!=c.charCodeAt(d++))return -1}return d}return t.x=w(c,t),t.X=w(d,t),t.c=w(b,t),u.x=w(c,u),u.X=w(d,u),u.c=w(b,u),{format:function(a){var b=w(a+="",t);return b.toString=function(){return a},b},parse:function(a){var b=x(a+="",!1);return b.toString=function(){return a},b},utcFormat:function(a){var b=w(a+="",u);return b.toString=function(){return a},b},utcParse:function(a){var b=x(a+="",!0);return b.toString=function(){return a},b}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,mf.parse,mh=mf.utcFormat,mf.utcParse,a.s(["scaleBand",()=>gG,"scaleDiverging",()=>km,"scaleDivergingLog",()=>kn,"scaleDivergingPow",()=>kp,"scaleDivergingSqrt",()=>kq,"scaleDivergingSymlog",()=>ko,"scaleIdentity",()=>hW,"scaleImplicit",0,gE,"scaleLinear",()=>hV,"scaleLog",()=>h3,"scaleOrdinal",()=>gF,"scalePoint",()=>gH,"scalePow",()=>ic,"scaleQuantile",()=>il,"scaleQuantize",()=>im,"scaleRadial",()=>ig,"scaleSequential",()=>kf,"scaleSequentialLog",()=>kg,"scaleSequentialPow",()=>ki,"scaleSequentialQuantile",()=>kk,"scaleSequentialSqrt",()=>kj,"scaleSequentialSymlog",()=>kh,"scaleSqrt",()=>id,"scaleSymlog",()=>h7,"scaleThreshold",()=>io,"scaleTime",()=>kb,"scaleUtc",()=>kc,"tickFormat",()=>hT],48117),a.i(48117),a.s(["scaleBand",()=>gG,"scaleDiverging",()=>km,"scaleDivergingLog",()=>kn,"scaleDivergingPow",()=>kp,"scaleDivergingSqrt",()=>kq,"scaleDivergingSymlog",()=>ko,"scaleIdentity",()=>hW,"scaleImplicit",0,gE,"scaleLinear",()=>hV,"scaleLog",()=>h3,"scaleOrdinal",()=>gF,"scalePoint",()=>gH,"scalePow",()=>ic,"scaleQuantile",()=>il,"scaleQuantize",()=>im,"scaleRadial",()=>ig,"scaleSequential",()=>kf,"scaleSequentialLog",()=>kg,"scaleSequentialPow",()=>ki,"scaleSequentialQuantile",()=>kk,"scaleSequentialSqrt",()=>kj,"scaleSequentialSymlog",()=>kh,"scaleSqrt",()=>id,"scaleSymlog",()=>h7,"scaleThreshold",()=>io,"scaleTime",()=>kb,"scaleUtc",()=>kc,"tickFormat",()=>hT],62599);var kr=a.i(62599);function ks(a){return null!=a}var kt=a=>a.chartData,ku=dJ([kt],a=>{var b=null!=a.chartData?a.chartData.length-1:0;return{chartData:a.chartData,computedData:a.computedData,dataEndIndex:b,dataStartIndex:0}}),kv=(a,b,c,d)=>d?ku(a):kt(a);function kw(a){if(Array.isArray(a)&&2===a.length){var[b,c]=a;if(gk(b)&&gk(c))return!0}return!1}function kx(a,b,c){return c?a:[Math.min(a[0],b[0]),Math.max(a[1],b[1])]}function ky(a,b){if(b&&"function"!=typeof a&&Array.isArray(a)&&2===a.length){var c,d,[e,f]=a;if(gk(e))c=e;else if("function"==typeof e)return;if(gk(f))d=f;else if("function"==typeof f)return;var g=[c,d];if(kw(g))return g}}var kz,kA,kB,kC,kD,kE,kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,kY,kZ,k$,k_,k0,k1,k2,k3,k4,k5,k6,k7,k8,k9,la,lb,lc,ld,le,lf,lg,lh,li,lj,lk,ll,lm,ln,lo,lp,lq,lr,ls,lt,lu,lv,lw,lx,ly,lz,lA,lB,lC,lD,lE,lF,lG,lH,lI,lJ,lK,lL,lM,lN,lO,lP,lQ,lR,lS,lT,lU,lV,lW,lX,lY,lZ,l$,l_,l0,l1,l2,l3,l4,l5,l6,l7,l8,l9,ma,mb,mc,md,me,mf,mg,mh,mi,mj,mk=!0,ml="[DecimalError] ",mm=ml+"Invalid argument: ",mn=ml+"Exponent out of range: ",mo=Math.floor,mp=Math.pow,mq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mr=mo(1286742750677284.5),ms={};function mt(a,b){var c,d,e,f,g,h,i,j,k=a.constructor,l=k.precision;if(!a.s||!b.s)return b.s||(b=new k(a)),mk?mD(b,l):b;if(i=a.d,j=b.d,g=a.e,e=b.e,i=i.slice(),f=g-e){for(f<0?(d=i,f=-f,h=j.length):(d=j,e=g,h=i.length),f>(h=(g=Math.ceil(l/7))>h?g+1:h+1)&&(f=h,d.length=1),d.reverse();f--;)d.push(0);d.reverse()}for((h=i.length)-(f=j.length)<0&&(f=h,d=j,j=i,i=d),c=0;f;)c=(i[--f]=i[f]+j[f]+c)/1e7|0,i[f]%=1e7;for(c&&(i.unshift(c),++e),h=i.length;0==i[--h];)i.pop();return b.d=i,b.e=e,mk?mD(b,l):b}function mu(a,b,c){if(a!==~~a||a<b||a>c)throw Error(mm+a)}function mv(a){var b,c,d,e=a.length-1,f="",g=a[0];if(e>0){for(f+=g,b=1;b<e;b++)(c=7-(d=a[b]+"").length)&&(f+=mA(c)),f+=d;(c=7-(d=(g=a[b])+"").length)&&(f+=mA(c))}else if(0===g)return"0";for(;g%10==0;)g/=10;return f+g}ms.absoluteValue=ms.abs=function(){var a=new this.constructor(this);return a.s&&(a.s=1),a},ms.comparedTo=ms.cmp=function(a){var b,c,d,e;if(a=new this.constructor(a),this.s!==a.s)return this.s||-a.s;if(this.e!==a.e)return this.e>a.e^this.s<0?1:-1;for(b=0,c=(d=this.d.length)<(e=a.d.length)?d:e;b<c;++b)if(this.d[b]!==a.d[b])return this.d[b]>a.d[b]^this.s<0?1:-1;return d===e?0:d>e^this.s<0?1:-1},ms.decimalPlaces=ms.dp=function(){var a=this.d.length-1,b=(a-this.e)*7;if(a=this.d[a])for(;a%10==0;a/=10)b--;return b<0?0:b},ms.dividedBy=ms.div=function(a){return mw(this,new this.constructor(a))},ms.dividedToIntegerBy=ms.idiv=function(a){var b=this.constructor;return mD(mw(this,new b(a),0,1),b.precision)},ms.equals=ms.eq=function(a){return!this.cmp(a)},ms.exponent=function(){return my(this)},ms.greaterThan=ms.gt=function(a){return this.cmp(a)>0},ms.greaterThanOrEqualTo=ms.gte=function(a){return this.cmp(a)>=0},ms.isInteger=ms.isint=function(){return this.e>this.d.length-2},ms.isNegative=ms.isneg=function(){return this.s<0},ms.isPositive=ms.ispos=function(){return this.s>0},ms.isZero=function(){return 0===this.s},ms.lessThan=ms.lt=function(a){return 0>this.cmp(a)},ms.lessThanOrEqualTo=ms.lte=function(a){return 1>this.cmp(a)},ms.logarithm=ms.log=function(a){var b,c=this.constructor,d=c.precision,e=d+5;if(void 0===a)a=new c(10);else if((a=new c(a)).s<1||a.eq(mj))throw Error(ml+"NaN");if(this.s<1)throw Error(ml+(this.s?"NaN":"-Infinity"));return this.eq(mj)?new c(0):(mk=!1,b=mw(mB(this,e),mB(a,e),e),mk=!0,mD(b,d))},ms.minus=ms.sub=function(a){return a=new this.constructor(a),this.s==a.s?mE(this,a):mt(this,(a.s=-a.s,a))},ms.modulo=ms.mod=function(a){var b,c=this.constructor,d=c.precision;if(!(a=new c(a)).s)throw Error(ml+"NaN");return this.s?(mk=!1,b=mw(this,a,0,1).times(a),mk=!0,this.minus(b)):mD(new c(this),d)},ms.naturalExponential=ms.exp=function(){return mx(this)},ms.naturalLogarithm=ms.ln=function(){return mB(this)},ms.negated=ms.neg=function(){var a=new this.constructor(this);return a.s=-a.s||0,a},ms.plus=ms.add=function(a){return a=new this.constructor(a),this.s==a.s?mt(this,a):mE(this,(a.s=-a.s,a))},ms.precision=ms.sd=function(a){var b,c,d;if(void 0!==a&&!!a!==a&&1!==a&&0!==a)throw Error(mm+a);if(b=my(this)+1,c=7*(d=this.d.length-1)+1,d=this.d[d]){for(;d%10==0;d/=10)c--;for(d=this.d[0];d>=10;d/=10)c++}return a&&b>c?b:c},ms.squareRoot=ms.sqrt=function(){var a,b,c,d,e,f,g,h=this.constructor;if(this.s<1){if(!this.s)return new h(0);throw Error(ml+"NaN")}for(a=my(this),mk=!1,0==(e=Math.sqrt(+this))||e==1/0?(((b=mv(this.d)).length+a)%2==0&&(b+="0"),e=Math.sqrt(b),a=mo((a+1)/2)-(a<0||a%2),d=new h(b=e==1/0?"5e"+a:(b=e.toExponential()).slice(0,b.indexOf("e")+1)+a)):d=new h(e.toString()),e=g=(c=h.precision)+3;;)if(d=(f=d).plus(mw(this,f,g+2)).times(.5),mv(f.d).slice(0,g)===(b=mv(d.d)).slice(0,g)){if(b=b.slice(g-3,g+1),e==g&&"4999"==b){if(mD(f,c+1,0),f.times(f).eq(this)){d=f;break}}else if("9999"!=b)break;g+=4}return mk=!0,mD(d,c)},ms.times=ms.mul=function(a){var b,c,d,e,f,g,h,i,j,k=this.constructor,l=this.d,m=(a=new k(a)).d;if(!this.s||!a.s)return new k(0);for(a.s*=this.s,c=this.e+a.e,(i=l.length)<(j=m.length)&&(f=l,l=m,m=f,g=i,i=j,j=g),f=[],d=g=i+j;d--;)f.push(0);for(d=j;--d>=0;){for(b=0,e=i+d;e>d;)h=f[e]+m[d]*l[e-d-1]+b,f[e--]=h%1e7|0,b=h/1e7|0;f[e]=(f[e]+b)%1e7|0}for(;!f[--g];)f.pop();return b?++c:f.shift(),a.d=f,a.e=c,mk?mD(a,k.precision):a},ms.toDecimalPlaces=ms.todp=function(a,b){var c=this,d=c.constructor;return(c=new d(c),void 0===a)?c:(mu(a,0,1e9),void 0===b?b=d.rounding:mu(b,0,8),mD(c,a+my(c)+1,b))},ms.toExponential=function(a,b){var c,d=this,e=d.constructor;return void 0===a?c=mF(d,!0):(mu(a,0,1e9),void 0===b?b=e.rounding:mu(b,0,8),c=mF(d=mD(new e(d),a+1,b),!0,a+1)),c},ms.toFixed=function(a,b){var c,d,e=this.constructor;return void 0===a?mF(this):(mu(a,0,1e9),void 0===b?b=e.rounding:mu(b,0,8),c=mF((d=mD(new e(this),a+my(this)+1,b)).abs(),!1,a+my(d)+1),this.isneg()&&!this.isZero()?"-"+c:c)},ms.toInteger=ms.toint=function(){var a=this.constructor;return mD(new a(this),my(this)+1,a.rounding)},ms.toNumber=function(){return+this},ms.toPower=ms.pow=function(a){var b,c,d,e,f,g,h=this,i=h.constructor,j=+(a=new i(a));if(!a.s)return new i(mj);if(!(h=new i(h)).s){if(a.s<1)throw Error(ml+"Infinity");return h}if(h.eq(mj))return h;if(d=i.precision,a.eq(mj))return mD(h,d);if(g=(b=a.e)>=(c=a.d.length-1),f=h.s,g){if((c=j<0?-j:j)<=0x1fffffffffffff){for(e=new i(mj),b=Math.ceil(d/7+4),mk=!1;c%2&&mG((e=e.times(h)).d,b),0!==(c=mo(c/2));)mG((h=h.times(h)).d,b);return mk=!0,a.s<0?new i(mj).div(e):mD(e,d)}}else if(f<0)throw Error(ml+"NaN");return f=f<0&&1&a.d[Math.max(b,c)]?-1:1,h.s=1,mk=!1,e=a.times(mB(h,d+12)),mk=!0,(e=mx(e)).s=f,e},ms.toPrecision=function(a,b){var c,d,e=this,f=e.constructor;return void 0===a?(c=my(e),d=mF(e,c<=f.toExpNeg||c>=f.toExpPos)):(mu(a,1,1e9),void 0===b?b=f.rounding:mu(b,0,8),c=my(e=mD(new f(e),a,b)),d=mF(e,a<=c||c<=f.toExpNeg,a)),d},ms.toSignificantDigits=ms.tosd=function(a,b){var c=this.constructor;return void 0===a?(a=c.precision,b=c.rounding):(mu(a,1,1e9),void 0===b?b=c.rounding:mu(b,0,8)),mD(new c(this),a,b)},ms.toString=ms.valueOf=ms.val=ms.toJSON=ms[Symbol.for("nodejs.util.inspect.custom")]=function(){var a=my(this),b=this.constructor;return mF(this,a<=b.toExpNeg||a>=b.toExpPos)};var mw=function(){function a(a,b){var c,d=0,e=a.length;for(a=a.slice();e--;)c=a[e]*b+d,a[e]=c%1e7|0,d=c/1e7|0;return d&&a.unshift(d),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c){for(var d=0;c--;)a[c]-=d,d=+(a[c]<b[c]),a[c]=1e7*d+a[c]-b[c];for(;!a[0]&&a.length>1;)a.shift()}return function(d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=d.constructor,A=d.s==e.s?1:-1,B=d.d,C=e.d;if(!d.s)return new z(d);if(!e.s)throw Error(ml+"Division by zero");for(j=0,i=d.e-e.e,x=C.length,v=B.length,o=(n=new z(A)).d=[];C[j]==(B[j]||0);)++j;if(C[j]>(B[j]||0)&&--i,(s=null==f?f=z.precision:g?f+(my(d)-my(e))+1:f)<0)return new z(0);if(s=s/7+2|0,j=0,1==x)for(k=0,C=C[0],s++;(j<v||k)&&s--;j++)t=1e7*k+(B[j]||0),o[j]=t/C|0,k=t%C|0;else{for((k=1e7/(C[0]+1)|0)>1&&(C=a(C,k),B=a(B,k),x=C.length,v=B.length),u=x,q=(p=B.slice(0,x)).length;q<x;)p[q++]=0;(y=C.slice()).unshift(0),w=C[0],C[1]>=1e7/2&&++w;do k=0,(h=b(C,p,x,q))<0?(r=p[0],x!=q&&(r=1e7*r+(p[1]||0)),(k=r/w|0)>1?(k>=1e7&&(k=1e7-1),m=(l=a(C,k)).length,q=p.length,1==(h=b(l,p,m,q))&&(k--,c(l,x<m?y:C,m))):(0==k&&(h=k=1),l=C.slice()),(m=l.length)<q&&l.unshift(0),c(p,l,q),-1==h&&(q=p.length,(h=b(C,p,x,q))<1&&(k++,c(p,x<q?y:C,q))),q=p.length):0===h&&(k++,p=[0]),o[j++]=k,h&&p[0]?p[q++]=B[u]||0:(p=[B[u]],q=1);while((u++<v||void 0!==p[0])&&s--)}return o[0]||o.shift(),n.e=i,mD(n,g?f+my(n)+1:f)}}();function mx(a,b){var c,d,e,f,g,h=0,i=0,j=a.constructor,k=j.precision;if(my(a)>16)throw Error(mn+my(a));if(!a.s)return new j(mj);for(null==b?(mk=!1,g=k):g=b,f=new j(.03125);a.abs().gte(.1);)a=a.times(f),i+=5;for(g+=Math.log(mp(2,i))/Math.LN10*2+5|0,c=d=e=new j(mj),j.precision=g;;){if(d=mD(d.times(a),g),c=c.times(++h),mv((f=e.plus(mw(d,c,g))).d).slice(0,g)===mv(e.d).slice(0,g)){for(;i--;)e=mD(e.times(e),g);return j.precision=k,null==b?(mk=!0,mD(e,k)):e}e=f}}function my(a){for(var b=7*a.e,c=a.d[0];c>=10;c/=10)b++;return b}function mz(a,b,c){if(b>a.LN10.sd())throw mk=!0,c&&(a.precision=c),Error(ml+"LN10 precision limit exceeded");return mD(new a(a.LN10),b)}function mA(a){for(var b="";a--;)b+="0";return b}function mB(a,b){var c,d,e,f,g,h,i,j,k,l=1,m=a,n=m.d,o=m.constructor,p=o.precision;if(m.s<1)throw Error(ml+(m.s?"NaN":"-Infinity"));if(m.eq(mj))return new o(0);if(null==b?(mk=!1,j=p):j=b,m.eq(10))return null==b&&(mk=!0),mz(o,j);if(o.precision=j+=10,d=(c=mv(n)).charAt(0),!(15e14>Math.abs(f=my(m))))return i=mz(o,j+2,p).times(f+""),m=mB(new o(d+"."+c.slice(1)),j-10).plus(i),o.precision=p,null==b?(mk=!0,mD(m,p)):m;for(;d<7&&1!=d||1==d&&c.charAt(1)>3;)d=(c=mv((m=m.times(a)).d)).charAt(0),l++;for(f=my(m),d>1?(m=new o("0."+c),f++):m=new o(d+"."+c.slice(1)),h=g=m=mw(m.minus(mj),m.plus(mj),j),k=mD(m.times(m),j),e=3;;){if(g=mD(g.times(k),j),mv((i=h.plus(mw(g,new o(e),j))).d).slice(0,j)===mv(h.d).slice(0,j))return h=h.times(2),0!==f&&(h=h.plus(mz(o,j+2,p).times(f+""))),h=mw(h,new o(l),j),o.precision=p,null==b?(mk=!0,mD(h,p)):h;h=i,e+=2}}function mC(a,b){var c,d,e;for((c=b.indexOf("."))>-1&&(b=b.replace(".","")),(d=b.search(/e/i))>0?(c<0&&(c=d),c+=+b.slice(d+1),b=b.substring(0,d)):c<0&&(c=b.length),d=0;48===b.charCodeAt(d);)++d;for(e=b.length;48===b.charCodeAt(e-1);)--e;if(b=b.slice(d,e)){if(e-=d,a.e=mo((c=c-d-1)/7),a.d=[],d=(c+1)%7,c<0&&(d+=7),d<e){for(d&&a.d.push(+b.slice(0,d)),e-=7;d<e;)a.d.push(+b.slice(d,d+=7));d=7-(b=b.slice(d)).length}else d-=e;for(;d--;)b+="0";if(a.d.push(+b),mk&&(a.e>mr||a.e<-mr))throw Error(mn+c)}else a.s=0,a.e=0,a.d=[0];return a}function mD(a,b,c){var d,e,f,g,h,i,j,k,l=a.d;for(g=1,f=l[0];f>=10;f/=10)g++;if((d=b-g)<0)d+=7,e=b,j=l[k=0];else{if((k=Math.ceil((d+1)/7))>=(f=l.length))return a;for(g=1,j=f=l[k];f>=10;f/=10)g++;d%=7,e=d-7+g}if(void 0!==c&&(h=j/(f=mp(10,g-e-1))%10|0,i=b<0||void 0!==l[k+1]||j%f,i=c<4?(h||i)&&(0==c||c==(a.s<0?3:2)):h>5||5==h&&(4==c||i||6==c&&(d>0?e>0?j/mp(10,g-e):0:l[k-1])%10&1||c==(a.s<0?8:7))),b<1||!l[0])return i?(f=my(a),l.length=1,b=b-f-1,l[0]=mp(10,(7-b%7)%7),a.e=mo(-b/7)||0):(l.length=1,l[0]=a.e=a.s=0),a;if(0==d?(l.length=k,f=1,k--):(l.length=k+1,f=mp(10,7-d),l[k]=e>0?(j/mp(10,g-e)%mp(10,e)|0)*f:0),i)for(;;)if(0==k){1e7==(l[0]+=f)&&(l[0]=1,++a.e);break}else{if(l[k]+=f,1e7!=l[k])break;l[k--]=0,f=1}for(d=l.length;0===l[--d];)l.pop();if(mk&&(a.e>mr||a.e<-mr))throw Error(mn+my(a));return a}function mE(a,b){var c,d,e,f,g,h,i,j,k,l,m=a.constructor,n=m.precision;if(!a.s||!b.s)return b.s?b.s=-b.s:b=new m(a),mk?mD(b,n):b;if(i=a.d,l=b.d,d=b.e,j=a.e,i=i.slice(),g=j-d){for((k=g<0)?(c=i,g=-g,h=l.length):(c=l,d=j,h=i.length),g>(e=Math.max(Math.ceil(n/7),h)+2)&&(g=e,c.length=1),c.reverse(),e=g;e--;)c.push(0);c.reverse()}else{for((k=(e=i.length)<(h=l.length))&&(h=e),e=0;e<h;e++)if(i[e]!=l[e]){k=i[e]<l[e];break}g=0}for(k&&(c=i,i=l,l=c,b.s=-b.s),h=i.length,e=l.length-h;e>0;--e)i[h++]=0;for(e=l.length;e>g;){if(i[--e]<l[e]){for(f=e;f&&0===i[--f];)i[f]=1e7-1;--i[f],i[e]+=1e7}i[e]-=l[e]}for(;0===i[--h];)i.pop();for(;0===i[0];i.shift())--d;return i[0]?(b.d=i,b.e=d,mk?mD(b,n):b):new m(0)}function mF(a,b,c){var d,e=my(a),f=mv(a.d),g=f.length;return b?(c&&(d=c-g)>0?f=f.charAt(0)+"."+f.slice(1)+mA(d):g>1&&(f=f.charAt(0)+"."+f.slice(1)),f=f+(e<0?"e":"e+")+e):e<0?(f="0."+mA(-e-1)+f,c&&(d=c-g)>0&&(f+=mA(d))):e>=g?(f+=mA(e+1-g),c&&(d=c-e-1)>0&&(f=f+"."+mA(d))):((d=e+1)<g&&(f=f.slice(0,d)+"."+f.slice(d)),c&&(d=c-g)>0&&(e+1===g&&(f+="."),f+=mA(d))),a.s<0?"-"+f:f}function mG(a,b){if(a.length>b)return a.length=b,!0}function mH(a){if(!a||"object"!=typeof a)throw Error(ml+"Object expected");var b,c,d,e=["precision",1,1e9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(b=0;b<e.length;b+=3)if(void 0!==(d=a[c=e[b]]))if(mo(d)===d&&d>=e[b+1]&&d<=e[b+2])this[c]=d;else throw Error(mm+c+": "+d);if(void 0!==(d=a[c="LN10"]))if(d==Math.LN10)this[c]=new this(d);else throw Error(mm+c+": "+d);return this}var mi=function a(b){var c,d,e;function f(a){if(!(this instanceof f))return new f(a);if(this.constructor=f,a instanceof f){this.s=a.s,this.e=a.e,this.d=(a=a.d)?a.slice():a;return}if("number"==typeof a){if(0*a!=0)throw Error(mm+a);if(a>0)this.s=1;else if(a<0)a=-a,this.s=-1;else{this.s=0,this.e=0,this.d=[0];return}if(a===~~a&&a<1e7){this.e=0,this.d=[a];return}return mC(this,a.toString())}if("string"!=typeof a)throw Error(mm+a);if(45===a.charCodeAt(0)?(a=a.slice(1),this.s=-1):this.s=1,mq.test(a))mC(this,a);else throw Error(mm+a)}if(f.prototype=ms,f.ROUND_UP=0,f.ROUND_DOWN=1,f.ROUND_CEIL=2,f.ROUND_FLOOR=3,f.ROUND_HALF_UP=4,f.ROUND_HALF_DOWN=5,f.ROUND_HALF_EVEN=6,f.ROUND_HALF_CEIL=7,f.ROUND_HALF_FLOOR=8,f.clone=a,f.config=f.set=mH,void 0===b&&(b={}),b)for(c=0,e=["precision","rounding","toExpNeg","toExpPos","LN10"];c<e.length;)b.hasOwnProperty(d=e[c++])||(b[d]=this[d]);return f.config(b),f}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});mj=new mi(1);let mI=mi;var mJ=a=>a,mK={},mL=a=>function b(){let c;return 0==arguments.length||1==arguments.length&&(c=arguments.length<=0?void 0:arguments[0],c===mK)?b:a(...arguments)},mM=(a,b)=>1===a?b:mL(function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=d.filter(a=>a!==mK).length;return f>=a?b(...d):mM(a-f,mL(function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];return b(...d.map(a=>a===mK?c.shift():a),...c)}))}),mN=(a,b)=>{for(var c=[],d=a;d<b;++d)c[d-a]=d;return c},mO=mM((f=(a,b)=>Array.isArray(b)?b.map(a):Object.keys(b).map(a=>b[a]).map(a)).length,f),mP=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(!b.length)return mJ;var d=b.reverse(),e=d[0],f=d.slice(1);return function(){return f.reduce((a,b)=>b(a),e(...arguments))}},mQ=a=>Array.isArray(a)?a.reverse():a.split("").reverse().join(""),mR=a=>{var b=null,c=null;return function(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return b&&e.every((a,c)=>{var d;return a===(null==(d=b)?void 0:d[c])})?c:(b=e,c=a(...e))}};function mS(a){return 0===a?1:Math.floor(new mI(a).abs().log(10).toNumber())+1}function mT(a,b,c){for(var d=new mI(a),e=0,f=[];d.lt(b)&&e<1e5;)f.push(d.toNumber()),d=d.add(c),e++;return f}mM((g=(a,b,c)=>{var d=+a;return d+c*(b-d)}).length,g),mM((h=(a,b,c)=>{var d=b-a;return(c-a)/(d=d||1/0)}).length,h),mM((i=(a,b,c)=>{var d=b-a;return Math.max(0,Math.min(1,(c-a)/(d=d||1/0)))}).length,i);var mU=a=>{var[b,c]=a,[d,e]=[b,c];return b>c&&([d,e]=[c,b]),[d,e]},mV=(a,b,c)=>{if(a.lte(0))return new mI(0);var d=mS(a.toNumber()),e=new mI(10).pow(d),f=a.div(e),g=1!==d?.05:.1,h=new mI(Math.ceil(f.div(g).toNumber())).add(c).mul(g).mul(e);return new mI(b?h.toNumber():Math.ceil(h.toNumber()))},mW=function(a,b,c,d){var e,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((b-a)/(c-1)))return{step:new mI(0),tickMin:new mI(0),tickMax:new mI(0)};var g=mV(new mI(b).sub(a).div(c-1),d,f),h=Math.ceil((e=a<=0&&b>=0?new mI(0):(e=new mI(a).add(b).div(2)).sub(new mI(e).mod(g))).sub(a).div(g).toNumber()),i=Math.ceil(new mI(b).sub(e).div(g).toNumber()),j=h+i+1;return j>c?mW(a,b,c,d,f+1):(j<c&&(i=b>0?i+(c-j):i,h=b>0?h:h+(c-j)),{step:g,tickMin:e.sub(new mI(h).mul(g)),tickMax:e.add(new mI(i).mul(g))})},mX=mR(function(a){var[b,c]=a,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,e=!(arguments.length>2)||void 0===arguments[2]||arguments[2],f=Math.max(d,2),[g,h]=mU([b,c]);if(g===-1/0||h===1/0){var i=h===1/0?[g,...mN(0,d-1).map(()=>1/0)]:[...mN(0,d-1).map(()=>-1/0),h];return b>c?mQ(i):i}if(g===h){var j=new mI(1),k=new mI(g);if(!k.isint()&&e){var l=Math.abs(g);l<1?(j=new mI(10).pow(mS(g)-1),k=new mI(Math.floor(k.div(j).toNumber())).mul(j)):l>1&&(k=new mI(Math.floor(g)))}else 0===g?k=new mI(Math.floor((d-1)/2)):e||(k=new mI(Math.floor(g)));var m=Math.floor((d-1)/2);return mP(mO(a=>k.add(new mI(a-m).mul(j)).toNumber()),mN)(0,d)}var{step:n,tickMin:o,tickMax:p}=mW(g,h,f,e,0),q=mT(o,p.add(new mI(.1).mul(n)),n);return b>c?mQ(q):q}),mY=mR(function(a,b){var[c,d]=a,e=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[f,g]=mU([c,d]);if(f===-1/0||g===1/0)return[c,d];if(f===g)return[f];var h=Math.max(b,2),i=mV(new mI(g).sub(f).div(h-1),e,0),j=[...mT(new mI(f),new mI(g),i),g];return!1===e&&(j=j.map(a=>Math.round(a))),c>d?mQ(j):j}),mZ=a=>a.rootProps.maxBarSize,m$=a=>a.rootProps.barCategoryGap,m_=a=>a.rootProps.stackOffset,m0=a=>a.options.chartName,m1=a=>a.rootProps.syncId,m2=a=>a.rootProps.syncMethod,m3=a=>a.options.eventEmitter,m4="auto",m5="auto",m6=(a,b)=>{if(a&&b)return null!=a&&a.reversed?[b[1],b[0]]:b},m7={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:m4,tick:!0,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},m8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:m5,tick:!0,tickCount:5,ticks:void 0,type:"number",unit:void 0},m9={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:m4,tick:!0,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},na={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:m5,tick:!0,tickCount:5,ticks:void 0,type:"category",unit:void 0},nb=(a,b)=>null!=a.polarAxis.angleAxis[b]?a.polarAxis.angleAxis[b]:"radial"===a.layout.layoutType?m9:m7,nc=(a,b)=>null!=a.polarAxis.radiusAxis[b]?a.polarAxis.radiusAxis[b]:"radial"===a.layout.layoutType?na:m8,nd=a=>a.polarOptions,ne=dJ([fX,fY,f5],fK),nf=dJ([nd,ne],(a,b)=>{if(null!=a)return eL(a.innerRadius,b,0)}),ng=dJ([nd,ne],(a,b)=>{if(null!=a)return eL(a.outerRadius,b,.8*b)}),nh=dJ([nd],a=>{if(null==a)return[0,0];var{startAngle:b,endAngle:c}=a;return[b,c]});dJ([nb,nh],m6);var ni=dJ([ne,nf,ng],(a,b,c)=>{if(null!=a&&null!=b&&null!=c)return[b,c]});dJ([nc,ni],m6);var nj=dJ([gw,nd,nf,ng,fX,fY],(a,b,c,d,e,f)=>{if(("centric"===a||"radial"===a)&&null!=b&&null!=c&&null!=d){var{cx:g,cy:h,startAngle:i,endAngle:j}=b;return{cx:eL(g,e,e/2),cy:eL(h,f,f/2),innerRadius:c,outerRadius:d,startAngle:i,endAngle:j,clockWise:!1}}}),nk=(a,b)=>b,nl=(a,b,c)=>c;function nm(a){return null==a?void 0:a.id}var nn=a=>{var b=gw(a);return"horizontal"===b?"xAxis":"vertical"===b?"yAxis":"centric"===b?"angleAxis":"radiusAxis"},no=a=>a.tooltip.settings.axisId,np=a=>{var b=nn(a),c=no(a);return nH(a,b,c)},nq=dJ([np],a=>null==a?void 0:a.dataKey);function nr(a,b,c){var{chartData:d=[]}=b,{allowDuplicatedCategory:e,dataKey:f}=c,g=new Map;return a.forEach(a=>{var b,c=null!=(b=a.data)?b:d;if(null!=c&&0!==c.length){var h=nm(a);c.forEach((b,c)=>{var d,i=null==f||e?c:String(fO(b,f,null)),j=fO(b,a.dataKey,0);Object.assign(d=g.has(i)?g.get(i):{},{[h]:j}),g.set(i,d)})}}),Array.from(g.values())}function ns(a){return null!=a.stackId&&null!=a.dataKey}var nt=(a,b)=>a===b||null!=a&&null!=b&&a[0]===b[0]&&a[1]===b[1];function nu(a,b){return!!(Array.isArray(a)&&Array.isArray(b))&&0===a.length&&0===b.length||a===b}function nv(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function nw(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?nv(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):nv(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var nx=[0,"auto"],ny={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},nz=(a,b)=>a.cartesianAxis.xAxis[b],nA=(a,b)=>{var c=nz(a,b);return null==c?ny:c},nB={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},nC=(a,b)=>a.cartesianAxis.yAxis[b],nD=(a,b)=>{var c=nC(a,b);return null==c?nB:c},nE={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},nF=(a,b)=>{var c=a.cartesianAxis.zAxis[b];return null==c?nE:c},nG=(a,b,c)=>{switch(b){case"xAxis":return nA(a,c);case"yAxis":return nD(a,c);case"zAxis":return nF(a,c);case"angleAxis":return nb(a,c);case"radiusAxis":return nc(a,c);default:throw Error("Unexpected axis type: ".concat(b))}},nH=(a,b,c)=>{switch(b){case"xAxis":return nA(a,c);case"yAxis":return nD(a,c);case"angleAxis":return nb(a,c);case"radiusAxis":return nc(a,c);default:throw Error("Unexpected axis type: ".concat(b))}},nI=a=>a.graphicalItems.cartesianItems.some(a=>"bar"===a.type)||a.graphicalItems.polarItems.some(a=>"radialBar"===a.type);function nJ(a,b){return c=>{switch(a){case"xAxis":return"xAxisId"in c&&c.xAxisId===b;case"yAxis":return"yAxisId"in c&&c.yAxisId===b;case"zAxis":return"zAxisId"in c&&c.zAxisId===b;case"angleAxis":return"angleAxisId"in c&&c.angleAxisId===b;case"radiusAxis":return"radiusAxisId"in c&&c.radiusAxisId===b;default:return!1}}}var nK=a=>a.graphicalItems.cartesianItems,nL=dJ([nk,nl],nJ),nM=(a,b,c)=>a.filter(c).filter(a=>(null==b?void 0:b.includeHidden)===!0||!a.hide),nN=dJ([nK,nG,nL],nM,{memoizeOptions:{resultEqualityCheck:nu}}),nO=dJ([nN],a=>a.filter(a=>"area"===a.type||"bar"===a.type).filter(ns)),nP=a=>a.filter(a=>!("stackId"in a)||void 0===a.stackId),nQ=dJ([nN],nP),nR=a=>a.map(a=>a.data).filter(Boolean).flat(1),nS=dJ([nN],nR,{memoizeOptions:{resultEqualityCheck:nu}}),nT=(a,b)=>{var{chartData:c=[],dataStartIndex:d,dataEndIndex:e}=b;return a.length>0?a:c.slice(d,e+1)},nU=dJ([nS,kv],nT),nV=(a,b,c)=>(null==b?void 0:b.dataKey)!=null?a.map(a=>({value:fO(a,b.dataKey)})):c.length>0?c.map(a=>a.dataKey).flatMap(b=>a.map(a=>({value:fO(a,b)}))):a.map(a=>({value:a})),nW=dJ([nU,nG,nN],nV);function nX(a,b){switch(a){case"xAxis":return"x"===b.direction;case"yAxis":return"y"===b.direction;default:return!1}}function nY(a){if(eI(a)||a instanceof Date){var b=Number(a);if(gk(b))return b}}function nZ(a){if(Array.isArray(a)){var b=[nY(a[0]),nY(a[1])];return kw(b)?b:void 0}var c=nY(a);if(null!=c)return[c,c]}function n$(a){return a.map(nY).filter(ks)}var n_=dJ([nO,kv,np],nr),n0=(a,b,c)=>Object.fromEntries(Object.entries(b.reduce((a,b)=>(null==b.stackId||(null==a[b.stackId]&&(a[b.stackId]=[]),a[b.stackId].push(b)),a),{})).map(b=>{var d,[e,f]=b,g=f.map(nm);return[e,{stackedData:(d=fQ[c],(function(){var a=fB([]),b=fD,c=fC,d=fE;function e(e){var f,g,h=Array.from(a.apply(this,arguments),fF),i=h.length,j=-1;for(let a of e)for(f=0,++j;f<i;++f)(h[f][j]=[0,+d(a,h[f].key,j,e)]).data=a;for(f=0,g=fA(b(h));f<i;++f)h[g[f]].index=f;return c(h,g),h}return e.keys=function(b){return arguments.length?(a="function"==typeof b?b:fB(Array.from(b)),e):a},e.value=function(a){return arguments.length?(d="function"==typeof a?a:fB(+a),e):d},e.order=function(a){return arguments.length?(b=null==a?fD:"function"==typeof a?a:fB(Array.from(a)),e):b},e.offset=function(a){return arguments.length?(c=null==a?fC:a,e):c},e})().keys(g).value((a,b)=>+fO(a,b,0)).order(fD).offset(d)(a)),graphicalItems:f}]})),n1=dJ([n_,nO,m_],n0),n2=(a,b,c,d)=>{var{dataStartIndex:e,dataEndIndex:f}=b;if(null==d&&"zAxis"!==c){var g=((a,b,c)=>{if(null!=a){let d;return[(d=Object.keys(a).reduce((d,e)=>{var{stackedData:f}=a[e],g=f.reduce((a,d)=>{var e,f=[Math.min(...e=fL(d,b,c).flat(2).filter(eH)),Math.max(...e)];return[Math.min(a[0],f[0]),Math.max(a[1],f[1])]},[1/0,-1/0]);return[Math.min(g[0],d[0]),Math.max(g[1],d[1])]},[1/0,-1/0]))[0]===1/0?0:d[0],d[1]===-1/0?0:d[1]]}})(a,e,f);if(null==g||0!==g[0]||0!==g[1])return g}},n3=dJ([nG],a=>a.allowDataOverflow),n4=a=>{var b;if(null==a||!("domain"in a))return nx;if(null!=a.domain)return a.domain;if(null!=a.ticks){if("number"===a.type){var c=n$(a.ticks);return[Math.min(...c),Math.max(...c)]}if("category"===a.type)return a.ticks.map(String)}return null!=(b=null==a?void 0:a.domain)?b:nx},n5=dJ([nG],n4),n6=dJ([n5,n3],ky),n7=dJ([n1,kt,nk,n6],n2,{memoizeOptions:{resultEqualityCheck:nt}}),n8=a=>a.errorBars,n9=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.filter(Boolean);if(0!==d.length){var e=d.flat();return[Math.min(...e),Math.max(...e)]}},oa=(a,b,c,d,e)=>{var f,g;if(c.length>0&&a.forEach(a=>{c.forEach(c=>{var h,i,j=null==(h=d[c.id])?void 0:h.filter(a=>nX(e,a)),k=fO(a,null!=(i=b.dataKey)?i:c.dataKey),l=!(!j||"number"!=typeof k||eF(k))&&j.length?n$(j.flatMap(b=>{var c,d,e=fO(a,b.dataKey);if(Array.isArray(e)?[c,d]=e:c=d=e,gk(c)&&gk(d))return[k-c,k+d]})):[];if(l.length>=2){var m=Math.min(...l),n=Math.max(...l);(null==f||m<f)&&(f=m),(null==g||n>g)&&(g=n)}var o=nZ(k);null!=o&&(f=null==f?o[0]:Math.min(f,o[0]),g=null==g?o[1]:Math.max(g,o[1]))})}),(null==b?void 0:b.dataKey)!=null&&a.forEach(a=>{var c=nZ(fO(a,b.dataKey));null!=c&&(f=null==f?c[0]:Math.min(f,c[0]),g=null==g?c[1]:Math.max(g,c[1]))}),gk(f)&&gk(g))return[f,g]},ob=dJ([nU,nG,nQ,n8,nk],oa,{memoizeOptions:{resultEqualityCheck:nt}});function oc(a){var{value:b}=a;if(eI(b)||b instanceof Date)return b}var od=a=>a.referenceElements.dots,oe=(a,b,c)=>a.filter(a=>"extendDomain"===a.ifOverflow).filter(a=>"xAxis"===b?a.xAxisId===c:a.yAxisId===c),of=dJ([od,nk,nl],oe),og=a=>a.referenceElements.areas,oh=dJ([og,nk,nl],oe),oi=a=>a.referenceElements.lines,oj=dJ([oi,nk,nl],oe),ok=(a,b)=>{var c=n$(a.map(a=>"xAxis"===b?a.x:a.y));if(0!==c.length)return[Math.min(...c),Math.max(...c)]},ol=dJ(of,nk,ok),om=(a,b)=>{var c=n$(a.flatMap(a=>["xAxis"===b?a.x1:a.y1,"xAxis"===b?a.x2:a.y2]));if(0!==c.length)return[Math.min(...c),Math.max(...c)]},on=dJ([oh,nk],om),oo=(a,b)=>{var c=n$(a.map(a=>"xAxis"===b?a.x:a.y));if(0!==c.length)return[Math.min(...c),Math.max(...c)]},op=dJ(oj,nk,oo),oq=dJ(ol,op,on,(a,b,c)=>n9(a,c,b)),or=(a,b,c,d,e,f,g,h)=>null!=c?c:function(a,b,c){if(c||null!=b){if("function"==typeof a&&null!=b)try{var d=a(b,c);if(kw(d))return kx(d,b,c)}catch(a){}if(Array.isArray(a)&&2===a.length){var e,f,[g,h]=a;if("auto"===g)null!=b&&(e=Math.min(...b));else if(eH(g))e=g;else if("function"==typeof g)try{null!=b&&(e=g(null==b?void 0:b[0]))}catch(a){}else if("string"==typeof g&&fS.test(g)){var i=fS.exec(g);if(null==i||null==b)e=void 0;else{var j=+i[1];e=b[0]-j}}else e=null==b?void 0:b[0];if("auto"===h)null!=b&&(f=Math.max(...b));else if(eH(h))f=h;else if("function"==typeof h)try{null!=b&&(f=h(null==b?void 0:b[1]))}catch(a){}else if("string"==typeof h&&fT.test(h)){var k=fT.exec(h);if(null==k||null==b)f=void 0;else{var l=+k[1];f=b[1]+l}}else f=null==b?void 0:b[1];var m=[e,f];if(kw(m))return null==b?m:kx(m,b,c)}}}(b,"vertical"===g&&"xAxis"===h||"horizontal"===g&&"yAxis"===h?n9(d,f,e):n9(f,e),a.allowDataOverflow),os=dJ([nG,n5,n6,n7,ob,oq,gw,nk],or,{memoizeOptions:{resultEqualityCheck:nt}}),ot=[0,1],ou=(a,b,c,d,e,f,g)=>{if(null!=a&&null!=c&&0!==c.length||void 0!==g){var h,{dataKey:i,type:j}=a,k=fP(b,f);return k&&null==i?(0,gy.default)(0,c.length):"category"===j?(h=d.map(oc).filter(a=>null!=a),k&&(null==a.dataKey||a.allowDuplicatedCategory&&eM(h))?(0,gy.default)(0,d.length):a.allowDuplicatedCategory?h:Array.from(new Set(h))):"expand"===e?ot:g}},ov=dJ([nG,gw,nU,nW,m_,nk,os],ou),ow=(a,b,c,d,e)=>{if(null!=a){var{scale:f,type:g}=a;if("auto"===f)return"radial"===b&&"radiusAxis"===e?"band":"radial"===b&&"angleAxis"===e?"linear":"category"===g&&d&&(d.indexOf("LineChart")>=0||d.indexOf("AreaChart")>=0||d.indexOf("ComposedChart")>=0&&!c)?"point":"category"===g?"band":"linear";if("string"==typeof f){var h="scale".concat(eO(f));return h in kr?h:"point"}}},ox=dJ([nG,gw,nI,m0,nk],ow);function oy(a,b,c,d){if(null!=c&&null!=d){if("function"==typeof a.scale)return a.scale.copy().domain(c).range(d);var e=function(a){if(null!=a){if(a in kr)return kr[a]();var b="scale".concat(eO(a));if(b in kr)return kr[b]()}}(b);if(null!=e){var f=e.domain(c).range(d);return(a=>{var b=a.domain();if(b&&!(b.length<=2)){var c=b.length,d=a.range(),e=Math.min(d[0],d[1])-1e-4,f=Math.max(d[0],d[1])+1e-4,g=a(b[0]),h=a(b[c-1]);(g<e||g>f||h<e||h>f)&&a.domain([b[0],b[c-1]])}})(f),f}}}var oz=(a,b,c)=>{var d=n4(b);if("auto"===c||"linear"===c){if(null!=b&&b.tickCount&&Array.isArray(d)&&("auto"===d[0]||"auto"===d[1])&&kw(a))return mX(a,b.tickCount,b.allowDecimals);if(null!=b&&b.tickCount&&"number"===b.type&&kw(a))return mY(a,b.tickCount,b.allowDecimals)}},oA=dJ([ov,nH,ox],oz),oB=(a,b,c,d)=>"angleAxis"!==d&&(null==a?void 0:a.type)==="number"&&kw(b)&&Array.isArray(c)&&c.length>0?[Math.min(b[0],c[0]),Math.max(b[1],c[c.length-1])]:b,oC=dJ([nG,ov,oA,nk],oB),oD=dJ(nW,nG,(a,b)=>{if(b&&"number"===b.type){var c=1/0,d=Array.from(n$(a.map(a=>a.value))).sort((a,b)=>a-b);if(d.length<2)return 1/0;var e=d[d.length-1]-d[0];if(0===e)return 1/0;for(var f=0;f<d.length-1;f++)c=Math.min(c,d[f+1]-d[f]);return c/e}}),oE=dJ(oD,gw,m$,f5,(a,b,c,d)=>d,(a,b,c,d,e)=>{if(!gk(a))return 0;var f="vertical"===b?d.height:d.width;if("gap"===e)return a*f/2;if("no-gap"===e){var g=eL(c,a*f),h=a*f/2;return h-g-(h-g)/f*g}return 0}),oF=dJ(nA,(a,b)=>{var c=nA(a,b);return null==c||"string"!=typeof c.padding?0:oE(a,"xAxis",b,c.padding)},(a,b)=>{if(null==a)return{left:0,right:0};var c,d,{padding:e}=a;return"string"==typeof e?{left:b,right:b}:{left:(null!=(c=e.left)?c:0)+b,right:(null!=(d=e.right)?d:0)+b}}),oG=dJ(nD,(a,b)=>{var c=nD(a,b);return null==c||"string"!=typeof c.padding?0:oE(a,"yAxis",b,c.padding)},(a,b)=>{if(null==a)return{top:0,bottom:0};var c,d,{padding:e}=a;return"string"==typeof e?{top:b,bottom:b}:{top:(null!=(c=e.top)?c:0)+b,bottom:(null!=(d=e.bottom)?d:0)+b}}),oH=dJ([f5,oF,gb,ga,(a,b,c)=>c],(a,b,c,d,e)=>{var{padding:f}=d;return e?[f.left,c.width-f.right]:[a.left+b.left,a.left+a.width-b.right]}),oI=dJ([f5,gw,oG,gb,ga,(a,b,c)=>c],(a,b,c,d,e,f)=>{var{padding:g}=e;return f?[d.height-g.bottom,g.top]:"horizontal"===b?[a.top+a.height-c.bottom,a.top+c.top]:[a.top+c.top,a.top+a.height-c.bottom]}),oJ=(a,b,c,d)=>{var e;switch(b){case"xAxis":return oH(a,c,d);case"yAxis":return oI(a,c,d);case"zAxis":return null==(e=nF(a,c))?void 0:e.range;case"angleAxis":return nh(a);case"radiusAxis":return ni(a,c);default:return}},oK=dJ([nG,oJ],m6),oL=dJ([nG,ox,oC,oK],oy);function oM(a,b){return a.id<b.id?-1:+(a.id>b.id)}dJ([nN,n8,nk],(a,b,c)=>a.flatMap(a=>b[a.id]).filter(Boolean).filter(a=>nX(c,a)));var oN=(a,b)=>b,oO=(a,b,c)=>c,oP=dJ(f_,oN,oO,(a,b,c)=>a.filter(a=>a.orientation===b).filter(a=>a.mirror===c).sort(oM)),oQ=dJ(f0,oN,oO,(a,b,c)=>a.filter(a=>a.orientation===b).filter(a=>a.mirror===c).sort(oM)),oR=(a,b)=>({width:a.width,height:b.height}),oS=dJ(f5,nA,oR),oT=dJ(fY,f5,oP,oN,oO,(a,b,c,d,e)=>{var f,g={};return c.forEach(c=>{var h=oR(b,c);null==f&&(f=((a,b,c)=>{switch(b){case"top":return a.top;case"bottom":return c-a.bottom;default:return 0}})(b,d,a));var i="top"===d&&!e||"bottom"===d&&e;g[c.id]=f-Number(i)*h.height,f+=(i?-1:1)*h.height}),g}),oU=dJ(fX,f5,oQ,oN,oO,(a,b,c,d,e)=>{var f,g={};return c.forEach(c=>{var h={width:"number"==typeof c.width?c.width:60,height:b.height};null==f&&(f=((a,b,c)=>{switch(b){case"left":return a.left;case"right":return c-a.right;default:return 0}})(b,d,a));var i="left"===d&&!e||"right"===d&&e;g[c.id]=f-Number(i)*h.width,f+=(i?-1:1)*h.width}),g}),oV=dJ([f5,nA,(a,b)=>{var c=nA(a,b);if(null!=c)return oT(a,c.orientation,c.mirror)},(a,b)=>b],(a,b,c,d)=>{if(null!=b){var e=null==c?void 0:c[d];return null==e?{x:a.left,y:0}:{x:a.left,y:e}}}),oW=dJ([f5,nD,(a,b)=>{var c=nD(a,b);if(null!=c)return oU(a,c.orientation,c.mirror)},(a,b)=>b],(a,b,c,d)=>{if(null!=b){var e=null==c?void 0:c[d];return null==e?{x:0,y:a.top}:{x:e,y:a.top}}}),oX=dJ(f5,nD,(a,b)=>({width:"number"==typeof b.width?b.width:60,height:a.height})),oY=(a,b,c)=>{switch(b){case"xAxis":return oS(a,c).width;case"yAxis":return oX(a,c).height;default:return}},oZ=(a,b,c,d)=>{if(null!=c){var{allowDuplicatedCategory:e,type:f,dataKey:g}=c,h=fP(a,d),i=b.map(a=>a.value);if(g&&h&&"category"===f&&e&&eM(i))return i}},o$=dJ([gw,nW,nG,nk],oZ),o_=(a,b,c,d)=>{if(null!=c&&null!=c.dataKey){var{type:e,scale:f}=c;if(fP(a,d)&&("number"===e||"auto"!==f))return b.map(a=>a.value)}},o0=dJ([gw,nW,nH,nk],o_);dJ([gw,(a,b,c)=>{switch(b){case"xAxis":return nA(a,c);case"yAxis":return nD(a,c);default:throw Error("Unexpected axis type: ".concat(b))}},ox,oL,o$,o0,oJ,oA,nk],(a,b,c,d,e,f,g,h,i)=>{if(null==b)return null;var j=fP(a,i);return{angle:b.angle,interval:b.interval,minTickGap:b.minTickGap,orientation:b.orientation,tick:b.tick,tickCount:b.tickCount,tickFormatter:b.tickFormatter,ticks:b.ticks,type:b.type,unit:b.unit,axisType:i,categoricalDomain:f,duplicateDomain:e,isCategorical:j,niceTicks:h,range:g,realScaleType:c,scale:d}});var o1=dJ([gw,nH,ox,oL,oA,oJ,o$,o0,nk],(a,b,c,d,e,f,g,h,i)=>{if(null!=b&&null!=d){var j=fP(a,i),{type:k,ticks:l,tickCount:m}=b,n="scaleBand"===c&&"function"==typeof d.bandwidth?d.bandwidth()/2:2,o="category"===k&&d.bandwidth?d.bandwidth()/n:0;o="angleAxis"===i&&null!=f&&f.length>=2?2*eE(f[0]-f[1])*o:o;var p=l||e;return p?p.map((a,b)=>({index:b,coordinate:d(g?g.indexOf(a):a)+o,value:a,offset:o})).filter(a=>!eF(a.coordinate)):j&&h?h.map((a,b)=>({coordinate:d(a)+o,value:a,index:b,offset:o})):d.ticks?d.ticks(m).map(a=>({coordinate:d(a)+o,value:a,offset:o})):d.domain().map((a,b)=>({coordinate:d(a)+o,value:g?g[a]:a,index:b,offset:o}))}}),o2=dJ([gw,nH,oL,oJ,o$,o0,nk],(a,b,c,d,e,f,g)=>{if(null!=b&&null!=c&&null!=d&&d[0]!==d[1]){var h=fP(a,g),{tickCount:i}=b,j=0;return(j="angleAxis"===g&&(null==d?void 0:d.length)>=2?2*eE(d[0]-d[1])*j:j,h&&f)?f.map((a,b)=>({coordinate:c(a)+j,value:a,index:b,offset:j})):c.ticks?c.ticks(i).map(a=>({coordinate:c(a)+j,value:a,offset:j})):c.domain().map((a,b)=>({coordinate:c(a)+j,value:e?e[a]:a,index:b,offset:j}))}}),o3=dJ(nG,oL,(a,b)=>{if(null!=a&&null!=b)return nw(nw({},a),{},{scale:b})}),o4=dJ([nG,ox,ov,oK],oy);dJ((a,b,c)=>nF(a,c),o4,(a,b)=>{if(null!=a&&null!=b)return nw(nw({},a),{},{scale:b})});var o5=dJ([gw,f_,f0],(a,b,c)=>{switch(a){case"horizontal":return b.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return c.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),o6=a=>a.options.defaultTooltipEventType,o7=a=>a.options.validateTooltipEventTypes;function o8(a,b,c){if(null==a)return b;var d=a?"axis":"item";return null==c?b:c.includes(d)?d:b}function o9(a,b){return o8(b,o6(a),o7(a))}var pa=(a,b)=>{var c,d=Number(b);if(!eF(d)&&null!=b)return d>=0?null==a||null==(c=a[d])?void 0:c.value:void 0};function pb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function pc(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?pb(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):pb(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var pd=(a,b,c,d)=>{if(null==b)return e0;var e,f,g,h=(e=a,f=b,g=c,"axis"===f?"click"===g?e.axisInteraction.click:e.axisInteraction.hover:"click"===g?e.itemInteraction.click:e.itemInteraction.hover);if(null==h)return e0;if(h.active)return h;if(a.keyboardInteraction.active)return a.keyboardInteraction;if(a.syncInteraction.active&&null!=a.syncInteraction.index)return a.syncInteraction;var i=!0===a.settings.active;if(null!=h.index){if(i)return pc(pc({},h),{},{active:!0})}else if(null!=d)return{active:!0,coordinate:void 0,dataKey:void 0,index:d};return pc(pc({},e0),{},{coordinate:h.coordinate})},pe=(a,b)=>{var c=null==a?void 0:a.index;if(null==c)return null;var d=Number(c);if(!gk(d))return c;var e=Infinity;return b.length>0&&(e=b.length-1),String(Math.max(0,Math.min(d,e)))},pf=(a,b,c,d,e,f,g,h)=>{if(null!=f&&null!=h){var i=g[0],j=null==i?void 0:h(i.positions,f);if(null!=j)return j;var k=null==e?void 0:e[Number(f)];if(k)if("horizontal"===c)return{x:k.coordinate,y:(d.top+b)/2};else return{x:(d.left+a)/2,y:k.coordinate}}},pg=(a,b,c,d)=>{var e;return"axis"===b?a.tooltipItemPayloads:0===a.tooltipItemPayloads.length?[]:null==(e="hover"===c?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey)&&null!=d?[a.tooltipItemPayloads[0]]:a.tooltipItemPayloads.filter(a=>{var b;return(null==(b=a.settings)?void 0:b.dataKey)===e})},ph=a=>a.options.tooltipPayloadSearcher,pi=a=>a.tooltip;function pj(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function pk(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?pj(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):pj(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var pl=(a,b,c,d,e,f,g)=>{if(null!=b&&null!=f){var{chartData:h,computedData:i,dataStartIndex:j,dataEndIndex:k}=c;return a.reduce((a,c)=>{var l,m,n,{dataDefinedOnItem:o,settings:p}=c,q=null!=o?o:h,r=Array.isArray(q)?fL(q,j,k):q,s=null!=(l=null==p?void 0:p.dataKey)?l:d,t=null==p?void 0:p.nameKey;return Array.isArray(m=d&&Array.isArray(r)&&!Array.isArray(r[0])&&"axis"===g?function(a,b,c){if(a&&a.length)return a.find(a=>a&&("function"==typeof b?b(a):(0,eD.default)(a,b))===c)}(r,d,e):f(r,b,i,t))?m.forEach(b=>{var c=pk(pk({},p),{},{name:b.name,unit:b.unit,color:void 0,fill:void 0});a.push(fV({tooltipEntrySettings:c,dataKey:b.dataKey,payload:b.payload,value:fO(b.payload,b.dataKey),name:b.name}))}):a.push(fV({tooltipEntrySettings:p,dataKey:s,payload:m,value:fO(m,s),name:null!=(n=fO(m,t))?n:null==p?void 0:p.name})),a},[])}},pm=dJ([np,gw,nI,m0,nn],ow),pn=dJ([a=>a.graphicalItems.cartesianItems,a=>a.graphicalItems.polarItems],(a,b)=>[...a,...b]),po=dJ([nn,no],nJ),pp=dJ([pn,np,po],nM,{memoizeOptions:{resultEqualityCheck:nu}}),pq=dJ([pp],a=>a.filter(ns)),pr=dJ([pp],nR,{memoizeOptions:{resultEqualityCheck:nu}}),ps=dJ([pr,kt],nT),pt=dJ([pq,kt,np],nr),pu=dJ([ps,np,pp],nV),pv=dJ([np],n4),pw=dJ([np],a=>a.allowDataOverflow),px=dJ([pv,pw],ky),py=dJ([pp],a=>a.filter(ns)),pz=dJ([pt,py,m_],n0),pA=dJ([pz,kt,nn,px],n2),pB=dJ([pp],nP),pC=dJ([ps,np,pB,n8,nn],oa,{memoizeOptions:{resultEqualityCheck:nt}}),pD=dJ([od,nn,no],oe),pE=dJ([pD,nn],ok),pF=dJ([og,nn,no],oe),pG=dJ([pF,nn],om),pH=dJ([oi,nn,no],oe),pI=dJ([pH,nn],oo),pJ=dJ([pE,pI,pG],n9),pK=dJ([np,pv,px,pA,pC,pJ,gw,nn],or),pL=dJ([np,gw,ps,pu,m_,nn,pK],ou),pM=dJ([pL,np,pm],oz),pN=dJ([np,pL,pM,nn],oB),pO=a=>{var b=nn(a),c=no(a);return oJ(a,b,c,!1)},pP=dJ([np,pO],m6),pQ=dJ([np,pm,pN,pP],oy),pR=dJ([gw,pu,np,nn],oZ),pS=dJ([gw,pu,np,nn],o_),pT=dJ([gw,np,pm,pQ,pO,pR,pS,nn],(a,b,c,d,e,f,g,h)=>{if(b){var{type:i}=b,j=fP(a,h);if(d){var k="scaleBand"===c&&d.bandwidth?d.bandwidth()/2:2,l="category"===i&&d.bandwidth?d.bandwidth()/k:0;return(l="angleAxis"===h&&null!=e&&(null==e?void 0:e.length)>=2?2*eE(e[0]-e[1])*l:l,j&&g)?g.map((a,b)=>({coordinate:d(a)+l,value:a,index:b,offset:l})):d.domain().map((a,b)=>({coordinate:d(a)+l,value:f?f[a]:a,index:b,offset:l}))}}}),pU=dJ([o6,o7,a=>a.tooltip.settings],(a,b,c)=>o8(c.shared,a,b)),pV=a=>a.tooltip.settings.trigger,pW=a=>a.tooltip.settings.defaultIndex,pX=dJ([pi,pU,pV,pW],pd),pY=dJ([pX,ps],pe),pZ=dJ([pT,pY],pa),p$=dJ([pX],a=>{if(a)return a.dataKey}),p_=dJ([pi,pU,pV,pW],pg),p0=dJ([fX,fY,gw,f5,pT,pW,p_,ph],pf),p1=dJ([pX,p0],(a,b)=>null!=a&&a.coordinate?a.coordinate:b),p2=dJ([pX],a=>a.active),p3=dJ([p_,pY,kt,nq,pZ,ph,pU],pl);dJ([p3],a=>{if(null!=a)return Array.from(new Set(a.map(a=>a.payload).filter(a=>null!=a)))});var p4=(a,b)=>b,p5=(a,b,c)=>c,p6=(a,b,c,d)=>d,p7=dJ(pT,a=>(0,fx.default)(a,a=>a.coordinate)),p8=dJ([pi,p4,p5,p6],pd),p9=dJ([p8,ps],pe),qa=dJ([pi,p4,p5,p6],pg),qb=dJ([fX,fY,gw,f5,pT,p6,qa,ph],pf),qc=dJ([p8,qb],(a,b)=>{var c;return null!=(c=a.coordinate)?c:b}),qd=dJ(pT,p9,pa),qe=dJ([qa,p9,kt,nq,qd,ph,p4],pl),qf=dJ([p8],a=>({isActive:a.active,activeIndex:a.index})),qg=dJ([(a,b)=>b,gw,nj,nn,pP,pT,p7,f5],(a,b,c,d,e,f,g,h)=>{if(a&&b&&d&&e&&f){var i=(j=a.chartX,k=a.chartY,"horizontal"===b||"vertical"===b?j>=h.left&&j<=h.left+h.width&&k>=h.top&&k<=h.top+h.height?{x:j,y:k}:null:c?((a,b)=>{var c,{x:d,y:e}=a,{radius:f,angle:g}=((a,b)=>{var{x:c,y:d}=a,{cx:e,cy:f}=b,g=((a,b)=>{var{x:c,y:d}=a,{x:e,y:f}=b;return Math.sqrt((c-e)**2+(d-f)**2)})({x:c,y:d},{x:e,y:f});if(g<=0)return{radius:g,angle:0};var h=Math.acos((c-e)/g);return d>f&&(h=2*Math.PI-h),{radius:g,angle:180*h/Math.PI,angleInRadian:h}})({x:d,y:e},b),{innerRadius:h,outerRadius:i}=b;if(f<h||f>i||0===f)return null;var{startAngle:j,endAngle:k}=(a=>{var{startAngle:b,endAngle:c}=a,d=Math.min(Math.floor(b/360),Math.floor(c/360));return{startAngle:b-360*d,endAngle:c-360*d}})(b),l=g;if(j<=k){for(;l>k;)l-=360;for(;l<j;)l+=360;c=l>=j&&l<=k}else{for(;l>j;)l-=360;for(;l<k;)l+=360;c=l>=k&&l<=j}return c?fH(fH({},b),{},{radius:f,angle:((a,b)=>{var{startAngle:c,endAngle:d}=b;return a+360*Math.min(Math.floor(c/360),Math.floor(d/360))})(l,b)}):null})({x:j,y:k},c):null);if(i){var j,k,l=((a,b,c,d,e)=>{var f,g=-1,h=null!=(f=null==b?void 0:b.length)?f:0;if(h<=1||null==a)return 0;if("angleAxis"===d&&null!=e&&1e-6>=Math.abs(Math.abs(e[1]-e[0])-360))for(var i=0;i<h;i++){var j=i>0?c[i-1].coordinate:c[h-1].coordinate,k=c[i].coordinate,l=i>=h-1?c[0].coordinate:c[i+1].coordinate,m=void 0;if(eE(k-j)!==eE(l-k)){var n=[];if(eE(l-k)===eE(e[1]-e[0])){m=l;var o=k+e[1]-e[0];n[0]=Math.min(o,(o+j)/2),n[1]=Math.max(o,(o+j)/2)}else{m=j;var p=l+e[1]-e[0];n[0]=Math.min(k,(p+k)/2),n[1]=Math.max(k,(p+k)/2)}var q=[Math.min(k,(m+k)/2),Math.max(k,(m+k)/2)];if(a>q[0]&&a<=q[1]||a>=n[0]&&a<=n[1]){({index:g}=c[i]);break}}else{var r=Math.min(j,l),s=Math.max(j,l);if(a>(r+k)/2&&a<=(s+k)/2){({index:g}=c[i]);break}}}else if(b){for(var t=0;t<h;t++)if(0===t&&a<=(b[t].coordinate+b[t+1].coordinate)/2||t>0&&t<h-1&&a>(b[t].coordinate+b[t-1].coordinate)/2&&a<=(b[t].coordinate+b[t+1].coordinate)/2||t===h-1&&a>(b[t].coordinate+b[t-1].coordinate)/2){({index:g}=b[t]);break}}return g})("horizontal"===b?i.x:"vertical"===b?i.y:"centric"===b?i.angle:i.radius,g,f,d,e),m=((a,b,c,d)=>{var e=b.find(a=>a&&a.index===c);if(e){if("horizontal"===a)return{x:e.coordinate,y:d.y};if("vertical"===a)return{x:d.x,y:e.coordinate};if("centric"===a){var f=e.coordinate,{radius:g}=d;return fN(fN(fN({},d),fJ(d.cx,d.cy,g,f)),{},{angle:f,radius:g})}var h=e.coordinate,{angle:i}=d;return fN(fN(fN({},d),fJ(d.cx,d.cy,h,i)),{},{angle:i,radius:h})}return{x:0,y:0}})(b,f,l,i);return{activeIndex:String(l),activeCoordinate:m}}}}),qh=a=>{var b=a.currentTarget.getBoundingClientRect(),c=b.width/a.currentTarget.offsetWidth,d=b.height/a.currentTarget.offsetHeight;return{chartX:Math.round((a.clientX-b.left)/c),chartY:Math.round((a.clientY-b.top)/d)}},qi=dW("mouseClick"),qj=eB();qj.startListening({actionCreator:qi,effect:(a,b)=>{var c=a.payload,d=qg(b.getState(),qh(c));(null==d?void 0:d.activeIndex)!=null&&b.dispatch(fa({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate}))}});var qk=dW("mouseMove"),ql=eB();function qm(a,b){return b instanceof HTMLElement?"HTMLElement <".concat(b.tagName,' class="').concat(b.className,'">'):b===window?"global.window":b}function qn(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function qo(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?qn(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):qn(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}ql.startListening({actionCreator:qk,effect:(a,b)=>{var c=a.payload,d=b.getState(),e=o9(d,d.tooltip.settings.shared),f=qg(d,qh(c));"axis"===e&&((null==f?void 0:f.activeIndex)!=null?b.dispatch(e9({activeIndex:f.activeIndex,activeDataKey:void 0,activeCoordinate:f.activeCoordinate})):b.dispatch(e7()))}});var qp=d5({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(a,b){a.xAxis[b.payload.id]=b.payload},prepare:d_()},removeXAxis:{reducer(a,b){delete a.xAxis[b.payload.id]},prepare:d_()},addYAxis:{reducer(a,b){a.yAxis[b.payload.id]=b.payload},prepare:d_()},removeYAxis:{reducer(a,b){delete a.yAxis[b.payload.id]},prepare:d_()},addZAxis:{reducer(a,b){a.zAxis[b.payload.id]=b.payload},prepare:d_()},removeZAxis:{reducer(a,b){delete a.zAxis[b.payload.id]},prepare:d_()},updateYAxisWidth(a,b){var{id:c,width:d}=b.payload,e=a.yAxis[c];if(e){var f=e.widthHistory||[];if(3===f.length&&f[0]===f[2]&&d===f[1]&&d!==e.width&&1>=Math.abs(d-f[0]))return;var g=[...f,d].slice(-3);a.yAxis[c]=qo(qo({},a.yAxis[c]),{},{width:d,widthHistory:g})}}}}),{addXAxis:qq,removeXAxis:qr,addYAxis:qs,removeYAxis:qt,addZAxis:qu,removeZAxis:qv,updateYAxisWidth:qw}=qp.actions,qx=qp.reducer,qy=d5({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(a,b){a.cartesianItems.push(b.payload)},prepare:d_()},replaceCartesianGraphicalItem:{reducer(a,b){var{prev:c,next:d}=b.payload,e=dq(a).cartesianItems.indexOf(c);e>-1&&(a.cartesianItems[e]=d)},prepare:d_()},removeCartesianGraphicalItem:{reducer(a,b){var c=dq(a).cartesianItems.indexOf(b.payload);c>-1&&a.cartesianItems.splice(c,1)},prepare:d_()},addPolarGraphicalItem:{reducer(a,b){a.polarItems.push(b.payload)},prepare:d_()},removePolarGraphicalItem:{reducer(a,b){var c=dq(a).polarItems.indexOf(b.payload);c>-1&&a.polarItems.splice(c,1)},prepare:d_()}}}),{addCartesianGraphicalItem:qz,replaceCartesianGraphicalItem:qA,removeCartesianGraphicalItem:qB,addPolarGraphicalItem:qC,removePolarGraphicalItem:qD}=qy.actions,qE=qy.reducer,qF=d5({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(a,b)=>{a.dots.push(b.payload)},removeDot:(a,b)=>{var c=dq(a).dots.findIndex(a=>a===b.payload);-1!==c&&a.dots.splice(c,1)},addArea:(a,b)=>{a.areas.push(b.payload)},removeArea:(a,b)=>{var c=dq(a).areas.findIndex(a=>a===b.payload);-1!==c&&a.areas.splice(c,1)},addLine:(a,b)=>{a.lines.push(b.payload)},removeLine:(a,b)=>{var c=dq(a).lines.findIndex(a=>a===b.payload);-1!==c&&a.lines.splice(c,1)}}}),{addDot:qG,removeDot:qH,addArea:qI,removeArea:qJ,addLine:qK,removeLine:qL}=qF.actions,qM=qF.reducer,qN={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},qO=d5({name:"brush",initialState:qN,reducers:{setBrushSettings:(a,b)=>null==b.payload?qN:b.payload}}),{setBrushSettings:qP}=qO.actions,qQ=qO.reducer,qR=d5({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(a,b){a.size.width=b.payload.width,a.size.height=b.payload.height},setLegendSettings(a,b){a.settings.align=b.payload.align,a.settings.layout=b.payload.layout,a.settings.verticalAlign=b.payload.verticalAlign,a.settings.itemSorter=b.payload.itemSorter},addLegendPayload:{reducer(a,b){a.payload.push(b.payload)},prepare:d_()},removeLegendPayload:{reducer(a,b){var c=dq(a).payload.indexOf(b.payload);c>-1&&a.payload.splice(c,1)},prepare:d_()}}}),{setLegendSize:qS,setLegendSettings:qT,addLegendPayload:qU,removeLegendPayload:qV}=qR.actions,qW=qR.reducer,qX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},qY=d5({name:"rootProps",initialState:qX,reducers:{updateOptions:(a,b)=>{var c;a.accessibilityLayer=b.payload.accessibilityLayer,a.barCategoryGap=b.payload.barCategoryGap,a.barGap=null!=(c=b.payload.barGap)?c:qX.barGap,a.barSize=b.payload.barSize,a.maxBarSize=b.payload.maxBarSize,a.stackOffset=b.payload.stackOffset,a.syncId=b.payload.syncId,a.syncMethod=b.payload.syncMethod,a.className=b.payload.className}}}),qZ=qY.reducer,{updateOptions:q$}=qY.actions,q_=d5({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(a,b){a.radiusAxis[b.payload.id]=b.payload},removeRadiusAxis(a,b){delete a.radiusAxis[b.payload.id]},addAngleAxis(a,b){a.angleAxis[b.payload.id]=b.payload},removeAngleAxis(a,b){delete a.angleAxis[b.payload.id]}}}),{addRadiusAxis:q0,removeRadiusAxis:q1,addAngleAxis:q2,removeAngleAxis:q3}=q_.actions,q4=q_.reducer,q5=d5({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(a,b)=>b.payload}}),{updatePolarOptions:q6}=q5.actions,q7=q5.reducer,q8=dW("keyDown"),q9=dW("focus"),ra=eB();ra.startListening({actionCreator:q8,effect:(a,b)=>{var c=b.getState();if(!1!==c.rootProps.accessibilityLayer){var{keyboardInteraction:d}=c.tooltip,e=a.payload;if("ArrowRight"===e||"ArrowLeft"===e||"Enter"===e){var f=Number(pe(d,ps(c))),g=pT(c);if("Enter"===e){var h=qb(c,"axis","hover",String(d.index));b.dispatch(fc({active:!d.active,activeIndex:d.index,activeDataKey:d.dataKey,activeCoordinate:h}));return}var i=f+("ArrowRight"===e?1:-1)*("left-to-right"===o5(c)?1:-1);if(null!=g&&!(i>=g.length)&&!(i<0)){var j=qb(c,"axis","hover",String(i));b.dispatch(fc({active:!0,activeIndex:i.toString(),activeDataKey:void 0,activeCoordinate:j}))}}}}}),ra.startListening({actionCreator:q9,effect:(a,b)=>{var c=b.getState();if(!1!==c.rootProps.accessibilityLayer){var{keyboardInteraction:d}=c.tooltip;if(!d.active&&null==d.index){var e=qb(c,"axis","hover",String("0"));b.dispatch(fc({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:e}))}}}});var rb=dW("externalEvent"),rc=eB();rc.startListening({actionCreator:rb,effect:(a,b)=>{if(null!=a.payload.handler){var c=b.getState(),d={activeCoordinate:p1(c),activeDataKey:p$(c),activeIndex:pY(c),activeLabel:pZ(c),activeTooltipIndex:pY(c),isTooltipActive:p2(c)};a.payload.handler(d,a.payload.reactEvent)}}});var rd=dJ([pi],a=>a.tooltipItemPayloads),re=dJ([rd,ph,(a,b,c)=>b,(a,b,c)=>c],(a,b,c,d)=>{var e=a.find(a=>a.settings.dataKey===d);if(null!=e){var{positions:f}=e;if(null!=f)return b(f,c)}}),rf=dW("touchMove"),rg=eB();rg.startListening({actionCreator:rf,effect:(a,b)=>{var c=a.payload,d=b.getState(),e=o9(d,d.tooltip.settings.shared);if("axis"===e){var f=qg(d,qh({clientX:c.touches[0].clientX,clientY:c.touches[0].clientY,currentTarget:c.currentTarget}));(null==f?void 0:f.activeIndex)!=null&&b.dispatch(e9({activeIndex:f.activeIndex,activeDataKey:void 0,activeCoordinate:f.activeCoordinate}))}else if("item"===e){var g,h=c.touches[0],i=document.elementFromPoint(h.clientX,h.clientY);if(!i||!i.getAttribute)return;var j=i.getAttribute(f1),k=null!=(g=i.getAttribute(f2))?g:void 0,l=re(b.getState(),j,k);b.dispatch(e5({activeDataKey:k,activeIndex:j,activeCoordinate:l}))}}});var rh=d5({name:"errorBars",initialState:{},reducers:{addErrorBar:(a,b)=>{var{itemId:c,errorBar:d}=b.payload;a[c]||(a[c]=[]),a[c].push(d)},replaceErrorBar:(a,b)=>{var{itemId:c,prev:d,next:e}=b.payload;a[c]&&(a[c]=a[c].map(a=>a.dataKey===d.dataKey&&a.direction===d.direction?e:a))},removeErrorBar:(a,b)=>{var{itemId:c,errorBar:d}=b.payload;a[c]&&(a[c]=a[c].filter(a=>a.dataKey!==d.dataKey||a.direction!==d.direction))}}}),{addErrorBar:ri,replaceErrorBar:rj,removeErrorBar:rk}=rh.actions,rl=rh.reducer,rm=!1,rn=!0,ro=dQ({brush:qQ,cartesianAxis:qx,chartData:fi,errorBars:rl,graphicalItems:qE,layout:fo,legend:qW,options:eR,polarAxis:q4,polarOptions:q7,referenceElements:qM,rootProps:qZ,tooltip:fd}),rp=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart";return function(a){let b,c,d,e=function(a){let{thunk:b=!0,immutableCheck:c=!0,serializableCheck:d=!0,actionCreatorCheck:e=!0}=a??{},f=new dX;return b&&("boolean"==typeof b?f.push(dU):f.push(dT(b.extraArgument))),f},{reducer:f,middleware:g,devTools:h=!0,duplicateMiddlewareCheck:i=!0,preloadedState:j,enhancers:k}=a||{};if("function"==typeof f)b=f;else if(dP(f))b=dQ(f);else throw Error(eC(1));c="function"==typeof g?g(e):e();let l=dR;h&&(l=dV({trace:!1,..."object"==typeof h&&h}));let m=(d=function(...a){return b=>(c,d)=>{let e=b(c,d),f=()=>{throw Error(dL(15))},g={getState:e.getState,dispatch:(a,...b)=>f(a,...b)};return f=dR(...a.map(a=>a(g)))(e.dispatch),{...e,dispatch:f}}}(...c),function(a){let{autoBatch:b=!0}=a??{},c=new dX(d);return b&&c.push(d1("object"==typeof b?b:void 0)),c});return function a(b,c,d){if("function"!=typeof b)throw Error(dL(2));if("function"==typeof c&&"function"==typeof d||"function"==typeof d&&"function"==typeof arguments[3])throw Error(dL(0));if("function"==typeof c&&void 0===d&&(d=c,c=void 0),void 0!==d){if("function"!=typeof d)throw Error(dL(1));return d(a)(b,c)}let e=b,f=c,g=new Map,h=g,i=0,j=!1;function k(){h===g&&(h=new Map,g.forEach((a,b)=>{h.set(b,a)}))}function l(){if(j)throw Error(dL(3));return f}function m(a){if("function"!=typeof a)throw Error(dL(4));if(j)throw Error(dL(5));let b=!0;k();let c=i++;return h.set(c,a),function(){if(b){if(j)throw Error(dL(6));b=!1,k(),h.delete(c),g=null}}}function n(a){if(!dP(a))throw Error(dL(7));if(void 0===a.type)throw Error(dL(8));if("string"!=typeof a.type)throw Error(dL(17));if(j)throw Error(dL(9));try{j=!0,f=e(f,a)}finally{j=!1}return(g=h).forEach(a=>{a()}),a}return n({type:dO.INIT}),{dispatch:n,subscribe:m,getState:l,replaceReducer:function(a){if("function"!=typeof a)throw Error(dL(10));e=a,n({type:dO.REPLACE})},[dM]:function(){return{subscribe(a){if("object"!=typeof a||null===a)throw Error(dL(11));function b(){a.next&&a.next(l())}return b(),{unsubscribe:m(b)}},[dM](){return this}}}}}(b,j,l(..."function"==typeof k?k(m):m()))}({reducer:ro,preloadedState:a,middleware:a=>a({serializableCheck:!1}).concat([qj.middleware,ql.middleware,ra.middleware,rc.middleware,rg.middleware]),enhancers:a=>{var b=a;return"function"==typeof a&&(b=a()),b.concat(d1({type:"raf"}))},devTools:rm&&{serialize:{replacer:qm},name:"recharts-".concat(b)}})};function rq(a){var{preloadedState:b,children:c,reduxStoreName:d}=a,e=f9(),f=(0,p.useRef)(null);return e?c:(null==f.current&&(f.current=rp(b,d)),p.createElement(eZ,{context:fq,store:f.current},c))}var rr=a=>{var{chartData:b}=a,c=fs(),d=f9();return(0,p.useEffect)(()=>d?()=>{}:(c(ff(b)),()=>{c(ff(void 0))}),[b,c,d]),null};function rs(a){var{layout:b,margin:c}=a,d=fs(),e=f9();return(0,p.useEffect)(()=>{e||(d(fl(b)),d(fk(c)))},[d,e,b,c]),null}function rt(a){var b=fs();return(0,p.useEffect)(()=>{b(q$(a))},[b,a]),null}function ru(a){var b=fs();return(0,p.useEffect)(()=>{b(q6(a))},[b,a]),null}var rv=()=>fw(a=>a.rootProps.accessibilityLayer),rw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function rx(a){return"string"==typeof a&&rw.includes(a)}var ry=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function rz(a){return"string"==typeof a&&ry.includes(a)}function rA(a){return"string"==typeof a&&a.startsWith("data-")}function rB(a){return Object.fromEntries(Object.entries(a).filter(a=>{var[b]=a;return rz(b)||rA(b)}))}function rC(a){return null==a?null:(0,p.isValidElement)(a)&&"object"==typeof a.props&&null!==a.props?rB(a.props):"object"!=typeof a||Array.isArray(a)?null:rB(a)}function rD(a){return Object.fromEntries(Object.entries(a).filter(a=>{var[b]=a;return rz(b)||rA(b)||rx(b)}))}var rE=["children","width","height","viewBox","className","style","title","desc"];function rF(){return(rF=Object.assign.bind()).apply(null,arguments)}var rG=(0,p.forwardRef)((a,b)=>{var{children:c,width:d,height:e,viewBox:f,className:g,style:h,title:i,desc:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,rE),l=f||{width:d,height:e,x:0,y:0},m=gc("recharts-surface",g);return p.createElement("svg",rF({},rD(k),{className:m,width:d,height:e,style:h,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height),ref:b}),p.createElement("title",null,i),p.createElement("desc",null,j),c)}),rH=["children"];function rI(){return(rI=Object.assign.bind()).apply(null,arguments)}var rJ={width:"100%",height:"100%",display:"block"},rK=(0,p.forwardRef)((a,b)=>{var c,d,e=fw(fX),f=fw(fY),g=rv();if(!gl(e)||!gl(f))return null;var{children:h,otherAttributes:i,title:j,desc:k}=a;return c="number"==typeof i.tabIndex?i.tabIndex:g?0:void 0,d="string"==typeof i.role?i.role:g?"application":void 0,p.createElement(rG,rI({},i,{title:j,desc:k,role:d,tabIndex:c,width:e,height:f,style:rJ,ref:b}),h)}),rL=a=>{var{children:b}=a,c=fw(gb);if(!c)return null;var{width:d,height:e,y:f,x:g}=c;return p.createElement(rG,{width:d,height:e,x:g,y:f},b)},rM=(0,p.forwardRef)((a,b)=>{var{children:c}=a,d=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,rH);return f9()?p.createElement(rL,null,c):p.createElement(rK,rI({ref:b},d),c)}),rN=new(a.i(53686)).default,rO="recharts.syncEvent.tooltip",rP="recharts.syncEvent.brush";function rQ(a){return a.tooltip.syncInteraction}var rR=["x","y"];function rS(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function rT(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?rS(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):rS(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var rU=()=>{},rV=(0,p.createContext)(null),rW=(0,p.createContext)(null);function rX(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function rY(){return(rY=Object.assign.bind()).apply(null,arguments)}var rZ=()=>{var a,b,c,d,e,f,g,h,i,j,k,l;return a=fs(),(0,p.useEffect)(()=>{a(eS())},[a]),b=fw(m1),c=fw(m3),d=fs(),e=fw(m2),f=fw(pT),g=fw(gw),h=gu(),i=fw(a=>a.rootProps.className),(0,p.useEffect)(()=>{if(null==b)return rU;var a=(a,i,j)=>{if(c!==j&&b===a){if("index"===e){if(h&&null!=i&&null!=(k=i.payload)&&k.coordinate&&i.payload.sourceViewBox){var k,l,m=i.payload.coordinate,{x:n,y:o}=m,p=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(m,rR),{x:q,y:r,width:s,height:t}=i.payload.sourceViewBox,u=rT(rT({},p),{},{x:h.x+(s?(n-q)/s:0)*h.width,y:h.y+(t?(o-r)/t:0)*h.height});d(rT(rT({},i),{},{payload:rT(rT({},i.payload),{},{coordinate:u})}))}else d(i);return}if(null!=f){if("function"==typeof e){var v=e(f,{activeTooltipIndex:null==i.payload.index?void 0:Number(i.payload.index),isTooltipActive:i.payload.active,activeIndex:null==i.payload.index?void 0:Number(i.payload.index),activeLabel:i.payload.label,activeDataKey:i.payload.dataKey,activeCoordinate:i.payload.coordinate});l=f[v]}else"value"===e&&(l=f.find(a=>String(a.value)===i.payload.label));var{coordinate:w}=i.payload;if(null==l||!1===i.payload.active||null==w||null==h)return void d(fb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));var{x,y}=w,z=Math.min(x,h.x+h.width),A=Math.min(y,h.y+h.height),B={x:"horizontal"===g?l.coordinate:z,y:"horizontal"===g?A:l.coordinate};d(fb({active:i.payload.active,coordinate:B,dataKey:i.payload.dataKey,index:String(l.index),label:i.payload.label,sourceViewBox:i.payload.sourceViewBox}))}}};return rN.on(rO,a),()=>{rN.off(rO,a)}},[i,d,c,b,e,f,g,h]),j=fw(m1),k=fw(m3),l=fs(),(0,p.useEffect)(()=>{if(null==j)return rU;var a=(a,b,c)=>{k!==c&&j===a&&l(fg(b))};return rN.on(rP,a),()=>{rN.off(rP,a)}},[l,k,j]),null};function r$(a){if("number"==typeof a)return a;if("string"==typeof a){var b=parseFloat(a);if(!Number.isNaN(b))return b}return 0}var r_=(0,p.forwardRef)((a,b)=>{var c,d,e=(0,p.useRef)(null),[f,g]=(0,p.useState)({containerWidth:r$(null==(c=a.style)?void 0:c.width),containerHeight:r$(null==(d=a.style)?void 0:d.height)}),h=(0,p.useCallback)((a,b)=>{g(c=>{var d=Math.round(a),e=Math.round(b);return c.containerWidth===d&&c.containerHeight===e?c:{containerWidth:d,containerHeight:e}})},[]),i=(0,p.useCallback)(a=>{if("function"==typeof b&&b(a),null!=a){var{width:c,height:d}=a.getBoundingClientRect();h(c,d);var f=new ResizeObserver(a=>{var{width:b,height:c}=a[0].contentRect;h(b,c)});f.observe(a),e.current=f}},[b,h]);return(0,p.useEffect)(()=>()=>{var a=e.current;null!=a&&a.disconnect()},[h]),p.createElement(p.Fragment,null,p.createElement(gx,{width:f.containerWidth,height:f.containerHeight}),p.createElement("div",rY({ref:i},a)))}),r0=(0,p.forwardRef)((a,b)=>{var{width:c,height:d}=a,[e,f]=(0,p.useState)({containerWidth:r$(c),containerHeight:r$(d)}),g=(0,p.useCallback)((a,b)=>{f(c=>{var d=Math.round(a),e=Math.round(b);return c.containerWidth===d&&c.containerHeight===e?c:{containerWidth:d,containerHeight:e}})},[]),h=(0,p.useCallback)(a=>{if("function"==typeof b&&b(a),null!=a){var{width:c,height:d}=a.getBoundingClientRect();g(c,d)}},[b,g]);return p.createElement(p.Fragment,null,p.createElement(gx,{width:e.containerWidth,height:e.containerHeight}),p.createElement("div",rY({ref:h},a)))}),r1=(0,p.forwardRef)((a,b)=>{var{width:c,height:d}=a;return p.createElement(p.Fragment,null,p.createElement(gx,{width:c,height:d}),p.createElement("div",rY({ref:b},a)))}),r2=(0,p.forwardRef)((a,b)=>{var{width:c,height:d}=a;return eG(c)||eG(d)?p.createElement(r0,rY({},a,{ref:b})):p.createElement(r1,rY({},a,{ref:b}))}),r3=(0,p.forwardRef)((a,b)=>{var{children:c,className:d,height:e,onClick:f,onContextMenu:g,onDoubleClick:h,onMouseDown:i,onMouseEnter:j,onMouseLeave:k,onMouseMove:l,onMouseUp:m,onTouchEnd:n,onTouchMove:o,onTouchStart:q,style:r,width:s,responsive:t,dispatchTouchEvents:u=!0}=a,v=(0,p.useRef)(null),w=fs(),[x,y]=(0,p.useState)(null),[z,A]=(0,p.useState)(null),B=function(){var a=fs(),[b,c]=(0,p.useState)(null),d=fw(fZ);return(0,p.useEffect)(()=>{if(null!=b){var c=b.getBoundingClientRect().width/b.offsetWidth;gk(c)&&c!==d&&a(fn(c))}},[b,a,d]),c}(),C=gr(),D=(null==C?void 0:C.width)>0?C.width:s,E=(null==C?void 0:C.height)>0?C.height:e,F=(0,p.useCallback)(a=>{B(a),"function"==typeof b&&b(a),y(a),A(a),null!=a&&(v.current=a)},[B,b,y,A]),G=(0,p.useCallback)(a=>{w(qi(a)),w(rb({handler:f,reactEvent:a}))},[w,f]),H=(0,p.useCallback)(a=>{w(qk(a)),w(rb({handler:j,reactEvent:a}))},[w,j]),I=(0,p.useCallback)(a=>{w(e7()),w(rb({handler:k,reactEvent:a}))},[w,k]),J=(0,p.useCallback)(a=>{w(qk(a)),w(rb({handler:l,reactEvent:a}))},[w,l]),K=(0,p.useCallback)(()=>{w(q9())},[w]),L=(0,p.useCallback)(a=>{w(q8(a.key))},[w]),M=(0,p.useCallback)(a=>{w(rb({handler:g,reactEvent:a}))},[w,g]),N=(0,p.useCallback)(a=>{w(rb({handler:h,reactEvent:a}))},[w,h]),O=(0,p.useCallback)(a=>{w(rb({handler:i,reactEvent:a}))},[w,i]),P=(0,p.useCallback)(a=>{w(rb({handler:m,reactEvent:a}))},[w,m]),Q=(0,p.useCallback)(a=>{w(rb({handler:q,reactEvent:a}))},[w,q]),R=(0,p.useCallback)(a=>{u&&w(rf(a)),w(rb({handler:o,reactEvent:a}))},[w,u,o]),S=(0,p.useCallback)(a=>{w(rb({handler:n,reactEvent:a}))},[w,n]);return p.createElement(rV.Provider,{value:x},p.createElement(rW.Provider,{value:z},p.createElement(!0===t?r_:r2,{width:null!=D?D:null==r?void 0:r.width,height:null!=E?E:null==r?void 0:r.height,className:gc("recharts-wrapper",d),style:function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?rX(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):rX(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({position:"relative",cursor:"default",width:D,height:E},r),onClick:G,onContextMenu:M,onDoubleClick:N,onFocus:K,onKeyDown:L,onMouseDown:O,onMouseEnter:H,onMouseLeave:I,onMouseMove:J,onMouseUp:P,onTouchEnd:S,onTouchMove:R,onTouchStart:Q,ref:F},p.createElement(rZ,null),c)))}),r4=dJ([f5],a=>{if(a)return{top:a.top,bottom:a.bottom,left:a.left,right:a.right}}),r5=dJ([r4,fX,fY],(a,b,c)=>{if(a&&null!=b&&null!=c)return{x:a.left,y:a.top,width:Math.max(0,b-a.left-a.right),height:Math.max(0,c-a.top-a.bottom)}}),r6=(0,p.createContext)(void 0),r7=a=>{var{children:b}=a,[c]=(0,p.useState)("".concat(eK("recharts"),"-clip")),d=fw(r5);if(null==d)return null;var{x:e,y:f,width:g,height:h}=d;return p.createElement(r6.Provider,{value:c},p.createElement("defs",null,p.createElement("clipPath",{id:c},p.createElement("rect",{x:e,y:f,height:h,width:g}))),b)},r8=["width","height","responsive","children","className","style","compact","title","desc"],r9=(0,p.forwardRef)((a,b)=>{var{width:c,height:d,responsive:e,children:f,className:g,style:h,compact:i,title:j,desc:k}=a,l=rB(function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,r8));return i?p.createElement(p.Fragment,null,p.createElement(gx,{width:c,height:d}),p.createElement(rM,{otherAttributes:l,title:j,desc:k},f)):p.createElement(r3,{className:g,style:h,width:c,height:d,responsive:e,onClick:a.onClick,onMouseLeave:a.onMouseLeave,onMouseEnter:a.onMouseEnter,onMouseMove:a.onMouseMove,onMouseDown:a.onMouseDown,onMouseUp:a.onMouseUp,onContextMenu:a.onContextMenu,onDoubleClick:a.onDoubleClick,onTouchStart:a.onTouchStart,onTouchMove:a.onTouchMove,onTouchEnd:a.onTouchEnd},p.createElement(rM,{otherAttributes:l,title:j,desc:k,ref:b},p.createElement(r7,null,f)))});function sa(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function sb(a,b){var c=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?sa(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):sa(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},a);return Object.keys(b).reduce((a,c)=>(void 0===a[c]&&void 0!==b[c]&&(a[c]=b[c]),a),c)}var sc=["layout"];function sd(){return(sd=Object.assign.bind()).apply(null,arguments)}var se={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},sf=(0,p.forwardRef)(function(a,b){var c,d=sb(a.categoricalChartProps,se),{layout:e}=d,f=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(d,sc),{chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:i,tooltipPayloadSearcher:j}=a;return p.createElement(rq,{preloadedState:{options:{chartName:g,defaultTooltipEventType:h,validateTooltipEventTypes:i,tooltipPayloadSearcher:j,eventEmitter:void 0}},reduxStoreName:null!=(c=d.id)?c:g},p.createElement(rr,{chartData:d.data}),p.createElement(rs,{layout:e,margin:d.margin}),p.createElement(rt,{accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className}),p.createElement(ru,{cx:d.cx,cy:d.cy,startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:d.innerRadius,outerRadius:d.outerRadius}),p.createElement(r9,sd({},f,{ref:b})))}),sg=["item"],sh={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},si=(0,p.forwardRef)((a,b)=>{var c=sb(a,sh);return p.createElement(sf,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:sg,tooltipPayloadSearcher:eP,categoricalChartProps:c,ref:b})}),sj=a=>a.graphicalItems.polarItems,sk=dJ([nk,nl],nJ),sl=dJ([sj,nG,sk],nM),sm=dJ([sl],nR),sn=dJ([sm,ku],nT),so=dJ([sn,nG,sl],nV);dJ([sn,nG,sl],(a,b,c)=>c.length>0?a.flatMap(a=>c.flatMap(c=>{var d;return{value:fO(a,null!=(d=b.dataKey)?d:c.dataKey),errorDomain:[]}})).filter(Boolean):(null==b?void 0:b.dataKey)!=null?a.map(a=>({value:fO(a,b.dataKey),errorDomain:[]})):a.map(a=>({value:a,errorDomain:[]})));var sp=()=>void 0,sq=dJ([sn,nG,sl,n8,nk],oa),sr=dJ([nG,n5,n6,sp,sq,sp,gw,nk],or),ss=dJ([nG,gw,sn,so,m_,nk,sr],ou),st=dJ([ss,nG,ox],oz);function su(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function sv(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?su(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):su(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}dJ([nG,ss,st,nk],oB);var sw=dJ([sj,(a,b)=>b],(a,b)=>a.filter(a=>"pie"===a.type).find(a=>a.id===b)),sx=[],sy=(a,b,c)=>(null==c?void 0:c.length)===0?sx:c,sz=dJ([ku,sw,sy],(a,b,c)=>{var d,{chartData:e}=a;if(null!=b&&((d=(null==b?void 0:b.data)!=null&&b.data.length>0?b.data:e)&&d.length||null==c||(d=c.map(a=>sv(sv({},b.presentationProps),a.props))),null!=d))return d}),sA=dJ([sz,sw,sy],(a,b,c)=>{if(null!=a&&null!=b)return a.map((a,d)=>{var e,f,g=fO(a,b.nameKey,b.name);return f=null!=c&&null!=(e=c[d])&&null!=(e=e.props)&&e.fill?c[d].props.fill:"object"==typeof a&&null!=a&&"fill"in a?a.fill:b.fill,{value:fW(g,b.dataKey),color:f,payload:a,type:b.legendType}})}),sB=dJ([sz,sw,sy,f5],(a,b,c,d)=>{if(null!=b&&null!=a)return function(a){var b,c,d,{pieSettings:e,displayedData:f,cells:g,offset:h}=a,{cornerRadius:i,startAngle:j,endAngle:k,dataKey:l,nameKey:m,tooltipType:n}=e,o=Math.abs(e.minAngle),p=eE(k-j)*Math.min(Math.abs(k-j),360),q=Math.abs(p),r=f.length<=1?0:null!=(b=e.paddingAngle)?b:0,s=f.filter(a=>0!==fO(a,l,0)).length,t=q-s*o-(q>=360?s:s-1)*r,u=f.reduce((a,b)=>{var c=fO(b,l,0);return a+(eH(c)?c:0)},0);return u>0&&(c=f.map((a,b)=>{var c,f=fO(a,l,0),k=fO(a,m,b),q=((a,b,c)=>{var d,{top:e,left:f,width:g,height:h}=b,i=fK(g,h),j=f+eL(a.cx,g,g/2),k=e+eL(a.cy,h,h/2),l=eL(a.innerRadius,i,0);return{cx:j,cy:k,innerRadius:l,outerRadius:(d=a.outerRadius,"function"==typeof d?eL(d(c),i,.8*i):eL(d,i,.8*i)),maxRadius:a.maxRadius||Math.sqrt(g*g+h*h)/2}})(e,h,a),s=(eH(f)?f:0)/u,v=vw(vw({},a),g&&g[b]&&g[b].props),w=(c=b?d.endAngle+eE(p)*r*(0!==f):j)+eE(p)*((0!==f?o:0)+s*t),x=(c+w)/2,y=(q.innerRadius+q.outerRadius)/2,z=[{name:k,value:f,payload:v,dataKey:l,type:n}],A=fJ(q.cx,q.cy,y,x);return d=vw(vw(vw(vw({},e.presentationProps),{},{percent:s,cornerRadius:i,name:k,tooltipPayload:z,midAngle:x,middleRadius:y,tooltipPosition:A},v),q),{},{value:f,startAngle:c,endAngle:w,payload:v,paddingAngle:eE(p)*r})})),c}({offset:d,pieSettings:b,displayedData:a,cells:c})}),sC=["children","className"];function sD(){return(sD=Object.assign.bind()).apply(null,arguments)}var sE=p.forwardRef((a,b)=>{var{children:c,className:d}=a,e=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,sC),f=gc("recharts-layer",d);return p.createElement("g",sD({className:f},rD(e),{ref:b}),c)});function sF(a){this._context=a}function sG(a){return new sF(a)}sF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b)}}};let sH=Math.PI,sI=2*sH,sJ=sI-1e-6;function sK(a){this._+=a[0];for(let b=1,c=a.length;b<c;++b)this._+=arguments[b]+a[b]}class sL{constructor(a){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==a?sK:function(a){let b=Math.floor(a);if(!(b>=0))throw Error(`invalid digits: ${a}`);if(b>15)return sK;let c=10**b;return function(a){this._+=a[0];for(let b=1,d=a.length;b<d;++b)this._+=Math.round(arguments[b]*c)/c+a[b]}}(a)}moveTo(a,b){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+b}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(a,b){this._append`L${this._x1=+a},${this._y1=+b}`}quadraticCurveTo(a,b,c,d){this._append`Q${+a},${+b},${this._x1=+c},${this._y1=+d}`}bezierCurveTo(a,b,c,d,e,f){this._append`C${+a},${+b},${+c},${+d},${this._x1=+e},${this._y1=+f}`}arcTo(a,b,c,d,e){if(a*=1,b*=1,c*=1,d*=1,(e*=1)<0)throw Error(`negative radius: ${e}`);let f=this._x1,g=this._y1,h=c-a,i=d-b,j=f-a,k=g-b,l=j*j+k*k;if(null===this._x1)this._append`M${this._x1=a},${this._y1=b}`;else if(l>1e-6)if(Math.abs(k*h-i*j)>1e-6&&e){let m=c-f,n=d-g,o=h*h+i*i,p=Math.sqrt(o),q=Math.sqrt(l),r=e*Math.tan((sH-Math.acos((o+l-(m*m+n*n))/(2*p*q)))/2),s=r/q,t=r/p;Math.abs(s-1)>1e-6&&this._append`L${a+s*j},${b+s*k}`,this._append`A${e},${e},0,0,${+(k*m>j*n)},${this._x1=a+t*h},${this._y1=b+t*i}`}else this._append`L${this._x1=a},${this._y1=b}`}arc(a,b,c,d,e,f){if(a*=1,b*=1,c*=1,f=!!f,c<0)throw Error(`negative radius: ${c}`);let g=c*Math.cos(d),h=c*Math.sin(d),i=a+g,j=b+h,k=1^f,l=f?d-e:e-d;null===this._x1?this._append`M${i},${j}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-j)>1e-6)&&this._append`L${i},${j}`,c&&(l<0&&(l=l%sI+sI),l>sJ?this._append`A${c},${c},0,1,${k},${a-g},${b-h}A${c},${c},0,1,${k},${this._x1=i},${this._y1=j}`:l>1e-6&&this._append`A${c},${c},0,${+(l>=sH)},${k},${this._x1=a+c*Math.cos(e)},${this._y1=b+c*Math.sin(e)}`)}rect(a,b,c,d){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+b}h${c*=1}v${+d}h${-c}Z`}toString(){return this._}}function sM(a){let b=3;return a.digits=function(c){if(!arguments.length)return b;if(null==c)b=null;else{let a=Math.floor(c);if(!(a>=0))throw RangeError(`invalid digits: ${c}`);b=a}return a},()=>new sL(b)}function sN(a){return a[0]}function sO(a){return a[1]}function sP(a,b){var c=fB(!0),d=null,e=sG,f=null,g=sM(h);function h(h){var i,j,k,l=(h=fA(h)).length,m=!1;for(null==d&&(f=e(k=g())),i=0;i<=l;++i)!(i<l&&c(j=h[i],i,h))===m&&((m=!m)?f.lineStart():f.lineEnd()),m&&f.point(+a(j,i,h),+b(j,i,h));if(k)return f=null,k+""||null}return a="function"==typeof a?a:void 0===a?sN:fB(a),b="function"==typeof b?b:void 0===b?sO:fB(b),h.x=function(b){return arguments.length?(a="function"==typeof b?b:fB(+b),h):a},h.y=function(a){return arguments.length?(b="function"==typeof a?a:fB(+a),h):b},h.defined=function(a){return arguments.length?(c="function"==typeof a?a:fB(!!a),h):c},h.curve=function(a){return arguments.length?(e=a,null!=d&&(f=e(d)),h):e},h.context=function(a){return arguments.length?(null==a?d=f=null:f=e(d=a),h):d},h}function sQ(a,b,c){var d=null,e=fB(!0),f=null,g=sG,h=null,i=sM(j);function j(j){var k,l,m,n,o,p=(j=fA(j)).length,q=!1,r=Array(p),s=Array(p);for(null==f&&(h=g(o=i())),k=0;k<=p;++k){if(!(k<p&&e(n=j[k],k,j))===q)if(q=!q)l=k,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),m=k-1;m>=l;--m)h.point(r[m],s[m]);h.lineEnd(),h.areaEnd()}q&&(r[k]=+a(n,k,j),s[k]=+b(n,k,j),h.point(d?+d(n,k,j):r[k],c?+c(n,k,j):s[k]))}if(o)return h=null,o+""||null}function k(){return sP().defined(e).curve(g).context(f)}return a="function"==typeof a?a:void 0===a?sN:fB(+a),b="function"==typeof b?b:void 0===b?fB(0):fB(+b),c="function"==typeof c?c:void 0===c?sO:fB(+c),j.x=function(b){return arguments.length?(a="function"==typeof b?b:fB(+b),d=null,j):a},j.x0=function(b){return arguments.length?(a="function"==typeof b?b:fB(+b),j):a},j.x1=function(a){return arguments.length?(d=null==a?null:"function"==typeof a?a:fB(+a),j):d},j.y=function(a){return arguments.length?(b="function"==typeof a?a:fB(+a),c=null,j):b},j.y0=function(a){return arguments.length?(b="function"==typeof a?a:fB(+a),j):b},j.y1=function(a){return arguments.length?(c=null==a?null:"function"==typeof a?a:fB(+a),j):c},j.lineX0=j.lineY0=function(){return k().x(a).y(b)},j.lineY1=function(){return k().x(a).y(c)},j.lineX1=function(){return k().x(d).y(b)},j.defined=function(a){return arguments.length?(e="function"==typeof a?a:fB(!!a),j):e},j.curve=function(a){return arguments.length?(g=a,null!=f&&(h=g(f)),j):g},j.context=function(a){return arguments.length?(null==a?f=h=null:h=g(f=a),j):f},j}function sR(){}function sS(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function sT(a){this._context=a}function sU(a){this._context=a}function sV(a){this._context=a}sL.prototype,sT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sS(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},sU.prototype={areaStart:sR,areaEnd:sR,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._x2=a,this._y2=b;break;case 1:this._point=2,this._x3=a,this._y3=b;break;case 2:this._point=3,this._x4=a,this._y4=b,this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:sS(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},sV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:sS(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}};class sW{constructor(a,b){this._context=a,this._x=b}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+a)/2,this._y0,this._x0,b,a,b):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+b)/2,a,this._y0,a,b)}this._x0=a,this._y0=b}}function sX(a){this._context=a}sX.prototype={areaStart:sR,areaEnd:sR,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(a,b){a*=1,b*=1,this._point?this._context.lineTo(a,b):(this._point=1,this._context.moveTo(a,b))}};function sY(a,b,c){var d=a._x1-a._x0,e=b-a._x1,f=(a._y1-a._y0)/(d||e<0&&-0),g=(c-a._y1)/(e||d<0&&-0);return((f<0?-1:1)+(g<0?-1:1))*Math.min(Math.abs(f),Math.abs(g),.5*Math.abs((f*e+g*d)/(d+e)))||0}function sZ(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function s$(a,b,c){var d=a._x0,e=a._y0,f=a._x1,g=a._y1,h=(f-d)/3;a._context.bezierCurveTo(d+h,e+h*b,f-h,g-h*c,f,g)}function s_(a){this._context=a}function s0(a){this._context=new s1(a)}function s1(a){this._context=a}function s2(a){this._context=a}function s3(a){var b,c,d=a.length-1,e=Array(d),f=Array(d),g=Array(d);for(e[0]=0,f[0]=2,g[0]=a[0]+2*a[1],b=1;b<d-1;++b)e[b]=1,f[b]=4,g[b]=4*a[b]+2*a[b+1];for(e[d-1]=2,f[d-1]=7,g[d-1]=8*a[d-1]+a[d],b=1;b<d;++b)c=e[b]/f[b-1],f[b]-=c,g[b]-=c*g[b-1];for(e[d-1]=g[d-1]/f[d-1],b=d-2;b>=0;--b)e[b]=(g[b]-e[b+1])/f[b];for(b=0,f[d-1]=(a[d]+e[d-1])/2;b<d-1;++b)f[b]=2*a[b+1]-e[b+1];return[e,f]}function s4(a,b){this._context=a,this._t=b}s_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s$(this,this._t0,sZ(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){var c=NaN;if(b*=1,(a*=1)!==this._x1||b!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,s$(this,sZ(this,c=sY(this,a,b)),c);break;default:s$(this,this._t0,c=sY(this,a,b))}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b,this._t0=c}}},(s0.prototype=Object.create(s_.prototype)).point=function(a,b){s_.prototype.point.call(this,b,a)},s1.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,f){this._context.bezierCurveTo(b,a,d,c,f,e)}},s2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,b=this._y,c=a.length;if(c)if(this._line?this._context.lineTo(a[0],b[0]):this._context.moveTo(a[0],b[0]),2===c)this._context.lineTo(a[1],b[1]);else for(var d=s3(a),e=s3(b),f=0,g=1;g<c;++f,++g)this._context.bezierCurveTo(d[0][f],e[0][f],d[1][f],e[1][f],a[g],b[g]);(this._line||0!==this._line&&1===c)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(a,b){this._x.push(+a),this._y.push(+b)}},s4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,b),this._context.lineTo(a,b);else{var c=this._x*(1-this._t)+a*this._t;this._context.lineTo(c,this._y),this._context.lineTo(c,b)}}this._x=a,this._y=b}};var s5=(a,b,c)=>{if(null===a||"object"!=typeof a&&"function"!=typeof a)return null;var d=null;return Object.keys(a).forEach(e=>{var f=a[e];rx(e)&&"function"==typeof f&&(d||(d={}),d[e]=a=>(f(b,c,a),null))}),d};function s6(){return(s6=Object.assign.bind()).apply(null,arguments)}function s7(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function s8(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?s7(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):s7(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var s9={curveBasisClosed:function(a){return new sU(a)},curveBasisOpen:function(a){return new sV(a)},curveBasis:function(a){return new sT(a)},curveBumpX:function(a){return new sW(a,!0)},curveBumpY:function(a){return new sW(a,!1)},curveLinearClosed:function(a){return new sX(a)},curveLinear:sG,curveMonotoneX:function(a){return new s_(a)},curveMonotoneY:function(a){return new s0(a)},curveNatural:function(a){return new s2(a)},curveStep:function(a){return new s4(a,.5)},curveStepAfter:function(a){return new s4(a,1)},curveStepBefore:function(a){return new s4(a,0)}},ta=a=>gk(a.x)&&gk(a.y),tb=a=>a.x,tc=a=>a.y,td=a=>{var{className:b,points:c,path:d,pathRef:e}=a;if((!c||!c.length)&&!d)return null;var f=c&&c.length?(a=>{var b,{type:c="linear",points:d=[],baseLine:e,layout:f,connectNulls:g=!1}=a,h=((a,b)=>{if("function"==typeof a)return a;var c="curve".concat(eO(a));return("curveMonotone"===c||"curveBump"===c)&&b?s9["".concat(c).concat("vertical"===b?"Y":"X")]:s9[c]||sG})(c,f),i=g?d.filter(ta):d;if(Array.isArray(e)){var j=g?e.filter(a=>ta(a)):e,k=i.map((a,b)=>s8(s8({},a),{},{base:j[b]}));return(b="vertical"===f?sQ().y(tc).x1(tb).x0(a=>a.base.x):sQ().x(tb).y1(tc).y0(a=>a.base.y)).defined(ta).curve(h),b(k)}return(b="vertical"===f&&eH(e)?sQ().y(tc).x1(tb).x0(e):eH(e)?sQ().x(tb).y1(tc).y0(e):sP().x(tb).y(tc)).defined(ta).curve(h),b(i)})(a):d;return p.createElement("path",s6({},rB(a),((a,b)=>{if(!a||"function"==typeof a||"boolean"==typeof a)return null;var c=a;if((0,p.isValidElement)(a)&&(c=a.props),"object"!=typeof c&&"function"!=typeof c)return null;var d={};return Object.keys(c).forEach(a=>{rx(a)&&(d[a]=b||(b=>c[a](c,b)))}),d})(a),{className:gc("recharts-curve",b),d:null===f?void 0:f,ref:e}))};function te(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var tf=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?te(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):te(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},{cacheSize:2e3,enableCache:!0}),tg=new class{constructor(a){!function(a,b,c){var d;(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c}(this,"cache",new Map),this.maxSize=a}get(a){var b=this.cache.get(a);return void 0!==b&&(this.cache.delete(a),this.cache.set(a,b)),b}set(a,b){if(this.cache.has(a))this.cache.delete(a);else if(this.cache.size>=this.maxSize){var c=this.cache.keys().next().value;this.cache.delete(c)}this.cache.set(a,b)}clear(){this.cache.clear()}size(){return this.cache.size}}(tf.cacheSize),th={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ti="recharts_measurement_span",tj=(a,b)=>{try{var c=document.getElementById(ti);c||((c=document.createElement("span")).setAttribute("id",ti),c.setAttribute("aria-hidden","true"),document.body.appendChild(c)),Object.assign(c.style,th,b),c.textContent="".concat(a);var d=c.getBoundingClientRect();return{width:d.width,height:d.height}}catch(a){return{width:0,height:0}}},tk=function(a){var b,c,d,e,f,g,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==a||rn)return{width:0,height:0};if(!tf.enableCache)return tj(a,h);var i=(b=h.fontSize||"",c=h.fontFamily||"",d=h.fontWeight||"",e=h.fontStyle||"",f=h.letterSpacing||"",g=h.textTransform||"","".concat(a,"|").concat(b,"|").concat(c,"|").concat(d,"|").concat(e,"|").concat(f,"|").concat(g)),j=tg.get(i);if(j)return j;var k=tj(a,h);return tg.set(i,k),k},tl=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tm=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tn=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,to=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tp={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},tq=Object.keys(tp);class tr{static parse(a){var b,[,c,d]=null!=(b=to.exec(a))?b:[];return new tr(parseFloat(c),null!=d?d:"")}constructor(a,b){this.num=a,this.unit=b,this.num=a,this.unit=b,eF(a)&&(this.unit=""),""===b||tn.test(b)||(this.num=NaN,this.unit=""),tq.includes(b)&&(this.num=a*tp[b],this.unit="px")}add(a){return this.unit!==a.unit?new tr(NaN,""):new tr(this.num+a.num,this.unit)}subtract(a){return this.unit!==a.unit?new tr(NaN,""):new tr(this.num-a.num,this.unit)}multiply(a){return""!==this.unit&&""!==a.unit&&this.unit!==a.unit?new tr(NaN,""):new tr(this.num*a.num,this.unit||a.unit)}divide(a){return""!==this.unit&&""!==a.unit&&this.unit!==a.unit?new tr(NaN,""):new tr(this.num/a.num,this.unit||a.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return eF(this.num)}}function ts(a){if(a.includes("NaN"))return"NaN";for(var b=a;b.includes("*")||b.includes("/");){var c,[,d,e,f]=null!=(c=tl.exec(b))?c:[],g=tr.parse(null!=d?d:""),h=tr.parse(null!=f?f:""),i="*"===e?g.multiply(h):g.divide(h);if(i.isNaN())return"NaN";b=b.replace(tl,i.toString())}for(;b.includes("+")||/.-\d+(?:\.\d+)?/.test(b);){var j,[,k,l,m]=null!=(j=tm.exec(b))?j:[],n=tr.parse(null!=k?k:""),o=tr.parse(null!=m?m:""),p="+"===l?n.add(o):n.subtract(o);if(p.isNaN())return"NaN";b=b.replace(tm,p.toString())}return b}var tt=/\(([^()]*)\)/;function tu(a){var b=function(a){try{var b;return b=a.replace(/\s+/g,""),b=function(a){for(var b,c=a;null!=(b=tt.exec(c));){var[,d]=b;c=c.replace(tt,ts(d))}return c}(b),b=ts(b)}catch(a){return"NaN"}}(a.slice(5,-1));return"NaN"===b?"":b}var tv=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],tw=["dx","dy","angle","className","breakAll"];function tx(){return(tx=Object.assign.bind()).apply(null,arguments)}function ty(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var tz=/[ \f\n\r\t\v\u2028\u2029]+/,tA=a=>{var{children:b,breakAll:c,style:d}=a;try{var e=[];null!=b&&(e=c?b.toString().split(""):b.toString().split(tz));var f=e.map(a=>({word:a,width:tk(a,d).width})),g=c?0:tk("Â ",d).width;return{wordsWithComputedWidth:f,spaceWidth:g}}catch(a){return null}},tB=a=>[{words:null==a?[]:a.toString().split(tz)}],tC="#808080",tD=(0,p.forwardRef)((a,b)=>{var c,{x:d=0,y:e=0,lineHeight:f="1em",capHeight:g="0.71em",scaleToFit:h=!1,textAnchor:i="start",verticalAnchor:j="end",fill:k=tC}=a,l=ty(a,tv),m=(0,p.useMemo)(()=>(a=>{var{width:b,scaleToFit:c,children:d,style:e,breakAll:f,maxLines:g}=a;if((b||c)&&!rn){var h=tA({breakAll:f,children:d,style:e});if(!h)return tB(d);var{wordsWithComputedWidth:i,spaceWidth:j}=h;return((a,b,c,d,e)=>{var f,{maxLines:g,children:h,style:i,breakAll:j}=a,k=eH(g),l=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.reduce((a,b)=>{var{word:f,width:g}=b,h=a[a.length-1];return h&&(null==d||e||h.width+g+c<Number(d))?(h.words.push(f),h.width+=g+c):a.push({words:[f],width:g}),a},[])},m=l(b),n=a=>a.reduce((a,b)=>a.width>b.width?a:b);if(!k||e||!(m.length>g||n(m).width>Number(d)))return m;for(var o=a=>{var b=l(tA({breakAll:j,style:i,children:h.slice(0,a)+"â¦"}).wordsWithComputedWidth);return[b.length>g||n(b).width>Number(d),b]},p=0,q=h.length-1,r=0;p<=q&&r<=h.length-1;){var s=Math.floor((p+q)/2),[t,u]=o(s-1),[v]=o(s);if(t||v||(p=s+1),t&&v&&(q=s-1),!t&&v){f=u;break}r++}return f||m})({breakAll:f,children:d,maxLines:g,style:e},i,j,b,c)}return tB(d)})({breakAll:l.breakAll,children:l.children,maxLines:l.maxLines,scaleToFit:h,style:l.style,width:l.width}),[l.breakAll,l.children,l.maxLines,h,l.style,l.width]),{dx:n,dy:o,angle:q,className:r,breakAll:s}=l,t=ty(l,tw);if(!eI(d)||!eI(e)||0===m.length)return null;var u=d+(eH(n)?n:0),v=e+(eH(o)?o:0);switch(j){case"start":c=tu("calc(".concat(g,")"));break;case"middle":c=tu("calc(".concat((m.length-1)/2," * -").concat(f," + (").concat(g," / 2))"));break;default:c=tu("calc(".concat(m.length-1," * -").concat(f,")"))}var w=[];if(h){var x=m[0].width,{width:y}=l;w.push("scale(".concat(eH(y)?y/x:1,")"))}return q&&w.push("rotate(".concat(q,", ").concat(u,", ").concat(v,")")),w.length&&(t.transform=w.join(" ")),p.createElement("text",tx({},rD(t),{ref:b,x:u,y:v,className:gc("recharts-text",r),textAnchor:i,fill:k.includes("url")?tC:k}),m.map((a,b)=>{var d=a.words.join(s?"":" ");return p.createElement("tspan",{x:u,dy:0===b?c:f,key:"".concat(d,"-").concat(b)},d)}))});tD.displayName="Text";var tE=a=>null;tE.displayName="Cell";var tF=a.i(66539),tG=a=>"string"==typeof a?a:a?a.displayName||a.name||"Component":"",tH=null,tI=null,tJ=a=>{if(a===tH&&Array.isArray(tI))return tI;var b=[];return p.Children.forEach(a,a=>{null!=a&&((0,tF.isFragment)(a)?b=b.concat(tJ(a.props.children)):b.push(a))}),tI=b,tH=a,b};function tK(a,b){var c=[],d=[];return d=Array.isArray(b)?b.map(a=>tG(a)):[tG(b)],tJ(a).forEach(a=>{var b=(0,eD.default)(a,"type.displayName")||(0,eD.default)(a,"type.name");-1!==d.indexOf(b)&&c.push(a)}),c}var tL=a.i(3068);function tM(){}function tN(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function tO(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?tN(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):tN(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var tP=(a,b,c)=>a.map(a=>"".concat(a.replace(/([A-Z])/g,a=>"-".concat(a.toLowerCase()))," ").concat(b,"ms ").concat(c)).join(","),tQ=(a,b)=>Object.keys(b).reduce((c,d)=>tO(tO({},c),{},{[d]:a(d,b[d])}),{});function tR(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function tS(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?tR(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):tR(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var tT=(a,b,c)=>a+(b-a)*c,tU=a=>{var{from:b,to:c}=a;return b!==c},tV=(a,b,c)=>{var d=tQ((b,c)=>{if(tU(c)){var[d,e]=a(c.from,c.to,c.velocity);return tS(tS({},c),{},{from:d,velocity:e})}return c},b);return c<1?tQ((a,b)=>tU(b)?tS(tS({},b),{},{velocity:tT(b.velocity,d[a].velocity,c),from:tT(b.from,d[a].from,c)}):b,b):tV(a,d,c-1)},tW=(a,b)=>[0,3*a,3*b-6*a,3*a-3*b+1],tX=(a,b)=>a.map((a,c)=>a*b**c).reduce((a,b)=>a+b),tY=(a,b)=>c=>tX(tW(a,b),c),tZ=function(){let a,b;for(var c,d,e,f,g=arguments.length,h=Array(g),i=0;i<g;i++)h[i]=arguments[i];if(1===h.length)switch(h[0]){case"linear":[c,e,d,f]=[0,0,1,1];break;case"ease":[c,e,d,f]=[.25,.1,.25,1];break;case"ease-in":[c,e,d,f]=[.42,0,1,1];break;case"ease-out":[c,e,d,f]=[.42,0,.58,1];break;case"ease-in-out":[c,e,d,f]=[0,0,.58,1];break;default:var j=h[0].split("(");"cubic-bezier"===j[0]&&4===j[1].split(")")[0].split(",").length&&([c,e,d,f]=j[1].split(")")[0].split(",").map(a=>parseFloat(a)))}else 4===h.length&&([c,e,d,f]=h);var k=tY(c,d),l=tY(e,f),m=(a=c,b=d,c=>tX([...tW(a,b).map((a,b)=>a*b).slice(1),0],c)),n=a=>a>1?1:a<0?0:a,o=a=>{for(var b=a>1?1:a,c=b,d=0;d<8;++d){var e=k(c)-b,f=m(c);if(1e-4>Math.abs(e-b)||f<1e-4)break;c=n(c-e/f)}return l(c)};return o.isStepper=!1,o},t$=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:b=100,damping:c=8,dt:d=17}=a,e=(a,e,f)=>{var g=f+(-(a-e)*b-f*c)*d/1e3,h=f*d/1e3+a;return 1e-4>Math.abs(h-e)&&1e-4>Math.abs(g)?[e,0]:[h,g]};return e.isStepper=!0,e.dt=d,e};class t_{setTimeout(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=performance.now(),d=null,e=f=>{f-c>=b?a(f):"function"==typeof requestAnimationFrame&&(d=requestAnimationFrame(e))};return d=requestAnimationFrame(e),()=>{cancelAnimationFrame(d)}}}var t0=(0,p.createContext)(function(){var a,b,c,d,e;return a=new t_,b=()=>null,c=!1,d=null,e=f=>{if(!c){if(Array.isArray(f)){if(!f.length)return;var[g,...h]=f;if("number"==typeof g){d=a.setTimeout(e.bind(null,h),g);return}e(g),d=a.setTimeout(e.bind(null,h));return}"string"==typeof f&&b(f),"object"==typeof f&&b(f),"function"==typeof f&&f()}},{stop:()=>{c=!0},start:a=>{c=!1,d&&(d(),d=null),e(a)},subscribe:a=>(b=a,()=>{b=()=>null}),getTimeoutController:()=>a}}),t1={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},t2={t:0},t3={t:1};function t4(a){var b,c,d,e=sb(a,t1),{isActive:f,canBegin:g,duration:h,easing:i,begin:j,onAnimationEnd:k,onAnimationStart:l,children:m}=e,n=(b=e.animationId,c=e.animationManager,d=(0,p.useContext)(t0),(0,p.useMemo)(()=>null!=c?c:d(b),[b,c,d])),[o,q]=(0,p.useState)(f?t2:t3),r=(0,p.useRef)(null);return(0,p.useEffect)(()=>{f||q(t3)},[f]),(0,p.useEffect)(()=>{if(!f||!g)return tM;var a,b,c,d,e,m,o,p,s,t,u,v=(a=(a=>{if("string"==typeof a)switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tZ(a);case"spring":return t$();default:if("cubic-bezier"===a.split("(")[0])return tZ(a)}return"function"==typeof a?a:null})(i),b=n.getTimeoutController(),c=[Object.keys(t2),Object.keys(t3)].reduce((a,b)=>a.filter(a=>b.includes(a))),!0===a.isStepper?(e=c.reduce((a,b)=>tS(tS({},a),{},{[b]:{from:t2[b],velocity:0,to:t3[b]}}),{}),m=null,o=c=>{d||(d=c);var f=(c-d)/a.dt;e=tV(a,e,f),q(tS(tS(tS({},t2),t3),tQ((a,b)=>b.from,e))),d=c,Object.values(e).filter(tU).length&&(m=b.setTimeout(o))},()=>(m=b.setTimeout(o),()=>{m()})):(s=null,t=c.reduce((a,b)=>tS(tS({},a),{},{[b]:[t2[b],t3[b]]}),{}),u=c=>{p||(p=c);var d=(c-p)/h,e=tQ((b,c)=>tT(...c,a(d)),t);if(q(tS(tS(tS({},t2),t3),e)),d<1)s=b.setTimeout(u);else{var f=tQ((b,c)=>tT(...c,a(1)),t);q(tS(tS(tS({},t2),t3),f))}},()=>(s=b.setTimeout(u),()=>{s()})));return n.start([l,j,()=>{r.current=v()},h,k]),()=>{n.stop(),r.current&&r.current(),k()}},[f,g,h,i,j,l,k,n]),m(o.t)}function t5(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",c=(0,p.useRef)(eK(b)),d=(0,p.useRef)(a);return d.current!==a&&(c.current=eK(b),d.current=a),c.current}var t6=["radius"],t7=["radius"];function t8(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function t9(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?t8(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):t8(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function ua(){return(ua=Object.assign.bind()).apply(null,arguments)}function ub(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var uc=(a,b,c,d,e)=>{var f,g=Math.min(Math.abs(c)/2,Math.abs(d)/2),h=d>=0?1:-1,i=c>=0?1:-1,j=+(d>=0&&c>=0||d<0&&c<0);if(g>0&&e instanceof Array){for(var k=[0,0,0,0],l=0;l<4;l++)k[l]=e[l]>g?g:e[l];f="M".concat(a,",").concat(b+h*k[0]),k[0]>0&&(f+="A ".concat(k[0],",").concat(k[0],",0,0,").concat(j,",").concat(a+i*k[0],",").concat(b)),f+="L ".concat(a+c-i*k[1],",").concat(b),k[1]>0&&(f+="A ".concat(k[1],",").concat(k[1],",0,0,").concat(j,",\n        ").concat(a+c,",").concat(b+h*k[1])),f+="L ".concat(a+c,",").concat(b+d-h*k[2]),k[2]>0&&(f+="A ".concat(k[2],",").concat(k[2],",0,0,").concat(j,",\n        ").concat(a+c-i*k[2],",").concat(b+d)),f+="L ".concat(a+i*k[3],",").concat(b+d),k[3]>0&&(f+="A ".concat(k[3],",").concat(k[3],",0,0,").concat(j,",\n        ").concat(a,",").concat(b+d-h*k[3])),f+="Z"}else if(g>0&&e===+e&&e>0){var m=Math.min(g,e);f="M ".concat(a,",").concat(b+h*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(j,",").concat(a+i*m,",").concat(b,"\n            L ").concat(a+c-i*m,",").concat(b,"\n            A ").concat(m,",").concat(m,",0,0,").concat(j,",").concat(a+c,",").concat(b+h*m,"\n            L ").concat(a+c,",").concat(b+d-h*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(j,",").concat(a+c-i*m,",").concat(b+d,"\n            L ").concat(a+i*m,",").concat(b+d,"\n            A ").concat(m,",").concat(m,",0,0,").concat(j,",").concat(a,",").concat(b+d-h*m," Z")}else f="M ".concat(a,",").concat(b," h ").concat(c," v ").concat(d," h ").concat(-c," Z");return f},ud={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ue=a=>{var b=sb(a,ud),c=(0,p.useRef)(null),[d,e]=(0,p.useState)(-1);(0,p.useEffect)(()=>{if(c.current&&c.current.getTotalLength)try{var a=c.current.getTotalLength();a&&e(a)}catch(a){}},[]);var{x:f,y:g,width:h,height:i,radius:j,className:k}=b,{animationEasing:l,animationDuration:m,animationBegin:n,isAnimationActive:o,isUpdateAnimationActive:q}=b,r=(0,p.useRef)(h),s=(0,p.useRef)(i),t=(0,p.useRef)(f),u=(0,p.useRef)(g),v=t5((0,p.useMemo)(()=>({x:f,y:g,width:h,height:i,radius:j}),[f,g,h,i,j]),"rectangle-");if(f!==+f||g!==+g||h!==+h||i!==+i||0===h||0===i)return null;var w=gc("recharts-rectangle",k);if(!q){var x=rD(b),{radius:y}=x,z=ub(x,t6);return p.createElement("path",ua({},z,{radius:"number"==typeof j?j:void 0,className:w,d:uc(f,g,h,i,j)}))}var A=r.current,B=s.current,C=t.current,D=u.current,E="0px ".concat(-1===d?1:d,"px"),F="".concat(d,"px 0px"),G=tP(["strokeDasharray"],m,"string"==typeof l?l:void 0);return p.createElement(t4,{animationId:v,key:v,canBegin:d>0,duration:m,easing:l,isActive:q,begin:n},a=>{var d,e=eN(A,h,a),k=eN(B,i,a),l=eN(C,f,a),m=eN(D,g,a);c.current&&(r.current=e,s.current=k,t.current=l,u.current=m),d=o?a>0?{transition:G,strokeDasharray:F}:{strokeDasharray:E}:{strokeDasharray:F};var n=rD(b),{radius:q}=n,v=ub(n,t7);return p.createElement("path",ua({},v,{radius:"number"==typeof j?j:void 0,className:w,d:uc(l,m,e,k,j),ref:c,style:t9(t9({},d),b.style)}))})};function uf(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ug(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?uf(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):uf(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function uh(){return(uh=Object.assign.bind()).apply(null,arguments)}var ui=(a,b,c,d,e)=>{var f=c-d;return"M ".concat(a,",").concat(b)+"L ".concat(a+c,",").concat(b)+"L ".concat(a+c-f/2,",").concat(b+e)+"L ".concat(a+c-f/2-d,",").concat(b+e)+"L ".concat(a,",").concat(b," Z")},uj={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uk=a=>{var b=sb(a,uj),{x:c,y:d,upperWidth:e,lowerWidth:f,height:g,className:h}=b,{animationEasing:i,animationDuration:j,animationBegin:k,isUpdateAnimationActive:l}=b,m=(0,p.useRef)(null),[n,o]=(0,p.useState)(-1),q=(0,p.useRef)(e),r=(0,p.useRef)(f),s=(0,p.useRef)(g),t=(0,p.useRef)(c),u=(0,p.useRef)(d),v=t5(a,"trapezoid-");if((0,p.useEffect)(()=>{if(m.current&&m.current.getTotalLength)try{var a=m.current.getTotalLength();a&&o(a)}catch(a){}},[]),c!==+c||d!==+d||e!==+e||f!==+f||g!==+g||0===e&&0===f||0===g)return null;var w=gc("recharts-trapezoid",h);if(!l)return p.createElement("g",null,p.createElement("path",uh({},rD(b),{className:w,d:ui(c,d,e,f,g)})));var x=q.current,y=r.current,z=s.current,A=t.current,B=u.current,C="0px ".concat(-1===n?1:n,"px"),D="".concat(n,"px 0px"),E=tP(["strokeDasharray"],j,i);return p.createElement(t4,{animationId:v,key:v,canBegin:n>0,duration:j,easing:i,isActive:l,begin:k},a=>{var h=eN(x,e,a),i=eN(y,f,a),j=eN(z,g,a),k=eN(A,c,a),l=eN(B,d,a);m.current&&(q.current=h,r.current=i,s.current=j,t.current=k,u.current=l);var n=a>0?{transition:E,strokeDasharray:D}:{strokeDasharray:C};return p.createElement("path",uh({},rD(b),{className:w,d:ui(k,l,h,i,j),ref:m,style:ug(ug({},n),b.style)}))})};function ul(){return(ul=Object.assign.bind()).apply(null,arguments)}var um=a=>{var{cx:b,cy:c,radius:d,angle:e,sign:f,isExternal:g,cornerRadius:h,cornerIsExternal:i}=a,j=h*(g?1:-1)+d,k=Math.asin(h/j)/fI,l=i?e:e+f*k,m=fJ(b,c,j,l);return{center:m,circleTangency:fJ(b,c,d,l),lineTangency:fJ(b,c,j*Math.cos(k*fI),i?e-f*k:e),theta:k}},un=a=>{var{cx:b,cy:c,innerRadius:d,outerRadius:e,startAngle:f,endAngle:g}=a,h=eE(g-f)*Math.min(Math.abs(g-f),359.999),i=f+h,j=fJ(b,c,e,f),k=fJ(b,c,e,i),l="M ".concat(j.x,",").concat(j.y,"\n    A ").concat(e,",").concat(e,",0,\n    ").concat(+(Math.abs(h)>180),",").concat(+(f>i),",\n    ").concat(k.x,",").concat(k.y,"\n  ");if(d>0){var m=fJ(b,c,d,f),n=fJ(b,c,d,i);l+="L ".concat(n.x,",").concat(n.y,"\n            A ").concat(d,",").concat(d,",0,\n            ").concat(+(Math.abs(h)>180),",").concat(+(f<=i),",\n            ").concat(m.x,",").concat(m.y," Z")}else l+="L ".concat(b,",").concat(c," Z");return l},uo={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},up=a=>{var b,c=sb(a,uo),{cx:d,cy:e,innerRadius:f,outerRadius:g,cornerRadius:h,forceCornerRadius:i,cornerIsExternal:j,startAngle:k,endAngle:l,className:m}=c;if(g<f||k===l)return null;var n=gc("recharts-sector",m),o=g-f,q=eL(h,o,0,!0);return b=q>0&&360>Math.abs(k-l)?(a=>{var{cx:b,cy:c,innerRadius:d,outerRadius:e,cornerRadius:f,forceCornerRadius:g,cornerIsExternal:h,startAngle:i,endAngle:j}=a,k=eE(j-i),{circleTangency:l,lineTangency:m,theta:n}=um({cx:b,cy:c,radius:e,angle:i,sign:k,cornerRadius:f,cornerIsExternal:h}),{circleTangency:o,lineTangency:p,theta:q}=um({cx:b,cy:c,radius:e,angle:j,sign:-k,cornerRadius:f,cornerIsExternal:h}),r=h?Math.abs(i-j):Math.abs(i-j)-n-q;if(r<0)return g?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(f,",").concat(f,",0,0,1,").concat(2*f,",0\n        a").concat(f,",").concat(f,",0,0,1,").concat(-(2*f),",0\n      "):un({cx:b,cy:c,innerRadius:d,outerRadius:e,startAngle:i,endAngle:j});var s="M ".concat(m.x,",").concat(m.y,"\n    A").concat(f,",").concat(f,",0,0,").concat(+(k<0),",").concat(l.x,",").concat(l.y,"\n    A").concat(e,",").concat(e,",0,").concat(+(r>180),",").concat(+(k<0),",").concat(o.x,",").concat(o.y,"\n    A").concat(f,",").concat(f,",0,0,").concat(+(k<0),",").concat(p.x,",").concat(p.y,"\n  ");if(d>0){var{circleTangency:t,lineTangency:u,theta:v}=um({cx:b,cy:c,radius:d,angle:i,sign:k,isExternal:!0,cornerRadius:f,cornerIsExternal:h}),{circleTangency:w,lineTangency:x,theta:y}=um({cx:b,cy:c,radius:d,angle:j,sign:-k,isExternal:!0,cornerRadius:f,cornerIsExternal:h}),z=h?Math.abs(i-j):Math.abs(i-j)-v-y;if(z<0&&0===f)return"".concat(s,"L").concat(b,",").concat(c,"Z");s+="L".concat(x.x,",").concat(x.y,"\n      A").concat(f,",").concat(f,",0,0,").concat(+(k<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(d,",").concat(d,",0,").concat(+(z>180),",").concat(+(k>0),",").concat(t.x,",").concat(t.y,"\n      A").concat(f,",").concat(f,",0,0,").concat(+(k<0),",").concat(u.x,",").concat(u.y,"Z")}else s+="L".concat(b,",").concat(c,"Z");return s})({cx:d,cy:e,innerRadius:f,outerRadius:g,cornerRadius:Math.min(q,o/2),forceCornerRadius:i,cornerIsExternal:j,startAngle:k,endAngle:l}):un({cx:d,cy:e,innerRadius:f,outerRadius:g,startAngle:k,endAngle:l}),p.createElement("path",ul({},rD(c),{className:n,d:b}))};let uq=Math.cos,ur=Math.sin,us=Math.sqrt,ut=Math.PI,uu=2*ut;us(3);let uv={draw(a,b){let c=us(b/ut);a.moveTo(c,0),a.arc(0,0,c,0,uu)}},uw=us(1/3),ux=2*uw,uy=ur(ut/10)/ur(7*ut/10),uz=ur(uu/10)*uy,uA=-uq(uu/10)*uy,uB=us(3);us(3);let uC=us(3)/2,uD=1/us(12),uE=(uD/2+1)*3;var uF=["type","size","sizeType"];function uG(){return(uG=Object.assign.bind()).apply(null,arguments)}function uH(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function uI(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?uH(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):uH(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var uJ={symbolCircle:uv,symbolCross:{draw(a,b){let c=us(b/5)/2;a.moveTo(-3*c,-c),a.lineTo(-c,-c),a.lineTo(-c,-3*c),a.lineTo(c,-3*c),a.lineTo(c,-c),a.lineTo(3*c,-c),a.lineTo(3*c,c),a.lineTo(c,c),a.lineTo(c,3*c),a.lineTo(-c,3*c),a.lineTo(-c,c),a.lineTo(-3*c,c),a.closePath()}},symbolDiamond:{draw(a,b){let c=us(b/ux),d=c*uw;a.moveTo(0,-c),a.lineTo(d,0),a.lineTo(0,c),a.lineTo(-d,0),a.closePath()}},symbolSquare:{draw(a,b){let c=us(b),d=-c/2;a.rect(d,d,c,c)}},symbolStar:{draw(a,b){let c=us(.8908130915292852*b),d=uz*c,e=uA*c;a.moveTo(0,-c),a.lineTo(d,e);for(let b=1;b<5;++b){let f=uu*b/5,g=uq(f),h=ur(f);a.lineTo(h*c,-g*c),a.lineTo(g*d-h*e,h*d+g*e)}a.closePath()}},symbolTriangle:{draw(a,b){let c=-us(b/(3*uB));a.moveTo(0,2*c),a.lineTo(-uB*c,-c),a.lineTo(uB*c,-c),a.closePath()}},symbolWye:{draw(a,b){let c=us(b/uE),d=c/2,e=c*uD,f=c*uD+c,g=-d;a.moveTo(d,e),a.lineTo(d,f),a.lineTo(g,f),a.lineTo(-.5*d-uC*e,uC*d+-.5*e),a.lineTo(-.5*d-uC*f,uC*d+-.5*f),a.lineTo(-.5*g-uC*f,uC*g+-.5*f),a.lineTo(-.5*d+uC*e,-.5*e-uC*d),a.lineTo(-.5*d+uC*f,-.5*f-uC*d),a.lineTo(-.5*g+uC*f,-.5*f-uC*g),a.closePath()}}},uK=Math.PI/180,uL=a=>{var{type:b="circle",size:c=64,sizeType:d="area"}=a,e=uI(uI({},function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,uF)),{},{type:b,size:c,sizeType:d}),f="circle";"string"==typeof b&&(f=b);var{className:g,cx:h,cy:i}=e,j=rD(e);return h===+h&&i===+i&&c===+c?p.createElement("path",uG({},j,{className:gc("recharts-symbols",g),transform:"translate(".concat(h,", ").concat(i,")"),d:(()=>{var a,b=(a=f,uJ["symbol".concat(eO(a))]||uv),e=(function(a,b){let c=null,d=sM(e);function e(){let e;if(c||(c=e=d()),a.apply(this,arguments).draw(c,+b.apply(this,arguments)),e)return c=null,e+""||null}return a="function"==typeof a?a:fB(a||uv),b="function"==typeof b?b:fB(void 0===b?64:+b),e.type=function(b){return arguments.length?(a="function"==typeof b?b:fB(b),e):a},e.size=function(a){return arguments.length?(b="function"==typeof a?a:fB(+a),e):b},e.context=function(a){return arguments.length?(c=null==a?null:a,e):c},e})().type(b).size(((a,b,c)=>{if("area"===b)return a;switch(c){case"cross":return 5*a*a/9;case"diamond":return .5*a*a/Math.sqrt(3);case"square":return a*a;case"star":var d=18*uK;return 1.25*a*a*(Math.tan(d)-Math.tan(2*d)*Math.tan(d)**2);case"triangle":return Math.sqrt(3)*a*a/4;case"wye":return(21-10*Math.sqrt(3))*a*a/8;default:return Math.PI*a*a/4}})(c,d,f))();if(null!==e)return e})()})):null};uL.registerSymbol=(a,b)=>{uJ["symbol".concat(eO(a))]=b};var uM=["option","shapeType","propTransformer","activeClassName","isActive"];function uN(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function uO(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?uN(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):uN(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function uP(a,b){return uO(uO({},b),a)}function uQ(a){var{shapeType:b,elementProps:c}=a;switch(b){case"rectangle":return p.createElement(ue,c);case"trapezoid":return p.createElement(uk,c);case"sector":return p.createElement(up,c);case"symbols":if("symbols"===b)return p.createElement(uL,c);break;default:return null}}function uR(a){var b,{option:c,shapeType:d,propTransformer:e=uP,activeClassName:f="recharts-active-shape",isActive:g}=a,h=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,uM);if((0,p.isValidElement)(c))b=(0,p.cloneElement)(c,uO(uO({},h),(0,p.isValidElement)(c)?c.props:c));else if("function"==typeof c)b=c(h);else if((0,tL.default)(c)&&"boolean"!=typeof c){var i=e(c,h);b=p.createElement(uQ,{shapeType:d,elementProps:i})}else b=p.createElement(uQ,{shapeType:d,elementProps:h});return g?p.createElement(sE,{className:f},b):b}var uS=(a,b)=>{var c=fs();return(d,e)=>f=>{null==a||a(d,e,f),c(e5({activeIndex:String(e),activeDataKey:b,activeCoordinate:d.tooltipPosition}))}},uT=a=>{var b=fs();return(c,d)=>e=>{null==a||a(c,d,e),b(e6())}},uU=(a,b)=>{var c=fs();return(d,e)=>f=>{null==a||a(d,e,f),c(e8({activeIndex:String(e),activeDataKey:b,activeCoordinate:d.tooltipPosition}))}};function uV(a){var{fn:b,args:c}=a,d=fs(),e=f9();return(0,p.useLayoutEffect)(()=>{if(!e){var a=b(c);return d(e2(a)),()=>{d(e3(a))}}},[b,c,d,e]),null}var uW=()=>{};function uX(a){var{legendPayload:b}=a,c=fs(),d=f9();return(0,p.useLayoutEffect)(()=>d?uW:(c(qU(b)),()=>{c(qV(b))}),[c,d,b]),null}function uY(a){var{legendPayload:b}=a,c=fs(),d=fw(gw);return(0,p.useLayoutEffect)(()=>"centric"!==d&&"radial"!==d?uW:(c(qU(b)),()=>{c(qV(b))}),[c,d,b]),null}var uZ=null!=(n=p["useId".toString()])?n:()=>{var[a]=p.useState(()=>eK("uid-"));return a},u$=(0,p.createContext)(void 0),u_=a=>{var b,c,{id:d,type:e,children:f}=a,g=(b="recharts-".concat(e),c=uZ(),d||(b?"".concat(b,"-").concat(c):c));return p.createElement(u$.Provider,{value:g},f(g))};function u0(a){var b=fs(),c=(0,p.useRef)(null);return(0,p.useLayoutEffect)(()=>{null===c.current?b(qz(a)):c.current!==a&&b(qA({prev:c.current,next:a})),c.current=a},[b,a]),(0,p.useLayoutEffect)(()=>()=>{c.current&&(b(qB(c.current)),c.current=null)},[b]),null}function u1(a){var b=fs();return(0,p.useLayoutEffect)(()=>(b(qC(a)),()=>{b(qD(a))}),[b,a]),null}var u2=a.i(78375),u3=["labelRef"];function u4(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function u5(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?u4(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):u4(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function u6(){return(u6=Object.assign.bind()).apply(null,arguments)}var u7=(0,p.createContext)(null),u8=a=>{var{x:b,y:c,width:d,height:e,children:f}=a,g=(0,p.useMemo)(()=>({x:b,y:c,width:d,height:e}),[b,c,d,e]);return p.createElement(u7.Provider,{value:g},f)},u9=()=>{var a=(0,p.useContext)(u7),b=gu();return a||b},va=(0,p.createContext)(null),vb=a=>null!=a&&"function"==typeof a,vc=a=>"cx"in a&&eH(a.cx),vd={offset:5};function ve(a){var b,c,d,e=sb(a,vd),{viewBox:f,position:g,value:h,children:i,content:j,className:k="",textBreakAll:l,labelRef:m}=e,n=(b=(0,p.useContext)(va),c=fw(nj),b||c),o=u9(),q=f||("center"===g?o:null!=n?n:o);if(!q||null==h&&null==i&&!(0,p.isValidElement)(j)&&"function"!=typeof j)return null;var r=u5(u5({},e),{},{viewBox:q});if((0,p.isValidElement)(j)){var{labelRef:s}=r,t=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(r,u3);return(0,p.cloneElement)(j,t)}if("function"==typeof j){if(d=(0,p.createElement)(j,r),(0,p.isValidElement)(d))return d}else d=(a=>{var{value:b,formatter:c}=a,d=null==a.children?b:a.children;return"function"==typeof c?c(d):d})(e);var u=vc(q),v=rD(e);if(u&&("insideStart"===g||"insideEnd"===g||"end"===g))return((a,b,c,d,e)=>{var f,g,{offset:h,className:i}=a,{cx:j,cy:k,innerRadius:l,outerRadius:m,startAngle:n,endAngle:o,clockWise:q}=e,r=(l+m)/2,s=eE(o-n)*Math.min(Math.abs(o-n),360),t=s>=0?1:-1;switch(b){case"insideStart":f=n+t*h,g=q;break;case"insideEnd":f=o-t*h,g=!q;break;case"end":f=o+t*h,g=q;break;default:throw Error("Unsupported position ".concat(b))}g=s<=0?g:!g;var u=fJ(j,k,r,f),v=fJ(j,k,r,f+(g?1:-1)*359),w="M".concat(u.x,",").concat(u.y,"\n    A").concat(r,",").concat(r,",0,1,").concat(+!g,",\n    ").concat(v.x,",").concat(v.y),x=null==a.id?eK("recharts-radial-line-"):a.id;return p.createElement("text",u6({},d,{dominantBaseline:"central",className:gc("recharts-radial-bar-label",i)}),p.createElement("defs",null,p.createElement("path",{id:x,d:w})),p.createElement("textPath",{xlinkHref:"#".concat(x)},c))})(e,g,d,v,q);var w=u?((a,b,c)=>{var{cx:d,cy:e,innerRadius:f,outerRadius:g,startAngle:h,endAngle:i}=a,j=(h+i)/2;if("outside"===c){var{x:k,y:l}=fJ(d,e,g+b,j);return{x:k,y:l,textAnchor:k>=d?"start":"end",verticalAnchor:"middle"}}if("center"===c)return{x:d,y:e,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===c)return{x:d,y:e,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===c)return{x:d,y:e,textAnchor:"middle",verticalAnchor:"end"};var{x:m,y:n}=fJ(d,e,(f+g)/2,j);return{x:m,y:n,textAnchor:"middle",verticalAnchor:"middle"}})(q,e.offset,e.position):((a,b)=>{var c,{parentViewBox:d,offset:e,position:f}=a;null==d||vc(d)||(c=d);var{x:g,y:h,width:i,height:j}=b,k=j>=0?1:-1,l=k*e,m=k>0?"end":"start",n=k>0?"start":"end",o=i>=0?1:-1,p=o*e,q=o>0?"end":"start",r=o>0?"start":"end";if("top"===f)return u5(u5({},{x:g+i/2,y:h-k*e,textAnchor:"middle",verticalAnchor:m}),c?{height:Math.max(h-c.y,0),width:i}:{});if("bottom"===f)return u5(u5({},{x:g+i/2,y:h+j+l,textAnchor:"middle",verticalAnchor:n}),c?{height:Math.max(c.y+c.height-(h+j),0),width:i}:{});if("left"===f){var s={x:g-p,y:h+j/2,textAnchor:q,verticalAnchor:"middle"};return u5(u5({},s),c?{width:Math.max(s.x-c.x,0),height:j}:{})}if("right"===f){var t={x:g+i+p,y:h+j/2,textAnchor:r,verticalAnchor:"middle"};return u5(u5({},t),c?{width:Math.max(c.x+c.width-t.x,0),height:j}:{})}var u=c?{width:i,height:j}:{};return"insideLeft"===f?u5({x:g+p,y:h+j/2,textAnchor:r,verticalAnchor:"middle"},u):"insideRight"===f?u5({x:g+i-p,y:h+j/2,textAnchor:q,verticalAnchor:"middle"},u):"insideTop"===f?u5({x:g+i/2,y:h+l,textAnchor:"middle",verticalAnchor:n},u):"insideBottom"===f?u5({x:g+i/2,y:h+j-l,textAnchor:"middle",verticalAnchor:m},u):"insideTopLeft"===f?u5({x:g+p,y:h+l,textAnchor:r,verticalAnchor:n},u):"insideTopRight"===f?u5({x:g+i-p,y:h+l,textAnchor:q,verticalAnchor:n},u):"insideBottomLeft"===f?u5({x:g+p,y:h+j-l,textAnchor:r,verticalAnchor:m},u):"insideBottomRight"===f?u5({x:g+i-p,y:h+j-l,textAnchor:q,verticalAnchor:m},u):f&&"object"==typeof f&&(eH(f.x)||eG(f.x))&&(eH(f.y)||eG(f.y))?u5({x:g+eL(f.x,i),y:h+eL(f.y,j),textAnchor:"end",verticalAnchor:"end"},u):u5({x:g+i/2,y:h+j/2,textAnchor:"middle",verticalAnchor:"middle"},u)})(e,q);return p.createElement(tD,u6({ref:m,className:gc("recharts-label",k)},v,w,{breakAll:l}),d)}function vf(a){var{label:b,labelRef:c}=a;return((a,b,c)=>{if(!a)return null;var d={viewBox:b,labelRef:c};return!0===a?p.createElement(ve,u6({key:"label-implicit"},d)):eI(a)?p.createElement(ve,u6({key:"label-implicit",value:a},d)):(0,p.isValidElement)(a)?a.type===ve?(0,p.cloneElement)(a,u5({key:"label-implicit"},d)):p.createElement(ve,u6({key:"label-implicit",content:a},d)):vb(a)?p.createElement(ve,u6({key:"label-implicit",content:a},d)):a&&"object"==typeof a?p.createElement(ve,u6({},a,{key:"label-implicit"},d)):null})(b,u9(),c)||null}ve.displayName="Label";var vg=["valueAccessor"],vh=["dataKey","clockWise","id","textBreakAll"];function vi(){return(vi=Object.assign.bind()).apply(null,arguments)}function vj(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var vk=a=>Array.isArray(a.value)?(0,u2.default)(a.value):a.value,vl=(0,p.createContext)(void 0),vm=vl.Provider,vn=(0,p.createContext)(void 0),vo=vn.Provider;function vp(a){var{valueAccessor:b=vk}=a,c=vj(a,vg),{dataKey:d,clockWise:e,id:f,textBreakAll:g}=c,h=vj(c,vh),i=(0,p.useContext)(vl),j=(0,p.useContext)(vn),k=i||j;return k&&k.length?p.createElement(sE,{className:"recharts-label-list"},k.map((a,e)=>{var i,j=null==d?b(a,e):fO(a&&a.payload,d),k=null==f?{}:{id:"".concat(f,"-").concat(e)};return p.createElement(ve,vi({key:"label-".concat(e)},rD(a),h,k,{fill:null!=(i=c.fill)?i:a.fill,parentViewBox:a.parentViewBox,value:j,textBreakAll:g,viewBox:a.viewBox,index:e}))})):null}function vq(a){var{label:b}=a;return b?!0===b?p.createElement(vp,{key:"labelList-implicit"}):p.isValidElement(b)||vb(b)?p.createElement(vp,{key:"labelList-implicit",content:b}):"object"==typeof b?p.createElement(vp,vi({key:"labelList-implicit"},b,{type:String(b.type)})):null:null}vp.displayName="LabelList";var vr=["onMouseEnter","onClick","onMouseLeave"],vs=["id"],vt=["id"];function vu(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function vv(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function vw(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?vv(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):vv(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function vx(){return(vx=Object.assign.bind()).apply(null,arguments)}function vy(a){var b=(0,p.useMemo)(()=>tK(a.children,tE),[a.children]),c=fw(c=>sA(c,a.id,b));return null==c?null:p.createElement(uY,{legendPayload:c})}function vz(a){var{dataKey:b,nameKey:c,sectors:d,stroke:e,strokeWidth:f,fill:g,name:h,hide:i,tooltipType:j}=a;return{dataDefinedOnItem:d.map(a=>a.tooltipPayload),positions:d.map(a=>a.tooltipPosition),settings:{stroke:e,strokeWidth:f,fill:g,dataKey:b,nameKey:c,name:fW(h,b),hide:i,type:j,color:g,unit:""}}}function vA(a){var{sectors:b,props:c,showLabels:d}=a,{label:e,labelLine:f,dataKey:g}=c;if(!d||!e||!b)return null;var h=rB(c),i=rC(e),j=rC(f),k="object"==typeof e&&"offsetRadius"in e&&"number"==typeof e.offsetRadius&&e.offsetRadius||20,l=b.map((a,b)=>{var c,d,l=(a.startAngle+a.endAngle)/2,m=fJ(a.cx,a.cy,a.outerRadius+k,l),n=vw(vw(vw(vw({},h),a),{},{stroke:"none"},i),{},{index:b,textAnchor:(c=m.x)>(d=a.cx)?"start":c<d?"end":"middle"},m),o=vw(vw(vw(vw({},h),a),{},{fill:"none",stroke:a.fill},j),{},{index:b,points:[fJ(a.cx,a.cy,a.outerRadius,l),m],key:"line"});return p.createElement(sE,{key:"label-".concat(a.startAngle,"-").concat(a.endAngle,"-").concat(a.midAngle,"-").concat(b)},f&&((a,b)=>{if(p.isValidElement(a))return p.cloneElement(a,b);if("function"==typeof a)return a(b);var c=gc("recharts-pie-label-line","boolean"!=typeof a?a.className:"");return p.createElement(td,vx({},b,{type:"linear",className:c}))})(f,o),((a,b,c)=>{if(p.isValidElement(a))return p.cloneElement(a,b);var d=c;if("function"==typeof a&&(d=a(b),p.isValidElement(d)))return d;var e=gc("recharts-pie-label-text",a&&"object"==typeof a&&"className"in a&&"string"==typeof a.className?a.className:"");return p.createElement(tD,vx({},b,{alignmentBaseline:"middle",className:e}),d)})(e,n,fO(a,g)))});return p.createElement(sE,{className:"recharts-pie-labels"},l)}function vB(a){var{sectors:b,props:c,showLabels:d}=a,{label:e}=c;return"object"==typeof e&&null!=e&&"position"in e?p.createElement(vq,{label:e}):p.createElement(vA,{sectors:b,props:c,showLabels:d})}function vC(a){var{sectors:b,activeShape:c,inactiveShape:d,allOtherPieProps:e}=a,f=fw(pY),{onMouseEnter:g,onClick:h,onMouseLeave:i}=e,j=vu(e,vr),k=uS(g,e.dataKey),l=uT(i),m=uU(h,e.dataKey);return null==b||0===b.length?null:p.createElement(p.Fragment,null,b.map((a,g)=>{if((null==a?void 0:a.startAngle)===0&&(null==a?void 0:a.endAngle)===0&&1!==b.length)return null;var h=c&&String(g)===f,i=h?c:f?d:null,n=vw(vw({},a),{},{stroke:a.stroke,tabIndex:-1,[f1]:g,[f2]:e.dataKey});return p.createElement(sE,vx({key:"sector-".concat(null==a?void 0:a.startAngle,"-").concat(null==a?void 0:a.endAngle,"-").concat(a.midAngle,"-").concat(g),tabIndex:-1,className:"recharts-pie-sector"},s5(j,a,g),{onMouseEnter:k(a,g),onMouseLeave:l(a,g),onClick:m(a,g)}),p.createElement(uR,vx({option:i,isActive:h,shapeType:"sector"},n)))}))}function vD(a){var{showLabels:b,sectors:c,children:d}=a,e=(0,p.useMemo)(()=>b&&c?c.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})):[],[c,b]);return p.createElement(vo,{value:b?e:void 0},d)}function vE(a){var{props:b,previousSectorsRef:c}=a,{sectors:d,isAnimationActive:e,animationBegin:f,animationDuration:g,animationEasing:h,activeShape:i,inactiveShape:j,onAnimationStart:k,onAnimationEnd:l}=b,m=t5(b,"recharts-pie-"),n=c.current,[o,q]=(0,p.useState)(!1),r=(0,p.useCallback)(()=>{"function"==typeof l&&l(),q(!1)},[l]),s=(0,p.useCallback)(()=>{"function"==typeof k&&k(),q(!0)},[k]);return p.createElement(vD,{showLabels:!o,sectors:d},p.createElement(t4,{animationId:m,begin:f,duration:g,isActive:e,easing:h,onAnimationStart:s,onAnimationEnd:r,key:m},a=>{var e=[],f=d&&d[0],g=null==f?void 0:f.startAngle;return null==d||d.forEach((b,c)=>{var d=n&&n[c],f=c>0?(0,eD.default)(b,"paddingAngle",0):0;if(d){var h=eN(d.endAngle-d.startAngle,b.endAngle-b.startAngle,a),i=vw(vw({},b),{},{startAngle:g+f,endAngle:g+h+f});e.push(i),g=i.endAngle}else{var{endAngle:j,startAngle:k}=b,l=eN(0,j-k,a),m=vw(vw({},b),{},{startAngle:g+f,endAngle:g+l+f});e.push(m),g=m.endAngle}}),c.current=e,p.createElement(sE,null,p.createElement(vC,{sectors:e,activeShape:i,inactiveShape:j,allOtherPieProps:b}))}),p.createElement(vB,{showLabels:!o,sectors:d,props:b}),b.children)}var vF={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!rn,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function vG(a){var{id:b}=a,c=vu(a,vs),{hide:d,className:e,rootTabIndex:f}=a,g=(0,p.useMemo)(()=>tK(a.children,tE),[a.children]),h=fw(a=>sB(a,b,g)),i=(0,p.useRef)(null),j=gc("recharts-pie",e);return d||null==h?(i.current=null,p.createElement(sE,{tabIndex:f,className:j})):p.createElement(p.Fragment,null,p.createElement(uV,{fn:vz,args:vw(vw({},a),{},{sectors:h})}),p.createElement(sE,{tabIndex:f,className:j},p.createElement(vE,{props:vw(vw({},c),{},{sectors:h}),previousSectorsRef:i})))}function vH(a){var b=sb(a,vF),{id:c}=b,d=vu(b,vt),e=rB(d);return p.createElement(u_,{id:c,type:"pie"},a=>p.createElement(p.Fragment,null,p.createElement(u1,{type:"pie",id:a,data:d.data,dataKey:d.dataKey,hide:d.hide,angleAxisId:0,radiusAxisId:0,name:d.name,nameKey:d.nameKey,tooltipType:d.tooltipType,legendType:d.legendType,fill:d.fill,cx:d.cx,cy:d.cy,startAngle:d.startAngle,endAngle:d.endAngle,paddingAngle:d.paddingAngle,minAngle:d.minAngle,innerRadius:d.innerRadius,outerRadius:d.outerRadius,cornerRadius:d.cornerRadius,presentationProps:e,maxRadius:b.maxRadius}),p.createElement(vy,vx({},d,{id:a})),p.createElement(vG,vx({},d,{id:a}))))}function vI(){return(vI=Object.assign.bind()).apply(null,arguments)}vH.displayName="Pie";var vJ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",responsive:!1},vK=(0,p.forwardRef)(function(a,b){var c,d=sb(a.categoricalChartProps,vJ),{chartName:e,defaultTooltipEventType:f,validateTooltipEventTypes:g,tooltipPayloadSearcher:h,categoricalChartProps:i}=a;return p.createElement(rq,{preloadedState:{options:{chartName:e,defaultTooltipEventType:f,validateTooltipEventTypes:g,tooltipPayloadSearcher:h,eventEmitter:void 0}},reduxStoreName:null!=(c=i.id)?c:e},p.createElement(rr,{chartData:i.data}),p.createElement(rs,{layout:d.layout,margin:d.margin}),p.createElement(rt,{accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className}),p.createElement(r9,vI({},d,{ref:b})))}),vL=["axis","item"],vM=(0,p.forwardRef)((a,b)=>p.createElement(vK,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vL,tooltipPayloadSearcher:eP,categoricalChartProps:a,ref:b})),vN=p,vO=["x","y"];function vP(){return(vP=Object.assign.bind()).apply(null,arguments)}function vQ(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function vR(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?vQ(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):vQ(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function vS(a,b){var{x:c,y:d}=a,e=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,vO),f=parseInt("".concat(c),10),g=parseInt("".concat(d),10),h=parseInt("".concat(b.height||e.height),10),i=parseInt("".concat(b.width||e.width),10);return vR(vR(vR(vR(vR({},b),e),f?{x:f}:{}),g?{y:g}:{}),{},{height:h,width:i,name:b.name,radius:b.radius})}function vT(a){return p.createElement(uR,vP({shapeType:"rectangle",propTransformer:vS,activeClassName:"recharts-active-bar"},a))}var vU=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(c,d)=>{if(eH(a))return a;var e=eH(c)||null==c;return e?a(c,d):(e||function(a,b){if(!a)throw Error("Invariant failed")}(!1),b)}},vV=["children"],vW=(0,p.createContext)({data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0});function vX(a){var{children:b}=a,c=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,vV);return p.createElement(vW.Provider,{value:c},b)}function vY(a,b){var c,d,e=fw(b=>nA(b,a)),f=fw(a=>nD(a,b)),g=null!=(c=null==e?void 0:e.allowDataOverflow)?c:ny.allowDataOverflow,h=null!=(d=null==f?void 0:f.allowDataOverflow)?d:nB.allowDataOverflow;return{needClip:g||h,needClipX:g,needClipY:h}}function vZ(a){var{xAxisId:b,yAxisId:c,clipPathId:d}=a,e=fw(r5),{needClipX:f,needClipY:g,needClip:h}=vY(b,c);if(!h)return null;var{x:i,y:j,width:k,height:l}=e;return p.createElement("clipPath",{id:"clipPath-".concat(d)},p.createElement("rect",{x:f?i:i-k/2,y:g?j:j-l/2,width:f?k:2*k,height:g?l:2*l}))}function v$(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function v_(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?v$(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):v$(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var v0=dJ([nK,(a,b,c,d,e)=>e],(a,b)=>a.filter(a=>"bar"===a.type).find(a=>a.id===b)),v1=dJ([v0],a=>null==a?void 0:a.maxBarSize),v2=(a,b,c)=>{var d=null!=c?c:a;if(null!=d)return eL(d,b,0)},v3=dJ([gw,nK,(a,b)=>b,(a,b,c)=>c,(a,b,c,d)=>d],(a,b,c,d,e)=>b.filter(b=>"horizontal"===a?b.xAxisId===c:b.yAxisId===d).filter(a=>a.isPanorama===e).filter(a=>!1===a.hide).filter(a=>"bar"===a.type)),v4=dJ([v3,a=>a.rootProps.barSize,(a,b,c)=>"horizontal"===gw(a)?oY(a,"xAxis",b):oY(a,"yAxis",c)],(a,b,c)=>{var d=a.filter(ns),e=a.filter(a=>null==a.stackId);return[...Object.entries(d.reduce((a,b)=>(a[b.stackId]||(a[b.stackId]=[]),a[b.stackId].push(b),a),{})).map(a=>{var[d,e]=a;return{stackId:d,dataKeys:e.map(a=>a.dataKey),barSize:v2(b,c,e[0].barSize)}}),...e.map(a=>({stackId:void 0,dataKeys:[a.dataKey].filter(a=>null!=a),barSize:v2(b,c,a.barSize)}))]}),v5=(a,b,c,d)=>{var e,f;return"horizontal"===gw(a)?(e=o3(a,"xAxis",b,d),f=o2(a,"xAxis",b,d)):(e=o3(a,"yAxis",c,d),f=o2(a,"yAxis",c,d)),fU(e,f)},v6=dJ([v4,mZ,a=>a.rootProps.barGap,m$,(a,b,c,d,e)=>{var f,g,h,i,j=v0(a,b,c,d,e);if(null!=j){var k=gw(a),l=mZ(a),{maxBarSize:m}=j;return"horizontal"===k?(h=o3(a,"xAxis",b,d),i=o2(a,"xAxis",b,d)):(h=o3(a,"yAxis",c,d),i=o2(a,"yAxis",c,d)),null!=(f=null!=(g=fU(h,i,!0))?g:null==m?l:m)?f:0}},v5,v1],(a,b,c,d,e,f,g)=>{var h=function(a,b,c,d,e){var f,g=d.length;if(!(g<1)){var h=eL(a,c,0,!0),i=[];if(gk(d[0].barSize)){var j=!1,k=c/g,l=d.reduce((a,b)=>a+(b.barSize||0),0);(l+=(g-1)*h)>=c&&(l-=(g-1)*h,h=0),l>=c&&k>0&&(j=!0,k*=.9,l=g*k);var m={offset:((c-l)/2|0)-h,size:0};f=d.reduce((a,b)=>{var c,d=[...a,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:m.offset+m.size+h,size:j?k:null!=(c=b.barSize)?c:0}}];return m=d[d.length-1].position,d},i)}else{var n=eL(b,c,0,!0);c-2*n-(g-1)*h<=0&&(h=0);var o=(c-2*n-(g-1)*h)/g;o>1&&(o>>=0);var p=gk(e)?Math.min(o,e):o;f=d.reduce((a,b,c)=>[...a,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:n+(o+h)*c+(o-p)/2,size:p}}],i)}return f}}(c,d,e!==f?e:f,a,null==g?b:g);return e!==f&&null!=h&&(h=h.map(a=>v_(v_({},a),{},{position:v_(v_({},a.position),{},{offset:a.position.offset-e/2})}))),h}),v7=dJ([v6,v0],(a,b)=>{if(null!=a&&null!=b){var c=a.find(a=>a.stackId===b.stackId&&null!=b.dataKey&&a.dataKeys.includes(b.dataKey));if(null!=c)return c.position}}),v8=dJ([(a,b,c,d)=>"horizontal"===gw(a)?n1(a,"yAxis",c,d):n1(a,"xAxis",b,d),v0],(a,b)=>{var c=nm(b);if(!a||null==c||null==b)return;var{stackId:d}=b;if(null!=d){var e=a[d];if(e){var{stackedData:f}=e;if(f)return f.find(a=>a.key===c)}}}),v9=dJ([f5,f7,(a,b,c,d)=>o3(a,"xAxis",b,d),(a,b,c,d)=>o3(a,"yAxis",c,d),(a,b,c,d)=>o2(a,"xAxis",b,d),(a,b,c,d)=>o2(a,"yAxis",c,d),v7,gw,kv,v5,v8,v0,(a,b,c,d,e,f)=>f],(a,b,c,d,e,f,g,h,i,j,k,l,m)=>{var n,{chartData:o,dataStartIndex:p,dataEndIndex:q}=i;if(null!=l&&null!=g&&null!=b&&("horizontal"===h||"vertical"===h)&&null!=c&&null!=d&&null!=e&&null!=f&&null!=j){var{data:r}=l;if(null!=(n=null!=r&&r.length>0?r:null==o?void 0:o.slice(p,q+1)))return function(a){var{layout:b,barSettings:{dataKey:c,minPointSize:d},pos:e,bandSize:f,xAxis:g,yAxis:h,xAxisTicks:i,yAxisTicks:j,stackedData:k,displayedData:l,offset:m,cells:n,parentViewBox:o}=a,p="horizontal"===b?h:g,q=k?p.scale.domain():null,r=(a=>{var{numericAxis:b}=a,c=b.scale.domain();if("number"===b.type){var d=Math.min(c[0],c[1]),e=Math.max(c[0],c[1]);return d<=0&&e>=0?0:e<0?e:d}return c[0]})({numericAxis:p});return l.map((a,l)=>{k?s=((a,b)=>{if(!b||2!==b.length||!eH(b[0])||!eH(b[1]))return a;var c=Math.min(b[0],b[1]),d=Math.max(b[0],b[1]),e=[a[0],a[1]];return(!eH(a[0])||a[0]<c)&&(e[0]=c),(!eH(a[1])||a[1]>d)&&(e[1]=d),e[0]>d&&(e[0]=d),e[1]<c&&(e[1]=c),e})(k[l],q):Array.isArray(s=fO(a,c))||(s=[r,s]);var p=vU(d,0)(s[1],l);if("horizontal"===b){var s,t,u,v,w,x,y,[z,A]=[h.scale(s[0]),h.scale(s[1])];t=fR({axis:g,ticks:i,bandSize:f,offset:e.offset,entry:a,index:l}),u=null!=(y=null!=A?A:z)?y:void 0,v=e.size;var B=z-A;if(w=eF(B)?0:B,x={x:t,y:m.top,width:v,height:m.height},Math.abs(p)>0&&Math.abs(w)<Math.abs(p)){var C=eE(w||p)*(Math.abs(p)-Math.abs(w));u-=C,w+=C}}else{var[D,E]=[g.scale(s[0]),g.scale(s[1])];if(t=D,u=fR({axis:h,ticks:j,bandSize:f,offset:e.offset,entry:a,index:l}),v=E-D,w=e.size,x={x:m.left,y:u,width:m.width,height:w},Math.abs(p)>0&&Math.abs(v)<Math.abs(p)){var F=eE(v||p)*(Math.abs(p)-Math.abs(v));v+=F}}return null==t||null==u||null==v||null==w?null:wg(wg({},a),{},{x:t,y:u,width:v,height:w,value:k?s:s[1],payload:a,background:x,tooltipPosition:{x:t+v/2,y:u+w/2},parentViewBox:o},n&&n[l]&&n[l].props)}).filter(Boolean)}({layout:h,barSettings:l,pos:g,parentViewBox:b,bandSize:j,xAxis:c,yAxis:d,xAxisTicks:e,yAxisTicks:f,stackedData:k,displayedData:n,offset:a,cells:m})}}),wa=["onMouseEnter","onMouseLeave","onClick"],wb=["value","background","tooltipPosition"],wc=["id"],wd=["onMouseEnter","onClick","onMouseLeave"];function we(){return(we=Object.assign.bind()).apply(null,arguments)}function wf(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function wg(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wf(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wf(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function wh(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function wi(a){var{dataKey:b,stroke:c,strokeWidth:d,fill:e,name:f,hide:g,unit:h}=a;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:c,strokeWidth:d,fill:e,dataKey:b,nameKey:void 0,name:fW(f,b),hide:g,type:a.tooltipType,color:a.fill,unit:h}}}function wj(a){var b=fw(pY),{data:c,dataKey:d,background:e,allOtherBarProps:f}=a,{onMouseEnter:g,onMouseLeave:h,onClick:i}=f,j=wh(f,wa),k=uS(g,d),l=uT(h),m=uU(i,d);if(!e||null==c)return null;var n=rC(e);return vN.createElement(vN.Fragment,null,c.map((a,c)=>{var{value:f,background:g,tooltipPosition:h}=a,i=wh(a,wb);if(!g)return null;var o=k(a,c),p=l(a,c),q=m(a,c),r=wg(wg(wg(wg(wg({option:e,isActive:String(c)===b},i),{},{fill:"#eee"},g),n),s5(j,a,c)),{},{onMouseEnter:o,onMouseLeave:p,onClick:q,dataKey:d,index:c,className:"recharts-bar-background-rectangle"});return vN.createElement(vT,we({key:"background-bar-".concat(c)},r))}))}function wk(a){var{showLabels:b,children:c,rects:d}=a,e=null==d?void 0:d.map(a=>{var b={x:a.x,y:a.y,width:a.width,height:a.height};return wg(wg({},b),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:b,fill:a.fill})});return vN.createElement(vm,{value:b?e:void 0},c)}function wl(a){var{shape:b,activeBar:c,baseProps:d,entry:e,index:f,dataKey:g}=a,h=fw(pY),i=fw(p$),j=c&&String(f)===h&&(null==i||g===i),k=j?c:b;return vN.createElement(vT,we({},d,{name:String(d.name)},e,{isActive:j,option:k,index:f,dataKey:g}))}function wm(a){var{shape:b,baseProps:c,entry:d,index:e,dataKey:f}=a;return vN.createElement(vT,we({},c,{name:String(c.name)},d,{isActive:!1,option:b,index:e,dataKey:f}))}function wn(a){var{data:b,props:c}=a,d=rB(c),{id:e}=d,f=wh(d,wc),{shape:g,dataKey:h,activeBar:i}=c,{onMouseEnter:j,onClick:k,onMouseLeave:l}=c,m=wh(c,wd),n=uS(j,h),o=uT(l),p=uU(k,h);return b?vN.createElement(vN.Fragment,null,b.map((a,b)=>vN.createElement(sE,we({key:"rectangle-".concat(null==a?void 0:a.x,"-").concat(null==a?void 0:a.y,"-").concat(null==a?void 0:a.value,"-").concat(b),className:"recharts-bar-rectangle"},s5(m,a,b),{onMouseEnter:n(a,b),onMouseLeave:o(a,b),onClick:p(a,b)}),i?vN.createElement(wl,{shape:g,activeBar:i,baseProps:f,entry:a,index:b,dataKey:h}):vN.createElement(wm,{shape:g,baseProps:f,entry:a,index:b,dataKey:h})))):null}function wo(a){var{props:b,previousRectanglesRef:c}=a,{data:d,layout:e,isAnimationActive:f,animationBegin:g,animationDuration:h,animationEasing:i,onAnimationEnd:j,onAnimationStart:k}=b,l=c.current,m=t5(b,"recharts-bar-"),[n,o]=(0,vN.useState)(!1),p=(0,vN.useCallback)(()=>{"function"==typeof j&&j(),o(!1)},[j]),q=(0,vN.useCallback)(()=>{"function"==typeof k&&k(),o(!0)},[k]);return vN.createElement(wk,{showLabels:!n,rects:d},vN.createElement(t4,{animationId:m,begin:g,duration:h,isActive:f,easing:i,onAnimationEnd:p,onAnimationStart:q,key:m},a=>{var f=1===a?d:null==d?void 0:d.map((b,c)=>{var d=l&&l[c];if(d)return wg(wg({},b),{},{x:eN(d.x,b.x,a),y:eN(d.y,b.y,a),width:eN(d.width,b.width,a),height:eN(d.height,b.height,a)});if("horizontal"===e){var f=eN(0,b.height,a);return wg(wg({},b),{},{y:b.y+b.height-f,height:f})}var g=eN(0,b.width,a);return wg(wg({},b),{},{width:g})});return(a>0&&(c.current=null!=f?f:null),null==f)?null:vN.createElement(sE,null,vN.createElement(wn,{props:b,data:f}))}),vN.createElement(vq,{label:b.label}),b.children)}function wp(a){var b=(0,vN.useRef)(null);return vN.createElement(wo,{previousRectanglesRef:b,props:a})}var wq=(a,b)=>{var c=Array.isArray(a.value)?a.value[1]:a.value;return{x:a.x,y:a.y,value:c,errorVal:fO(a,b)}};class wr extends vN.PureComponent{render(){var{hide:a,data:b,dataKey:c,className:d,xAxisId:e,yAxisId:f,needClip:g,background:h,id:i}=this.props;if(a||null==b)return null;var j=gc("recharts-bar",d);return vN.createElement(sE,{className:j,id:i},g&&vN.createElement("defs",null,vN.createElement(vZ,{clipPathId:i,xAxisId:e,yAxisId:f})),vN.createElement(sE,{className:"recharts-bar-rectangles",clipPath:g?"url(#clipPath-".concat(i,")"):void 0},vN.createElement(wj,{data:b,dataKey:c,background:h,allOtherBarProps:this.props}),vN.createElement(wp,this.props)))}}var ws={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!rn,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0};function wt(a){var b,{xAxisId:c,yAxisId:d,hide:e,legendType:f,minPointSize:g,activeBar:h,animationBegin:i,animationDuration:j,animationEasing:k,isAnimationActive:l}=a,{needClip:m}=vY(c,d),n=fw(gw),o=f9(),p=tK(a.children,tE),q=fw(b=>v9(b,c,d,o,a.id,p));if("vertical"!==n&&"horizontal"!==n)return null;var r=null==q?void 0:q[0];return b=null==r||null==r.height||null==r.width?0:"vertical"===n?r.height/2:r.width/2,vN.createElement(vX,{xAxisId:c,yAxisId:d,data:q,dataPointFormatter:wq,errorBarOffset:b},vN.createElement(wr,we({},a,{layout:n,needClip:m,data:q,xAxisId:c,yAxisId:d,hide:e,legendType:f,minPointSize:g,activeBar:h,animationBegin:i,animationDuration:j,animationEasing:k,isAnimationActive:l})))}var wu=vN.memo(function(a){var b=sb(a,ws),c=f9();return vN.createElement(u_,{id:b.id,type:"bar"},a=>{var d;return vN.createElement(vN.Fragment,null,vN.createElement(uX,{legendPayload:(a=>{var{dataKey:b,name:c,fill:d,legendType:e,hide:f}=a;return[{inactive:f,dataKey:b,type:e,color:d,value:fW(c,b),payload:a}]})(b)}),vN.createElement(uV,{fn:wi,args:b}),vN.createElement(u0,{type:"bar",id:a,data:void 0,xAxisId:b.xAxisId,yAxisId:b.yAxisId,zAxisId:0,dataKey:b.dataKey,stackId:null==(d=b.stackId)?void 0:String(d),hide:b.hide,barSize:b.barSize,minPointSize:b.minPointSize,maxBarSize:b.maxBarSize,isPanorama:c}),vN.createElement(wt,we({},b,{id:a})))})});function wv(a,b){for(var c in a)if(({}).hasOwnProperty.call(a,c)&&(!({}).hasOwnProperty.call(b,c)||a[c]!==b[c]))return!1;for(var d in b)if(({}).hasOwnProperty.call(b,d)&&!({}).hasOwnProperty.call(a,d))return!1;return!0}wu.displayName="Bar";class ww{static create(a){return new ww(a)}constructor(a){this.scale=a}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(a){var{bandAware:b,position:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==a){if(c)switch(c){case"start":default:return this.scale(a);case"middle":var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+d;case"end":var e=this.bandwidth?this.bandwidth():0;return this.scale(a)+e}if(b){var f=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+f}return this.scale(a)}}isInRange(a){var b=this.range(),c=b[0],d=b[b.length-1];return c<=d?a>=c&&a<=d:a>=d&&a<=c}}(m="symbol"==typeof(l=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(m="EPS","string"))?l:l+"")in ww?Object.defineProperty(ww,m,{value:1e-4,enumerable:!0,configurable:!0,writable:!0}):ww[m]=1e-4;var wx=function(a){var{width:b,height:c}=a,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(d%180+180)%180*Math.PI/180,f=Math.atan(c/b);return Math.abs(e>f&&e<Math.PI-f?c/Math.sin(e):b/Math.cos(e))};function wy(a,b,c){if(b<1)return[];if(1===b&&void 0===c)return a;for(var d=[],e=0;e<a.length;e+=b)if(void 0!==c&&!0!==c(a[e]))return;else d.push(a[e]);return d}function wz(a,b,c,d,e){if(a*b<a*d||a*b>a*e)return!1;var f=c();return a*(b-a*f/2-d)>=0&&a*(b+a*f/2-e)<=0}function wA(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function wB(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wA(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wA(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var wC=["axisLine","width","height","className","hide","ticks"],wD=["viewBox"],wE=["viewBox"];function wF(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function wG(){return(wG=Object.assign.bind()).apply(null,arguments)}function wH(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function wI(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wH(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wH(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var wJ={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function wK(a){var{x:b,y:c,width:d,height:e,orientation:f,mirror:g,axisLine:h,otherSvgProps:i}=a;if(!h)return null;var j=wI(wI(wI({},i),rB(h)),{},{fill:"none"});if("top"===f||"bottom"===f){var k=+("top"===f&&!g||"bottom"===f&&g);j=wI(wI({},j),{},{x1:b,y1:c+k*e,x2:b+d,y2:c+k*e})}else{var l=+("left"===f&&!g||"right"===f&&g);j=wI(wI({},j),{},{x1:b+l*d,y1:c,x2:b+l*d,y2:c+e})}return p.createElement("line",wG({},j,{className:gc("recharts-cartesian-axis-line",(0,eD.default)(h,"className"))}))}function wL(a){var b,{option:c,tickProps:d,value:e}=a,f=gc(d.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(c))b=p.cloneElement(c,wI(wI({},d),{},{className:f}));else if("function"==typeof c)b=c(wI(wI({},d),{},{className:f}));else{var g="recharts-cartesian-axis-tick-value";"boolean"!=typeof c&&(g=gc(g,null==c?void 0:c.className)),b=p.createElement(tD,wG({},d,{className:g}),e)}return b}function wM(a){var{ticks:b=[],tick:c,tickLine:d,stroke:e,tickFormatter:f,unit:g,padding:h,tickTextProps:i,orientation:j,mirror:k,x:l,y:m,width:n,height:o,tickSize:q,tickMargin:r,fontSize:s,letterSpacing:t,getTicksConfig:u,events:v}=a,w=function(a,b,c){var d,{tick:e,ticks:f,viewBox:g,minTickGap:h,orientation:i,interval:j,tickFormatter:k,unit:l,angle:m}=a;if(!f||!f.length||!e)return[];if(eH(j)||rn)return null!=(d=wy(f,(eH(j)?j:0)+1))?d:[];var n="top"===i||"bottom"===i?"width":"height",o=l&&"width"===n?tk(l,{fontSize:b,letterSpacing:c}):{width:0,height:0},p=(a,d)=>{var e,f="function"==typeof k?k(a.value,d):a.value;return"width"===n?(e=tk(f,{fontSize:b,letterSpacing:c}),wx({width:e.width+o.width,height:e.height+o.height},m)):tk(f,{fontSize:b,letterSpacing:c})[n]},q=f.length>=2?eE(f[1].coordinate-f[0].coordinate):1,r=function(a,b,c){var d="width"===c,{x:e,y:f,width:g,height:h}=a;return 1===b?{start:d?e:f,end:d?e+g:f+h}:{start:d?e+g:f+h,end:d?e:f}}(g,q,n);return"equidistantPreserveStart"===j?function(a,b,c,d,e){for(var f,g=(d||[]).slice(),{start:h,end:i}=b,j=0,k=1,l=h;k<=g.length;)if(f=function(){var b,f=null==d?void 0:d[j];if(void 0===f)return{v:wy(d,k)};var g=j,m=()=>(void 0===b&&(b=c(f,g)),b),n=f.coordinate,o=0===j||wz(a,n,m,l,i);o||(j=0,l=h,k+=1),o&&(l=n+a*(m()/2+e),j+=k)}())return f.v;return[]}(q,r,p,f,h):("preserveStart"===j||"preserveStartEnd"===j?function(a,b,c,d,e,f){var g=(d||[]).slice(),h=g.length,{start:i,end:j}=b;if(f){var k=d[h-1],l=c(k,h-1),m=a*(k.coordinate+a*l/2-j);g[h-1]=k=wB(wB({},k),{},{tickCoord:m>0?k.coordinate-m*a:k.coordinate}),wz(a,k.tickCoord,()=>l,i,j)&&(j=k.tickCoord-a*(l/2+e),g[h-1]=wB(wB({},k),{},{isShow:!0}))}for(var n=f?h-1:h,o=function(b){var d,f=g[b],h=()=>(void 0===d&&(d=c(f,b)),d);if(0===b){var k=a*(f.coordinate-a*h()/2-i);g[b]=f=wB(wB({},f),{},{tickCoord:k<0?f.coordinate-k*a:f.coordinate})}else g[b]=f=wB(wB({},f),{},{tickCoord:f.coordinate});wz(a,f.tickCoord,h,i,j)&&(i=f.tickCoord+a*(h()/2+e),g[b]=wB(wB({},f),{},{isShow:!0}))},p=0;p<n;p++)o(p);return g}(q,r,p,f,h,"preserveStartEnd"===j):function(a,b,c,d,e){for(var f=(d||[]).slice(),g=f.length,{start:h}=b,{end:i}=b,j=function(b){var d,j=f[b],k=()=>(void 0===d&&(d=c(j,b)),d);if(b===g-1){var l=a*(j.coordinate+a*k()/2-i);f[b]=j=wB(wB({},j),{},{tickCoord:l>0?j.coordinate-l*a:j.coordinate})}else f[b]=j=wB(wB({},j),{},{tickCoord:j.coordinate});wz(a,j.tickCoord,k,h,i)&&(i=j.tickCoord-a*(k()/2+e),f[b]=wB(wB({},j),{},{isShow:!0}))},k=g-1;k>=0;k--)j(k);return f}(q,r,p,f,h)).filter(a=>a.isShow)}(wI(wI({},u),{},{ticks:b}),s,t),x=function(a,b){switch(a){case"left":return b?"start":"end";case"right":return b?"end":"start";default:return"middle"}}(j,k),y=function(a,b){switch(a){case"left":case"right":return"middle";case"top":return b?"start":"end";default:return b?"end":"start"}}(j,k),z=rB(u),A=rC(c),B={};"object"==typeof d&&(B=d);var C=wI(wI({},z),{},{fill:"none"},B),D=w.map((a,b)=>{var{line:s,tick:t}=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p=h?-1:1,q=a.tickSize||g,r=eH(a.tickCoord)?a.tickCoord:a.coordinate;switch(f){case"top":j=k=a.coordinate,o=(l=(m=c+!h*e)-p*q)-p*i,n=r;break;case"left":l=m=a.coordinate,n=(j=(k=b+!h*d)-p*q)-p*i,o=r;break;case"right":l=m=a.coordinate,n=(j=(k=b+h*d)+p*q)+p*i,o=r;break;default:j=k=a.coordinate,o=(l=(m=c+h*e)+p*q)+p*i,n=r}return{line:{x1:j,y1:l,x2:k,y2:m},tick:{x:n,y:o}}}(a,l,m,n,o,j,q,k,r),u=wI(wI(wI(wI({textAnchor:x,verticalAnchor:y},z),{},{stroke:"none",fill:e},A),t),{},{index:b,payload:a,visibleTicksCount:w.length,tickFormatter:f,padding:h},i);return p.createElement(sE,wG({className:"recharts-cartesian-axis-tick",key:"tick-".concat(a.value,"-").concat(a.coordinate,"-").concat(a.tickCoord)},s5(v,a,b)),d&&p.createElement("line",wG({},C,s,{className:gc("recharts-cartesian-axis-tick-line",(0,eD.default)(d,"className"))})),c&&p.createElement(wL,{option:c,tickProps:u,value:"".concat("function"==typeof f?f(a.value,b):a.value).concat(g||"")}))});return D.length>0?p.createElement("g",{className:"recharts-cartesian-axis-ticks"},D):null}var wN=(0,p.forwardRef)((a,b)=>{var{axisLine:c,width:d,height:e,className:f,hide:g,ticks:h}=a,i=wF(a,wC),[j,k]=(0,p.useState)(""),[l,m]=(0,p.useState)(""),n=(0,p.useRef)(null);(0,p.useImperativeHandle)(b,()=>({getCalculatedWidth:()=>{var b;return(a=>{var{ticks:b,label:c,labelGapWithTick:d=5,tickSize:e=0,tickMargin:f=0}=a,g=0;if(b){Array.from(b).forEach(a=>{if(a){var b=a.getBoundingClientRect();b.width>g&&(g=b.width)}});var h=c?c.getBoundingClientRect().width:0;return Math.round(g+(e+f)+h+(c?d:0))}return 0})({ticks:n.current,label:null==(b=a.labelRef)?void 0:b.current,labelGapWithTick:5,tickSize:a.tickSize,tickMargin:a.tickMargin})}}));var o=(0,p.useCallback)(a=>{if(a){var b=a.getElementsByClassName("recharts-cartesian-axis-tick-value");n.current=b;var c=b[0];if(c){var d=window.getComputedStyle(c),e=d.fontSize,f=d.letterSpacing;(e!==j||f!==l)&&(k(e),m(f))}}},[j,l]);return g||null!=d&&d<=0||null!=e&&e<=0?null:p.createElement(sE,{className:gc("recharts-cartesian-axis",f),ref:o},p.createElement(wK,{x:a.x,y:a.y,width:d,height:e,orientation:a.orientation,mirror:a.mirror,axisLine:c,otherSvgProps:rB(a)}),p.createElement(wM,{ticks:h,tick:a.tick,tickLine:a.tickLine,stroke:a.stroke,tickFormatter:a.tickFormatter,unit:a.unit,padding:a.padding,tickTextProps:a.tickTextProps,orientation:a.orientation,mirror:a.mirror,x:a.x,y:a.y,width:a.width,height:a.height,tickSize:a.tickSize,tickMargin:a.tickMargin,fontSize:j,letterSpacing:l,getTicksConfig:a,events:i}),p.createElement(u8,{x:a.x,y:a.y,width:a.width,height:a.height},p.createElement(vf,{label:a.label,labelRef:a.labelRef}),a.children))}),wO=p.memo(wN,(a,b)=>{var{viewBox:c}=a,d=wF(a,wD),{viewBox:e}=b,f=wF(b,wE);return wv(c,e)&&wv(d,f)}),wP=p.forwardRef((a,b)=>{var c=sb(a,wJ);return p.createElement(wO,wG({},c,{ref:b}))});wP.displayName="CartesianAxis";var wQ=["dangerouslySetInnerHTML","ticks"],wR=["id"],wS=["domain"],wT=["domain"];function wU(){return(wU=Object.assign.bind()).apply(null,arguments)}function wV(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function wW(a){var b=fs();return(0,p.useLayoutEffect)(()=>(b(qq(a)),()=>{b(qr(a))}),[a,b]),null}var wX=a=>{var{xAxisId:b,className:c}=a,d=fw(f7),e=f9(),f="xAxis",g=fw(a=>oL(a,f,b,e)),h=fw(a=>o1(a,f,b,e)),i=fw(a=>oS(a,b)),j=fw(a=>oV(a,b)),k=fw(a=>nz(a,b));if(null==i||null==j||null==k)return null;var{dangerouslySetInnerHTML:l,ticks:m}=a,n=wV(a,wQ),{id:o}=k,q=wV(k,wR);return p.createElement(wP,wU({},n,q,{scale:g,x:j.x,y:j.y,width:i.width,height:i.height,className:gc("recharts-".concat(f," ").concat(f),c),viewBox:d,ticks:h}))},wY={allowDataOverflow:ny.allowDataOverflow,allowDecimals:ny.allowDecimals,allowDuplicatedCategory:ny.allowDuplicatedCategory,height:ny.height,hide:!1,mirror:ny.mirror,orientation:ny.orientation,padding:ny.padding,reversed:ny.reversed,scale:ny.scale,tickCount:ny.tickCount,type:ny.type,xAxisId:0},wZ=p.memo(a=>{var b,c,d,e,f,g=sb(a,wY);return p.createElement(p.Fragment,null,p.createElement(wW,{interval:null!=(b=g.interval)?b:"preserveEnd",id:g.xAxisId,scale:g.scale,type:g.type,padding:g.padding,allowDataOverflow:g.allowDataOverflow,domain:g.domain,dataKey:g.dataKey,allowDuplicatedCategory:g.allowDuplicatedCategory,allowDecimals:g.allowDecimals,tickCount:g.tickCount,includeHidden:null!=(c=g.includeHidden)&&c,reversed:g.reversed,ticks:g.ticks,height:g.height,orientation:g.orientation,mirror:g.mirror,hide:g.hide,unit:g.unit,name:g.name,angle:null!=(d=g.angle)?d:0,minTickGap:null!=(e=g.minTickGap)?e:5,tick:null==(f=g.tick)||f,tickFormatter:g.tickFormatter}),p.createElement(wX,g))},(a,b)=>{var{domain:c}=a,d=wV(a,wS),{domain:e}=b;return!!wv(d,wV(b,wT))&&(Array.isArray(c)&&2===c.length&&Array.isArray(e)&&2===e.length?c[0]===e[0]&&c[1]===e[1]:wv({domain:c},{domain:e}))});wZ.displayName="XAxis";var w$=["dangerouslySetInnerHTML","ticks"],w_=["id"],w0=["domain"],w1=["domain"];function w2(){return(w2=Object.assign.bind()).apply(null,arguments)}function w3(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function w4(a){var b=fs();return(0,p.useLayoutEffect)(()=>(b(qs(a)),()=>{b(qt(a))}),[a,b]),null}var w5=a=>{var{yAxisId:b,className:c,width:d,label:e}=a,f=(0,p.useRef)(null),g=(0,p.useRef)(null),h=fw(f7),i=f9(),j=fs(),k="yAxis",l=fw(a=>oL(a,k,b,i)),m=fw(a=>oX(a,b)),n=fw(a=>oW(a,b)),o=fw(a=>o1(a,k,b,i)),q=fw(a=>nC(a,b));if((0,p.useLayoutEffect)(()=>{if(!("auto"!==d||!m||vb(e)||(0,p.isValidElement)(e))&&null!=q){var a=f.current;if(a){var c=a.getCalculatedWidth();Math.round(m.width)!==Math.round(c)&&j(qw({id:b,width:c}))}}},[o,m,j,e,b,d,q]),null==m||null==n||null==q)return null;var{dangerouslySetInnerHTML:r,ticks:s}=a,t=w3(a,w$),{id:u}=q,v=w3(q,w_);return p.createElement(wP,w2({},t,v,{ref:f,labelRef:g,scale:l,x:n.x,y:n.y,tickTextProps:"auto"===d?{width:void 0}:{width:d},width:m.width,height:m.height,className:gc("recharts-".concat(k," ").concat(k),c),viewBox:h,ticks:o}))},w6={allowDataOverflow:nB.allowDataOverflow,allowDecimals:nB.allowDecimals,allowDuplicatedCategory:nB.allowDuplicatedCategory,hide:!1,mirror:nB.mirror,orientation:nB.orientation,padding:nB.padding,reversed:nB.reversed,scale:nB.scale,tickCount:nB.tickCount,type:nB.type,width:nB.width,yAxisId:0},w7=p.memo(a=>{var b,c,d,e,f,g=sb(a,w6);return p.createElement(p.Fragment,null,p.createElement(w4,{interval:null!=(b=g.interval)?b:"preserveEnd",id:g.yAxisId,scale:g.scale,type:g.type,domain:g.domain,allowDataOverflow:g.allowDataOverflow,dataKey:g.dataKey,allowDuplicatedCategory:g.allowDuplicatedCategory,allowDecimals:g.allowDecimals,tickCount:g.tickCount,padding:g.padding,includeHidden:null!=(c=g.includeHidden)&&c,reversed:g.reversed,ticks:g.ticks,width:g.width,orientation:g.orientation,mirror:g.mirror,hide:g.hide,unit:g.unit,name:g.name,angle:null!=(d=g.angle)?d:0,minTickGap:null!=(e=g.minTickGap)?e:5,tick:null==(f=g.tick)||f,tickFormatter:g.tickFormatter}),p.createElement(w5,g))},(a,b)=>{var{domain:c}=a,d=w3(a,w0),{domain:e}=b;return!!wv(d,w3(b,w1))&&(Array.isArray(c)&&2===c.length&&Array.isArray(e)&&2===e.length?c[0]===e[0]&&c[1]===e[1]:wv({domain:c},{domain:e}))});w7.displayName="YAxis";var w8=a.i(35112);function w9(){return(w9=Object.assign.bind()).apply(null,arguments)}function xa(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xb(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xa(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xa(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xc(a){return Array.isArray(a)&&eI(a[0])&&eI(a[1])?a.join(" ~ "):a}var xd=a=>{var{separator:b=" : ",contentStyle:c={},itemStyle:d={},labelStyle:e={},payload:f,formatter:g,itemSorter:h,wrapperClassName:i,labelClassName:j,label:k,labelFormatter:l,accessibilityLayer:m=!1}=a,n=xb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},c),o=xb({margin:0},e),q=null!=k,r=q?k:"",s=gc("recharts-default-tooltip",i),t=gc("recharts-tooltip-label",j);return q&&l&&null!=f&&(r=l(k,f)),p.createElement("div",w9({className:s,style:n},m?{role:"status","aria-live":"assertive"}:{}),p.createElement("p",{className:t,style:o},p.isValidElement(r)?r:"".concat(r)),(()=>{if(f&&f.length){var a=(h?(0,fx.default)(f,h):f).map((a,c)=>{if("none"===a.type)return null;var e=a.formatter||g||xc,{value:h,name:i}=a,j=h,k=i;if(e){var l=e(h,i,a,c,f);if(Array.isArray(l))[j,k]=l;else{if(null==l)return null;j=l}}var m=xb({display:"block",paddingTop:4,paddingBottom:4,color:a.color||"#000"},d);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(c),style:m},eI(k)?p.createElement("span",{className:"recharts-tooltip-item-name"},k):null,eI(k)?p.createElement("span",{className:"recharts-tooltip-item-separator"},b):null,p.createElement("span",{className:"recharts-tooltip-item-value"},j),p.createElement("span",{className:"recharts-tooltip-item-unit"},a.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},a)}return null})())},xe=p,xf="recharts-tooltip-wrapper",xg={visibility:"hidden"};function xh(a){var{allowEscapeViewBox:b,coordinate:c,key:d,offsetTopLeft:e,position:f,reverseDirection:g,tooltipDimension:h,viewBox:i,viewBoxDimension:j}=a;if(f&&eH(f[d]))return f[d];var k=c[d]-h-(e>0?e:0),l=c[d]+e;if(b[d])return g[d]?k:l;var m=i[d];return null==m?0:g[d]?k<m?Math.max(l,m):Math.max(k,m):null==j?0:l+h>m+j?Math.max(k,m):Math.max(l,m)}function xi(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xj(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xi(Object(c),!0).forEach(function(b){xk(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xi(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xk(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class xl extends xe.PureComponent{constructor(){super(...arguments),xk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xk(this,"handleKeyDown",a=>{if("Escape"===a.key){var b,c,d,e;this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!=(b=null==(c=this.props.coordinate)?void 0:c.x)?b:0,y:null!=(d=null==(e=this.props.coordinate)?void 0:e.y)?d:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var a,b;this.state.dismissed&&((null==(a=this.props.coordinate)?void 0:a.x)!==this.state.dismissedAtCoordinate.x||(null==(b=this.props.coordinate)?void 0:b.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:a,allowEscapeViewBox:b,animationDuration:c,animationEasing:d,children:e,coordinate:f,hasPayload:g,isAnimationActive:h,offset:i,position:j,reverseDirection:k,useTranslate3d:l,viewBox:m,wrapperStyle:n,lastBoundingBox:o,innerRef:p,hasPortalFromProps:q}=this.props,{cssClasses:r,cssProperties:s}=function(a){var b,c,d,{allowEscapeViewBox:e,coordinate:f,offsetTopLeft:g,position:h,reverseDirection:i,tooltipBox:j,useTranslate3d:k,viewBox:l}=a;return{cssProperties:b=j.height>0&&j.width>0&&f?function(a){var{translateX:b,translateY:c,useTranslate3d:d}=a;return{transform:d?"translate3d(".concat(b,"px, ").concat(c,"px, 0)"):"translate(".concat(b,"px, ").concat(c,"px)")}}({translateX:c=xh({allowEscapeViewBox:e,coordinate:f,key:"x",offsetTopLeft:g,position:h,reverseDirection:i,tooltipDimension:j.width,viewBox:l,viewBoxDimension:l.width}),translateY:d=xh({allowEscapeViewBox:e,coordinate:f,key:"y",offsetTopLeft:g,position:h,reverseDirection:i,tooltipDimension:j.height,viewBox:l,viewBoxDimension:l.height}),useTranslate3d:k}):xg,cssClasses:function(a){var{coordinate:b,translateX:c,translateY:d}=a;return gc(xf,{["".concat(xf,"-right")]:eH(c)&&b&&eH(b.x)&&c>=b.x,["".concat(xf,"-left")]:eH(c)&&b&&eH(b.x)&&c<b.x,["".concat(xf,"-bottom")]:eH(d)&&b&&eH(b.y)&&d>=b.y,["".concat(xf,"-top")]:eH(d)&&b&&eH(b.y)&&d<b.y})}({translateX:c,translateY:d,coordinate:f})}}({allowEscapeViewBox:b,coordinate:f,offsetTopLeft:i,position:j,reverseDirection:k,tooltipBox:{height:o.height,width:o.width},useTranslate3d:l,viewBox:m}),t=q?{}:xj(xj({transition:h&&a?"transform ".concat(c,"ms ").concat(d):void 0},s),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&g?"visible":"hidden",position:"absolute",top:0,left:0}),u=xj(xj({},t),{},{visibility:!this.state.dismissed&&a&&g?"visible":"hidden"},n);return xe.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:r,style:u,ref:p},e)}}var xm=a.i(53451);function xn(a,b,c){return!0===b?(0,xm.default)(a,c):"function"==typeof b?(0,xm.default)(a,b):a}function xo(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[b,c]=(0,p.useState)({height:0,left:0,top:0,width:0}),d=(0,p.useCallback)(a=>{if(null!=a){var d=a.getBoundingClientRect(),e={height:d.height,left:d.left,top:d.top,width:d.width};(Math.abs(e.height-b.height)>1||Math.abs(e.left-b.left)>1||Math.abs(e.top-b.top)>1||Math.abs(e.width-b.width)>1)&&c({height:e.height,left:e.left,top:e.top,width:e.width})}},[b.width,b.height,b.top,b.left,...a]);return[b,d]}var xp=["x","y","top","left","width","height","className"];function xq(){return(xq=Object.assign.bind()).apply(null,arguments)}function xr(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}var xs=a=>{var{x:b=0,y:c=0,top:d=0,left:e=0,width:f=0,height:g=0,className:h}=a,i=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xr(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xr(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({x:b,y:c,top:d,left:e,width:f,height:g},function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,xp));return eH(b)&&eH(c)&&eH(f)&&eH(g)&&eH(d)&&eH(e)?p.createElement("path",xq({},rD(i),{className:gc("recharts-cross",h),d:"M".concat(b,",").concat(d,"v").concat(g,"M").concat(e,",").concat(c,"h").concat(f)})):null};function xt(a){var{cx:b,cy:c,radius:d,startAngle:e,endAngle:f}=a;return{points:[fJ(b,c,d,e),fJ(b,c,d,f)],cx:b,cy:c,radius:d,startAngle:e,endAngle:f}}function xu(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xv(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xu(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xu(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xw(){return(xw=Object.assign.bind()).apply(null,arguments)}function xx(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xy(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xx(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xx(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xz(a){var b,c,d,{coordinate:e,payload:f,index:g,offset:h,tooltipAxisBandSize:i,layout:j,cursor:k,tooltipEventType:l,chartName:m}=a;if(!k||!e||"ScatterChart"!==m&&"axis"!==l)return null;if("ScatterChart"===m)c=e,d=xs;else if("BarChart"===m)b=i/2,c={stroke:"none",fill:"#ccc",x:"horizontal"===j?e.x-b:h.left+.5,y:"horizontal"===j?h.top+.5:e.y-b,width:"horizontal"===j?i:h.width-1,height:"horizontal"===j?h.height-1:i},d=ue;else if("radial"===j){var{cx:n,cy:o,radius:q,startAngle:r,endAngle:s}=xt(e);c={cx:n,cy:o,startAngle:r,endAngle:s,innerRadius:q,outerRadius:q},d=up}else c={points:function(a,b,c){var d,e,f,g;if("horizontal"===a)f=d=b.x,e=c.top,g=c.top+c.height;else if("vertical"===a)g=e=b.y,d=c.left,f=c.left+c.width;else if(null!=b.cx&&null!=b.cy)if("centric"!==a)return xt(b);else{var{cx:h,cy:i,innerRadius:j,outerRadius:k,angle:l}=b,m=fJ(h,i,j,l),n=fJ(h,i,k,l);d=m.x,e=m.y,f=n.x,g=n.y}return[{x:d,y:e},{x:f,y:g}]}(j,e,h)},d=td;var t="object"==typeof k&&"className"in k?k.className:void 0,u=xy(xy(xy(xy({stroke:"#ccc",pointerEvents:"none"},h),c),rC(k)),{},{payload:f,payloadIndex:g,className:gc("recharts-tooltip-cursor",t)});return(0,p.isValidElement)(k)?(0,p.cloneElement)(k,u):(0,p.createElement)(d,u)}function xA(a){var b,c,d,e,f=(b=fw(np),c=fw(pT),d=fw(pQ),fU(xv(xv({},b),{},{scale:d}),c)),g=null!=(e=fw(f5))?e:gv,h=fw(gw),i=fw(m0);return p.createElement(xz,xw({},a,{coordinate:a.coordinate,index:a.index,payload:a.payload,offset:g,layout:h,tooltipAxisBandSize:f,chartName:i}))}function xB(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xC(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xB(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xB(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xD(a){return a.dataKey}var xE=[],xF={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!rn,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function xG(a){var b,c,d,e,f,g,h,i,j=sb(a,xF),{active:k,allowEscapeViewBox:l,animationDuration:m,animationEasing:n,content:o,filterNull:q,isAnimationActive:r,offset:s,payloadUniqBy:t,position:u,reverseDirection:v,useTranslate3d:w,wrapperStyle:x,cursor:y,shared:z,trigger:A,defaultIndex:B,portal:C,axisId:D}=j,E=fs(),F="number"==typeof B?String(B):B;(0,p.useEffect)(()=>{E(e4({shared:z,trigger:A,axisId:D,active:k,defaultIndex:F}))},[E,z,A,D,k,F]);var G=gu(),H=rv(),I=fw(a=>o9(a,z)),{activeIndex:J,isActive:K}=fw(a=>qf(a,I,A,F)),L=fw(a=>qe(a,I,A,F)),M=fw(a=>qd(a,I,A,F)),N=fw(a=>qc(a,I,A,F)),O=(0,p.useContext)(rV),P=null!=k?k:K,[Q,R]=xo([L,P]),S="axis"===I?M:void 0;b=fw(a=>((a,b,c)=>{if(null!=b){var d=pi(a);return"axis"===b?"hover"===c?d.axisInteraction.hover.dataKey:d.axisInteraction.click.dataKey:"hover"===c?d.itemInteraction.hover.dataKey:d.itemInteraction.click.dataKey}})(a,I,A)),c=fw(m3),d=fw(m1),e=fw(m2),g=null==(f=fw(rQ))?void 0:f.active,h=gu(),(0,p.useEffect)(()=>{if(!g&&null!=d&&null!=c){var a=fb({active:P,coordinate:N,dataKey:b,index:J,label:"number"==typeof S?String(S):S,sourceViewBox:h});rN.emit(rO,d,a,c)}},[g,N,b,J,S,c,d,e,P,h]);var T=null!=C?C:O;if(null==T)return null;var U=null!=L?L:xE;P||(U=xE),q&&U.length&&(U=xn(L.filter(a=>null!=a.value&&(!0!==a.hide||j.includeHidden)),t,xD));var V=U.length>0,W=p.createElement(xl,{allowEscapeViewBox:l,animationDuration:m,animationEasing:n,isAnimationActive:r,active:P,coordinate:N,hasPayload:V,offset:s,position:u,reverseDirection:v,useTranslate3d:w,viewBox:G,wrapperStyle:x,lastBoundingBox:Q,innerRef:R,hasPortalFromProps:!!C},(i=xC(xC({},j),{},{payload:U,label:S,active:P,coordinate:N,accessibilityLayer:H}),p.isValidElement(o)?p.cloneElement(o,i):"function"==typeof o?p.createElement(o,i):p.createElement(xd,i)));return p.createElement(p.Fragment,null,(0,w8.createPortal)(W,T),P&&p.createElement(xA,{cursor:y,tooltipEventType:I,coordinate:N,payload:L,index:J}))}var xH=p,xI=p;function xJ(){return(xJ=Object.assign.bind()).apply(null,arguments)}function xK(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xL(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class xM extends xI.PureComponent{renderIcon(a,b){var{inactiveColor:c}=this.props,d=32/6,e=32/3,f=a.inactive?c:a.color,g=null!=b?b:a.type;if("none"===g)return null;if("plainline"===g)return xI.createElement("line",{strokeWidth:4,fill:"none",stroke:f,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===g)return xI.createElement("path",{strokeWidth:4,fill:"none",stroke:f,d:"M0,".concat(16,"h").concat(e,"\n            A").concat(d,",").concat(d,",0,1,1,").concat(2*e,",").concat(16,"\n            H").concat(32,"M").concat(2*e,",").concat(16,"\n            A").concat(d,",").concat(d,",0,1,1,").concat(e,",").concat(16),className:"recharts-legend-icon"});if("rect"===g)return xI.createElement("path",{stroke:"none",fill:f,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(xI.isValidElement(a.legendIcon)){var h=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xK(Object(c),!0).forEach(function(b){xL(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xK(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},a);return delete h.legendIcon,xI.cloneElement(a.legendIcon,h)}return xI.createElement(uL,{fill:f,cx:16,cy:16,size:32,sizeType:"diameter",type:g})}renderItems(){var{payload:a,iconSize:b,layout:c,formatter:d,inactiveColor:e,iconType:f}=this.props,g={x:0,y:0,width:32,height:32},h={display:"horizontal"===c?"inline-block":"block",marginRight:10},i={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map((a,c)=>{var j=a.formatter||d,k=gc({"recharts-legend-item":!0,["legend-item-".concat(c)]:!0,inactive:a.inactive});if("none"===a.type)return null;var l=a.inactive?e:a.color,m=j?j(a.value,a,c):a.value;return xI.createElement("li",xJ({className:k,style:h,key:"legend-item-".concat(c)},s5(this.props,a,c)),xI.createElement(rG,{width:b,height:b,viewBox:g,style:i,"aria-label":"".concat(m," legend icon")},this.renderIcon(a,f)),xI.createElement("span",{className:"recharts-legend-item-text",style:{color:l}},m))})}render(){var{payload:a,layout:b,align:c}=this.props;return a&&a.length?xI.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===b?c:"left"}},this.renderItems()):null}}xL(xM,"displayName","Legend"),xL(xM,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var xN=["contextPayload"];function xO(){return(xO=Object.assign.bind()).apply(null,arguments)}function xP(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xQ(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?xP(Object(c),!0).forEach(function(b){xR(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):xP(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function xR(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function xS(a){return a.value}function xT(a){var{contextPayload:b}=a,c=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,xN),d=xn(b,a.payloadUniqBy,xS),e=xQ(xQ({},c),{},{payload:d});return xH.isValidElement(a.content)?xH.cloneElement(a.content,e):"function"==typeof a.content?xH.createElement(a.content,e):xH.createElement(xM,e)}function xU(a){var b=fs();return(0,xH.useEffect)(()=>{b(qT(a))},[b,a]),null}function xV(a){var b=fs();return(0,xH.useEffect)(()=>(b(qS(a)),()=>{b(qS({width:0,height:0}))}),[b,a]),null}function xW(a){var b=fw(fz),c=(0,p.useContext)(rW),d=fw(a=>a.layout.margin),{width:e,height:f,wrapperStyle:g,portal:h}=a,[i,j]=xo([b]),k=fw(fX),l=fw(fY);if(null==k||null==l)return null;var m=k-(d.left||0)-(d.right||0),n=xX.getWidthOrHeight(a.layout,f,e,m),o=h?g:xQ(xQ({position:"absolute",width:(null==n?void 0:n.width)||e||"auto",height:(null==n?void 0:n.height)||f||"auto"},function(a,b,c,d,e,f){var g,h,{layout:i,align:j,verticalAlign:k}=b;return a&&(void 0!==a.left&&null!==a.left||void 0!==a.right&&null!==a.right)||(g="center"===j&&"vertical"===i?{left:((d||0)-f.width)/2}:"right"===j?{right:c&&c.right||0}:{left:c&&c.left||0}),a&&(void 0!==a.top&&null!==a.top||void 0!==a.bottom&&null!==a.bottom)||(h="middle"===k?{top:((e||0)-f.height)/2}:"bottom"===k?{bottom:c&&c.bottom||0}:{top:c&&c.top||0}),xQ(xQ({},g),h)}(g,a,d,k,l,i)),g),q=null!=h?h:c;if(null==q)return null;var r=xH.createElement("div",{className:"recharts-legend-wrapper",style:o,ref:j},xH.createElement(xU,{layout:a.layout,align:a.align,verticalAlign:a.verticalAlign,itemSorter:a.itemSorter}),xH.createElement(xV,{width:i.width,height:i.height}),xH.createElement(xT,xO({},a,n,{margin:d,chartWidth:k,chartHeight:l,contextPayload:b})));return(0,w8.createPortal)(r,q)}class xX extends xH.PureComponent{static getWidthOrHeight(a,b,c,d){return"vertical"===a&&eH(b)?{height:b}:"horizontal"===a?{width:c||d}:null}render(){return xH.createElement(xW,this.props)}}xR(xX,"displayName","Legend"),xR(xX,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});let xY=["#8884d8","#82ca9d","#ffc658","#ff8042","#0088FE","#00C49F"],xZ=({posts:a})=>{let b=(0,p.useMemo)(()=>{let b=a.reduce((a,b)=>(a[b.status]=(a[b.status]||0)+1,a),{}),c=Object.entries(a.reduce((a,b)=>(b.platforms.forEach(b=>{a[b]=(a[b]||0)+1}),a),{})).map(([a,b])=>({name:bK.PLATFORMS.find(b=>b.id===a)?.name||a,value:Number(b)})).filter(a=>a.value>0),d=Object.keys(bK.STATUS_CONFIG).map(a=>({name:bK.STATUS_CONFIG[a].label,value:b[a]||0,color:bK.STATUS_CONFIG[a].color.replace("bg-","#").replace("-500","")})).filter(a=>a.value>0);return{totalPosts:a.length,platformData:c,statusData:d,statusCounts:b}},[a]),c=({title:a,value:b,className:c})=>(0,o.jsxs)("div",{className:`bg-white p-6 rounded-lg shadow-lg border border-slate/30 ${c}`,children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-slate",children:a}),(0,o.jsx)("p",{className:"mt-2 text-3xl font-semibold text-charcoal-dark",children:b||0})]});return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-3xl font-bold mb-8 text-charcoal-dark",children:"Analytics Dashboard"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[(0,o.jsx)(c,{title:"Total Posts",value:b.totalPosts,className:"bg-indigo-900"}),(0,o.jsx)(c,{title:"Published",value:b.statusCounts.published,className:"bg-green-900"}),(0,o.jsx)(c,{title:"Scheduled",value:b.statusCounts.scheduled,className:"bg-blue-900"}),(0,o.jsx)(c,{title:"Needs Approval",value:b.statusCounts["needs approval"],className:"bg-yellow-900"}),(0,o.jsx)(c,{title:"Drafts",value:b.statusCounts.draft,className:"bg-gray-700"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-slate/30",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-charcoal-dark mb-4",children:"Platform Distribution"}),b.platformData.length>0?(0,o.jsx)(gt,{width:"100%",height:300,children:(0,o.jsxs)(si,{children:[(0,o.jsx)(vH,{data:b.platformData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",label:!0,children:b.platformData.map((a,b)=>(0,o.jsx)(tE,{fill:xY[b%xY.length]},`cell-${b}`))}),(0,o.jsx)(xG,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"0.5rem"}}),(0,o.jsx)(xX,{})]})}):(0,o.jsx)("p",{className:"text-gray-500 text-center py-10",children:"No data to display."})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-slate/30",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-charcoal-dark mb-4",children:"Post Status Overview"}),b.statusData.length>0?(0,o.jsx)(gt,{width:"100%",height:300,children:(0,o.jsxs)(vM,{data:b.statusData,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},children:[(0,o.jsx)(wZ,{type:"number",stroke:"#9ca3af"}),(0,o.jsx)(w7,{type:"category",dataKey:"name",stroke:"#9ca3af",width:100,tick:{fontSize:12}}),(0,o.jsx)(xG,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"0.5rem"}}),(0,o.jsx)(wu,{dataKey:"value",barSize:25,children:b.statusData.map((a,b)=>(0,o.jsx)(tE,{fill:bK.STATUS_CONFIG[a.name.toLowerCase().replace(" ","-")]?.color.replace("bg-","#").replace("-500","")||"#8884d8"},`cell-${b}`))})]})}):(0,o.jsx)("p",{className:"text-gray-500 text-center py-10",children:"No data to display."})]})]})]})};async function x$(a,b){try{if(!a.isConnected)return{success:!1,error:"Twitter account not connected"};if(!b.text||b.text.length>280)return{success:!1,error:"Tweet text must be between 1-280 characters"};let c=await fetch("/api/twitter/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:b.text,mediaIds:b.mediaIds})});if(!c.ok){let a=await c.json();throw Error(a.details||a.error||"Failed to post tweet")}let d=await c.json();return{success:!0,tweetId:d.tweetId,url:d.tweetUrl}}catch(a){return console.error("Twitter post error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to post tweet"}}}async function x_(a,b,c){try{if(!a.isConnected)return{success:!1,error:"Twitter account not connected"};let d=await fetch("/api/twitter/upload-media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaData:b,mediaType:c})});if(!d.ok){let a=await d.json();throw Error(a.details||a.error||"Failed to upload media")}let e=await d.json();return{success:!0,mediaId:e.mediaId}}catch(a){return console.error("Twitter media upload error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to upload media"}}}async function x0(a,b){try{if(!a.isConnected)return{success:!1,error:"LinkedIn account not connected"};if(!b.text||b.text.length>3e3)return{success:!1,error:"Post text must be between 1-3000 characters"};let c=await fetch("/api/linkedin/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:b.text,visibility:b.visibility||"PUBLIC",mediaUrn:b.mediaUrn})});if(!c.ok){let a=await c.json();throw Error(a.details||a.error||"Failed to post to LinkedIn")}let d=await c.json();return{success:!0,postId:d.postId,url:d.postUrl}}catch(a){return console.error("LinkedIn post error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to post to LinkedIn"}}}async function x1(a,b,c="image"){try{if(!a.isConnected)return{success:!1,error:"LinkedIn account not connected"};let d=await fetch("/api/linkedin/upload-media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaData:b,mediaType:c})});if(!d.ok){let a=await d.json();throw Error(a.details||a.error||"Failed to upload media")}let e=await d.json();return{success:!0,mediaUrn:e.mediaUrn}}catch(a){return console.error("LinkedIn media upload error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to upload media"}}}async function x2(a,b){try{if(!a.isConnected)return{success:!1,error:"Facebook account not connected"};if(!b.message||b.message.length>63206)return{success:!1,error:"Message must be between 1-63206 characters"};let c=await fetch("/api/facebook/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:b.message,imageUrl:b.imageUrl,link:b.link})});if(!c.ok){let a=await c.json();throw Error(a.details||a.error||"Failed to post to Facebook")}let d=await c.json();return{success:!0,postId:d.postId,url:d.postUrl}}catch(a){return console.error("Facebook post error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to post to Facebook"}}}async function x3(a,b){try{if(!a.isConnected)return{success:!1,error:"Facebook account not connected"};let c=await fetch("/api/facebook/upload-media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaData:b})});if(!c.ok){let a=await c.json();throw Error(a.details||a.error||"Failed to upload media")}let d=await c.json();return{success:!0,imageUrl:d.imageUrl}}catch(a){return console.error("Facebook media upload error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to upload media"}}}async function x4(a,b){try{if(!a.isConnected)return{success:!1,error:"Instagram account not connected"};if(!b.caption||b.caption.length>2200)return{success:!1,error:"Caption must be between 1-2200 characters"};if(!b.imageUrl)return{success:!1,error:"Instagram requires an image"};let c=await fetch("/api/instagram/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:b.caption,imageUrl:b.imageUrl})});if(!c.ok){let a=await c.json();throw Error(a.details||a.error||"Failed to post to Instagram")}let d=await c.json();return{success:!0,postId:d.postId,url:d.postUrl}}catch(a){return console.error("Instagram post error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to post to Instagram"}}}async function x5(a,b){try{if(!a.isConnected)return{success:!1,error:"Instagram account not connected"};let c=await fetch("/api/instagram/upload-media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaData:b})});if(!c.ok){let a=await c.json();throw Error(a.details||a.error||"Failed to upload media")}let d=await c.json();return{success:!0,imageUrl:d.imageUrl}}catch(a){return console.error("Instagram media upload error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to upload media"}}}async function x6(a,b,c,d){!d&&c&&(d=c.includes(".mp4")||c.includes(".mov")||c.includes("video")?"video":"image");try{let e,f=function(){try{let a=localStorage.getItem("social_media_credentials");if(!a)return{};let b=function(a){try{let b=a.split("").reverse().join("");return atob(b)}catch(b){return console.error("Deobfuscation error:",b),a}}(a);return JSON.parse(b)}catch(a){return console.error("Failed to load credentials:",a),{}}}()[a];if(!f||!f.isConnected)return{platform:a,success:!1,error:`${a} is not connected. Please connect your account first.`};switch(a){case"twitter":{let a;if(c){let b=await x_(f,c,d||"image");b.success&&b.mediaId&&(a=[b.mediaId])}e=await x$(f,{text:b,mediaIds:a});break}case"linkedin":{let a;if(c){let b=await x1(f,c,d||"image");b.success&&b.mediaUrn&&(a=b.mediaUrn)}e=await x0(f,{text:b,visibility:"PUBLIC",mediaUrn:a});break}case"facebook":{let a;if(c){let b=await x3(f,c);b.success&&b.imageUrl&&(a=b.imageUrl)}e=await x2(f,{message:b,imageUrl:a,mediaType:d});break}case"instagram":{if(!c)return{platform:a,success:!1,error:"Instagram requires an image or video to post"};let g=await x5(f,c);if(!g.success||!g.imageUrl)return{platform:a,success:!1,error:g.error||"Failed to upload media"};e=await x4(f,{caption:b,imageUrl:g.imageUrl,mediaType:d});break}default:return{platform:a,success:!1,error:`Unsupported platform: ${a}`}}return{platform:a,success:e.success,postId:e.postId??e.tweetId,url:e.url,error:e.error}}catch(b){return console.error(`Failed to publish to ${a}:`,b),{platform:a,success:!1,error:b instanceof Error?b.message:"Unknown error occurred"}}}async function x7(a){let b=[];for(let c of a.platforms){let d=a.content[c];if(!d){b.push({platform:c,success:!1,error:`No content specified for ${c}`});continue}let e=a.generatedImage||a.generatedVideoUrl,f=await x6(c,d,e);b.push(f)}return b}var x8=a.i(79257);let x9=(0,bL.default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var ya=a.i(41710),yb=a.i(92e3);let yc=(0,bL.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),yd=({post:a,onUpdatePost:b,onDeletePost:c,connectedAccounts:d})=>{let[e,f]=(0,p.useState)(a.platforms[0]),[g,h]=(0,p.useState)(!1),[i,j]=(0,p.useState)(""),[k,l]=(0,p.useState)(!1),[m,n]=(0,p.useState)(null),[q,r]=(0,p.useState)(!1),s=async()=>{l(!0),n(null),r(!1);try{let c=(await x7(a)).filter(a=>!a.success);if(0===c.length){let c={status:"published",publishedAt:new Date().toISOString()};b({...a,...c}),r(!0),setTimeout(()=>r(!1),3e3)}else{let a=c.map(a=>a.platform).join(", "),b=c.map(a=>a.error).join("; ");n(`Failed to publish to ${a}: ${b}`)}}catch(a){console.error("Publishing error:",a),n(a instanceof Error?a.message:"An unexpected error occurred while publishing")}finally{l(!1)}},t=()=>{if(!i)return;let c={status:"scheduled",scheduledAt:new Date(i).toISOString()};b({...a,...c}),h(!1),j("")},u=()=>{b({...a,status:"ready to publish",scheduledAt:void 0})},v=a.platforms.filter(a=>!d[a]),w=0===v.length,x=({onClick:a,icon:b,label:c,className:d,disabled:e})=>(0,o.jsxs)("button",{onClick:a,disabled:e,className:`flex items-center justify-center text-xs font-bold py-2 px-3 rounded transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${d}`,children:[(0,o.jsx)(b,{className:`w-4 h-4 mr-1.5 ${b===bP.Loader2?"animate-spin":""}`}),(0,o.jsx)("span",{children:c})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-lg flex flex-col overflow-hidden border border-slate/30",children:[(0,o.jsx)("div",{className:"p-4 bg-light-gray",children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsx)("p",{className:"font-bold text-lg text-charcoal-dark pr-2 break-words flex-1 truncate",children:a.topic}),(0,o.jsx)(({status:a})=>{let b=bK.STATUS_CONFIG[a];return(0,o.jsx)("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full text-white ${b.color}`,children:b.label})},{status:a.status})]})}),(0,o.jsxs)("div",{className:"flex-grow p-4 pt-2",children:[(0,o.jsx)(()=>(0,o.jsx)("div",{className:"flex items-center gap-1 mb-4 p-1 bg-light-gray rounded-lg",children:a.platforms.map(a=>{let b=bK.PLATFORMS.find(b=>b.id===a);if(!b)return null;let{icon:c}=b;return(0,o.jsxs)("button",{onClick:()=>f(a),title:`Preview on ${b.name}`,className:`flex-1 flex justify-center items-center p-2 rounded-md transition-all duration-200 ${e===a?"bg-charcoal text-white":"text-slate hover:bg-slate/10 hover:text-charcoal-dark"}`,children:[" ",(0,o.jsx)(c,{className:"w-5 h-5"})," "]},a)})}),{}),(0,o.jsx)(({platform:b})=>{let c=bK.PLATFORMS.find(a=>a.id===b);if(!c)return null;let d=a.content[b]||"";return(0,o.jsxs)("div",{className:"bg-slate/10 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center mb-4",children:[(0,o.jsx)("div",{className:"w-11 h-11 bg-charcoal rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:"AI"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"font-semibold text-charcoal-dark leading-tight",children:"AI Content OS"}),(0,o.jsxs)("p",{className:"flex items-center text-xs text-slate",children:["Preview for ",c.name]})]})]}),(0,o.jsx)("p",{className:"text-charcoal text-sm mb-4 whitespace-pre-wrap h-24 overflow-y-auto",children:d}),a.generatedImage&&(0,o.jsx)("img",{src:a.generatedImage,alt:"Generated content",className:"rounded-lg w-full border border-slate/30 mb-4"}),a.generatedVideoUrl&&(0,o.jsx)("video",{src:a.generatedVideoUrl,controls:!0,className:"rounded-lg w-full border border-slate/30"})]})},{platform:e})]}),(0,o.jsx)("div",{className:"p-3 bg-light-gray flex flex-wrap gap-2 justify-between items-center",children:(()=>{switch(a.status){case"ready to publish":return(0,o.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,o.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,o.jsx)(x,{onClick:()=>h(!0),icon:ya.Clock,label:"Schedule",className:"text-white bg-purple-600 hover:bg-purple-700"}),(0,o.jsx)(x,{onClick:s,disabled:!w||k,icon:k?bP.Loader2:bM,label:k?"Publishing...":"Publish Now",className:"bg-charcoal hover:bg-charcoal-dark text-white"})]}),(0,o.jsx)(x,{onClick:()=>c(a.id),icon:cu.Trash2,label:"",className:"bg-red-600 hover:bg-red-700 text-white"})]}),!w&&(0,o.jsxs)("div",{className:"text-xs text-yellow-300 bg-yellow-900/50 p-2 rounded flex items-center gap-2",children:[(0,o.jsx)(x8.Link,{className:"w-4 h-4 flex-shrink-0"}),(0,o.jsxs)("span",{children:["Connect ",v.map(a=>bK.PLATFORMS.find(b=>b.id===a)?.name).join(", ")," account(s) to publish."]})]}),m&&(0,o.jsxs)("div",{className:"text-xs text-red-300 bg-red-900/50 p-2 rounded flex items-center gap-2",children:[(0,o.jsx)(yb.AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),(0,o.jsx)("span",{children:m})]}),q&&(0,o.jsxs)("div",{className:"text-xs text-green-300 bg-green-900/50 p-2 rounded flex items-center gap-2",children:[(0,o.jsx)(yc,{className:"w-4 h-4 flex-shrink-0"}),(0,o.jsx)("span",{children:"Successfully published to all platforms! ð"})]})]});case"scheduled":return(0,o.jsxs)("div",{className:"flex items-center justify-between w-full text-sm",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-blue-300",children:[(0,o.jsx)(ya.Clock,{className:"w-4 h-4"}),(0,o.jsx)("span",{children:new Date(a.scheduledAt).toLocaleString()})]}),(0,o.jsx)("button",{onClick:u,className:"text-xs text-slate hover:text-charcoal-dark hover:underline",children:"Unschedule"})]});case"published":return(0,o.jsxs)("div",{className:"flex items-center justify-between w-full text-sm",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-green-300",children:[(0,o.jsx)(x9,{className:"w-4 h-4"}),(0,o.jsx)("span",{children:new Date(a.publishedAt).toLocaleString()})]}),(0,o.jsx)("a",{href:"#",className:"text-xs text-charcoal-dark hover:underline",children:"View Live Post"})]});default:return null}})()})]}),g&&(0,o.jsx)(()=>(0,o.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md flex flex-col border border-slate/30",onClick:a=>a.stopPropagation(),children:[(0,o.jsxs)("header",{className:"flex justify-between items-center p-4 border-b border-slate/30",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-charcoal-dark",children:"Schedule Post"}),(0,o.jsx)("button",{onClick:()=>h(!1),className:"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors",children:(0,o.jsx)(cz.X,{className:"w-6 h-6"})})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsx)("p",{className:"text-charcoal",children:"Select a date and time to schedule this post for."}),(0,o.jsx)("input",{type:"datetime-local",value:i,onChange:a=>j(a.target.value),className:"mt-1 block w-full bg-white border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-3",min:new Date().toISOString().slice(0,16)}),(0,o.jsx)("button",{onClick:t,disabled:!i,className:"w-full inline-flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-charcoal hover:bg-charcoal-dark disabled:bg-slate disabled:cursor-not-allowed",children:"Confirm Schedule"})]})]})}),{})]})},ye=({posts:a,onUpdatePost:b,onDeletePost:c,connectedAccounts:d})=>{let[e,f]=(0,p.useState)(""),[g,h]=(0,p.useState)("all"),i=(0,p.useMemo)(()=>a.filter(a=>["ready to publish","scheduled","published"].includes(a.status)).filter(a=>{let b=a.topic.toLowerCase().includes(e.toLowerCase()),c="all"===g||a.platforms.includes(g);return b&&c}).sort((a,b)=>{let c={"ready to publish":1,scheduled:2,published:3},d=c[a.status]??99,e=c[b.status]??99;if(d!==e)return d-e;let f=a.publishedAt||a.scheduledAt||a.createdAt;return new Date(b.publishedAt||b.scheduledAt||b.createdAt).getTime()-new Date(f).getTime()}),[a,e,g]);return 0===i.length&&""===e&&"all"===g?(0,o.jsxs)("div",{className:"text-center py-20",children:[(0,o.jsx)("h2",{className:"text-3xl font-semibold text-slate",children:"Nothing to Publish"}),(0,o.jsx)("p",{className:"text-slate mt-2",children:'Finalize a post in "Manage Posts" and it will appear here, ready for action.'})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:(0,o.jsx)("h2",{className:"text-3xl font-bold text-charcoal-dark",children:"Publishing Command Center"})}),(0,o.jsx)(cH,{onSearchChange:f,onStatusChange:()=>{},onPlatformChange:h,showStatusFilter:!1}),(0,o.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(a=>(0,o.jsx)(yd,{post:a,onUpdatePost:b,onDeletePost:c,connectedAccounts:d},a.id))})]})},yf=(0,bL.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),yg=(0,bL.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),yh=()=>{let[a,b]=(0,p.useState)([]),[c,d]=(0,p.useState)([]),[e,f]=(0,p.useState)(""),[g,h]=(0,p.useState)("all"),[i,j]=(0,p.useState)(null),[k,l]=(0,p.useState)({totalAssets:0,totalSize:0}),[m,n]=(0,p.useState)(!1),q=(0,p.useCallback)(async()=>{let a=await ck();b(a),d(a),l(await cp())},[]);(0,p.useEffect)(()=>{q()},[q]),(0,p.useEffect)(()=>{let b=a;"all"!==g&&(b=b.filter(a=>a.type===g)),e&&(b=b.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())||a.tags.some(a=>a.toLowerCase().includes(e.toLowerCase())))),d(b)},[a,g,e]);let r=async a=>{let b=a.target.files;if(b&&0!==b.length){n(!0);try{for(let a of Array.from(b))await co(a);await q()}catch(a){console.error("Error uploading files:",a)}finally{n(!1)}}},s=async a=>{confirm("Are you sure you want to delete this media asset?")&&(await cl(a),await q(),j(null))},t=a=>{if(0===a)return"Unknown";let b=Math.floor(Math.log(a)/Math.log(1024));return`${Math.round(a/Math.pow(1024,b)*100)/100} ${["Bytes","KB","MB","GB"][b]}`};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-3xl font-bold text-charcoal-dark",children:"Media Library"}),(0,o.jsxs)("p",{className:"text-slate mt-1",children:[k.totalAssets," assets Â· ",t(k.totalSize)," total"]})]}),(0,o.jsxs)("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition",children:[(0,o.jsx)(yf,{className:"w-5 h-5 mr-2"}),m?"Uploading...":"Upload Media",(0,o.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:r,className:"hidden",disabled:m})]})]}),(0,o.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"flex-1 relative",children:[(0,o.jsx)(cG,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate w-5 h-5"}),(0,o.jsx)("input",{type:"text",placeholder:"Search by name or tags...",value:e,onChange:a=>f(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate/30 rounded-lg text-charcoal focus:ring-2 focus:ring-charcoal focus:border-transparent"})]}),(0,o.jsxs)("div",{className:"flex bg-light-gray rounded-lg p-1 border border-slate/30",children:[(0,o.jsx)("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${"all"===g?"bg-charcoal text-white":"text-slate hover:text-charcoal-dark"}`,children:"All"}),(0,o.jsx)("button",{onClick:()=>h("image"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${"image"===g?"bg-charcoal text-white":"text-slate hover:text-charcoal-dark"}`,children:"Images"}),(0,o.jsx)("button",{onClick:()=>h("video"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${"video"===g?"bg-charcoal text-white":"text-slate hover:text-charcoal-dark"}`,children:"Videos"})]})]}),0===c.length?(0,o.jsxs)("div",{className:"text-center py-20 bg-white rounded-lg border border-slate/30",children:[(0,o.jsx)(cr,{className:"w-16 h-16 text-slate mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-xl font-semibold text-slate",children:"No media assets found"}),(0,o.jsx)("p",{className:"text-slate mt-2",children:"Upload images or videos to get started"})]}):(0,o.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:c.map(a=>(0,o.jsxs)("div",{onClick:()=>j(a),className:"group relative bg-white rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-charcoal transition border border-slate/30",children:[(0,o.jsx)("div",{className:"aspect-square bg-gray-900 flex items-center justify-center",children:"image"===a.type?(0,o.jsx)("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}):(0,o.jsxs)("div",{className:"relative w-full h-full",children:[a.thumbnailUrl?(0,o.jsx)("img",{src:a.thumbnailUrl,alt:a.name,className:"w-full h-full object-cover"}):(0,o.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,o.jsx)(cq,{className:"w-12 h-12 text-gray-600"})}),(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40",children:(0,o.jsx)(cq,{className:"w-8 h-8 text-white"})})]})}),(0,o.jsxs)("div",{className:"p-2",children:[(0,o.jsx)("p",{className:"text-xs text-charcoal truncate",children:a.name}),(0,o.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,o.jsx)("span",{className:"text-xs text-slate",children:t(a.size)}),"ai-generated"===a.source&&(0,o.jsx)("span",{className:"text-xs bg-purple-900/50 text-purple-300 px-2 py-0.5 rounded",children:"AI"})]})]})]},a.id))}),i&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>j(null),children:(0,o.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-slate/30",onClick:a=>a.stopPropagation(),children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold text-charcoal-dark",children:i.name}),(0,o.jsx)("button",{onClick:()=>j(null),className:"text-slate hover:text-charcoal-dark",children:(0,o.jsx)(cz.X,{className:"w-6 h-6"})})]}),(0,o.jsx)("div",{className:"mb-6",children:"image"===i.type?(0,o.jsx)("img",{src:i.url,alt:i.name,className:"w-full rounded-lg"}):(0,o.jsx)("video",{src:i.url,controls:!0,className:"w-full rounded-lg"})}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate",children:"Type"}),(0,o.jsx)("p",{className:"text-charcoal-dark capitalize",children:i.type})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate",children:"Size"}),(0,o.jsx)("p",{className:"text-charcoal-dark",children:t(i.size)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate",children:"Source"}),(0,o.jsx)("p",{className:"text-charcoal-dark capitalize",children:i.source.replace("-"," ")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate",children:"Created"}),(0,o.jsx)("p",{className:"text-charcoal-dark",children:new Date(i.createdAt).toLocaleString()})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-slate mb-2",children:"Tags"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:i.tags.length>0?i.tags.map((a,b)=>(0,o.jsx)("span",{className:"px-2 py-1 bg-charcoal/10 text-charcoal-dark rounded text-sm",children:a},b)):(0,o.jsx)("p",{className:"text-slate text-sm",children:"No tags"})})]})]}),(0,o.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,o.jsxs)("a",{href:i.url,download:i.name,className:"flex items-center px-4 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition",children:[(0,o.jsx)(yg,{className:"w-4 h-4 mr-2"}),"Download"]}),(0,o.jsxs)("button",{onClick:()=>s(i.id),className:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition",children:[(0,o.jsx)(cu.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})})]})},yi="campaigns";function yj(){try{let a=localStorage.getItem(yi);return a?JSON.parse(a):[]}catch{return[]}}var yk=a.i(15618);let yl=(0,bL.default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ym=({posts:a})=>{let b,[c,d]=(0,p.useState)([]),[e,f]=(0,p.useState)(!1),[g,h]=(0,p.useState)(null),[i,j]=(0,p.useState)({name:"",description:"",startDate:"",endDate:"",goals:""});(0,p.useEffect)(()=>{k()},[]);let k=()=>{d(yj())},l=b=>{let c=a.filter(a=>a.campaignId===b);return{total:c.length,published:c.filter(a=>"published"===a.status).length,scheduled:c.filter(a=>"scheduled"===a.status).length,draft:c.filter(a=>"draft"===a.status).length}};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,o.jsx)("h2",{className:"text-3xl font-bold text-charcoal-dark",children:"Campaign Management"}),(0,o.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition",children:[(0,o.jsx)(yk.Plus,{className:"w-5 h-5 mr-2"}),"New Campaign"]})]}),0!==c.length||e?(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e&&(0,o.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border-2 border-dashed border-gray-600",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"New Campaign"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("input",{type:"text",placeholder:"Campaign Name *",value:i.name,onChange:a=>j({...i,name:a.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500"}),(0,o.jsx)("textarea",{placeholder:"Description",value:i.description,onChange:a=>j({...i,description:a.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 resize-none",rows:3}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-sm text-gray-400 block mb-1",children:"Start Date"}),(0,o.jsx)("input",{type:"date",value:i.startDate,onChange:a=>j({...i,startDate:a.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-sm text-gray-400 block mb-1",children:"End Date (Optional)"}),(0,o.jsx)("input",{type:"date",value:i.endDate,onChange:a=>j({...i,endDate:a.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-sm text-gray-400 block mb-1",children:"Goals (one per line)"}),(0,o.jsx)("textarea",{placeholder:"Increase brand awareness Drive website traffic Generate leads",value:i.goals,onChange:a=>j({...i,goals:a.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 resize-none",rows:3})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>{var a,b,c,d,e;let g,h,l,m;if(!i.name.trim())return;let n=i.goals.split("\n").map(a=>a.trim()).filter(a=>a.length>0);a=i.name,b=i.description,c=i.startDate||void 0,d=i.endDate||void 0,e=n.length>0?n:void 0,g={id:crypto.randomUUID(),name:a,description:b,color:(m=["#8B5CF6","#EC4899","#F59E0B","#10B981","#3B82F6","#EF4444","#14B8A6","#F97316"])[Math.floor(Math.random()*m.length)],startDate:c||new Date().toISOString(),endDate:d,goals:e,createdAt:new Date().toISOString()},-1!==(l=(h=yj()).findIndex(a=>a.id===g.id))?h[l]=g:h.push(g),localStorage.setItem(yi,JSON.stringify(h)),j({name:"",description:"",startDate:"",endDate:"",goals:""}),f(!1),k()},disabled:!i.name.trim(),className:"flex-1 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition",children:"Create"}),(0,o.jsx)("button",{onClick:()=>{f(!1),j({name:"",description:"",startDate:"",endDate:"",goals:""})},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition",children:"Cancel"})]})]})]}),c.map(a=>{let b=l(a.id);return(0,o.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 hover:ring-2 hover:ring-indigo-500 transition cursor-pointer",onClick:()=>h(a),children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),(0,o.jsx)("h3",{className:"text-lg font-semibold text-white",children:a.name})]}),(0,o.jsx)("button",{onClick:b=>{b.stopPropagation();var c=a.id;if(confirm("Are you sure you want to delete this campaign? Posts will not be deleted.")){let a;a=yj().filter(a=>a.id!==c),localStorage.setItem(yi,JSON.stringify(a)),k(),h(null)}},className:"text-gray-400 hover:text-red-400",children:(0,o.jsx)(cu.Trash2,{className:"w-4 h-4"})})]}),a.description&&(0,o.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:a.description}),(0,o.jsx)("div",{className:"space-y-2 mb-4",children:(0,o.jsxs)("div",{className:"flex items-center text-sm text-gray-400",children:[(0,o.jsx)(cM,{className:"w-4 h-4 mr-2"}),new Date(a.startDate).toLocaleDateString(),a.endDate&&` - ${new Date(a.endDate).toLocaleDateString()}`]})}),(0,o.jsxs)("div",{className:"grid grid-cols-4 gap-2 pt-4 border-t border-gray-700",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-white",children:b.total}),(0,o.jsx)("p",{className:"text-xs text-gray-400",children:"Total"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-green-400",children:b.published}),(0,o.jsx)("p",{className:"text-xs text-gray-400",children:"Published"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:b.scheduled}),(0,o.jsx)("p",{className:"text-xs text-gray-400",children:"Scheduled"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-400",children:b.draft}),(0,o.jsx)("p",{className:"text-xs text-gray-400",children:"Drafts"})]})]}),a.goals&&a.goals.length>0&&(0,o.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,o.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"Goals:"}),(0,o.jsxs)("ul",{className:"space-y-1",children:[a.goals.slice(0,2).map((a,b)=>(0,o.jsxs)("li",{className:"text-sm text-gray-300 flex items-start",children:[(0,o.jsx)("span",{className:"text-indigo-400 mr-2",children:"â¢"}),a]},b)),a.goals.length>2&&(0,o.jsxs)("li",{className:"text-sm text-gray-500",children:["+",a.goals.length-2," more"]})]})]})]},a.id)})]}):(0,o.jsxs)("div",{className:"text-center py-20 bg-white rounded-lg border border-slate/30",children:[(0,o.jsx)(yl,{className:"w-16 h-16 text-slate mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-xl font-semibold text-slate",children:"No campaigns yet"}),(0,o.jsx)("p",{className:"text-slate mt-2",children:"Create a campaign to organize your content strategy"}),(0,o.jsx)("button",{onClick:()=>f(!0),className:"mt-4 px-6 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition",children:"Create Your First Campaign"})]}),g&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>h(null),children:(0,o.jsx)("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:g.color}}),(0,o.jsx)("h3",{className:"text-2xl font-bold text-white",children:g.name})]}),(0,o.jsx)("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-white",children:(0,o.jsx)(cz.X,{className:"w-6 h-6"})})]}),g.description&&(0,o.jsx)("p",{className:"text-gray-300 mb-6",children:g.description}),(0,o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-gray-400",children:"Duration"}),(0,o.jsxs)("p",{className:"text-white",children:[new Date(g.startDate).toLocaleDateString(),g.endDate&&` - ${new Date(g.endDate).toLocaleDateString()}`]})]}),g.goals&&g.goals.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Campaign Goals"}),(0,o.jsx)("ul",{className:"space-y-2",children:g.goals.map((a,b)=>(0,o.jsxs)("li",{className:"text-white flex items-start",children:[(0,o.jsx)(yl,{className:"w-4 h-4 text-indigo-400 mr-2 mt-0.5 flex-shrink-0"}),a]},b))})]})]}),(0,o.jsxs)("div",{className:"pt-6 border-t border-gray-700",children:[(0,o.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Campaign Statistics"}),(b=l(g.id),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[(0,o.jsx)("p",{className:"text-3xl font-bold text-white",children:b.total}),(0,o.jsx)("p",{className:"text-gray-400",children:"Total Posts"})]}),(0,o.jsxs)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[(0,o.jsx)("p",{className:"text-3xl font-bold text-green-400",children:b.published}),(0,o.jsx)("p",{className:"text-gray-400",children:"Published"})]}),(0,o.jsxs)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[(0,o.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:b.scheduled}),(0,o.jsx)("p",{className:"text-gray-400",children:"Scheduled"})]}),(0,o.jsxs)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[(0,o.jsx)("p",{className:"text-3xl font-bold text-gray-400",children:b.draft}),(0,o.jsx)("p",{className:"text-gray-400",children:"In Progress"})]})]}))]})]})})})]})},yn=(0,bL.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),yo=({onPostsCreated:a})=>{let[b,c]=(0,p.useState)("text"),[d,e]=(0,p.useState)(""),[f,g]=(0,p.useState)(""),[h,i]=(0,p.useState)(["twitter","linkedin"]),[j,k]=(0,p.useState)(5),[l,m]=(0,p.useState)(!1),[n,q]=(0,p.useState)(null),[r,s]=(0,p.useState)([]),t=async a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{e(a.target?.result)},c.readAsText(b)},u=async()=>{q("URL fetching requires a backend service. Please paste the content directly.")},v=async()=>{if(!d.trim())return void q("Please provide content to repurpose.");if(0===h.length)return void q("Please select at least one platform.");m(!0),q(null),s([]);try{let a=(await b$(d,h,j)).map(a=>({id:crypto.randomUUID(),topic:a.topic,platforms:h,content:a.content,status:"draft",createdAt:new Date().toISOString(),isGeneratingImage:!1,isGeneratingVideo:!1,videoGenerationStatus:""}));s(a)}catch(a){q(a instanceof Error?a.message:"An unknown error occurred.")}finally{m(!1)}};return(0,o.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("h2",{className:"text-3xl font-bold text-charcoal-dark flex items-center",children:[(0,o.jsx)(cx.Sparkles,{className:"w-8 h-8 mr-3 text-yellow-400"}),"Content Repurposer"]}),(0,o.jsx)("p",{className:"text-slate mt-2",children:"Transform long-form content into multiple engaging social media posts"})]}),(0,o.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl border border-slate/30",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-md font-medium text-charcoal mb-3",children:"Input Source"}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsxs)("button",{onClick:()=>c("text"),className:`flex items-center px-4 py-2 rounded-lg transition ${"text"===b?"bg-charcoal text-white":"bg-gray-50 text-charcoal hover:bg-slate/10"}`,children:[(0,o.jsx)(yn,{className:"w-4 h-4 mr-2"}),"Paste Text"]}),(0,o.jsxs)("button",{onClick:()=>c("url"),className:`flex items-center px-4 py-2 rounded-lg transition ${"url"===b?"bg-charcoal text-white":"bg-gray-50 text-charcoal hover:bg-slate/10"}`,children:[(0,o.jsx)(x8.Link,{className:"w-4 h-4 mr-2"}),"From URL"]}),(0,o.jsxs)("label",{className:`flex items-center px-4 py-2 rounded-lg transition cursor-pointer ${"file"===b?"bg-charcoal text-white":"bg-gray-50 text-charcoal hover:bg-slate/10"}`,children:[(0,o.jsx)(yf,{className:"w-4 h-4 mr-2"}),"Upload File",(0,o.jsx)("input",{type:"file",accept:".txt,.md",onChange:a=>{c("file"),t(a)},className:"hidden"})]})]})]}),"text"===b&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-md font-medium text-charcoal mb-3",children:"Long-Form Content"}),(0,o.jsx)("textarea",{value:d,onChange:a=>e(a.target.value),placeholder:"Paste your blog post, article, video transcript, or any long-form content here...",className:"w-full h-64 px-4 py-3 bg-white border border-slate/30 rounded-lg text-charcoal focus:ring-2 focus:ring-charcoal focus:border-transparent resize-none"}),(0,o.jsxs)("p",{className:"text-sm text-slate mt-2",children:[d.length," characters Â· Minimum 500 characters recommended"]})]}),"url"===b&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-md font-medium text-gray-300 mb-3",children:"Content URL"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"url",value:f,onChange:a=>g(a.target.value),placeholder:"https://example.com/blog-post",className:"flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),(0,o.jsx)("button",{onClick:u,className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition",children:"Fetch"})]}),(0,o.jsx)("p",{className:"text-sm text-yellow-500 mt-2",children:"Note: URL fetching requires backend integration (not yet implemented)"})]}),"file"===b&&d&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-md font-medium text-gray-300 mb-3",children:"File Content Preview"}),(0,o.jsx)("textarea",{value:d,onChange:a=>e(a.target.value),className:"w-full h-64 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-md font-medium text-charcoal mb-3",children:"Target Platforms"}),(0,o.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:bK.PLATFORMS.map(({id:a,name:b,icon:c})=>(0,o.jsxs)("label",{className:`flex items-center space-x-3 p-4 rounded-lg cursor-pointer transition-all duration-200 border-2 ${h.includes(a)?"bg-charcoal/10 border-charcoal":"bg-gray-50 border-transparent hover:border-slate/30"}`,children:[(0,o.jsx)("input",{type:"checkbox",checked:h.includes(a),onChange:()=>{i(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},className:"hidden"}),(0,o.jsx)(c,{className:`w-6 h-6 ${h.includes(a)?"text-charcoal-dark":"text-slate"}`}),(0,o.jsx)("span",{className:"font-medium text-charcoal-dark",children:b})]},a))})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("label",{className:"block text-md font-medium text-charcoal mb-3",children:["Number of Posts to Generate: ",j]}),(0,o.jsx)("input",{type:"range",min:"3",max:"10",value:j,onChange:a=>k(parseInt(a.target.value)),className:"w-full h-2 bg-light-gray rounded-lg appearance-none cursor-pointer accent-charcoal"}),(0,o.jsxs)("div",{className:"flex justify-between text-xs text-slate mt-1",children:[(0,o.jsx)("span",{children:"3 posts"}),(0,o.jsx)("span",{children:"10 posts"})]})]}),n&&(0,o.jsx)("p",{className:"text-red-400 text-sm mb-4",children:n}),(0,o.jsx)("button",{onClick:v,disabled:l||!d.trim(),className:"w-full flex items-center justify-center py-3 px-6 bg-charcoal hover:bg-charcoal-dark disabled:bg-slate disabled:cursor-not-allowed text-white rounded-lg transition font-medium",children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(bP.Loader2,{className:"animate-spin w-5 h-5 mr-2"}),"Generating ",j," Posts..."]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(cx.Sparkles,{className:"w-5 h-5 mr-2"}),"Repurpose Content"]})})]}),r.length>0&&(0,o.jsxs)("div",{className:"mt-8",children:[(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-2xl font-bold text-charcoal-dark flex items-center gap-2",children:[(0,o.jsx)(cx.Sparkles,{className:"w-6 h-6 text-yellow-400"}),"Generated Posts"]}),(0,o.jsxs)("p",{className:"text-sm text-slate mt-1",children:[r.length," posts ready to save"]})]}),(0,o.jsxs)("button",{onClick:()=>{a(r),s([]),e(""),g("")},className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:[(0,o.jsx)(ct.Save,{className:"w-4 h-4"}),"Save All to Drafts"]})]}),(0,o.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map((a,b)=>(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-slate/30 overflow-hidden hover:shadow-xl transition-shadow duration-200",children:[(0,o.jsx)("div",{className:"bg-light-gray px-6 py-4 border-b border-slate/30",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full bg-charcoal text-white flex items-center justify-center font-bold text-sm",children:b+1}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h4",{className:"font-bold text-charcoal-dark",children:["Post ",b+1]}),(0,o.jsx)("p",{className:"text-xs text-slate",children:"Draft"})]})]}),(0,o.jsx)("div",{className:"flex gap-2",children:h.map(a=>{let b=bK.PLATFORMS.find(b=>b.id===a);if(!b)return null;let{icon:c}=b;return(0,o.jsx)(c,{className:"w-5 h-5 text-slate"},a)})})]})}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsx)("div",{className:"pb-3 border-b border-slate/20",children:(0,o.jsx)("p",{className:"text-sm font-semibold text-charcoal-dark leading-relaxed",children:a.topic})}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(yn,{className:"w-4 h-4 text-charcoal"}),(0,o.jsx)("p",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Content"})]}),(0,o.jsx)("div",{className:"bg-slate/5 border border-slate/20 p-4 rounded-lg",children:(0,o.jsx)("p",{className:"text-charcoal text-sm leading-relaxed line-clamp-4",children:a?.content?.[h?.[0]]??"No content"})})]}),a.content?.imageSuggestion&&(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(cr,{className:"w-4 h-4 text-teal-600"}),(0,o.jsx)("p",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Picture Script"})]}),(0,o.jsx)("div",{className:"bg-teal-50 border border-teal-200 p-4 rounded-lg",children:(0,o.jsxs)("p",{className:"text-slate text-xs italic leading-relaxed line-clamp-3",children:['"',a.content.imageSuggestion,'"']})})]}),a.content?.videoSuggestion&&(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(cq,{className:"w-4 h-4 text-purple-600"}),(0,o.jsx)("p",{className:"text-xs font-semibold text-charcoal uppercase tracking-wide",children:"Video Script"})]}),(0,o.jsx)("div",{className:"bg-purple-50 border border-purple-200 p-4 rounded-lg",children:(0,o.jsxs)("p",{className:"text-slate text-xs italic leading-relaxed line-clamp-3",children:['"',a.content.videoSuggestion,'"']})})]})]})]},a.id))})]})]})},yp=(0,bL.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var yq=a.i(33441);let yr=(0,bL.default)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var ys=a.i(5193);let yt=()=>{let{notifications:a,unreadCount:b,markAsRead:c,markAllAsRead:d,clearNotification:e}=(0,ys.useNotifications)(),[f,g]=(0,p.useState)(!1),h=(0,p.useRef)(null);return(0,p.useEffect)(()=>{let a=a=>{h.current&&!h.current.contains(a.target)&&g(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,o.jsxs)("div",{className:"relative",ref:h,children:[(0,o.jsxs)("button",{onClick:()=>g(!f),className:"relative p-2 text-slate hover:text-charcoal-dark hover:bg-slate/10 rounded-lg transition",children:[(0,o.jsx)(yp,{className:"w-6 h-6"}),b>0&&(0,o.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-600 rounded-full",children:b>9?"9+":b})]}),f&&(0,o.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-slate/30 z-50 max-h-[600px] overflow-hidden flex flex-col",children:[(0,o.jsxs)("div",{className:"p-4 border-b border-slate/30 flex justify-between items-center",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-charcoal-dark",children:"Notifications"}),a.length>0&&(0,o.jsxs)("button",{onClick:d,className:"text-xs text-charcoal-dark hover:text-charcoal flex items-center",children:[(0,o.jsx)(yr,{className:"w-4 h-4 mr-1"}),"Mark all read"]})]}),(0,o.jsx)("div",{className:"overflow-y-auto flex-1",children:0===a.length?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)(yp,{className:"w-12 h-12 text-slate mx-auto mb-2"}),(0,o.jsx)("p",{className:"text-slate",children:"No notifications yet"})]}):(0,o.jsx)("div",{className:"divide-y divide-slate/30",children:a.map(a=>{var b;let d;return(0,o.jsx)("div",{className:`p-4 hover:bg-slate/10 transition ${!a.read?"bg-charcoal/10":""}`,children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{className:"flex-1 pr-2",children:[(0,o.jsx)("p",{className:"text-charcoal-dark font-medium text-sm",children:a.title}),(0,o.jsx)("p",{className:"text-slate text-sm mt-1",children:a.message}),(0,o.jsx)("p",{className:"text-slate text-xs mt-2",children:(b=a.createdAt,(d=Math.floor((new Date().getTime()-new Date(b).getTime())/1e3))<60?"Just now":d<3600?`${Math.floor(d/60)}m ago`:d<86400?`${Math.floor(d/3600)}h ago`:`${Math.floor(d/86400)}d ago`)})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[!a.read&&(0,o.jsx)("button",{onClick:()=>c(a.id),className:"text-charcoal-dark hover:text-charcoal",title:"Mark as read",children:(0,o.jsx)(yq.Check,{className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:()=>e(a.id),className:"text-slate hover:text-charcoal-dark",title:"Remove",children:(0,o.jsx)(cz.X,{className:"w-4 h-4"})})]})]})},a.id)})})})]})]})};var yu=a.i(89807);a.i(59047);var yv=a.i(95445);class yw{static async getAllPosts(a){try{let{data:b,error:c}=await yv.supabase.from("posts").select("*").eq("workspace_id",a).order("created_at",{ascending:!1});if(c)throw c;return b.map(this.transformFromDB)}catch(a){throw console.error("Error fetching posts:",a),a}}static async getPostById(a,b){try{let{data:c,error:d}=await yv.supabase.from("posts").select("*").eq("id",a).eq("workspace_id",b).single();if(d)throw d;return c?this.transformFromDB(c):null}catch(a){return console.error("Error fetching post:",a),null}}static async createPost(a,b,c){try{let d=this.transformToDB(a,b,c),{data:e,error:f}=await yv.supabase.from("posts").insert(d).select().maybeSingle();if(f)throw f;return await this.logActivity(c,b,"create","post",e.id),this.transformFromDB(e)}catch(a){throw console.error("Error creating post:",a),a}}static async updatePost(a,b,c){try{let d=this.transformToDB(a,b,c),{data:e,error:f}=await yv.supabase.from("posts").update(d).eq("id",a.id).eq("workspace_id",c).select().single();if(f)throw f;return await this.logActivity(c,b,"update","post",e.id),this.transformFromDB(e)}catch(a){throw console.error("Error updating post:",a),a}}static async deletePost(a,b,c){try{let{error:d}=await yv.supabase.from("posts").delete().eq("id",a).eq("workspace_id",c);if(d)throw d;await this.logActivity(c,b,"delete","post",a)}catch(a){throw console.error("Error deleting post:",a),a}}static async getPostsByStatus(a,b){try{let{data:c,error:d}=await yv.supabase.from("posts").select("*").eq("workspace_id",b).eq("status",a).order("created_at",{ascending:!1});if(d)throw d;return c.map(this.transformFromDB)}catch(a){throw console.error("Error fetching posts by status:",a),a}}static async getPostsByCampaign(a,b){try{let{data:c,error:d}=await yv.supabase.from("posts").select("*").eq("workspace_id",b).eq("campaign_id",a).order("created_at",{ascending:!1});if(d)throw d;return c.map(this.transformFromDB)}catch(a){throw console.error("Error fetching posts by campaign:",a),a}}static async getScheduledPosts(a){try{let b=new Date().toISOString(),{data:c,error:d}=await yv.supabase.from("posts").select("*").eq("workspace_id",a).eq("status","scheduled").lte("scheduled_at",b);if(d)throw d;return c.map(this.transformFromDB)}catch(a){throw console.error("Error fetching scheduled posts:",a),a}}static async updatePostStatus(a,b,c,d){try{let e={status:b};"published"===b&&(e.published_at=new Date().toISOString());let{error:f}=await yv.supabase.from("posts").update(e).eq("id",a).eq("workspace_id",d);if(f)throw f;await this.logActivity(d,c,"update_status","post",a,{status:b})}catch(a){throw console.error("Error updating post status:",a),a}}static transformFromDB(a){return{id:a.id,topic:a.topic,platforms:a.platforms,content:a.content,status:a.status,createdAt:a.created_at,scheduledAt:a.scheduled_at,publishedAt:a.published_at,campaignId:a.campaign_id,engagementScore:a.engagement_score,engagementSuggestions:a.engagement_suggestions,generatedImage:a.content?.generatedImage,generatedVideoUrl:a.content?.generatedVideoUrl,isGeneratingImage:a.content?.isGeneratingImage||!1,isGeneratingVideo:a.content?.isGeneratingVideo||!1,videoGenerationStatus:a.content?.videoGenerationStatus,videoOperation:a.content?.videoOperation}}static transformToDB(a,b,c){let{generatedImage:d,generatedVideoUrl:e,isGeneratingImage:f,isGeneratingVideo:g,videoGenerationStatus:h,videoOperation:i,content:j,...k}=a;return{id:a.id,workspace_id:c,created_by:b,topic:a.topic,platforms:a.platforms,content:{...j,generatedImage:d,generatedVideoUrl:e,isGeneratingImage:f,isGeneratingVideo:g,videoGenerationStatus:h,videoOperation:i},status:a.status,scheduled_at:a.scheduledAt,published_at:a.publishedAt,campaign_id:a.campaignId,engagement_score:a.engagementScore,engagement_suggestions:a.engagementSuggestions}}static async logActivity(a,b,c,d,e,f={}){try{await yv.supabase.from("activity_logs").insert({workspace_id:a,user_id:b,action:c,resource_type:d,resource_id:e,details:f||null})}catch(a){console.error("Error logging activity:",a)}}}class yx{static async getAllCampaigns(a){try{let{data:b,error:c}=await yv.supabase.from("campaigns").select("*").eq("workspace_id",a).order("created_at",{ascending:!1});if(c)throw c;return b.map(this.transformFromDB)}catch(a){throw console.error("Error fetching campaigns:",a),a}}static async getCampaignById(a,b){try{let{data:c,error:d}=await yv.supabase.from("campaigns").select("*").eq("id",a).eq("workspace_id",b).single();if(d)throw d;return c?this.transformFromDB(c):null}catch(a){return console.error("Error fetching campaign:",a),null}}static async createCampaign(a,b,c,d,e,f){try{let f={workspace_id:a,name:b,goal:c||null,color:this.getRandomCampaignColor(),start_date:d||new Date().toISOString(),end_date:e||null},{data:g,error:h}=await yv.supabase.from("campaigns").insert(f).select().single();if(h)throw h;return this.transformFromDB(g)}catch(a){throw console.error("Error creating campaign:",a),a}}static async updateCampaign(a,b){try{let c={name:a.name,goal:a.description||null,color:a.color,start_date:a.startDate,end_date:a.endDate??null},{data:d,error:e}=await yv.supabase.from("campaigns").update(c).eq("id",a.id).eq("workspace_id",b).select().single();if(e)throw e;return this.transformFromDB(d)}catch(a){throw console.error("Error updating campaign:",a),a}}static async deleteCampaign(a,b){try{let{error:c}=await yv.supabase.from("campaigns").delete().eq("id",a).eq("workspace_id",b);if(c)throw c}catch(a){throw console.error("Error deleting campaign:",a),a}}static async getCampaignPostsCount(a,b){try{let{count:c,error:d}=await yv.supabase.from("posts").select("*",{count:"exact",head:!0}).eq("campaign_id",a).eq("workspace_id",b);if(d)throw d;return c||0}catch(a){return console.error("Error getting campaign posts count:",a),0}}static transformFromDB(a){return{id:a.id,name:a.name,description:a.goal,color:a.color,startDate:a.start_date,endDate:a.end_date,createdAt:a.created_at}}static getRandomCampaignColor(){let a=["#8B5CF6","#EC4899","#F59E0B","#10B981","#3B82F6","#EF4444","#14B8A6","#F97316"];return a[Math.floor(Math.random()*a.length)]}}var yy=a.i(54799);async function yz(a){try{let b=process.env.ENCRYPTION_MASTER_KEY;if(!b)throw Error("ENCRYPTION_MASTER_KEY environment variable not set");return yy.default.pbkdf2Sync(b,a,1e5,32,"sha256")}catch(a){throw console.error("Failed to get workspace encryption key:",a),Error("Encryption key unavailable")}}async function yA(a,b){try{let c=JSON.stringify(a),d=yy.default.randomBytes(12),e=yy.default.createCipheriv("aes-256-gcm",b,d),f=e.update(c,"utf8","hex");f+=e.final("hex");let g=e.getAuthTag();return Buffer.concat([d,g,Buffer.from(f,"hex")]).toString("base64")}catch(a){throw console.error("Encryption failed:",a),Error("Failed to encrypt credentials")}}async function yB(a,b){try{let c=Buffer.from(a,"base64"),d=c.slice(0,12),e=c.slice(12,28),f=c.slice(28),g=yy.default.createDecipheriv("aes-256-gcm",b,d);g.setAuthTag(e);let h=g.update(f.toString("hex"),"hex","utf8");return h+=g.final("utf8"),JSON.parse(h)}catch(a){throw console.error("Decryption failed:",a),Error("Failed to decrypt credentials")}}async function yC({workspaceId:a,userId:b,platform:c,action:d,status:e,errorMessage:f,errorCode:g,ipAddress:h,userAgent:i,requestPath:j,metadata:k}){try{let{error:l}=await yv.supabase.from("credential_audit_log").insert({workspace_id:a,user_id:b,platform:c,action:d,status:e,error_message:f||null,error_code:g||null,ip_address:h||null,user_agent:i||null,request_path:j||null,metadata:k||null});l&&console.error("Failed to insert audit log:",l)}catch(a){console.error("Audit logging error:",a)}}class yD{static async savePlatformCredentials(a,b,c,d,e={}){try{let f=await yz(d),g=await yA(b,f),{data:h,error:i}=await yv.supabase.from("social_accounts").select("id").eq("workspace_id",d).eq("platform",a).maybeSingle();if(i)throw i;let j={credentials_encrypted:g,is_connected:b.isConnected??!0,username:b.username||null,expires_at:b.expiresAt||null,last_refreshed_at:new Date().toISOString(),refresh_token_encrypted:b.refreshToken?await yA({token:b.refreshToken},f):null,page_id:e.pageId||null,page_name:e.pageName||null,connected_at:b.isConnected?new Date().toISOString():null,refresh_error_count:0};if(h){let{error:b}=await yv.supabase.from("social_accounts").update(j).eq("id",h.id);if(b)throw b;await yC({workspaceId:d,userId:c,platform:a,action:"credentials_updated",status:"success"})}else{let{error:b}=await yv.supabase.from("social_accounts").insert({workspace_id:d,platform:a,...j});if(b)throw b;await yC({workspaceId:d,userId:c,platform:a,action:"platform_connected",status:"success"})}}catch(b){throw console.error("Error saving credentials:",b),await yC({workspaceId:d,userId:c,platform:a,action:"credentials_save_failed",status:"failed",errorMessage:b instanceof Error?b.message:String(b),errorCode:"SAVE_ERROR"}).catch(a=>console.error("Failed to log error:",a)),b}}static async getPlatformCredentials(a,b,c){try{let{data:b,error:d}=await yv.supabase.from("social_accounts").select("*").eq("workspace_id",c).eq("platform",a).maybeSingle();if(d||!b)return null;let e=await yz(c),f=await yB(b.credentials_encrypted,e),g=null;if(b.refresh_token_encrypted)try{g=(await yB(b.refresh_token_encrypted,e)).token}catch(a){console.error("Failed to decrypt refresh token:",a)}return{...f,refreshToken:g,expiresAt:b.expires_at,pageId:b.page_id,pageName:b.page_name,isConnected:b.is_connected}}catch(a){return console.error("Error getting credentials:",a),null}}static async verifyAndRefreshToken(a,b,c,d){try{let e=await this.getPlatformCredentials(a,b,c);if(!e)throw Error(`No credentials found for ${a}`);if(e.expiresAt){let f=new Date(e.expiresAt).getTime();if(Date.now()>f)if(d&&e.refreshToken)try{let f=await d(e);return await this.savePlatformCredentials(a,f,b,c),await yC({workspaceId:c,userId:b,platform:a,action:"token_refreshed",status:"success"}),f}catch(d){throw await yC({workspaceId:c,userId:b,platform:a,action:"token_refresh_failed",status:"failed",errorMessage:d instanceof Error?d.message:String(d),errorCode:"REFRESH_ERROR"}),Error(`Token refresh failed: ${d instanceof Error?d.message:String(d)}`)}else throw Error("Token expired and no refresh token available")}return e}catch(a){throw console.error("Token verification failed:",a),a}}static async disconnectPlatform(a,b,c){try{let{error:d}=await yv.supabase.from("social_accounts").update({is_connected:!1,credentials_encrypted:null,refresh_token_encrypted:null,connected_at:null}).eq("workspace_id",c).eq("platform",a);if(d)throw d;await yC({workspaceId:c,userId:b,platform:a,action:"platform_disconnected",status:"success"})}catch(d){throw console.error("Error disconnecting platform:",d),await yC({workspaceId:c,userId:b,platform:a,action:"disconnect_failed",status:"failed",errorMessage:d instanceof Error?d.message:String(d),errorCode:"DISCONNECT_ERROR"}).catch(a=>console.error("Failed to log error:",a)),d}}static async getConnectionStatus(a){try{let{data:b,error:c}=await yv.supabase.from("social_accounts").select("platform, is_connected, username, page_name, expires_at").eq("workspace_id",a);if(c)throw c;let d={twitter:{isConnected:!1},linkedin:{isConnected:!1},facebook:{isConnected:!1},instagram:{isConnected:!1}},e=Date.now();for(let a of b||[]){let b=a.expires_at?new Date(a.expires_at).getTime():null;d[a.platform]={isConnected:a.is_connected,username:a.username||a.page_name,expiresAt:a.expires_at,isExpiringSoon:b&&b-e<864e5&&b>e,isExpired:b&&b<=e}}return d}catch(a){return console.error("Error getting connection status:",a),{twitter:{isConnected:!1},linkedin:{isConnected:!1},facebook:{isConnected:!1},instagram:{isConnected:!1}}}}static async deletePlatformCredentials(a,b){try{let{error:c}=await yv.supabase.from("social_accounts").delete().eq("workspace_id",b).eq("platform",a);if(c)throw c}catch(a){throw console.error("Error deleting credentials:",a),a}}static async getAllCredentialsStatus(a){try{let{data:b,error:c}=await yv.supabase.from("social_accounts").select("platform, is_connected, username, page_name").eq("workspace_id",a);if(c)throw c;return(b||[]).map(a=>({platform:a.platform,isConnected:a.is_connected,username:a.username||a.page_name}))}catch(a){return console.error("Error getting all credentials status:",a),[]}}}class yE{static needsMigration(){let a=null!==localStorage.getItem("socialMediaPosts"),b=null!==localStorage.getItem("campaigns"),c=null!==localStorage.getItem("social_media_credentials"),d="true"===localStorage.getItem("migration_completed");return(a||b||c)&&!d}static async migrateAllData(a,b){let c=[],d=0,e=0,f=0;try{let g=await this.migratePosts(a,b);d=g.count,g.errors.length>0&&c.push(...g.errors);let h=await this.migrateCampaigns(b);e=h.count,h.errors.length>0&&c.push(...h.errors);let i=await this.migrateCredentials(a,b);return f=i.count,i.errors.length>0&&c.push(...i.errors),localStorage.setItem("migration_completed","true"),{success:0===c.length,postsCount:d,campaignsCount:e,credentialsCount:f,errors:c}}catch(a){return console.error("Migration error:",a),c.push("Failed to complete migration: "+a.message),{success:!1,postsCount:d,campaignsCount:e,credentialsCount:f,errors:c}}}static async migratePosts(a,b){let c=[],d=0;try{let e=localStorage.getItem("socialMediaPosts");if(!e)return{count:0,errors:[]};for(let f of JSON.parse(e))try{if(await yw.getPostById(f.id,b)){console.log(`Post ${f.id} already exists, skipping`);continue}await yw.createPost(f,a,b),d++}catch(a){console.error(`Error migrating post ${f.id}:`,a),c.push(`Failed to migrate post "${f.topic}": ${a.message}`)}}catch(a){console.error("Error parsing posts from localStorage:",a),c.push("Failed to parse posts from localStorage")}return{count:d,errors:c}}static async migrateCampaigns(b){let c=[],d=0;try{let e=localStorage.getItem("campaigns");if(!e)return{count:0,errors:[]};for(let f of JSON.parse(e))try{if(await yx.getCampaignById(f.id,b)){console.log(`Campaign ${f.id} already exists, skipping`);continue}let{error:c}=await (await a.A(84195)).supabase.from("campaigns").insert({id:f.id,workspace_id:b,name:f.name,goal:f.description||null,color:f.color,start_date:f.startDate,end_date:f.endDate??null});if(c)throw c;d++}catch(a){console.error(`Error migrating campaign ${f.id}:`,a),c.push(`Failed to migrate campaign "${f.name}": ${a.message}`)}}catch(a){console.error("Error parsing campaigns from localStorage:",a),c.push("Failed to parse campaigns from localStorage")}return{count:d,errors:c}}static async migrateCredentials(a,b){let c=[],d=0;try{let e=localStorage.getItem("social_media_credentials");if(!e)return{count:0,errors:[]};let f=e.split("").reverse().join(""),g=atob(f),h=JSON.parse(g);for(let[e,f]of Object.entries(h))try{if(!f)continue;let c=await yD.getConnectionStatus(b);if(c[e]?.isConnected){console.log(`Credentials for ${e} already exist, skipping`);continue}await yD.savePlatformCredentials(e,f,a,b),d++}catch(a){console.error(`Error migrating credentials for ${e}:`,a),c.push(`Failed to migrate ${e} credentials: ${a.message}`)}}catch(a){console.error("Error parsing credentials from localStorage:",a),c.push("Failed to parse credentials from localStorage")}return{count:d,errors:c}}static clearLocalStorageData(){try{localStorage.removeItem("socialMediaPosts"),localStorage.removeItem("campaigns"),localStorage.removeItem("social_media_credentials"),console.log("LocalStorage data cleared after migration")}catch(a){console.error("Error clearing localStorage:",a)}}static resetMigrationStatus(){localStorage.removeItem("migration_completed")}}function yF(){let{user:a,workspaceId:b}=(0,yu.useAuth)(),[c,d]=(0,p.useState)(!1),[e,f]=(0,p.useState)(!1),[g,h]=(0,p.useState)(null),[i,j]=(0,p.useState)(!1);(0,p.useEffect)(()=>{d(yE.needsMigration()),sessionStorage.getItem("migration_banner_dismissed")&&j(!0)},[]);let k=async()=>{if(a&&b){f(!0);try{let c=await yE.migrateAllData(a.id,b);h(c),c.success&&(yE.clearLocalStorageData(),d(!1),setTimeout(()=>{window.location.reload()},2e3))}catch(a){console.error("Migration failed:",a),h({success:!1,postsCount:0,campaignsCount:0,credentialsCount:0,errors:["Migration failed: "+a.message]})}finally{f(!1)}}},l=()=>{sessionStorage.setItem("migration_banner_dismissed","true"),j(!0)};return!c||i?null:(0,o.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)(yb.AlertCircle,{className:"h-5 w-5 text-blue-500"})}),(0,o.jsxs)("div",{className:"ml-3 flex-1",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-blue-900",children:"Migrate your data to the cloud"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-blue-800",children:(0,o.jsx)("p",{children:'We\'ve upgraded to a cloud database! Your existing data (posts, campaigns, credentials) is currently stored locally in your browser. Click "Migrate Now" to securely transfer it to the cloud database.'})}),g&&(0,o.jsx)("div",{className:`mt-3 p-3 rounded ${g.success?"bg-green-100 border border-green-300":"bg-red-100 border border-red-300"}`,children:g.success?(0,o.jsxs)("div",{className:"flex items-center text-green-800",children:[(0,o.jsx)(bQ.CheckCircle,{className:"w-5 h-5 mr-2"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium",children:"Migration successful!"}),(0,o.jsxs)("p",{className:"text-sm",children:["Migrated ",g.postsCount," posts, ",g.campaignsCount," ","campaigns, and ",g.credentialsCount," platform credentials. Refreshing..."]})]})]}):(0,o.jsxs)("div",{className:"text-red-800",children:[(0,o.jsx)("p",{className:"font-medium",children:"Migration encountered errors:"}),(0,o.jsx)("ul",{className:"text-sm list-disc list-inside mt-1",children:g.errors.map((a,b)=>(0,o.jsx)("li",{children:a},b))}),(0,o.jsxs)("p",{className:"text-sm mt-2",children:["Partial migration: ",g.postsCount," posts,"," ",g.campaignsCount," campaigns, ",g.credentialsCount," ","credentials"]})]})}),(0,o.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,o.jsx)("button",{onClick:k,disabled:e,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(bP.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Migrating..."]}):"Migrate Now"}),(0,o.jsx)("button",{onClick:()=>{localStorage.setItem("migration_completed","true"),d(!1),j(!0)},disabled:e,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Skip (Keep local data)"}),(0,o.jsx)("button",{onClick:l,disabled:e,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 disabled:opacity-50",children:"Remind me later"})]})]}),(0,o.jsx)("div",{className:"ml-auto pl-3",children:(0,o.jsx)("button",{onClick:l,className:"inline-flex text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,o.jsx)(cz.X,{className:"h-5 w-5"})})})]})})}var yG=a.i(68976);let yH=(0,bL.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),yI=(0,bL.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),yJ=(0,bL.default)("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]),yK=()=>{let{addNotification:a}=(0,ys.useNotifications)(),{user:b,signOut:c,userRole:d,workspaceId:e}=(0,yu.useAuth)(),[f,g]=(0,p.useState)("create"),[h,i]=(0,p.useState)([]),[j,k]=(0,p.useState)(!1),[l,m]=(0,p.useState)({twitter:!1,linkedin:!1,facebook:!1,instagram:!1});(0,p.useEffect)(()=>{b&&e?(async()=>{try{k(!0);let a=await yw.getAllPosts(e);i(a);let b=await yD.getConnectionStatus(e),c={twitter:b.twitter?.isConnected??!1,linkedin:b.linkedin?.isConnected??!1,facebook:b.facebook?.isConnected??!1,instagram:b.instagram?.isConnected??!1};m(c)}catch(a){console.error("Error loading data from Supabase:",a);try{let a=localStorage.getItem("socialMediaPosts");a&&i(JSON.parse(a));let b=localStorage.getItem("connectedSocialAccounts");b&&m(JSON.parse(b))}catch(a){console.error("Could not load from localStorage either",a)}}finally{k(!1)}})():k(!1)},[b,e]);let[n,r]=(0,p.useState)(!1),s=(0,p.useCallback)(async()=>{window.aistudio&&await window.aistudio.hasSelectedApiKey()?r(!0):r(!1)},[]);(0,p.useEffect)(()=>{s()},[s]);let t=(0,p.useCallback)(async()=>{window.aistudio&&(await window.aistudio.openSelectKey(),r(!0))},[]),u=(0,p.useCallback)(async a=>{if(i(b=>b.map(b=>b.id===a.id?a:b)),b&&e)try{await yw.updatePost(a,b.id,e)}catch(a){console.error("Error updating post in Supabase:",a)}},[b,e]),v=(0,p.useCallback)(()=>{h.forEach(b=>{b.isGeneratingVideo&&b.videoOperation&&!b.videoOperation.done&&bY(b.videoOperation).then(async c=>{if(c.done){let d=c.response?.generatedVideos?.[0]?.video?.uri;if(d){let e=await bZ(d);await cm(e,"video",b.topic),a("video_complete","Video Generation Complete",`Video for "${b.topic}" is ready!`,b.id),u({...b,generatedVideoUrl:e,isGeneratingVideo:!1,videoGenerationStatus:"Completed!",videoOperation:c})}else u({...b,isGeneratingVideo:!1,videoGenerationStatus:"Failed: No URI.",videoOperation:c})}else u({...b,videoOperation:c})}).catch(a=>{console.error("Error polling video status:",a),"API_KEY_INVALID"===a.message&&r(!1),u({...b,isGeneratingVideo:!1,videoGenerationStatus:"Error polling status."})})})},[h,u,a]);(0,p.useEffect)(()=>{b&&e&&0!==h.length&&localStorage.setItem("socialMediaPosts",JSON.stringify(h))},[h,b,e]),(0,p.useEffect)(()=>{localStorage.setItem("connectedSocialAccounts",JSON.stringify(l))},[l]);let w=(0,p.useCallback)(()=>{i(a=>a.map(a=>"scheduled"===a.status&&a.scheduledAt&&new Date(a.scheduledAt)<=new Date?{...a,status:"published",publishedAt:new Date().toISOString()}:a))},[]);(0,p.useEffect)(()=>{let a=setInterval(w,6e4),b=setInterval(v,15e3);return()=>{clearInterval(a),clearInterval(b)}},[w,v]);let x=async c=>{if(i(a=>[c,...a]),g("manage"),a("post_scheduled","New Post Created",`Post "${c.topic}" has been added to drafts.`,c.id),b&&e)try{await yw.createPost(c,b.id,e)}catch(b){console.error("Error saving post to Supabase:",b),a("error","Save Error","Failed to save post to database. It will be saved locally.")}},y=b=>{i(a=>[...b,...a]),g("manage"),a("post_scheduled","Posts Created",`${b.length} posts have been added to your drafts.`)},z=async a=>{if(i(b=>b.filter(b=>b.id!==a)),b&&e)try{await yw.deletePost(a,b.id,e)}catch(a){console.error("Error deleting post from Supabase:",a)}},A=({viewName:a,icon:b,label:c})=>(0,o.jsxs)("button",{onClick:()=>g(a),className:`flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200 ${f===a?"bg-charcoal text-white shadow-md":"text-slate hover:bg-slate/10 hover:text-charcoal-dark"}`,children:[(0,o.jsx)(b,{className:"w-5 h-5 mr-3"}),(0,o.jsx)("span",{children:c})]});return(0,o.jsxs)("div",{className:"flex h-screen bg-white text-charcoal font-sans",children:[(0,o.jsxs)("aside",{className:"w-64 bg-light-gray p-4 flex flex-col justify-between border-r border-slate/30",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,o.jsx)("h1",{className:"text-xl font-bold text-charcoal-dark",children:"AI Content OS"}),(0,o.jsx)(yt,{})]}),(0,o.jsxs)("nav",{className:"space-y-2",children:[(0,o.jsx)(A,{viewName:"create",icon:yG.Edit3,label:"Create Content"}),(0,o.jsx)(A,{viewName:"repurpose",icon:cx.Sparkles,label:"Repurpose"}),(0,o.jsx)(A,{viewName:"manage",icon:cL,label:"Manage Posts"}),(0,o.jsx)(A,{viewName:"history",icon:bS,label:"Published"}),(0,o.jsx)("div",{className:"border-t border-slate/30 my-2"}),(0,o.jsx)(A,{viewName:"campaigns",icon:yl,label:"Campaigns"}),(0,o.jsx)(A,{viewName:"media",icon:cr,label:"Media Library"}),(0,o.jsx)(A,{viewName:"analytics",icon:yH,label:"Analytics"})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"p-3 bg-white border border-slate/30 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-charcoal rounded-full flex items-center justify-center",children:(0,o.jsx)(bO,{className:"w-5 h-5 text-white"})}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsx)("p",{className:"text-sm font-semibold text-charcoal-dark truncate",children:b?.user_metadata?.full_name||b?.email?.split("@")[0]}),(0,o.jsx)("p",{className:"text-xs text-slate truncate",children:b?.email})]})]}),d&&(0,o.jsx)("div",{className:"inline-block px-2 py-1 bg-charcoal/10 rounded text-xs font-medium text-charcoal",children:d})]}),(0,o.jsxs)(q.default,{href:"/settings?tab=members",className:"flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-slate hover:bg-slate/10 hover:text-charcoal-dark",children:[(0,o.jsx)(yJ,{className:"w-5 h-5 mr-3"}),(0,o.jsx)("span",{children:"Workspace Settings"})]}),(0,o.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to sign out?")&&c()},className:"flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-red-600 hover:bg-red-50",children:[(0,o.jsx)(yI,{className:"w-5 h-5 mr-3"}),(0,o.jsx)("span",{children:"Sign Out"})]})]})]}),(0,o.jsxs)("main",{className:"flex-1 overflow-y-auto p-8",children:[(0,o.jsx)(yF,{}),j?(0,o.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 border-4 border-charcoal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-slate",children:"Loading your content..."})]})}):(()=>{let a={posts:h,onUpdatePost:u,onDeletePost:z,isApiKeyReady:n,onSelectKey:t,resetApiKeyStatus:()=>r(!1),connectedAccounts:l};switch(f){case"create":return(0,o.jsx)(bU,{onPostCreated:x});case"manage":return(0,o.jsx)(cN,{...a});case"history":return(0,o.jsx)(ye,{...a});case"analytics":return(0,o.jsx)(xZ,{posts:h});case"media":return(0,o.jsx)(yh,{});case"campaigns":return(0,o.jsx)(ym,{posts:h});case"repurpose":return(0,o.jsx)(yo,{onPostsCreated:y});default:return null}})()]})]})},yL=()=>(0,o.jsx)(ys.NotificationProvider,{children:(0,o.jsx)(yK,{})});var yM=a.i(73146);function yN(){return(0,o.jsx)(yM.default,{children:(0,o.jsx)(yL,{})})}a.s(["default",()=>yN],40777)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f8db881a._.js.map