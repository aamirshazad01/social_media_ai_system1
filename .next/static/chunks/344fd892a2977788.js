(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},24189,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(75254);let l=(0,r.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),i=(0,r.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),n=(0,r.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var o=e.i(73375);let c=(0,r.default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var d=e.i(22016),m=e.i(57951);let x=[{id:"accounts",label:"Connected Accounts",icon:(0,s.jsx)(c,{size:20})},{id:"api",label:"API Settings",icon:(0,s.jsx)(i,{size:20})},{id:"workspace",label:"Workspace Settings",icon:(0,s.jsx)(i,{size:20})}],h=[{id:"members",label:"Members",icon:(0,s.jsx)(l,{size:20})},{id:"activity",label:"Activity Log",icon:(0,s.jsx)(n,{size:20})}];function u({children:e,activeTab:t}){let{userRole:a}=(0,m.useAuth)(),r="admin"===a?[...x,...h]:h;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)(d.default,{href:"/",className:"text-slate hover:text-charcoal transition-colors",children:(0,s.jsx)(o.ChevronLeft,{size:24})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-charcoal",children:"Workspace Settings"})]}),(0,s.jsx)("p",{className:"text-slate",children:"Manage your workspace, members, and activity"})]})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)("nav",{className:"space-y-2 sticky top-8",children:r.map(e=>(0,s.jsxs)(d.default,{href:`/settings?tab=${e.id}`,className:`flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors ${t===e.id?"bg-blue-600 text-white":"text-slate hover:bg-gray-100"}`,children:[e.icon,e.label]},e.id))})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:e})})]})})]})}var p=e.i(67051),g=e.i(7233),b=e.i(27612);let f=(0,r.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var j=e.i(21345);let y=(0,r.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var v=e.i(83627),w=e.i(86536);let N=({role:e,size:t="md",className:a=""})=>{let r={admin:{label:"Admin",color:"bg-blue-600 text-white",icon:y,description:"Full workspace control"},editor:{label:"Editor",color:"bg-green-600 text-white",icon:v.Edit3,description:"Create & edit content"},viewer:{label:"Viewer",color:"bg-slate text-white",icon:w.Eye,description:"Read-only access"}}[e],l=r.icon;return(0,s.jsxs)("span",{className:`inline-flex items-center gap-1.5 rounded-full font-semibold ${r.color} ${{sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"}[t]} ${a}`,title:r.description,children:[(0,s.jsx)(l,{className:{sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[t]}),(0,s.jsx)("span",{children:r.label})]})},k=(0,r.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),C=(0,r.default)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var S=e.i(31278),_=e.i(5766);let E=({member:e,currentUserRole:a,currentUserId:r,onRoleChange:l,onRemove:i})=>{let[n,o]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[m,x]=(0,t.useState)(e.role),[h,u]=(0,t.useState)(!1),p=e.id===r,g=async s=>{if(s===e.role)return void d(!1);u(!0),x(s);try{await l(e.id,s),_.default.success(`Role updated to ${s}`),d(!1)}catch(s){_.default.error("Failed to update role"),x(e.role)}finally{u(!1)}},f=async()=>{if(confirm(`Are you sure you want to remove ${e.full_name||e.email} from the workspace? This action cannot be undone.`)){u(!0);try{await i(e.id),_.default.success("Member removed successfully"),o(!1)}catch(e){_.default.error("Failed to remove member")}finally{u(!1)}}};return(0,s.jsxs)("div",{className:"bg-white border border-slate/30 rounded-lg p-4 flex items-center gap-4 hover:shadow-md transition-shadow",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:e.avatar_url?(0,s.jsx)("img",{src:e.avatar_url,alt:e.full_name||e.email,className:"w-12 h-12 rounded-full object-cover border-2 border-slate/20"}):(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-charcoal text-white flex items-center justify-center text-lg font-bold",children:(e.full_name||e.email).charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-charcoal-dark truncate",children:e.full_name||"No name"}),p&&(0,s.jsx)("span",{className:"text-xs text-slate bg-slate/10 px-2 py-0.5 rounded",children:"You"})]}),(0,s.jsx)("p",{className:"text-sm text-slate truncate",children:e.email}),(0,s.jsxs)("p",{className:"text-xs text-slate mt-1",children:["Joined ",new Date(e.created_at).toLocaleDateString()]})]}),(0,s.jsx)("div",{className:"flex-shrink-0",children:c&&!h?(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),onBlur:()=>{d(!1),x(e.role)},autoFocus:!0,className:"border border-slate/30 rounded-md px-2 py-1 text-sm focus:ring-2 focus:ring-charcoal focus:border-charcoal",children:[(0,s.jsx)("option",{value:"admin",children:"Admin"}),(0,s.jsx)("option",{value:"editor",children:"Editor"}),(0,s.jsx)("option",{value:"viewer",children:"Viewer"})]}):(0,s.jsx)(N,{role:e.role})}),"admin"===a&&!p&&(0,s.jsxs)("div",{className:"flex-shrink-0 relative",children:[(0,s.jsx)("button",{onClick:()=>o(!n),disabled:h,className:"p-2 rounded-full hover:bg-slate/10 transition-colors disabled:opacity-50","aria-label":"Member actions",children:(0,s.jsx)(k,{className:"w-5 h-5 text-slate"})}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-slate/30 py-1 z-20",children:[(0,s.jsxs)("button",{onClick:()=>{d(!0),o(!1)},disabled:h,className:"w-full px-4 py-2 text-left text-sm hover:bg-slate/10 flex items-center gap-2 text-charcoal-dark disabled:opacity-50",children:[(0,s.jsx)(C,{className:"w-4 h-4"}),"Change Role"]}),(0,s.jsx)("button",{onClick:f,disabled:h,className:"w-full px-4 py-2 text-left text-sm hover:bg-red-50 flex items-center gap-2 text-red-600 disabled:opacity-50",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}),"Removing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Trash2,{className:"w-4 h-4"}),"Remove Member"]})})]})]})]})]})};var A=e.i(37727);let F=(0,r.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var P=e.i(43531);let L=({selectedRole:e,onRoleChange:t})=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-charcoal-dark mb-2",children:["Role ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3",children:["admin","editor","viewer"].map(a=>(0,s.jsxs)("button",{type:"button",onClick:()=>t(a),className:`p-3 border-2 rounded-lg transition-all ${e===a?"border-charcoal bg-charcoal/5":"border-slate/30 hover:border-slate/50"}`,children:[(0,s.jsx)(N,{role:a,size:"sm"}),(0,s.jsxs)("p",{className:"text-xs text-slate mt-2 text-center",children:["admin"===a&&"Full control","editor"===a&&"Create & edit","viewer"===a&&"View only"]})]},a))})]}),M=({expiresInDays:e,onExpirationChange:t})=>(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-charcoal-dark mb-2",children:"Link Expiration"}),(0,s.jsxs)("select",{value:e?.toString()||"never",onChange:e=>t("never"===e.target.value?null:parseInt(e.target.value)),className:"w-full px-4 py-2 border border-slate/30 rounded-lg focus:ring-2 focus:ring-charcoal focus:border-charcoal",children:[(0,s.jsx)("option",{value:"1",children:"24 hours"}),(0,s.jsx)("option",{value:"7",children:"7 days"}),(0,s.jsx)("option",{value:"30",children:"30 days"}),(0,s.jsx)("option",{value:"never",children:"Never expires"})]})]}),T=({link:e,onCopy:t,copied:a})=>(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-green-800 mb-2",children:"Invitation link generated:"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-green-300 rounded text-sm font-mono text-slate"}),(0,s.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Check,{className:"w-4 h-4"}),"Copied"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{className:"w-4 h-4"}),"Copy"]})})]})]}),$=({isOpen:e,onClose:a,onInviteCreated:r})=>{let[l,i]=(0,t.useState)(""),[n,o]=(0,t.useState)("editor"),[c,d]=(0,t.useState)(7),[m,x]=(0,t.useState)(!1),[h,u]=(0,t.useState)(null),[p,g]=(0,t.useState)(!1),[b,y]=(0,t.useState)("email"),v=()=>{i(""),o("editor"),d(7),u(null),g(!1),y("email"),x(!1),a()},w=async e=>{if(e.preventDefault(),!l.trim())return void _.default.error("Please enter an email address");if(!l.includes("@"))return void _.default.error("Please enter a valid email address");x(!0);try{let e=await fetch("/api/workspace/invites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,role:n,expiresInDays:c||void 0})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to send invitation")}let{data:s}=await e.json();_.default.success(`Invitation sent to ${l}`),u(s.inviteUrl),r(),i("")}catch(e){console.error("Error sending invitation:",e),_.default.error(e instanceof Error?e.message:"Failed to send invitation")}finally{x(!1)}},N=async()=>{x(!0);try{let e=await fetch("/api/workspace/invites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:n,expiresInDays:c||void 0})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to generate link")}let{data:s}=await e.json();u(s.inviteUrl),_.default.success("Invite link generated"),r()}catch(e){console.error("Error generating link:",e),_.default.error(e instanceof Error?e.message:"Failed to generate link")}finally{x(!1)}},k=async()=>{if(h)try{await navigator.clipboard.writeText(h),g(!0),_.default.success("Link copied to clipboard"),setTimeout(()=>g(!1),2e3)}catch(e){_.default.error("Failed to copy link")}};return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:v,children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-slate/30 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("header",{className:"flex justify-between items-center p-6 border-b border-slate/30",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-charcoal-dark",children:"Invite Team Members"}),(0,s.jsx)("button",{onClick:v,className:"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors","aria-label":"Close modal",children:(0,s.jsx)(A.X,{className:"w-6 h-6"})})]}),(0,s.jsxs)("div",{className:"flex border-b border-slate/30",children:[(0,s.jsxs)("button",{onClick:()=>y("email"),className:`flex-1 px-6 py-3 font-medium transition-colors flex items-center justify-center gap-2 ${"email"===b?"text-charcoal-dark border-b-2 border-charcoal":"text-slate hover:text-charcoal-dark"}`,children:[(0,s.jsx)(f,{className:"w-5 h-5"}),"Email Invitation"]}),(0,s.jsxs)("button",{onClick:()=>y("link"),className:`flex-1 px-6 py-3 font-medium transition-colors flex items-center justify-center gap-2 ${"link"===b?"text-charcoal-dark border-b-2 border-charcoal":"text-slate hover:text-charcoal-dark"}`,children:[(0,s.jsx)(j.Link,{className:"w-5 h-5"}),"Shareable Link"]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:"email"===b?(0,s.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-charcoal-dark mb-2",children:["Email Address ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"email",value:l,onChange:e=>i(e.target.value),placeholder:"colleague@example.com",className:"w-full px-4 py-2 border border-slate/30 rounded-lg focus:ring-2 focus:ring-charcoal focus:border-charcoal",disabled:m,required:!0}),(0,s.jsx)("p",{className:"text-xs text-slate mt-1",children:"An invitation email will be sent to this address with a secure link"})]}),(0,s.jsx)(L,{selectedRole:n,onRoleChange:o}),(0,s.jsx)(M,{expiresInDays:c,onExpirationChange:d}),h&&(0,s.jsx)(T,{link:h,onCopy:k,copied:p}),(0,s.jsx)("button",{type:"submit",disabled:m,className:"w-full px-4 py-3 bg-charcoal text-white rounded-lg hover:bg-charcoal-dark transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Loader2,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{className:"w-5 h-5"}),"Send Invitation"]})})]}):(0,s.jsx)(z,{role:n,onRoleChange:o,expiresInDays:c,onExpirationChange:d,generatedLink:h,isSubmitting:m,onGenerateLink:N,linkCopied:p,onCopyLink:k})})]})}):null},z=({role:e,onRoleChange:t,expiresInDays:a,onExpirationChange:r,generatedLink:l,isSubmitting:i,onGenerateLink:n,linkCopied:o,onCopyLink:c})=>(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-blue-800",children:"Generate a shareable link that anyone can use to join your workspace. No email required!"})}),(0,s.jsx)(L,{selectedRole:e,onRoleChange:t}),(0,s.jsx)(M,{expiresInDays:a,onExpirationChange:r}),l?(0,s.jsx)(T,{link:l,onCopy:c,copied:o}):(0,s.jsx)("button",{onClick:n,disabled:i,className:"w-full px-4 py-3 bg-charcoal text-white rounded-lg hover:bg-charcoal-dark transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Loader2,{className:"w-5 h-5 animate-spin"}),"Generating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Link,{className:"w-5 h-5"}),"Generate Invite Link"]})})]});function I(){let{user:e,workspaceId:a,userRole:r}=(0,m.useAuth)(),{addNotification:l}=(0,p.useNotifications)(),[i,n]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),[d,x]=(0,t.useState)(!0),[h,u]=(0,t.useState)(!1),y="admin"===r;(0,t.useEffect)(()=>{a&&(async()=>{try{x(!0);let e=await fetch("/api/workspace/members");if(e.ok){let{data:s}=await e.json();n(s)}if(y){let e=await fetch("/api/workspace/invites");if(e.ok){let{data:s}=await e.json();c(s)}}}catch(e){console.error("Error loading workspace data:",e),l("error","Load Failed","Failed to load workspace members")}finally{x(!1)}})()},[a,y,l]);let v=async e=>{if(a&&confirm("Are you sure you want to remove this member?"))try{(await fetch(`/api/workspace/members/${e}`,{method:"DELETE"})).ok?(n(i.filter(s=>s.id!==e)),l("post_published","Success","Member removed successfully")):l("error","Failed","Failed to remove member")}catch(e){console.error("Error removing member:",e),l("error","Error","Error removing member")}},w=async(e,s)=>{if(a)try{(await fetch(`/api/workspace/members/${e}/role`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:s})})).ok?(n(i.map(t=>t.id===e?{...t,role:s}:t)),l("post_published","Member role updated","Member role updated")):l("error","Failed to update member role","Failed to update member role")}catch(e){console.error("Error updating role:",e),l("error","Error updating member role","Error updating member role")}},k=async e=>{if(a&&confirm("Are you sure you want to revoke this invitation?"))try{(await fetch("/api/workspace/invites",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({inviteId:e})})).ok?(c(o.filter(s=>s.id!==e)),l("post_published","Invitation revoked","Invitation revoked")):l("error","Failed to revoke invitation","Failed to revoke invitation")}catch(e){console.error("Error revoking invite:",e),l("error","Error revoking invitation","Error revoking invitation")}},C=async e=>{if(a)try{(await fetch("/api/workspace/invites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"resend",inviteId:e})})).ok?l("post_published","Invitation resent successfully","Invitation resent successfully"):l("error","Failed to resend invitation","Failed to resend invitation")}catch(e){console.error("Error resending invite:",e),l("error","Error resending invitation","Error resending invitation")}},S=async()=>{if(u(!1),y)try{let e=await fetch("/api/workspace/invites");if(e.ok){let{data:s}=await e.json();c(s)}}catch(e){console.error("Error refreshing invites:",e)}};return d?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"text-slate",children:"Loading members..."})}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-charcoal",children:"Workspace Members"}),(0,s.jsxs)("p",{className:"text-sm text-slate mt-1",children:[i.length," member",1!==i.length?"s":""]})]}),y&&(0,s.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(g.Plus,{size:18}),"Invite Member"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===i.length?(0,s.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-slate",children:"No members yet"})}):i.map(t=>(0,s.jsx)(E,{member:t,currentUserRole:r||"viewer",currentUserId:e?.id||"",onRemove:async e=>v(e),onRoleChange:async(e,s)=>w(e,s)},t.id))})]}),y&&o.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-charcoal mb-6",children:"Pending Invitations"}),(0,s.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.email?(0,s.jsx)(f,{size:20,className:"text-blue-600"}):(0,s.jsx)(j.Link,{size:20,className:"text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-charcoal",children:e.email||"Shareable Link"}),(0,s.jsx)("p",{className:"text-sm text-slate",children:e.email?"Email invitation":"Anyone with link can join"})]}),(0,s.jsx)(N,{role:e.role,size:"sm"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.expires_at&&new Date(e.expires_at)<new Date&&(0,s.jsx)("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded",children:"Expired"}),(0,s.jsx)("button",{onClick:()=>C(e.id),className:"p-2 hover:bg-white rounded transition-colors",title:"Resend invitation",children:(0,s.jsx)(f,{size:18,className:"text-blue-600"})}),(0,s.jsx)("button",{onClick:()=>k(e.id),className:"p-2 hover:bg-white rounded transition-colors",title:"Revoke invitation",children:(0,s.jsx)(b.Trash2,{size:18,className:"text-red-600"})})]})]},e.id))})]}),(0,s.jsx)($,{isOpen:h,onClose:()=>u(!1),onInviteCreated:S})]})}var O=e.i(56909),D=e.i(63209);function R(){let{workspaceId:e,userRole:a}=(0,m.useAuth)(),{addNotification:r}=(0,p.useNotifications)(),[l,i]=(0,t.useState)(null),[n,o]=(0,t.useState)(!0),[c,d]=(0,t.useState)(!1),[x,h]=(0,t.useState)({name:"",max_users:10}),u="admin"===a;(0,t.useEffect)(()=>{e&&(async()=>{try{o(!0);let e=await fetch("/api/workspace");if(e.ok){let{data:s}=await e.json();i(s),h({name:s.name||"",max_users:s.max_users||10})}}catch(e){console.error("Error loading workspace:",e),r("error","Failed to load workspace settings","Failed to load workspace settings")}finally{o(!1)}})()},[e,r]);let g=e=>{let{name:s,value:t}=e.target;h(e=>({...e,[s]:"max_users"===s?parseInt(t,10):t}))},b=async()=>{if(e){if(!x.name.trim())return void r("error","Workspace name cannot be empty","Workspace name cannot be empty");if(x.max_users<1)return void r("error","Maximum users must be at least 1","Maximum users must be at least 1");try{d(!0);let e=await fetch("/api/workspace",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(e.ok){let{data:s}=await e.json();i(s),r("post_published","Workspace settings updated successfully","Workspace settings updated successfully")}else r("error","Failed to update workspace settings","Failed to update workspace settings")}catch(e){console.error("Error saving workspace:",e),r("error","Error updating workspace settings","Error updating workspace settings")}finally{d(!1)}}};return n?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"text-slate",children:"Loading workspace settings..."})}):u?(0,s.jsxs)("div",{className:"max-w-2xl space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-charcoal mb-2",children:"Workspace Name"}),(0,s.jsx)("input",{id:"name",name:"name",type:"text",value:x.name,onChange:g,placeholder:"My Workspace",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("p",{className:"text-xs text-slate mt-1",children:"The name of your workspace"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"max_users",className:"block text-sm font-medium text-charcoal mb-2",children:"Maximum Members"}),(0,s.jsx)("input",{id:"max_users",name:"max_users",type:"number",min:"1",max:"1000",value:x.max_users,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("p",{className:"text-xs text-slate mt-1",children:"Maximum number of members allowed in this workspace"})]}),l&&(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"Workspace Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-700 font-medium",children:"Created"}),(0,s.jsx)("p",{className:"text-blue-600",children:new Date(l.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-700 font-medium",children:"Last Updated"}),(0,s.jsx)("p",{className:"text-blue-600",children:new Date(l.updated_at).toLocaleDateString()})]})]})]}),(0,s.jsxs)("button",{onClick:b,disabled:c||!u,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)(O.Save,{size:18}),c?"Saving...":"Save Changes"]})]}):(0,s.jsxs)("div",{className:"p-6 bg-yellow-50 border border-yellow-200 rounded-lg flex items-gap-3",children:[(0,s.jsx)(D.AlertCircle,{className:"text-yellow-600 flex-shrink-0",size:20}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-yellow-900",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-sm text-yellow-800",children:"Only workspace admins can modify workspace settings."})]})]})}let U=(0,r.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),W=(0,r.default)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),q=(0,r.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),H={member_invited:(0,s.jsx)(U,{size:16,className:"text-blue-600"}),member_joined:(0,s.jsx)(U,{size:16,className:"text-green-600"}),member_removed:(0,s.jsx)(W,{size:16,className:"text-red-600"}),member_role_changed:(0,s.jsx)(y,{size:16,className:"text-orange-600"}),workspace_updated:(0,s.jsx)(i,{size:16,className:"text-purple-600"}),invite_revoked:(0,s.jsx)(b.Trash2,{size:16,className:"text-red-600"})},J={member_invited:"Member Invited",member_joined:"Member Joined",member_removed:"Member Removed",member_role_changed:"Role Changed",workspace_updated:"Workspace Updated",invite_revoked:"Invite Revoked"};function V(){let{workspaceId:e,userRole:a}=(0,m.useAuth)(),{addNotification:r}=(0,p.useNotifications)(),[l,i]=(0,t.useState)([]),[n,o]=(0,t.useState)(!0),[c,d]=(0,t.useState)(0),[x,h]=(0,t.useState)(!1),u="admin"===a;return((0,t.useEffect)(()=>{e&&u&&(async()=>{try{o(!0);let e=await fetch(`/api/workspace/activity?limit=20&offset=${20*c}`);if(e.ok){let s=await e.json();i(s.data),h(s.hasMore)}}catch(e){console.error("Error loading activity log:",e),r("error","Load Failed","Failed to load activity log")}finally{o(!1)}})()},[e,u,c,r]),u)?n&&0===l.length?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"text-slate",children:"Loading activity log..."})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("button",{onClick:()=>{d(0)},className:"flex items-center gap-2 px-4 py-2 text-slate hover:bg-gray-100 rounded-lg transition-colors",children:[(0,s.jsx)(q,{size:16}),"Refresh"]})}),0===l.length?(0,s.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-slate",children:"No activity yet"})}):(0,s.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,s.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[(0,s.jsx)("div",{className:"pt-1",children:H[e.action]||(0,s.jsx)(q,{size:16,className:"text-slate"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,s.jsx)("p",{className:"font-medium text-charcoal",children:J[e.action]||e.action})}),(0,s.jsx)("p",{className:"text-sm text-slate",children:(e=>{let{action:s,details:t,user:a}=e,r=a?.full_name||a?.email||"Unknown";switch(s){case"member_invited":return`${r} invited ${t.invite_email||"someone"} as ${t.invite_role}`;case"member_joined":return`${r} joined as ${t.role}`;case"member_removed":return`${r} removed ${t.removed_user_email}`;case"member_role_changed":return`${r} changed ${t.target_user_email}'s role from ${t.old_role} to ${t.new_role}`;case"workspace_updated":return`${r} updated workspace settings`;case"invite_revoked":return`${r} revoked an invitation for ${t.invite_email||"shareable link"}`;default:return`${r} performed action: ${s}`}})(e)}),Object.keys(e.details).length>0&&(0,s.jsxs)("details",{className:"mt-2",children:[(0,s.jsx)("summary",{className:"text-xs text-slate cursor-pointer hover:text-charcoal",children:"Details"}),(0,s.jsx)("pre",{className:"mt-2 p-2 bg-white rounded text-xs overflow-auto",children:JSON.stringify(e.details,null,2)})]})]}),(0,s.jsx)("div",{className:"text-right flex-shrink-0",children:(0,s.jsx)("p",{className:"text-xs text-slate whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})})]},e.id))}),x||c>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,s.jsx)("button",{onClick:()=>d(e=>Math.max(0,e-1)),disabled:0===c,className:"px-4 py-2 text-slate hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors",children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-slate",children:["Page ",c+1]}),(0,s.jsx)("button",{onClick:()=>d(e=>e+1),disabled:!x,className:"px-4 py-2 text-slate hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors",children:"Next"})]})]}):(0,s.jsxs)("div",{className:"p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-yellow-900",children:"Access Restricted"}),(0,s.jsx)("p",{className:"text-sm text-yellow-800",children:"Activity logs are only available to workspace admins."})]})}var G=e.i(69638),Y=e.i(3116),B=e.i(78894),K=e.i(94164);let Z=()=>{let{userRole:e}=(0,m.useAuth)(),[a,r]=(0,t.useState)({twitter:!1,linkedin:!1,facebook:!1,instagram:!1}),[l,n]=(0,t.useState)(null),[o,c]=(0,t.useState)({twitter:void 0,linkedin:void 0,facebook:void 0,instagram:void 0}),[d,x]=(0,t.useState)({twitter:{},linkedin:{},facebook:{},instagram:{}}),[h,u]=(0,t.useState)(new Set),[p,g]=(0,t.useState)(!0),b={twitter:45e3,linkedin:6e4,facebook:9e4,instagram:9e4};if("admin"!==e)return(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 flex gap-3",children:[(0,s.jsx)(D.AlertCircle,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Access Denied"}),(0,s.jsx)("p",{children:"Only workspace admins can manage account connections."})]})]});(0,t.useEffect)(()=>{f();let e=new URLSearchParams(window.location.search),s=e.get("oauth_success"),t=e.get("oauth_error");if(s){setTimeout(()=>{f(),n(null)},1e3),window.history.replaceState({},document.title,window.location.pathname+"?tab=accounts");return}if(t){var a;let e=(a=t).includes("twitter")?"twitter":a.includes("linkedin")?"linkedin":a.includes("facebook")?"facebook":a.includes("instagram")?"instagram":null;e&&c(s=>({...s,[e]:({oauth_unauthorized:"Not authenticated. Please log in.",no_workspace:"Workspace error. Please refresh and try again.",user_denied:"You denied the connection request.",missing_params:"OAuth parameters missing. Please try again.",csrf_check_failed:"Security verification failed. Please try again.",missing_verifier:"Security token missing. Please restart connection.",callback_error:"Connection callback failed. Please try again.",token_exchange_failed:"Failed to exchange authorization code. Please try again.",get_pages_failed:"Failed to retrieve your pages. Please try again.",no_pages_found:"No pages found. Please create a page and try again.",get_account_failed:"Failed to retrieve your account. Please try again.",no_account_found:"No account found. Please try again.",save_failed:"Failed to save credentials. Please try again.",config_missing:"Platform is not configured. Please contact support."})[t]||"Connection failed. Please try again."})),n(null),window.history.replaceState({},document.title,window.location.pathname+"?tab=accounts");return}},[]);let f=async()=>{try{g(!0);let e=await fetch("/api/credentials/status");if(!e.ok)throw Error("Failed to load status");let s=await e.json();x(s),r(Object.fromEntries(Object.entries(s).map(([e,s])=>[e,s.isConnected])))}catch(e){console.error("Failed to load connection status:",e)}finally{g(!1)}},y=async e=>{c(s=>({...s,[e]:void 0})),n(e),u(new Set);try{let s=await fetch(`/api/auth/oauth/${e}`,{method:"POST"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to initiate connection")}let{redirectUrl:t}=await s.json(),a=b[e];setTimeout(()=>{l===e&&u(s=>new Set(s).add(e))},a-3e4);let r=setTimeout(()=>{l===e&&(n(null),c(s=>({...s,[e]:"Connection timed out. Please try again."})))},a);window[`timeout_${e}`]=r,window.location.href=t}catch(s){console.error(`Failed to connect ${e}:`,s),c(t=>({...t,[e]:s instanceof Error?s.message:"Connection failed"})),n(null)}},v=async e=>{try{if(!(await fetch(`/api/credentials/${e}/disconnect`,{method:"DELETE"})).ok)throw Error("Failed to disconnect");f(),c(s=>({...s,[e]:void 0}))}catch(s){console.error("Failed to disconnect:",s),c(s=>({...s,[e]:"Failed to disconnect"}))}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-charcoal-dark",children:"Connected Accounts"}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex gap-3",children:[(0,s.jsx)(i,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,s.jsx)("p",{className:"font-semibold mb-1",children:"Production-Ready Integration"}),(0,s.jsx)("p",{children:"Connect your social media accounts securely. Your credentials are encrypted and stored on our servers. Never stored in your browser."})]})]}),p?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)(S.Loader2,{className:"w-6 h-6 animate-spin text-slate mr-2"}),(0,s.jsx)("span",{className:"text-slate",children:"Loading connection status..."})]}):(0,s.jsx)("div",{className:"space-y-4",children:K.PLATFORMS.map(({id:e,name:t,icon:r})=>{let i=a[e],n=l===e,c=o[e],m=d[e],x=h.has(e);return(0,s.jsxs)("div",{className:"bg-light-gray rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsx)(r,{className:"w-8 h-8 text-charcoal"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-lg font-medium text-charcoal-dark block",children:t}),i&&m?.username&&(0,s.jsxs)("div",{className:"text-sm text-slate",children:[(0,s.jsxs)("span",{children:["@",m.username]}),m.isExpired&&(0,s.jsx)("span",{className:"ml-2 text-red-600 font-semibold",children:"Token Expired"}),m.isExpiringSoon&&!m.isExpired&&(0,s.jsx)("span",{className:"ml-2 text-orange-600 font-semibold",children:"Expiring Soon"})]}),i&&m?.expiresAt&&(0,s.jsxs)("span",{className:"text-xs text-slate",children:["Expires: ",new Date(m.expiresAt).toLocaleDateString()]})]})]}),n?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate",children:[(0,s.jsx)(S.Loader2,{className:"w-5 h-5 animate-spin"}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:"Connecting..."})]}):i?(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,s.jsx)(G.CheckCircle,{className:"w-5 h-5 mr-2"}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:"Connected"})]}),(0,s.jsx)("button",{onClick:()=>v(e),className:"px-4 py-2 text-sm font-medium bg-slate hover:bg-slate/80 rounded-md text-white transition-colors",children:"Disconnect"})]}):(0,s.jsxs)("button",{onClick:()=>y(e),className:"px-4 py-2 text-sm font-medium bg-charcoal hover:bg-charcoal-dark rounded-md text-white flex items-center transition-colors",children:[(0,s.jsx)(j.Link,{className:"w-4 h-4 mr-2"}),"Connect"]})]}),c&&(0,s.jsx)("div",{className:"px-4 pb-4",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex gap-2",children:[(0,s.jsx)(D.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-red-800",children:c})]})}),x&&(0,s.jsx)("div",{className:"px-4 pb-4",children:(0,s.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 flex gap-2",children:[(0,s.jsx)(Y.Clock,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-orange-800",children:"Connection is taking longer than expected. This window will close in 30 seconds."})]})}),i&&m?.isExpired&&(0,s.jsx)("div",{className:"px-4 pb-4",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex gap-2",children:[(0,s.jsx)(B.AlertTriangle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-red-800",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Token Expired"}),(0,s.jsx)("p",{children:"Please reconnect to refresh your credentials."})]})]})})]},e)})}),(0,s.jsx)("div",{className:"mt-6 pt-6 border-t border-slate/30",children:(0,s.jsxs)("p",{className:"text-sm text-slate",children:[(0,s.jsx)("strong",{children:"Security:"})," Your API credentials are encrypted using AES-256 encryption and stored securely on our servers. We never store them in your browser."]})})]})},X=(0,r.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Q=()=>{let{userRole:e}=(0,m.useAuth)(),[a,r]=(0,t.useState)({twitter:{},linkedin:{},facebook:{},instagram:{}}),[l,i]=(0,t.useState)({twitter:{platform:"twitter",status:"healthy",message:"Checking..."},linkedin:{platform:"linkedin",status:"healthy",message:"Checking..."},facebook:{platform:"facebook",status:"healthy",message:"Checking..."},instagram:{platform:"instagram",status:"healthy",message:"Checking..."}}),[n,o]=(0,t.useState)(!0),[c,d]=(0,t.useState)(!1),[x,h]=(0,t.useState)(new Set),[u,p]=(0,t.useState)(""),[g,b]=(0,t.useState)("");if("admin"!==e)return(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 flex gap-3",children:[(0,s.jsx)(D.AlertCircle,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Access Denied"}),(0,s.jsx)("p",{children:"Only workspace admins can manage API settings."})]})]});(0,t.useEffect)(()=>{f(),j()},[]);let f=async()=>{try{let e=await fetch("/api/settings/api-credentials");if(e.ok){let s=await e.json();r(s)}}catch(e){console.error("Failed to load API settings:",e)}finally{o(!1)}},j=async()=>{try{let e=await fetch("/api/settings/api-health");if(e.ok){let s=await e.json();i(s)}}catch(e){console.error("Failed to load API health:",e)}},y=async()=>{d(!0),b(""),p("");try{if(!(await fetch("/api/settings/api-credentials",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to save credentials");p("API credentials saved successfully"),setTimeout(()=>p(""),3e3)}catch(e){b(e instanceof Error?e.message:"Failed to save credentials")}finally{d(!1)}},v=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim();return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-charcoal-dark",children:"API Settings"}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex gap-3",children:[(0,s.jsx)(D.AlertCircle,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,s.jsx)("p",{className:"font-semibold mb-1",children:"OAuth App Configuration"}),(0,s.jsx)("p",{children:"Configure your OAuth applications for each platform. These credentials are required for users to connect their accounts. All values are encrypted at rest."})]})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-charcoal-dark mb-4",children:"API Health Status"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(l).map(([e,t])=>(0,s.jsx)("div",{className:`border rounded-lg p-4 ${"healthy"===t.status?"bg-green-50 border-green-200":"warning"===t.status?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:["healthy"===t.status?(0,s.jsx)(G.CheckCircle,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):"warning"===t.status?(0,s.jsx)(D.AlertCircle,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}):(0,s.jsx)(D.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-sm capitalize",children:e}),(0,s.jsx)("p",{className:`text-sm ${"healthy"===t.status?"text-green-800":"warning"===t.status?"text-yellow-800":"text-red-800"}`,children:t.message}),t.lastChecked&&(0,s.jsxs)("p",{className:"text-xs text-slate mt-1",children:["Last checked: ",new Date(t.lastChecked).toLocaleString()]})]})]})},e))})]}),u&&(0,s.jsxs)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex gap-3",children:[(0,s.jsx)(G.CheckCircle,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-green-800",children:u})]}),g&&(0,s.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,s.jsx)(D.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-red-800",children:g})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-charcoal-dark mb-4",children:"OAuth Credentials"}),n?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)(S.Loader2,{className:"w-6 h-6 animate-spin text-slate mr-2"}),(0,s.jsx)("span",{className:"text-slate",children:"Loading API settings..."})]}):(0,s.jsx)("div",{className:"space-y-6",children:Object.entries(a).map(([e,t])=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-charcoal-dark mb-4 capitalize",children:e}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(t).map(([t,a])=>{let l=`${e}_${t}`,i=t.toLowerCase().includes("secret")||t.toLowerCase().includes("token"),n=x.has(l);return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-charcoal-dark mb-2",children:v(t)}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:i&&!n?"password":"text",value:"string"==typeof a?a:"",onChange:s=>{var a;return a=s.target.value,void(r(s=>({...s,[e]:{...s[e],[t]:a}})),p(""),b(""))},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:`Enter ${v(t)}`}),i&&(0,s.jsx)("button",{onClick:()=>{h(e=>{let s=new Set(e);return s.has(l)?s.delete(l):s.add(l),s})},className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:n?"Hide":"Show",children:n?(0,s.jsx)(X,{className:"w-5 h-5 text-slate"}):(0,s.jsx)(w.Eye,{className:"w-5 h-5 text-slate"})})]})]},t)})})]},e))})]}),(0,s.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end",children:(0,s.jsx)("button",{onClick:y,disabled:c,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Loader2,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O.Save,{className:"w-4 h-4"}),"Save Changes"]})})}),(0,s.jsx)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:(0,s.jsxs)("p",{className:"text-xs text-slate",children:[(0,s.jsx)("strong",{children:"Security Notice:"})," All credentials are encrypted using AES-256 encryption before being stored. Never share your API secrets. Only workspace admins can access and modify these settings."]})})]})};function ee(){let e=(0,a.useSearchParams)().get("tab")||"members",r=(0,t.useMemo)(()=>{switch(e){case"members":default:return(0,s.jsx)(I,{});case"workspace":return(0,s.jsx)(R,{});case"activity":return(0,s.jsx)(V,{});case"accounts":return(0,s.jsx)(Z,{});case"api":return(0,s.jsx)(Q,{})}},[e]);return(0,s.jsx)(u,{activeTab:e,children:r})}e.s(["default",()=>ee],24189)}]);