{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/icons/PlatformIcons.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react';\r\n\r\nexport const TwitterIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\r\n    <path d=\"M22 4s-.7 2.1-2 3.4c1.6 1.4 3.3 4.9 3 7.1 0 .8-.4 1.5-.9 2.1-.7.9-1.9 1.5-3.2 1.5-2.2 0-4.3-1.2-5.7-2.5-.1-.1-.2-.2-.3-.3-.1.1-.2.2-.2.3-1.4 1.3-3.5 2.5-5.7 2.5-1.3 0-2.5-.6-3.2-1.5-.5-.6-.9-1.3-.9-2.1-.2-2.2 1.4-5.7 3-7.1-1.3-1.3-2-3.4-2-3.4s.8.2 1.5.7c.7-.5 1.5-1 2.3-1.1.2 0 .4 0 .6.1.4-.2.9-.3 1.3-.3s.9.1 1.3.3c.2 0 .4-.1.6-.1.8.1 1.6.6 2.3 1.1.7-.5 1.5-.7 1.5-.7z\"></path>\r\n  </svg>\r\n);\r\n\r\nexport const LinkedinIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\r\n    <path d=\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"></path>\r\n    <rect width=\"4\" height=\"12\" x=\"2\" y=\"9\"></rect>\r\n    <circle cx=\"4\" cy=\"4\" r=\"2\"></circle>\r\n  </svg>\r\n);\r\n\r\nexport const FacebookIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\r\n    <path d=\"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z\"></path>\r\n  </svg>\r\n);\r\n\r\nexport const InstagramIcon: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" {...props}>\r\n    <rect width=\"20\" height=\"20\" x=\"2\" y=\"2\" rx=\"5\" ry=\"5\"></rect>\r\n    <path d=\"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z\"></path>\r\n    <line x1=\"17.5\" x2=\"17.51\" y1=\"6.5\" y2=\"6.5\"></line>\r\n  </svg>\r\n);\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;;AAIO,MAAM,cAAuD,CAAC,sBACnE,8OAAC;QAAI,OAAM;QAA6B,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,eAAc;QAAQ,gBAAe;QAAS,GAAG,KAAK;kBACzL,cAAA,8OAAC;YAAK,GAAE;;;;;;;;;;;AAIL,MAAM,eAAwD,CAAC,sBACpE,8OAAC;QAAI,OAAM;QAA6B,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,eAAc;QAAQ,gBAAe;QAAS,GAAG,KAAK;;0BACzL,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAK,OAAM;gBAAI,QAAO;gBAAK,GAAE;gBAAI,GAAE;;;;;;0BACpC,8OAAC;gBAAO,IAAG;gBAAI,IAAG;gBAAI,GAAE;;;;;;;;;;;;AAIrB,MAAM,eAAwD,CAAC,sBACpE,8OAAC;QAAI,OAAM;QAA6B,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,eAAc;QAAQ,gBAAe;QAAS,GAAG,KAAK;kBACzL,cAAA,8OAAC;YAAK,GAAE;;;;;;;;;;;AAIL,MAAM,gBAAyD,CAAC,sBACrE,8OAAC;QAAI,OAAM;QAA6B,OAAM;QAAK,QAAO;QAAK,SAAQ;QAAY,MAAK;QAAO,QAAO;QAAe,aAAY;QAAI,eAAc;QAAQ,gBAAe;QAAS,GAAG,KAAK;;0BACzL,8OAAC;gBAAK,OAAM;gBAAK,QAAO;gBAAK,GAAE;gBAAI,GAAE;gBAAI,IAAG;gBAAI,IAAG;;;;;;0BACnD,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAK,IAAG;gBAAO,IAAG;gBAAQ,IAAG;gBAAM,IAAG","debugId":null}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/constants/index.ts"],"sourcesContent":["\r\n// Fix: Import React to resolve namespace errors for React types.\r\nimport React from 'react';\r\nimport { Platform, PostStatus } from '@/types';\r\nimport { TwitterIcon, LinkedinIcon, FacebookIcon, InstagramIcon } from '@/components/icons/PlatformIcons';\r\n\r\nexport const PLATFORMS: { id: Platform; name: string; icon: React.FC<React.SVGProps<SVGSVGElement>>; characterLimit: number }[] = [\r\n    { id: 'twitter', name: 'Twitter/X', icon: TwitterIcon, characterLimit: 280 },\r\n    { id: 'linkedin', name: 'LinkedIn', icon: LinkedinIcon, characterLimit: 3000 },\r\n    { id: 'facebook', name: 'Facebook', icon: FacebookIcon, characterLimit: 63206 },\r\n    { id: 'instagram', name: 'Instagram', icon: InstagramIcon, characterLimit: 2200 },\r\n];\r\n\r\nexport const STATUS_CONFIG: { [key in PostStatus]: { color: string; label: string } } = {\r\n    draft: { color: 'bg-gray-500', label: 'Draft' },\r\n    'needs approval': { color: 'bg-yellow-500', label: 'Needs Approval' },\r\n    approved: { color: 'bg-cyan-500', label: 'Approved' },\r\n    'ready to publish': { color: 'bg-purple-500', label: 'Ready to Publish' },\r\n    scheduled: { color: 'bg-blue-500', label: 'Scheduled' },\r\n    published: { color: 'bg-green-500', label: 'Published' },\r\n};"],"names":[],"mappings":"AACA,iEAAiE;;;;;;;AAGjE;;AAEO,MAAM,YAAqH;IAC9H;QAAE,IAAI;QAAW,MAAM;QAAa,MAAM,2JAAW;QAAE,gBAAgB;IAAI;IAC3E;QAAE,IAAI;QAAY,MAAM;QAAY,MAAM,4JAAY;QAAE,gBAAgB;IAAK;IAC7E;QAAE,IAAI;QAAY,MAAM;QAAY,MAAM,4JAAY;QAAE,gBAAgB;IAAM;IAC9E;QAAE,IAAI;QAAa,MAAM;QAAa,MAAM,6JAAa;QAAE,gBAAgB;IAAK;CACnF;AAEM,MAAM,gBAA2E;IACpF,OAAO;QAAE,OAAO;QAAe,OAAO;IAAQ;IAC9C,kBAAkB;QAAE,OAAO;QAAiB,OAAO;IAAiB;IACpE,UAAU;QAAE,OAAO;QAAe,OAAO;IAAW;IACpD,oBAAoB;QAAE,OAAO;QAAiB,OAAO;IAAmB;IACxE,WAAW;QAAE,OAAO;QAAe,OAAO;IAAY;IACtD,WAAW;QAAE,OAAO;QAAgB,OAAO;IAAY;AAC3D","debugId":null}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/content/ContentStrategistView.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useRef, useEffect, FormEvent } from 'react';\r\nimport { GoogleGenAI, Chat } from '@google/genai';\r\nimport { Post, PostContent, Platform } from '@/types';\r\nimport { PLATFORMS } from '@/constants';\r\nimport { Send, Bot, User, Loader2, CheckCircle, PlusCircle, History, PanelLeftClose } from 'lucide-react';\r\n\r\ninterface ContentStrategistViewProps {\r\n    onPostCreated: (post: Post) => void;\r\n}\r\n\r\ntype Message = {\r\n    role: 'user' | 'model' | 'system';\r\n    content: string;\r\n    postData?: any;\r\n};\r\n\r\ntype ChatThread = {\r\n  id: string;\r\n  title: string;\r\n  timestamp: string;\r\n  messages: Message[];\r\n};\r\n\r\nconst ContentStrategistView: React.FC<ContentStrategistViewProps> = ({ onPostCreated }) => {\r\n    const [chat, setChat] = useState<Chat | null>(null);\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [userInput, setUserInput] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const chatContainerRef = useRef<HTMLDivElement>(null);\r\n    const [chatHistory, setChatHistory] = useState<ChatThread[]>([]);\r\n    const [activeThreadId, setActiveThreadId] = useState<string | 'new'>('new');\r\n    const [isHistoryVisible, setIsHistoryVisible] = useState(false);\r\n\r\n    const platformList = PLATFORMS.map(p => p.id).join(', ');\r\n    const systemInstruction = `You are 'ContentOS AI', an expert social media strategist. Your goal is to have a friendly and helpful conversation with the user to brainstorm and create a social media post.\r\n\r\n1.  Start by introducing yourself and asking what the user wants to promote or talk about.\r\n2.  Guide the conversation to gather these key details:\r\n    *   A clear **topic**.\r\n    *   One or more target **platforms** from this list: ${platformList}.\r\n    *   A specific **content type** (e.g., engaging, educational, promotional).\r\n    *   A desired **tone** (e.g., professional, casual, humorous).\r\n3.  Once you have all the information, summarize the plan and ask the user for confirmation to proceed with generating the content. Use markdown for your summary (bolding and bullet points).\r\n4.  **IMPORTANT**: After the user confirms, your VERY NEXT response must be ONLY the generated content as a single JSON object, enclosed in a markdown code block like this:\r\n    \\`\\`\\`json\r\n    {\r\n      \"topic\": \"A brief, descriptive topic summary\",\r\n      \"twitter\": \"...\",\r\n      \"linkedin\": \"...\",\r\n      \"imageSuggestion\": \"...\",\r\n      \"videoSuggestion\": \"...\"\r\n    }\r\n    \\`\\`\\`\r\n    Only include keys in the JSON for the platforms the user selected. Do not add any text or explanation before or after the JSON block in that final message.`;\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const savedHistory = localStorage.getItem('socialMediaChatHistory');\r\n            if (savedHistory) {\r\n                const parsedHistory = JSON.parse(savedHistory);\r\n                // Filter out temporary threads on load\r\n                const cleanedHistory = parsedHistory.filter((t: ChatThread) => !t.id.startsWith('temp-'));\r\n                setChatHistory(cleanedHistory);\r\n                if (cleanedHistory.length !== parsedHistory.length) {\r\n                    localStorage.setItem('socialMediaChatHistory', JSON.stringify(cleanedHistory));\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Could not parse chat history from localStorage\", e);\r\n        }\r\n        startNewChat(true);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        chatContainerRef.current?.scrollTo({ top: chatContainerRef.current.scrollHeight, behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    // Auto-save chat history after each message exchange\r\n    useEffect(() => {\r\n        if (messages.length > 1 && activeThreadId === 'new') {\r\n            const firstUserMessage = messages.find(m => m.role === 'user');\r\n            const title = firstUserMessage\r\n                ? firstUserMessage.content.substring(0, 40) + (firstUserMessage.content.length > 40 ? '...' : '')\r\n                : 'Untitled Chat';\r\n\r\n            const tempThread: ChatThread = {\r\n                id: 'temp-' + Date.now(),\r\n                title,\r\n                timestamp: new Date().toISOString(),\r\n                messages,\r\n            };\r\n\r\n            setChatHistory(prevHistory => {\r\n                const filteredHistory = prevHistory.filter(t => !t.id.startsWith('temp-'));\r\n                const newHistory = [tempThread, ...filteredHistory];\r\n                localStorage.setItem('socialMediaChatHistory', JSON.stringify(newHistory));\r\n                return newHistory;\r\n            });\r\n        }\r\n    }, [messages, activeThreadId]);\r\n\r\n    const saveCurrentChat = () => {\r\n        if (messages.length <= 1) return;\r\n\r\n        const firstUserMessage = messages.find(m => m.role === 'user');\r\n        const title = firstUserMessage\r\n            ? firstUserMessage.content.substring(0, 40) + (firstUserMessage.content.length > 40 ? '...' : '')\r\n            : 'Untitled Chat';\r\n\r\n        const newThread: ChatThread = {\r\n            id: crypto.randomUUID(),\r\n            title,\r\n            timestamp: new Date().toISOString(),\r\n            messages,\r\n        };\r\n\r\n        setChatHistory(prevHistory => {\r\n            // Remove temporary threads and add the permanent one\r\n            const filteredHistory = prevHistory.filter(t => !t.id.startsWith('temp-'));\r\n            const newHistory = [newThread, ...filteredHistory];\r\n            localStorage.setItem('socialMediaChatHistory', JSON.stringify(newHistory));\r\n            return newHistory;\r\n        });\r\n    };\r\n\r\n    const startNewChat = (isInitialLoad = false) => {\r\n        if (!isInitialLoad && activeThreadId === 'new') {\r\n            saveCurrentChat();\r\n        }\r\n\r\n        try {\r\n            const ai = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY });\r\n            const newChat = ai.chats.create({\r\n                model: 'gemini-2.5-flash',\r\n                config: { systemInstruction },\r\n            });\r\n            setChat(newChat);\r\n            setMessages([\r\n                { role: 'model', content: \"Hello! I'm your AI Content Strategist. What brilliant idea or product are we working on today?\" }\r\n            ]);\r\n            setActiveThreadId('new');\r\n            setError(null);\r\n        } catch (e) {\r\n            console.error(e);\r\n            setError(\"Failed to initialize AI strategist. Please check your API key and refresh.\");\r\n        }\r\n    };\r\n\r\n    const handleSelectThread = (thread: ChatThread) => {\r\n        if (activeThreadId === 'new') {\r\n            saveCurrentChat();\r\n        }\r\n        setMessages(thread.messages);\r\n        setActiveThreadId(thread.id);\r\n        setChat(null); \r\n        setIsLoading(false);\r\n    };\r\n\r\n    const handleCreatePost = (postData: any) => {\r\n        const { topic, imageSuggestion, videoSuggestion, ...platformContent } = postData;\r\n        const platforms = Object.keys(platformContent).filter(key => PLATFORMS.some(p => p.id === key)) as Platform[];\r\n\r\n        if (platforms.length === 0) {\r\n            setError(\"The generated content didn't specify any valid platforms.\");\r\n            return;\r\n        }\r\n\r\n        const newPost: Post = {\r\n            id: crypto.randomUUID(),\r\n            topic: topic || \"AI Generated Content\",\r\n            platforms,\r\n            content: { ...platformContent, imageSuggestion, videoSuggestion },\r\n            status: 'draft',\r\n            createdAt: new Date().toISOString(),\r\n            isGeneratingImage: false,\r\n            isGeneratingVideo: false,\r\n            videoGenerationStatus: '',\r\n        };\r\n        onPostCreated(newPost);\r\n        saveCurrentChat();\r\n        startNewChat();\r\n    };\r\n\r\n    const handleSubmit = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (!userInput.trim() || isLoading || !chat || activeThreadId !== 'new') return;\r\n\r\n        const userMessage: Message = { role: 'user', content: userInput };\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setUserInput('');\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const result = await chat.sendMessageStream({ message: userInput });\r\n            \r\n            let currentResponse = '';\r\n            setMessages(prev => [...prev, { role: 'model', content: '' }]);\r\n\r\n            for await (const chunk of result) {\r\n                currentResponse += chunk.text;\r\n                setMessages(prev => {\r\n                    const newMessages = [...prev];\r\n                    newMessages[newMessages.length - 1].content = currentResponse;\r\n                    return newMessages;\r\n                });\r\n            }\r\n\r\n            const jsonMatch = currentResponse.match(/```json\\n([\\s\\S]*?)\\n```/);\r\n            if (jsonMatch && jsonMatch[1]) {\r\n                try {\r\n                    const parsedJson = JSON.parse(jsonMatch[1]);\r\n                    setMessages(prev => {\r\n                        const newMessages = [...prev];\r\n                        newMessages[newMessages.length - 1] = {\r\n                            role: 'system',\r\n                            content: 'Here is the content we came up with. Ready to create this post?',\r\n                            postData: parsedJson,\r\n                        };\r\n                        return newMessages;\r\n                    });\r\n                } catch (parseError) {\r\n                    console.error(\"JSON parsing error:\", parseError);\r\n                    setError(\"The AI returned a plan, but it wasn't formatted correctly. You can ask it to try again.\");\r\n                }\r\n            }\r\n\r\n        } catch (err) {\r\n            console.error(err);\r\n            setError(err instanceof Error ? err.message : 'An unexpected error occurred.');\r\n            setMessages(prev => [...prev, { role: 'system', content: 'Sorry, I ran into a problem. Please try again.'}]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n    \r\n    const renderMarkdown = (text: string) => {\r\n        const lines = text.split('\\n');\r\n        // Fix: Replace `JSX.Element` with `React.ReactElement` to resolve namespace error.\r\n        const elements: React.ReactElement[] = [];\r\n        let listItems: React.ReactElement[] = [];\r\n\r\n        const renderLineContent = (line: string) => {\r\n            return line.split(/(\\*\\*.*?\\*\\*)/g).filter(Boolean).map((part, index) => {\r\n                if (part.startsWith('**') && part.endsWith('**')) {\r\n                    return <strong key={index}>{part.slice(2, -2)}</strong>;\r\n                }\r\n                return part;\r\n            });\r\n        };\r\n        \r\n        const flushList = () => {\r\n            if (listItems.length > 0) {\r\n                elements.push(<ul key={`ul-${elements.length}`} className=\"list-disc list-inside space-y-1 my-2\">{listItems}</ul>);\r\n                listItems = [];\r\n            }\r\n        };\r\n\r\n        lines.forEach((line, i) => {\r\n            if (line.trim().startsWith('* ')) {\r\n                listItems.push(<li key={i} className=\"pl-2\">{renderLineContent(line.trim().substring(2))}</li>);\r\n            } else {\r\n                flushList();\r\n                if (line.trim() !== '') {\r\n                    elements.push(<p key={i}>{renderLineContent(line)}</p>);\r\n                }\r\n            }\r\n        });\r\n\r\n        flushList();\r\n\r\n        return <div className=\"space-y-2\">{elements}</div>;\r\n    };\r\n\r\n\r\n    const MessageBubble: React.FC<{ msg: Message }> = ({ msg }) => {\r\n        const isUser = msg.role === 'user';\r\n        const isModel = msg.role === 'model';\r\n        const isSystem = msg.role === 'system';\r\n\r\n        if (isSystem && msg.postData) {\r\n            return (\r\n                <div className=\"bg-white rounded-lg p-4 my-2 text-sm text-charcoal border border-charcoal shadow-lg\">\r\n                    <p className=\"font-semibold mb-4\">{msg.content}</p>\r\n                    <div className=\"bg-light-gray p-3 rounded-md mb-4\">\r\n                        <h4 className=\"font-bold text-charcoal-dark mb-2\">Topic: <span className=\"font-normal\">{msg.postData.topic}</span></h4>\r\n                        <p className=\"text-xs text-slate whitespace-pre-wrap\">{JSON.stringify(msg.postData, null, 2)}</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => handleCreatePost(msg.postData)}\r\n                        className=\"w-full flex items-center justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-charcoal hover:bg-charcoal-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-charcoal\"\r\n                    >\r\n                        <CheckCircle className=\"w-5 h-5 mr-2\" />\r\n                        Accept & Create Post\r\n                    </button>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className={`flex items-start gap-3 my-4 ${isUser ? 'flex-row-reverse' : ''}`}>\r\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${isUser ? 'bg-charcoal' : 'bg-slate'}`}>\r\n                    {isUser ? <User className=\"w-5 h-5 text-white\" /> : <Bot className=\"w-5 h-5 text-white\" />}\r\n                </div>\r\n                <div className={`p-3 rounded-lg max-w-2xl text-base ${isUser ? 'bg-charcoal text-white' : 'bg-light-gray text-gray-900'}`}>\r\n                    {isModel ? renderMarkdown(msg.content) : <p className=\"whitespace-pre-wrap\">{msg.content}</p>}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto h-full flex flex-row gap-6\">\r\n            {isHistoryVisible && (\r\n                <div className=\"w-1/3 lg:w-1/4 bg-white rounded-lg shadow-xl flex flex-col h-full border border-slate/30\">\r\n                    <div className=\"p-4 border-b border-slate/30\">\r\n                        <button\r\n                            onClick={() => startNewChat()}\r\n                            className=\"w-full flex items-center justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-charcoal hover:bg-charcoal-dark\"\r\n                        >\r\n                            <PlusCircle className=\"w-5 h-5 mr-2\" />\r\n                            New Chat\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"flex-1 overflow-y-auto p-2\">\r\n                        <h3 className=\"px-2 pb-2 text-xs font-semibold text-slate uppercase tracking-wider\">History</h3>\r\n                        <nav className=\"space-y-1\">\r\n                            {chatHistory.map(thread => (\r\n                                <button\r\n                                    key={thread.id}\r\n                                    onClick={() => handleSelectThread(thread)}\r\n                                    className={`w-full text-left flex flex-col p-2 rounded-md transition-colors ${\r\n                                        activeThreadId === thread.id ? 'bg-light-gray' : 'hover:bg-slate/10'\r\n                                    }`}\r\n                                >\r\n                                    <p className=\"text-sm font-medium text-charcoal-dark truncate\">{thread.title}</p>\r\n                                    <p className=\"text-xs text-slate\">{new Date(thread.timestamp).toLocaleDateString()}</p>\r\n                                </button>\r\n                            ))}\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex-1 flex flex-col h-full\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h2 className=\"text-3xl font-bold text-charcoal-dark\">AI Content Strategist</h2>\r\n                    <button\r\n                        onClick={() => setIsHistoryVisible(!isHistoryVisible)}\r\n                        className=\"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors\"\r\n                        title={isHistoryVisible ? \"Hide History\" : \"Show History\"}\r\n                    >\r\n                        {isHistoryVisible ? <PanelLeftClose className=\"w-5 h-5\" /> : <History className=\"w-5 h-5\" />}\r\n                    </button>\r\n                </div>\r\n                <div className=\"flex-grow bg-white rounded-lg shadow-xl flex flex-col p-4 min-h-0 border border-slate/30\">\r\n                    <div ref={chatContainerRef} className=\"flex-1 overflow-y-auto pr-2\">\r\n                        {messages.map((msg, index) => <MessageBubble key={index} msg={msg} />)}\r\n                        {isLoading && (\r\n                            <div className=\"flex items-start gap-3 my-4\">\r\n                                <div className=\"w-8 h-8 rounded-full bg-slate flex items-center justify-center flex-shrink-0\">\r\n                                    <Bot className=\"w-5 h-5 text-white\" />\r\n                                </div>\r\n                                <div className=\"p-3 rounded-lg bg-light-gray text-charcoal flex items-center\">\r\n                                    <Loader2 className=\"w-5 h-5 animate-spin text-slate\" />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"mt-4 border-t border-slate/30 pt-4\">\r\n                        {error && <p className=\"text-red-400 text-sm text-center mb-2\">{error}</p>}\r\n                        <form onSubmit={handleSubmit} className=\"flex items-center gap-3\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={userInput}\r\n                                onChange={(e) => setUserInput(e.target.value)}\r\n                                placeholder={activeThreadId !== 'new' ? \"Viewing history (read-only)\" : \"Let's brainstorm some content...\"}\r\n                                className=\"flex-1 bg-white border border-slate/30 rounded-full shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-3 px-5\"\r\n                                disabled={isLoading || activeThreadId !== 'new'}\r\n                            />\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isLoading || !userInput.trim() || activeThreadId !== 'new'}\r\n                                className=\"p-3 rounded-full text-white bg-charcoal hover:bg-charcoal-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-charcoal disabled:bg-slate disabled:cursor-not-allowed transition-colors\"\r\n                            >\r\n                                <Send className=\"w-5 h-5\" />\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContentStrategistView;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1021, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/api/geminiService.ts"],"sourcesContent":["\nimport { GoogleGenAI, Type, Modality } from \"@google/genai\";\n// Fix: Add PostContent, Tone, and ContentType to imports for the new function.\nimport { Platform, Tone, ContentType, PostContent } from '@/types';\nimport { PLATFORMS } from '@/constants';\n\nconst getPlatformDetails = (platforms: Platform[]) => {\n    return platforms.map(p => {\n        const platformInfo = PLATFORMS.find(plat => plat.id === p);\n        return `- ${platformInfo?.name}: Be mindful of its audience and character limit of ${platformInfo?.characterLimit}.`;\n    }).join('\\n');\n};\n\n// Robustly parse JSON from model text output, handling code fences and extra text\nconst parseJsonFromText = <T = any>(text: string): T => {\n    if (!text) {\n        throw new Error('Empty JSON response');\n    }\n    let cleaned = text.trim();\n    // Strip common code fences\n    cleaned = cleaned.replace(/^```(?:json)?\\s*/i, '').replace(/```\\s*$/i, '').trim();\n    // Quick attempt\n    try {\n        return JSON.parse(cleaned) as T;\n    } catch {}\n    // Extract first balanced JSON block ({...} or [...])\n    const firstBrace = cleaned.indexOf('{');\n    const firstBracket = cleaned.indexOf('[');\n    let start = -1;\n    let openChar = '';\n    if (firstBracket !== -1 && (firstBrace === -1 || firstBracket < firstBrace)) {\n        start = firstBracket;\n        openChar = '[';\n    } else if (firstBrace !== -1) {\n        start = firstBrace;\n        openChar = '{';\n    }\n    if (start === -1) {\n        throw new Error('No JSON found in response');\n    }\n    const closeChar = openChar === '[' ? ']' : '}';\n    let depth = 0;\n    let inString = false;\n    let escape = false;\n    for (let i = start; i < cleaned.length; i++) {\n        const ch = cleaned[i];\n        if (inString) {\n            if (!escape && ch === '\"') inString = false;\n            escape = !escape && ch === '\\\\';\n        } else {\n            if (ch === '\"') {\n                inString = true;\n            } else if (ch === openChar) {\n                depth++;\n            } else if (ch === closeChar) {\n                depth--;\n                if (depth === 0) {\n                    const candidate = cleaned.slice(start, i + 1);\n                    // Remove trailing commas before closing braces/brackets\n                    const fixed = candidate.replace(/,\\s*([}\\]])/g, '$1');\n                    return JSON.parse(fixed) as T;\n                }\n            }\n        }\n    }\n    throw new Error('Failed to extract valid JSON');\n};\n\n// Fix: Implement the missing generateSocialMediaContent function.\nexport const generateSocialMediaContent = async (\n    topic: string,\n    platforms: Platform[],\n    contentType: ContentType,\n    tone: Tone\n): Promise<PostContent> => {\n    const ai = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY });\n\n    const platformDetails = getPlatformDetails(platforms);\n\n    const prompt = `\n        You are an expert social media strategist. Your task is to generate content for a social media post based on the provided topic.\n        \n        **Topic:** ${topic}\n        **Content Type:** ${contentType}\n        **Tone:** ${tone}\n        \n        **Target Platforms:**\n        ${platformDetails}\n        \n        Please generate the following:\n        1. Content tailored for each selected platform.\n        2. A creative suggestion for a compelling image to accompany the post.\n        3. A creative suggestion for a short, engaging video (e.g., Reel, Short, TikTok) related to the post.\n        \n        Return the response as a single JSON object. Do not include the original topic. Do not include any markdown formatting or explanatory text outside of the JSON object.\n        The JSON object must have the following keys: \"imageSuggestion\", \"videoSuggestion\", and a key for each platform: ${platforms.join(', ')}.\n    `;\n\n    const platformProperties = platforms.reduce((acc, platform) => {\n        acc[platform] = { type: Type.STRING, description: `Content for ${platform}` };\n        return acc;\n    }, {} as Record<string, { type: Type; description: string }>);\n\n    const responseSchema = {\n        type: Type.OBJECT,\n        properties: {\n            imageSuggestion: { type: Type.STRING, description: 'A creative suggestion for a compelling image.' },\n            videoSuggestion: { type: Type.STRING, description: 'A creative suggestion for an engaging video.' },\n            ...platformProperties\n        },\n        required: ['imageSuggestion', 'videoSuggestion', ...platforms]\n    };\n    \n    try {\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: prompt,\n            config: {\n                responseMimeType: \"application/json\",\n                responseSchema: responseSchema,\n            },\n        });\n        const jsonText = (response.text ?? '').trim();\n        return parseJsonFromText(jsonText);\n    } catch (error) {\n        console.error(\"Error generating social media content:\", error);\n        throw new Error(\"Failed to generate content. Please try again.\");\n    }\n};\n\nexport const improvePrompt = async (prompt: string, type: 'image' | 'video', userGuidance?: string): Promise<string> => {\n    const ai = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY });\n    const guidanceText = userGuidance ? `\\n\\nUser's specific guidance: \"${userGuidance}\"\\nMake sure to incorporate this guidance into your improvements.` : '';\n    const improvePromptText = `\n        You are a creative prompt engineer for an advanced generative AI.\n        Your task is to take a user's idea and expand it into a rich, detailed, and evocative prompt that will produce a stunning visual.\n        For an ${type}, focus on cinematic quality, lighting, composition, and mood.\n        Do NOT add any explanatory text, markdown, or preamble. Return ONLY the improved prompt text.\n\n        Original idea: \"${prompt}\"${guidanceText}\n    `;\n    try {\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: improvePromptText,\n        });\n        return (response.text ?? '').trim();\n    } catch (error) {\n        console.error(\"Error improving prompt:\", error);\n        throw new Error(\"Failed to improve prompt.\");\n    }\n};\n\nexport const generateImageForPost = async (prompt: string): Promise<string> => {\n    try {\n        const ai = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY });\n        const response = await ai.models.generateContent({\n            model: 'gemini-2.5-flash-image',\n            contents: { parts: [{ text: prompt }] },\n            config: { responseModalities: [Modality.IMAGE] },\n        });\n\n        const candidates = response.candidates ?? []\n        if (candidates.length === 0) {\n            throw new Error('No candidates in response')\n        }\n        const parts = candidates[0]?.content?.parts ?? []\n        for (const part of parts) {\n            if (part.inlineData && part.inlineData.data) {\n                const base64ImageBytes: string = part.inlineData.data as string;\n                return `data:image/png;base64,${base64ImageBytes}`;\n            }\n        }\n        throw new Error(\"No image data found in response.\");\n    } catch (error) {\n        console.error(\"Error generating image:\", error);\n        throw new Error(\"Failed to generate image.\");\n    }\n};\n\n\nexport const generateVideoForPost = async (prompt: string) => {\n     try {\n        const aiWithKey = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY });\n        let operation = await aiWithKey.models.generateVideos({\n            model: 'veo-3.1-fast-generate-preview',\n            prompt: prompt,\n            config: {\n                numberOfVideos: 1,\n                resolution: '720p',\n                aspectRatio: '9:16'\n            }\n        });\n        \n        return operation;\n    } catch (error) {\n        console.error(\"Error starting video generation:\", error);\n        if (error instanceof Error && error.message.includes(\"Requested entity was not found\")) {\n            throw new Error('API_KEY_INVALID');\n        }\n        throw error;\n    }\n};\n\nexport const checkVideoOperationStatus = async (operation: any) => {\n    try {\n        const aiWithKey = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY });\n        const updatedOperation = await aiWithKey.operations.getVideosOperation({ operation: operation });\n        return updatedOperation;\n    } catch (error) {\n        console.error(\"Error checking video status:\", error);\n        if (error instanceof Error && error.message.includes(\"Requested entity was not found\")) {\n            throw new Error('API_KEY_INVALID');\n        }\n        throw error;\n    }\n};\n\nexport const fetchVideo = async (uri: string): Promise<string> => {\n    try {\n        const response = await fetch(`${uri}&key=${process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY}`);\n        if (!response.ok) {\n            throw new Error(`Failed to fetch video: ${response.statusText}`);\n        }\n        const blob = await response.blob();\n        return URL.createObjectURL(blob);\n    } catch (error) {\n        console.error(\"Error fetching video data:\", error);\n        throw error;\n    }\n};\n\n// Repurpose long-form content into multiple social media posts\nexport const repurposeContent = async (\n    longFormContent: string,\n    platforms: Platform[],\n    numberOfPosts: number = 5\n): Promise<Array<{ platforms: Platform[]; content: PostContent; topic: string }>> => {\n    const ai = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY });\n\n    const platformDetails = getPlatformDetails(platforms);\n\n    const prompt = `\n        You are an expert social media strategist. Your task is to repurpose the following long-form content into ${numberOfPosts} distinct, engaging social media posts.\n\n        **Long-form Content:**\n        ${longFormContent}\n\n        **Target Platforms:**\n        ${platformDetails}\n\n        Create ${numberOfPosts} unique posts. Each post should:\n        1. Focus on a different angle, key point, or insight from the content\n        2. Be tailored for the specified platforms\n        3. Include engaging hooks and calls-to-action\n        4. Have a clear, specific topic/focus\n        5. Include image and video suggestions\n\n        Return the response as a JSON array of ${numberOfPosts} post objects. Each object must have:\n        - \"topic\": A brief description of the post's focus\n        - \"platforms\": Array of platform names (${platforms.join(', ')})\n        - \"content\": Object with keys for each platform (${platforms.join(', ')}) plus \"imageSuggestion\" and \"videoSuggestion\"\n\n        Do not include any markdown formatting or explanatory text outside of the JSON array.\n    `;\n\n    const postSchema = {\n        type: Type.OBJECT,\n        properties: {\n            topic: { type: Type.STRING },\n            platforms: { type: Type.ARRAY, items: { type: Type.STRING } },\n            content: {\n                type: Type.OBJECT,\n                properties: {\n                    ...platforms.reduce((acc, platform) => {\n                        acc[platform] = { type: Type.STRING };\n                        return acc;\n                    }, {} as Record<string, any>),\n                    imageSuggestion: { type: Type.STRING },\n                    videoSuggestion: { type: Type.STRING },\n                },\n            },\n        },\n    };\n\n    const responseSchema = {\n        type: Type.ARRAY,\n        items: postSchema,\n    };\n\n    try {\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: prompt,\n            config: {\n                responseMimeType: \"application/json\",\n                responseSchema: responseSchema,\n            },\n        });\n        const jsonText = (response.text ?? '').trim();\n        return parseJsonFromText(jsonText);\n    } catch (error) {\n        console.error(\"Error repurposing content:\", error);\n        throw new Error(\"Failed to repurpose content. Please try again.\");\n    }\n};\n\n// Generate AI engagement score and suggestions for a post\nexport const generateEngagementScore = async (\n    postContent: string,\n    platform: Platform,\n    hasImage: boolean,\n    hasVideo: boolean\n): Promise<{ score: number; suggestions: string[] }> => {\n    const ai = new GoogleGenAI({ apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.API_KEY });\n\n    const prompt = `\n        You are a social media analytics expert. Analyze the following post and predict its engagement potential.\n\n        **Platform:** ${platform}\n        **Has Image:** ${hasImage ? 'Yes' : 'No'}\n        **Has Video:** ${hasVideo ? 'Yes' : 'No'}\n        **Post Content:**\n        ${postContent}\n\n        Analyze the post based on:\n        - Readability and clarity\n        - Emotional appeal and sentiment\n        - Use of hashtags (if applicable)\n        - Presence of call-to-action\n        - Content length appropriateness for the platform\n        - Visual content presence\n\n        Return a JSON object with:\n        - \"score\": A number between 0-100 indicating predicted engagement potential\n        - \"suggestions\": An array of 3-5 specific, actionable suggestions to improve engagement\n\n        Do not include markdown or explanatory text outside the JSON object.\n    `;\n\n    const responseSchema = {\n        type: Type.OBJECT,\n        properties: {\n            score: { type: Type.NUMBER },\n            suggestions: { type: Type.ARRAY, items: { type: Type.STRING } },\n        },\n        required: ['score', 'suggestions'],\n    };\n\n    try {\n        const response = await ai.models.generateContent({\n            model: \"gemini-2.5-flash\",\n            contents: prompt,\n            config: {\n                responseMimeType: \"application/json\",\n                responseSchema: responseSchema,\n            },\n        });\n        const jsonText = (response.text ?? '').trim();\n        return parseJsonFromText(jsonText);\n    } catch (error) {\r\n        console.error(\"Error generating engagement score:\", error);\r\n        throw new Error(\"Failed to generate engagement score.\");\r\n    }\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1426, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/mediaService.ts"],"sourcesContent":["import { openDB, DBSchema, IDBPDatabase } from 'idb';\r\nimport { MediaAsset } from '@/types';\r\n\r\ninterface MediaDB extends DBSchema {\r\n  media: {\r\n    key: string;\r\n    value: MediaAsset;\r\n    indexes: {\r\n      'by-date': string;\r\n      'by-type': string;\r\n      'by-source': string;\r\n    };\r\n  };\r\n}\r\n\r\nconst DB_NAME = 'social-media-os-db';\r\nconst DB_VERSION = 1;\r\n\r\nlet dbInstance: IDBPDatabase<MediaDB> | null = null;\r\n\r\nasync function getDB(): Promise<IDBPDatabase<MediaDB>> {\r\n  if (dbInstance) return dbInstance;\r\n\r\n  dbInstance = await openDB<MediaDB>(DB_NAME, DB_VERSION, {\r\n    upgrade(db) {\r\n      // Create media store\r\n      const mediaStore = db.createObjectStore('media', { keyPath: 'id' });\r\n      mediaStore.createIndex('by-date', 'createdAt');\r\n      mediaStore.createIndex('by-type', 'type');\r\n      mediaStore.createIndex('by-source', 'source');\r\n    },\r\n  });\r\n\r\n  return dbInstance;\r\n}\r\n\r\n// Save a media asset\r\nexport async function saveMediaAsset(asset: MediaAsset): Promise<void> {\r\n  const db = await getDB();\r\n  await db.put('media', asset);\r\n}\r\n\r\n// Get all media assets\r\nexport async function getAllMediaAssets(): Promise<MediaAsset[]> {\r\n  const db = await getDB();\r\n  const assets = await db.getAll('media');\r\n  return assets.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\r\n}\r\n\r\n// Get media asset by ID\r\nexport async function getMediaAssetById(id: string): Promise<MediaAsset | undefined> {\r\n  const db = await getDB();\r\n  return await db.get('media', id);\r\n}\r\n\r\n// Delete media asset\r\nexport async function deleteMediaAsset(id: string): Promise<void> {\r\n  const db = await getDB();\r\n  await db.delete('media', id);\r\n}\r\n\r\n// Search media by tags\r\nexport async function searchMediaByTags(tags: string[]): Promise<MediaAsset[]> {\r\n  const allAssets = await getAllMediaAssets();\r\n  return allAssets.filter(asset =>\r\n    tags.some(tag => asset.tags.some(t => t.toLowerCase().includes(tag.toLowerCase())))\r\n  );\r\n}\r\n\r\n// Update media asset tags\r\nexport async function updateMediaTags(id: string, tags: string[]): Promise<void> {\r\n  const db = await getDB();\r\n  const asset = await db.get('media', id);\r\n  if (asset) {\r\n    asset.tags = tags;\r\n    await db.put('media', asset);\r\n  }\r\n}\r\n\r\n// Get media by type\r\nexport async function getMediaByType(type: 'image' | 'video'): Promise<MediaAsset[]> {\r\n  const db = await getDB();\r\n  return await db.getAllFromIndex('media', 'by-type', type);\r\n}\r\n\r\n// Auto-save AI-generated media\r\nexport async function autoSaveAIMedia(\r\n  url: string,\r\n  type: 'image' | 'video',\r\n  postTopic?: string\r\n): Promise<MediaAsset> {\r\n  const asset: MediaAsset = {\r\n    id: crypto.randomUUID(),\r\n    name: `${type}_${new Date().getTime()}`,\r\n    type,\r\n    url,\r\n    size: 0, // Will be calculated if needed\r\n    tags: postTopic ? [postTopic] : [],\r\n    createdAt: new Date().toISOString(),\r\n    source: 'ai-generated',\r\n    usedInPosts: [],\r\n  };\r\n\r\n  await saveMediaAsset(asset);\r\n  return asset;\r\n}\r\n\r\n// Create thumbnail for video (basic implementation)\r\nexport async function createVideoThumbnail(videoUrl: string): Promise<string> {\r\n  return new Promise((resolve) => {\r\n    const video = document.createElement('video');\r\n    video.src = videoUrl;\r\n    video.crossOrigin = 'anonymous';\r\n\r\n    video.addEventListener('loadeddata', () => {\r\n      video.currentTime = 1; // Capture at 1 second\r\n    });\r\n\r\n    video.addEventListener('seeked', () => {\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      const ctx = canvas.getContext('2d');\r\n\r\n      if (ctx) {\r\n        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        resolve(canvas.toDataURL('image/jpeg', 0.7));\r\n      } else {\r\n        resolve(''); // Fallback\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n// Handle file upload\r\nexport async function uploadMediaFile(file: File): Promise<MediaAsset> {\r\n  const url = URL.createObjectURL(file);\r\n  const type = file.type.startsWith('image/') ? 'image' : 'video';\r\n\r\n  let thumbnailUrl: string | undefined;\r\n  if (type === 'video') {\r\n    thumbnailUrl = await createVideoThumbnail(url);\r\n  }\r\n\r\n  const asset: MediaAsset = {\r\n    id: crypto.randomUUID(),\r\n    name: file.name,\r\n    type,\r\n    url,\r\n    thumbnailUrl,\r\n    size: file.size,\r\n    tags: [],\r\n    createdAt: new Date().toISOString(),\r\n    source: 'uploaded',\r\n    usedInPosts: [],\r\n  };\r\n\r\n  await saveMediaAsset(asset);\r\n  return asset;\r\n}\r\n\r\n// Mark media as used in a post\r\nexport async function markMediaUsedInPost(mediaId: string, postId: string): Promise<void> {\r\n  const asset = await getMediaAssetById(mediaId);\r\n  if (asset && !asset.usedInPosts.includes(postId)) {\r\n    asset.usedInPosts.push(postId);\r\n    await saveMediaAsset(asset);\r\n  }\r\n}\r\n\r\n// Get storage stats\r\nexport async function getStorageStats(): Promise<{ totalAssets: number; totalSize: number }> {\r\n  const assets = await getAllMediaAssets();\r\n  const totalSize = assets.reduce((sum, asset) => sum + asset.size, 0);\r\n  return { totalAssets: assets.length, totalSize };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1585, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/ui/PreviewModal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Post, Platform } from '@/types';\r\nimport { PLATFORMS } from '@/constants';\r\nimport { X, ThumbsUp, MessageCircle, Repeat, Send, Image as ImageIcon, Video as VideoIcon } from 'lucide-react';\r\n\r\ninterface PreviewModalProps {\r\n    post: Post;\r\n    onClose: () => void;\r\n}\r\n\r\nconst PreviewModal: React.FC<PreviewModalProps> = ({ post, onClose }) => {\r\n    const [activePlatform, setActivePlatform] = useState<Platform>(post.platforms[0] ?? 'twitter');\n\r\n    useEffect(() => {\r\n        const handleEsc = (event: KeyboardEvent) => {\r\n            if (event.key === 'Escape') {\r\n                onClose();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleEsc);\r\n        return () => window.removeEventListener('keydown', handleEsc);\r\n    }, [onClose]);\r\n\r\n    const PlatformPreview: React.FC<{ platform: Platform }> = ({ platform }) => {\r\n        const platformInfo = PLATFORMS.find(p => p.id === platform);\r\n        if (!platformInfo) return null;\r\n\r\n        const content = post.content?.[platform] || '';\n        const hasGeneratedMedia = post.generatedImage || post.generatedVideoUrl;\r\n\r\n        return (\r\n            <div className=\"bg-light-gray rounded-lg p-4 w-full max-w-lg mx-auto border border-slate/30\">\r\n                <div className=\"flex items-center mb-4\">\r\n                     <div className=\"w-11 h-11 bg-charcoal rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0\">\r\n                        AI\r\n                    </div>\r\n                    <div className=\"ml-3\">\r\n                        <p className=\"font-semibold text-charcoal-dark leading-tight\">AI Content OS (Preview)</p>\r\n                        <p className=\"text-xs text-slate\">Posting to {platformInfo.name}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <p className=\"text-charcoal text-sm mb-4 whitespace-pre-wrap\">{content}</p>\r\n\r\n                {post.generatedImage ? (\r\n                    <img src={post.generatedImage} alt=\"Generated content\" className=\"rounded-lg w-full border border-slate/30 mb-4\" />\r\n                ) : post.generatedVideoUrl ? (\r\n                    <video src={post.generatedVideoUrl} controls className=\"rounded-lg w-full border border-slate/30 mb-4\" />\r\n                ) : post.content?.imageSuggestion ? (\n                    <div className=\"bg-white rounded-lg w-full aspect-video flex flex-col items-center justify-center text-slate p-4 mb-4 border border-slate/30\">\r\n                         <ImageIcon className=\"w-12 h-12 mb-2\" />\r\n                         <p className=\"text-center text-xs italic\">Image will be generated for: \"{post.content.imageSuggestion}\"</p>\r\n                    </div>\r\n                ) : post.content?.videoSuggestion && (\n                    <div className=\"bg-white rounded-lg w-full aspect-video flex flex-col items-center justify-center text-slate p-4 mb-4 border border-slate/30\">\r\n                         <VideoIcon className=\"w-12 h-12 mb-2\" />\r\n                         <p className=\"text-center text-xs italic\">Video will be generated for: \"{post.content.videoSuggestion}\"</p>\r\n                    </div>\r\n                )}\r\n\r\n                 <div className=\"pt-3 border-t border-slate/30 flex justify-around text-slate\">\r\n                    <div className=\"flex items-center space-x-2 p-2 rounded-md\"><ThumbsUp className=\"w-5 h-5\" /><span className=\"text-sm font-medium\">Like</span></div>\r\n                    <div className=\"flex items-center space-x-2 p-2 rounded-md\"><MessageCircle className=\"w-5 h-5\" /><span className=\"text-sm font-medium\">Comment</span></div>\r\n                    <div className=\"flex items-center space-x-2 p-2 rounded-md\"><Repeat className=\"w-5 h-5\" /><span className=\"text-sm font-medium\">Repost</span></div>\r\n                    <div className=\"flex items-center space-x-2 p-2 rounded-md\"><Send className=\"w-5 h-5\" /><span className=\"text-sm font-medium\">Send</span></div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const PlatformTabs: React.FC = () => (\r\n        <div className=\"flex items-center border-b border-slate/30 mb-4\">\r\n            {post.platforms.map(p => {\r\n                const platformInfo = PLATFORMS.find(info => info.id === p);\r\n                if (!platformInfo) return null;\r\n                const { icon: Icon, name } = platformInfo;\r\n                return (\r\n                    <button\r\n                        key={p}\r\n                        onClick={() => setActivePlatform(p)}\r\n                        className={`flex items-center gap-2 px-4 py-3 border-b-2 font-medium transition-colors ${\r\n                            activePlatform === p ? 'border-charcoal text-charcoal-dark' : 'border-transparent text-slate hover:text-charcoal-dark'\r\n                        }`}\r\n                    >\r\n                        <Icon className=\"w-5 h-5\" />\r\n                        <span>{name}</span>\r\n                    </button>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-slate/30\" onClick={e => e.stopPropagation()}>\r\n                <header className=\"flex justify-between items-center p-4 border-b border-slate/30 flex-shrink-0\">\r\n                    <h2 className=\"text-xl font-bold text-charcoal-dark\">Post Preview</h2>\r\n                    <button onClick={onClose} className=\"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors\">\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n                </header>\r\n                <div className=\"p-6 overflow-y-auto\">\r\n                    <PlatformTabs />\r\n                    <PlatformPreview platform={activePlatform} />\r\n                </div>\r\n            </div>\r\n            <style>{`\r\n                @keyframes fade-in {\r\n                    from { opacity: 0; transform: scale(0.95); }\r\n                    to { opacity: 1; transform: scale(1); }\r\n                }\r\n                .animate-fade-in {\r\n                    animation: fade-in 0.2s ease-out forwards;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PreviewModal;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1991, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/content/PostCard.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect } from 'react';\nimport { Post, Platform, PostContent } from '@/types';\nimport { PLATFORMS, STATUS_CONFIG } from '@/constants';\nimport { generateImageForPost, generateVideoForPost, improvePrompt } from '@/services/api/geminiService';\nimport { autoSaveAIMedia } from '@/services/mediaService';\nimport { Loader2, Video, Image as ImageIcon, Edit, Save, Trash2, Send, CheckCircle, AlertTriangle, ExternalLink, Sparkles, Eye, X, ArrowRightCircle } from 'lucide-react';\nimport PreviewModal from '@/components/ui/PreviewModal';\n\ninterface PostCardProps {\n    post: Post;\n    onUpdatePost: (post: Post) => void;\n    onDeletePost: (postId: string) => void;\n    isApiKeyReady: boolean;\n    onSelectKey: () => void;\n    resetApiKeyStatus: () => void;\n    connectedAccounts: Record<Platform, boolean>;\n}\n\nconst PostCard: React.FC<PostCardProps> = ({ post, onUpdatePost, onDeletePost, isApiKeyReady, onSelectKey, resetApiKeyStatus }) => {\n    const [isEditing, setIsEditing] = useState(false);\n    const [editedContent, setEditedContent] = useState<PostContent>(post.content ?? ({} as PostContent));\n    const [activePlatform, setActivePlatform] = useState<Platform>(post.platforms[0] ?? 'twitter');\n    const [isImproving, setIsImproving] = useState<{ image: boolean; video: boolean }>({ image: false, video: false });\n    const [isPreviewOpen, setIsPreviewOpen] = useState(false);\n    const [improveModalOpen, setImproveModalOpen] = useState<'image' | 'video' | null>(null);\n    const [improvePromptInput, setImprovePromptInput] = useState('');\n\n    useEffect(() => {\n        if (!isEditing) {\n            setEditedContent(post.content ?? ({} as PostContent));\n        }\n    }, [post.content, isEditing]);\n\n    const handleContentChange = (platform: Platform, value: string) => {\n        setEditedContent(prev => ({ ...prev, [platform]: value }));\n    };\n\n    const handleSuggestionChange = (type: 'imageSuggestion' | 'videoSuggestion', value: string) => {\n        setEditedContent(prev => ({ ...prev, [type]: value }));\n    }\n\n    const handleSave = () => {\n        onUpdatePost({ ...post, content: editedContent });\n        setIsEditing(false);\n    };\n    \n    const handleCancel = () => {\n        setIsEditing(false);\n        setEditedContent(post.content);\n    };\n\n    const handleStatusChange = (newStatus: Post['status']) => {\n        const updates: Partial<Post> = { status: newStatus };\n        onUpdatePost({ ...post, ...updates });\n    };\n\n    const handleOpenImproveModal = (type: 'image' | 'video') => {\n        setImproveModalOpen(type);\n        setImprovePromptInput('');\n    };\n\n    const handleImproveSuggestion = async () => {\n        if (!improveModalOpen) return;\n        const type = improveModalOpen;\n        const suggestionKey = type === 'image' ? 'imageSuggestion' : 'videoSuggestion';\n        const currentSuggestion = editedContent[suggestionKey];\n        if (!currentSuggestion) return;\n\n        setIsImproving(prev => ({...prev, [type]: true}));\n        setImproveModalOpen(null);\n        try {\n            const improved = await improvePrompt(currentSuggestion, type, improvePromptInput);\n            setEditedContent(prev => ({ ...prev, [suggestionKey]: improved }));\n        } catch (error) {\n            console.error(`Error improving ${type} suggestion:`, error);\n        } finally {\n            setIsImproving(prev => ({...prev, [type]: false}));\n            setImprovePromptInput('');\n        }\n    };\n\n    const handleGenerateImage = async () => {\n        if (!editedContent.imageSuggestion) return;\n        onUpdatePost({ ...post, isGeneratingImage: true, generatedImage: undefined });\n        try {\n            const imageUrl = await generateImageForPost(editedContent.imageSuggestion);\n            // Auto-save to media library\n            await autoSaveAIMedia(imageUrl, 'image', post.topic);\n            onUpdatePost({ ...post, generatedImage: imageUrl, isGeneratingImage: false, content: editedContent });\n        } catch (error) {\n            console.error(error);\n            onUpdatePost({ ...post, isGeneratingImage: false });\n        }\n    };\n    \n    const handleGenerateVideo = async () => {\n        if (!editedContent.videoSuggestion) return;\n        try {\n            onUpdatePost({ ...post, isGeneratingVideo: true, videoGenerationStatus: 'Starting...', generatedVideoUrl: undefined });\n            const operation = await generateVideoForPost(editedContent.videoSuggestion);\n            onUpdatePost({ ...post, videoGenerationStatus: 'Processing...', videoOperation: operation, content: editedContent });\n        } catch (error) {\n            if (error instanceof Error && error.message === 'API_KEY_INVALID') {\n                resetApiKeyStatus();\n            }\n            onUpdatePost({ ...post, isGeneratingVideo: false, videoGenerationStatus: 'Generation failed.' });\n        }\n    };\n\n    const StatusChip: React.FC<{ status: Post['status'] }> = ({ status }) => {\n        const config = STATUS_CONFIG[status];\n        return <span className={`px-2.5 py-1 text-xs font-semibold rounded-full text-white ${config.color}`}>{config.label}</span>;\n    };\n    \n    const PlatformTab: React.FC<{ platform: Platform }> = ({ platform }) => {\n        const platformInfo = PLATFORMS.find(p => p.id === platform);\n        if (!platformInfo) return null;\n        const { icon: Icon } = platformInfo;\n\n        return (\n            <button\n                onClick={() => setActivePlatform(platform)}\n                className={`flex items-center space-x-2 px-3 py-2 rounded-t-lg transition-colors duration-200 border-b-2 ${\n                    activePlatform === platform ? 'border-charcoal text-charcoal-dark' : 'border-transparent text-slate hover:text-charcoal-dark'\n                }`}\n            >\n                <Icon className=\"w-5 h-5\" />\n            </button>\n        );\n    };\n\n    const ActionButton: React.FC<{ onClick: () => void, icon: React.ElementType, label: string, className?: string, disabled?: boolean }> = \n    ({ onClick, icon: Icon, label, className, disabled }) => (\n        <button onClick={onClick} disabled={disabled} className={`flex items-center justify-center text-xs font-semibold py-2.5 px-4 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md ${className}`}>\n            <Icon className={`w-4 h-4 ${label ? 'mr-2' : ''} ${disabled && (label.includes('Generating') || label.includes('Improving') || label.includes('Processing')) ? 'animate-spin' : ''}`} />\n            {label && <span>{label}</span>}\n        </button>\n    );\n\n    const ImproveModal = () => {\n        if (!improveModalOpen) return null;\n        const type = improveModalOpen;\n        const typeLabel = type === 'image' ? 'Picture' : 'Video';\n\n        return (\n            <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={() => setImproveModalOpen(null)}>\n                <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-lg flex flex-col border border-slate/30\" onClick={e => e.stopPropagation()}>\n                    <header className=\"flex justify-between items-center p-6 border-b border-slate/30\">\n                        <div>\n                            <h2 className=\"text-xl font-bold text-charcoal-dark\">Improve {typeLabel} Script</h2>\n                            <p className=\"text-sm text-slate mt-1\">Provide guidance to enhance the script</p>\n                        </div>\n                        <button onClick={() => setImproveModalOpen(null)} className=\"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors\">\n                            <X className=\"w-6 h-6\" />\n                        </button>\n                    </header>\n                    <div className=\"p-6 space-y-4\">\n                        <div>\n                            <label className=\"block text-sm font-semibold text-charcoal mb-2\">\n                                What would you like to improve? (Optional)\n                            </label>\n                            <textarea\n                                value={improvePromptInput}\n                                onChange={(e) => setImprovePromptInput(e.target.value)}\n                                onKeyDown={(e) => e.stopPropagation()}\n                                placeholder={`e.g., \"Make it more cinematic\", \"Add more details about lighting\", \"Focus on emotional impact\"...`}\n                                className=\"w-full h-32 px-4 py-3 bg-white border border-slate/30 rounded-lg text-charcoal focus:ring-2 focus:ring-charcoal focus:border-transparent resize-none text-sm leading-relaxed\"\n                                autoFocus\n                            />\n                            <p className=\"text-xs text-slate mt-2\">\n                                Leave empty to use AI's default improvement suggestions\n                            </p>\n                        </div>\n                        <div className=\"flex gap-3\">\n                            <button\n                                onClick={handleImproveSuggestion}\n                                className=\"flex-1 flex items-center justify-center gap-2 py-3 px-4 bg-amber-500 hover:bg-amber-600 text-black font-semibold rounded-lg transition-all shadow-sm hover:shadow-md\"\n                            >\n                                <Sparkles className=\"w-4 h-4\" />\n                                Improve Script\n                            </button>\n                            <button\n                                onClick={() => setImproveModalOpen(null)}\n                                className=\"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-charcoal font-semibold rounded-lg transition-all\"\n                            >\n                                Cancel\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <>\n            <div className=\"bg-white rounded-lg shadow-lg flex flex-col overflow-hidden border border-slate/30\">\n                <div className=\"p-4 bg-light-gray\">\n                    <div className=\"flex justify-between items-start\">\n                        <p className=\"font-bold text-lg text-charcoal-dark pr-2 break-words flex-1\">\n                            {post.topic}\n                        </p>\n                        <StatusChip status={post.status} />\n                    </div>\n                    <p className=\"text-xs text-slate mt-1\">\n                        {`Created: ${new Date(post.createdAt).toLocaleString()}`}\n                    </p>\n                </div>\n                <div className=\"flex-grow p-4 space-y-4\">\n                    <div className=\"flex border-b border-slate/30\">\n                        {post.platforms.map(p => <PlatformTab key={p} platform={p} />)}\n                    </div>\n                    {/* Content Section */}\n                    <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2\">\n                            <Edit className=\"w-4 h-4 text-charcoal\" />\n                            <p className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Content</p>\n                        </div>\n                        <div className=\"bg-slate/5 border border-slate/20 p-4 rounded-lg\">\n                            <textarea\n                                readOnly={!isEditing}\n                                value={editedContent?.[activePlatform] || ''}\n                                onChange={(e) => handleContentChange(activePlatform, e.target.value)}\n                                className={`w-full h-40 bg-transparent text-charcoal resize-none focus:outline-none text-sm leading-relaxed ${isEditing ? 'focus:ring-2 focus:ring-charcoal rounded p-2' : ''}`}\n                            />\n                        </div>\n                    </div>\n                    {isEditing ? (\n                        <>\n                            {/* EDITING VIEW FOR MEDIA */}\n                            {post.content?.imageSuggestion && (\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <ImageIcon className=\"w-4 h-4 text-teal-600\" />\n                                        <label className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Picture Script</label>\n                                    </div>\n                                    <div className=\"bg-teal-50 border border-teal-200 p-4 rounded-lg space-y-3\">\n                                        <textarea\n                                            value={editedContent.imageSuggestion || ''}\n                                            onChange={(e) => handleSuggestionChange('imageSuggestion', e.target.value)}\n                                            className=\"w-full h-24 bg-white p-3 rounded-md text-sm text-charcoal resize-none focus:outline-none focus:ring-2 focus:ring-teal-500 border border-teal-300\"\n                                            placeholder=\"Describe the image you want to generate...\"\n                                        />\n                                        <div className=\"grid grid-cols-2 gap-2\">\n                                            <ActionButton onClick={() => handleOpenImproveModal('image')} disabled={isImproving.image} icon={isImproving.image ? Loader2 : Sparkles} label={isImproving.image ? 'Improving...' : 'Improve'} className=\"w-full bg-amber-500 hover:bg-amber-600 text-black\" />\n                                            <ActionButton onClick={handleGenerateImage} disabled={post.isGeneratingImage} icon={post.isGeneratingImage ? Loader2 : ImageIcon} label={post.isGeneratingImage ? 'Generating...' : 'Regenerate'} className=\"w-full text-white bg-teal-600 hover:bg-teal-700\" />\n                                        </div>\n                                        {post.generatedImage && <img src={post.generatedImage} alt=\"Generated\" className=\"rounded-lg w-full mt-2 border border-teal-300\" />}\n                                    </div>\n                                </div>\n                            )}\n                            {post.content?.videoSuggestion && (\n                                <div className=\"space-y-3\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <Video className=\"w-4 h-4 text-purple-600\" />\n                                        <label className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Video Script</label>\n                                    </div>\n                                    <div className=\"bg-purple-50 border border-purple-200 p-4 rounded-lg space-y-3\">\n                                        <textarea\n                                            value={editedContent.videoSuggestion || ''}\n                                            onChange={(e) => handleSuggestionChange('videoSuggestion', e.target.value)}\n                                            className=\"w-full h-24 bg-white p-3 rounded-md text-sm text-charcoal resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 border border-purple-300\"\n                                            placeholder=\"Describe the video you want to generate...\"\n                                        />\n                                        <div className=\"grid grid-cols-2 gap-2\">\n                                            <ActionButton onClick={() => handleOpenImproveModal('video')} disabled={isImproving.video} icon={isImproving.video ? Loader2 : Sparkles} label={isImproving.video ? 'Improving...' : 'Improve'} className=\"w-full bg-amber-500 hover:bg-amber-600 text-black\" />\n                                            {!isApiKeyReady && !post.generatedVideoUrl ? (\n                                                <button onClick={onSelectKey} className=\"flex items-center justify-center gap-2 p-2 bg-yellow-900/50 rounded text-xs text-yellow-200 underline hover:text-white\">\n                                                    <AlertTriangle className=\"w-5 h-5 text-yellow-400 flex-shrink-0\"/>\n                                                    <span>Select key to generate</span>\n                                                </button>\n                                            ) : (\n                                                <ActionButton onClick={handleGenerateVideo} disabled={post.isGeneratingVideo} icon={post.isGeneratingVideo ? Loader2 : Video} label={post.isGeneratingVideo ? post.videoGenerationStatus.split(' ')[0] : 'Regenerate'} className=\"w-full text-white bg-purple-600 hover:bg-purple-700\" />\n                                            )}\n                                        </div>\n                                        {post.generatedVideoUrl && <video src={post.generatedVideoUrl} controls className=\"rounded-lg w-full mt-2 border border-purple-300\" />}\n                                    </div>\n                                </div>\n                            )}\n                        </>\n                    ) : (\n                        <>\n                            {/* VIEWING VIEW FOR MEDIA */}\n                            {post.content?.imageSuggestion && (\n                                <div className=\"space-y-2\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <ImageIcon className=\"w-4 h-4 text-teal-600\" />\n                                        <p className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Picture Script</p>\n                                    </div>\n                                    <div className=\"bg-teal-50 border border-teal-200 p-4 rounded-lg space-y-3\">\n                                        <p className=\"text-slate text-xs italic leading-relaxed\">\"{post.content?.imageSuggestion}\"</p>\n                                        {post.generatedImage ? (\n                                            <img src={post.generatedImage} alt=\"Generated\" className=\"rounded-lg w-full border border-teal-300\" />\n                                        ) : (\n                                            <ActionButton\n                                                onClick={handleGenerateImage}\n                                                disabled={post.isGeneratingImage}\n                                                icon={post.isGeneratingImage ? Loader2 : ImageIcon}\n                                                label={post.isGeneratingImage ? 'Generating...' : 'Generate Image'}\n                                                className=\"w-full text-white bg-teal-600 hover:bg-teal-700\"\n                                            />\n                                        )}\n                                    </div>\n                                </div>\n                            )}\n                            {post.content?.videoSuggestion && (\n                                <div className=\"space-y-2\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <Video className=\"w-4 h-4 text-purple-600\" />\n                                        <p className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Video Script</p>\n                                    </div>\n                                    <div className=\"bg-purple-50 border border-purple-200 p-4 rounded-lg space-y-3\">\n                                        <p className=\"text-slate text-xs italic leading-relaxed\">\"{post.content?.videoSuggestion}\"</p>\n                                        {post.generatedVideoUrl ? (\n                                            <div className=\"relative\">\n                                                <video src={post.generatedVideoUrl} controls className=\"rounded-lg w-full border border-purple-300\" />\n                                                <a href={post.generatedVideoUrl} download={`video_${post.id}.mp4`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"absolute top-2 right-2 bg-black/50 p-1.5 rounded-full text-white hover:bg-black/80 transition-colors\">\n                                                    <ExternalLink className=\"w-4 h-4\"/>\n                                                </a>\n                                            </div>\n                                        ) : (\n                                            !isApiKeyReady ? (\n                                                <button onClick={onSelectKey} className=\"flex items-center justify-center gap-2 w-full p-2 bg-yellow-900/50 rounded text-xs text-yellow-200 underline hover:text-white transition-colors\">\n                                                    <AlertTriangle className=\"w-5 h-5 text-yellow-400 flex-shrink-0\"/>\n                                                    <span>Select key to generate</span>\n                                                </button>\n                                            ) : (\n                                                <ActionButton\n                                                    onClick={handleGenerateVideo}\n                                                    disabled={post.isGeneratingVideo}\n                                                    icon={post.isGeneratingVideo ? Loader2 : Video}\n                                                    label={post.isGeneratingVideo ? post.videoGenerationStatus.split(' ')[0] : 'Generate Video'}\n                                                    className=\"w-full text-white bg-purple-600 hover:bg-purple-700\"\n                                                />\n                                            )\n                                        )}\n                                    </div>\n                                </div>\n                            )}\n                        </>\n                    )}\n                </div>\n                <div className=\"p-4 bg-light-gray flex flex-wrap gap-3 justify-between items-center border-t border-slate/20\">\n                    {isEditing ? (\n                         <div className=\"flex items-center justify-between w-full\">\n                            <div className=\"flex gap-2 flex-wrap\">\n                                <ActionButton onClick={handleSave} icon={Save} label=\"Save Changes\" className=\"bg-green-600 hover:bg-green-700 text-white\" />\n                                <ActionButton onClick={handleCancel} icon={X} label=\"Cancel\" className=\"bg-gray-500 hover:bg-gray-600 text-white\" />\n                                <ActionButton onClick={() => setIsPreviewOpen(true)} icon={Eye} label=\"Preview\" className=\"bg-blue-600 hover:bg-blue-700 text-white\" />\n                            </div>\n                            <ActionButton onClick={() => onDeletePost(post.id)} icon={Trash2} label=\"\" className=\"bg-red-600 hover:bg-red-700 text-white w-10 h-10\" />\n                        </div>\n                    ) : (\n                         <div className=\"flex items-center justify-between w-full\">\n                            <div className=\"flex gap-2 flex-wrap\">\n                                <ActionButton onClick={() => setIsEditing(true)} icon={Edit} label=\"Edit\" className=\"bg-charcoal hover:bg-charcoal-dark text-white\" />\n                                <ActionButton onClick={() => setIsPreviewOpen(true)} icon={Eye} label=\"Preview\" className=\"bg-blue-600 hover:bg-blue-700 text-white\" />\n                                {post.status === 'draft' && <ActionButton onClick={() => handleStatusChange('needs approval')} icon={Send} label=\"Request Approval\" className=\"bg-yellow-500 hover:bg-yellow-600 text-black font-bold\" />}\n                                {post.status === 'needs approval' && <ActionButton onClick={() => handleStatusChange('approved')} icon={CheckCircle} label=\"Approve\" className=\"bg-cyan-500 hover:bg-cyan-600 text-white\" />}\n                                {post.status === 'approved' && (\n                                    <ActionButton onClick={() => handleStatusChange('ready to publish')} icon={ArrowRightCircle} label=\"Finalize & Move\" className=\"bg-charcoal hover:bg-charcoal-dark text-white\" />\n                                )}\n                            </div>\n                            <ActionButton onClick={() => onDeletePost(post.id)} icon={Trash2} label=\"\" className=\"bg-red-600 hover:bg-red-700 text-white w-10 h-10\" />\n                        </div>\n                    )}\n                </div>\n            </div>\n            {isPreviewOpen && (\n                <PreviewModal \n                    post={{ ...post, content: editedContent }} \n                    onClose={() => setIsPreviewOpen(false)} \n                />\n            )}\n            <ImproveModal />\n        </>\n    );\n};\n\nexport default PostCard;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3070, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/ui/FilterBar.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react';\r\nimport { PostStatus, Platform } from '@/types';\r\nimport { PLATFORMS, STATUS_CONFIG } from '@/constants';\r\nimport { Search } from 'lucide-react';\r\n\r\ninterface FilterBarProps {\r\n    onSearchChange: (value: string) => void;\r\n    onStatusChange: (value: PostStatus | 'all') => void;\r\n    onPlatformChange: (value: Platform | 'all') => void;\r\n    showStatusFilter?: boolean;\r\n    excludeStatuses?: PostStatus[];\r\n}\r\n\r\nconst FilterBar: React.FC<FilterBarProps> = ({ onSearchChange, onStatusChange, onPlatformChange, showStatusFilter = true, excludeStatuses = [] }) => {\r\n    return (\r\n        <div className=\"bg-white p-4 rounded-lg mb-6 flex flex-col md:flex-row items-center gap-4 border border-slate/30\">\r\n            <div className=\"relative w-full md:flex-1\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate w-5 h-5\" />\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search by topic...\"\r\n                    onChange={(e) => onSearchChange(e.target.value)}\r\n                    className=\"w-full bg-white border border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-2 pl-10\"\r\n                />\r\n            </div>\r\n            <div className=\"flex w-full md:w-auto gap-4\">\r\n                {showStatusFilter && (\r\n                    <select\r\n                        onChange={(e) => onStatusChange(e.target.value as PostStatus | 'all')}\r\n                        className=\"w-full bg-white border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-2 capitalize\"\r\n                    >\r\n                        <option value=\"all\">All Statuses</option>\r\n                        {Object.entries(STATUS_CONFIG)\r\n                            .filter(([status]) => !excludeStatuses.includes(status as PostStatus))\r\n                            .map(([status, { label }]) => (\r\n                            <option key={status} value={status}>{label}</option>\r\n                        ))}\r\n                    </select>\r\n                )}\r\n                <select\r\n                    onChange={(e) => onPlatformChange(e.target.value as Platform | 'all')}\r\n                    className=\"w-full bg-white border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-2\"\r\n                >\r\n                    <option value=\"all\">All Platforms</option>\r\n                    {PLATFORMS.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}\r\n                </select>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FilterBar;\r\n"],"names":[],"mappings":";;;;;AAIA;AACA;AALA;;;;AAeA,MAAM,YAAsC,CAAC,EAAE,cAAc,EAAE,cAAc,EAAE,gBAAgB,EAAE,mBAAmB,IAAI,EAAE,kBAAkB,EAAE,EAAE;IAC5I,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,gNAAM;wBAAC,WAAU;;;;;;kCAClB,8OAAC;wBACG,MAAK;wBACL,aAAY;wBACZ,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;;;;;;;;;;;;0BAGlB,8OAAC;gBAAI,WAAU;;oBACV,kCACG,8OAAC;wBACG,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAM;;;;;;4BACnB,OAAO,OAAO,CAAC,0IAAa,EACxB,MAAM,CAAC,CAAC,CAAC,OAAO,GAAK,CAAC,gBAAgB,QAAQ,CAAC,SAC/C,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE,KAAK,EAAE,CAAC,iBACzB,8OAAC;oCAAoB,OAAO;8CAAS;mCAAxB;;;;;;;;;;;kCAIzB,8OAAC;wBACG,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wBAChD,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAM;;;;;;4BACnB,sIAAS,CAAC,GAAG,CAAC,CAAA,kBAAK,8OAAC;oCAAkB,OAAO,EAAE,EAAE;8CAAG,EAAE,IAAI;mCAA1B,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;AAKzD;uCAEe","debugId":null}},
    {"offset": {"line": 3184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/calendar/CalendarView.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState } from 'react';\r\nimport { Post } from '@/types';\r\nimport { STATUS_CONFIG } from '@/constants';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\ninterface CalendarViewProps {\r\n    posts: Post[];\r\n}\r\n\r\nconst CalendarView: React.FC<CalendarViewProps> = ({ posts }) => {\r\n    const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n    const startOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);\r\n    const endOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);\r\n    const startDay = startOfMonth.getDay();\r\n    const daysInMonth = endOfMonth.getDate();\r\n\r\n    const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);\r\n    const emptyDays = Array.from({ length: startDay });\r\n\r\n    const changeMonth = (offset: number) => {\r\n        setCurrentDate(prev => new Date(prev.getFullYear(), prev.getMonth() + offset, 1));\r\n    };\r\n\r\n    const getPostsForDay = (day: number) => {\r\n        return posts.filter(post => {\r\n            if (post.status !== 'scheduled' || !post.scheduledAt) return false;\r\n            const postDate = new Date(post.scheduledAt);\r\n            return postDate.getFullYear() === currentDate.getFullYear() &&\r\n                   postDate.getMonth() === currentDate.getMonth() &&\r\n                   postDate.getDate() === day;\r\n        });\r\n    };\r\n\r\n    const StatusDot: React.FC<{ status: Post['status'] }> = ({ status }) => (\r\n        <div className={`w-2 h-2 rounded-full ${STATUS_CONFIG[status].color}`} title={STATUS_CONFIG[status].label} />\r\n    );\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-lg shadow-lg border border-slate/30\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n                <button onClick={() => changeMonth(-1)} className=\"p-2 rounded-full hover:bg-slate/10\">\r\n                    <ChevronLeft className=\"w-6 h-6\" />\r\n                </button>\r\n                <h3 className=\"text-xl font-semibold text-charcoal-dark\">\r\n                    {currentDate.toLocaleString('default', { month: 'long', year: 'numeric' })}\r\n                </h3>\r\n                <button onClick={() => changeMonth(1)} className=\"p-2 rounded-full hover:bg-slate/10\">\r\n                    <ChevronRight className=\"w-6 h-6\" />\r\n                </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-7 gap-1 text-center text-xs text-slate mb-2\">\r\n                {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => <div key={day}>{day}</div>)}\r\n            </div>\r\n            <div className=\"grid grid-cols-7 gap-1\">\r\n                {emptyDays.map((_, index) => <div key={`empty-${index}`} className=\"border border-slate/30 rounded-md h-28\"></div>)}\r\n                {days.map(day => {\r\n                    const postsForDay = getPostsForDay(day);\r\n                    const isToday = new Date().getFullYear() === currentDate.getFullYear() &&\r\n                                    new Date().getMonth() === currentDate.getMonth() &&\r\n                                    new Date().getDate() === day;\r\n                    return (\r\n                        <div key={day} className={`border border-slate/30 rounded-md h-28 p-2 text-left flex flex-col ${isToday ? 'bg-charcoal/10' : ''}`}>\r\n                            <span className={`font-semibold ${isToday ? 'text-charcoal-dark' : 'text-charcoal-dark'}`}>{day}</span>\r\n                             <div className=\"flex-grow overflow-y-auto mt-1 space-y-1\">\r\n                                {postsForDay.map(post => (\r\n                                    <div key={post.id} className=\"flex items-center gap-1.5 text-xs text-charcoal truncate\">\r\n                                        <StatusDot status={post.status} />\r\n                                        <p className=\"truncate\">{post.topic}</p>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CalendarView;\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AALA;;;;;AAWA,MAAM,eAA4C,CAAC,EAAE,KAAK,EAAE;IACxD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC,IAAI;IAEnD,MAAM,eAAe,IAAI,KAAK,YAAY,WAAW,IAAI,YAAY,QAAQ,IAAI;IACjF,MAAM,aAAa,IAAI,KAAK,YAAY,WAAW,IAAI,YAAY,QAAQ,KAAK,GAAG;IACnF,MAAM,WAAW,aAAa,MAAM;IACpC,MAAM,cAAc,WAAW,OAAO;IAEtC,MAAM,OAAO,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAY,GAAG,CAAC,GAAG,IAAM,IAAI;IAC/D,MAAM,YAAY,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAS;IAEhD,MAAM,cAAc,CAAC;QACjB,eAAe,CAAA,OAAQ,IAAI,KAAK,KAAK,WAAW,IAAI,KAAK,QAAQ,KAAK,QAAQ;IAClF;IAEA,MAAM,iBAAiB,CAAC;QACpB,OAAO,MAAM,MAAM,CAAC,CAAA;YAChB,IAAI,KAAK,MAAM,KAAK,eAAe,CAAC,KAAK,WAAW,EAAE,OAAO;YAC7D,MAAM,WAAW,IAAI,KAAK,KAAK,WAAW;YAC1C,OAAO,SAAS,WAAW,OAAO,YAAY,WAAW,MAClD,SAAS,QAAQ,OAAO,YAAY,QAAQ,MAC5C,SAAS,OAAO,OAAO;QAClC;IACJ;IAEA,MAAM,YAAkD,CAAC,EAAE,MAAM,EAAE,iBAC/D,8OAAC;YAAI,WAAW,CAAC,qBAAqB,EAAE,0IAAa,CAAC,OAAO,CAAC,KAAK,EAAE;YAAE,OAAO,0IAAa,CAAC,OAAO,CAAC,KAAK;;;;;;IAG7G,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAO,SAAS,IAAM,YAAY,CAAC;wBAAI,WAAU;kCAC9C,cAAA,8OAAC,mOAAW;4BAAC,WAAU;;;;;;;;;;;kCAE3B,8OAAC;wBAAG,WAAU;kCACT,YAAY,cAAc,CAAC,WAAW;4BAAE,OAAO;4BAAQ,MAAM;wBAAU;;;;;;kCAE5E,8OAAC;wBAAO,SAAS,IAAM,YAAY;wBAAI,WAAU;kCAC7C,cAAA,8OAAC,sOAAY;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAGhC,8OAAC;gBAAI,WAAU;0BACV;oBAAC;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;iBAAM,CAAC,GAAG,CAAC,CAAA,oBAAO,8OAAC;kCAAe;uBAAN;;;;;;;;;;0BAE5E,8OAAC;gBAAI,WAAU;;oBACV,UAAU,GAAG,CAAC,CAAC,GAAG,sBAAU,8OAAC;4BAA2B,WAAU;2BAA5B,CAAC,MAAM,EAAE,OAAO;;;;;oBACtD,KAAK,GAAG,CAAC,CAAA;wBACN,MAAM,cAAc,eAAe;wBACnC,MAAM,UAAU,IAAI,OAAO,WAAW,OAAO,YAAY,WAAW,MACpD,IAAI,OAAO,QAAQ,OAAO,YAAY,QAAQ,MAC9C,IAAI,OAAO,OAAO,OAAO;wBACzC,qBACI,8OAAC;4BAAc,WAAW,CAAC,mEAAmE,EAAE,UAAU,mBAAmB,IAAI;;8CAC7H,8OAAC;oCAAK,WAAW,CAAC,cAAc,EAAE,UAAU,uBAAuB,sBAAsB;8CAAG;;;;;;8CAC3F,8OAAC;oCAAI,WAAU;8CACX,YAAY,GAAG,CAAC,CAAA,qBACb,8OAAC;4CAAkB,WAAU;;8DACzB,8OAAC;oDAAU,QAAQ,KAAK,MAAM;;;;;;8DAC9B,8OAAC;oDAAE,WAAU;8DAAY,KAAK,KAAK;;;;;;;2CAF7B,KAAK,EAAE;;;;;;;;;;;2BAJnB;;;;;oBAYlB;;;;;;;;;;;;;AAIhB;uCAEe","debugId":null}},
    {"offset": {"line": 3383, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/posts/ManagePosts.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useMemo } from 'react';\nimport { Post, PostStatus, Platform } from '@/types';\nimport PostCard from '@/components/content/PostCard';\nimport FilterBar from '@/components/ui/FilterBar';\nimport CalendarView from '@/components/calendar/CalendarView';\nimport { LayoutGrid, Calendar } from 'lucide-react';\n\ninterface ManagePostsProps {\n    posts: Post[];\n    onUpdatePost: (post: Post) => void;\n    onDeletePost: (postId: string) => void;\n    isApiKeyReady: boolean;\n    onSelectKey: () => void;\n    resetApiKeyStatus: () => void;\n    connectedAccounts: Record<Platform, boolean>;\n}\n\ntype ViewMode = 'grid' | 'calendar';\n\nconst ManagePosts: React.FC<ManagePostsProps> = ({ posts, onUpdatePost, onDeletePost, isApiKeyReady, onSelectKey, resetApiKeyStatus, connectedAccounts }) => {\n    const [viewMode, setViewMode] = useState<ViewMode>('grid');\n    const [searchTerm, setSearchTerm] = useState('');\n    const [statusFilter, setStatusFilter] = useState<PostStatus | 'all'>('all');\n    const [platformFilter, setPlatformFilter] = useState<Platform | 'all'>('all');\n\n    const nonFinalizedPosts = useMemo(() => posts.filter(post => !['ready to publish', 'scheduled', 'published'].includes(post.status)), [posts]);\n\n    const filteredPosts = useMemo(() => {\n        return nonFinalizedPosts.filter(post => {\n            const matchesSearch = post.topic.toLowerCase().includes(searchTerm.toLowerCase());\n            const matchesStatus = statusFilter === 'all' || post.status === statusFilter;\n            const matchesPlatform = platformFilter === 'all' || post.platforms.includes(platformFilter);\n            return matchesSearch && matchesStatus && matchesPlatform;\n        });\n    }, [nonFinalizedPosts, searchTerm, statusFilter, platformFilter]);\n\n    const ViewToggleButton: React.FC<{ mode: ViewMode, icon: React.ElementType, label: string }> = ({ mode, icon: Icon, label }) => (\n        <button\n            onClick={() => setViewMode(mode)}\n            className={`flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ${\n                viewMode === mode ? 'bg-charcoal text-white' : 'bg-white hover:bg-slate/10 border border-slate/30'\n            }`}\n        >\n            <Icon className=\"w-4 h-4 mr-2\" />\n            {label}\n        </button>\n    );\n\n    const renderGridContent = () => {\n        if (nonFinalizedPosts.length === 0) {\n             return (\n                <div className=\"text-center py-20\">\n                    <h2 className=\"text-3xl font-semibold text-slate\">Your content queue is empty!</h2>\n                    <p className=\"text-slate mt-2\">Go to \"Create Content\" to generate a new post, or check \"Published\" for finalized items.</p>\n                </div>\n            );\n        }\n        if (filteredPosts.length === 0) {\n            return (\n                <div className=\"text-center py-20\">\n                    <h2 className=\"text-2xl font-semibold text-slate\">No Posts Match Your Filters</h2>\n                    <p className=\"text-slate mt-2\">Try adjusting your search or selected filters.</p>\n                </div>\n            );\n        }\n        return (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {filteredPosts.map(post => (\n                    <PostCard\n                        key={post.id}\n                        post={post}\n                        onUpdatePost={onUpdatePost}\n                        onDeletePost={onDeletePost}\n                        isApiKeyReady={isApiKeyReady}\n                        onSelectKey={onSelectKey}\n                        resetApiKeyStatus={resetApiKeyStatus}\n                        connectedAccounts={connectedAccounts}\n                    />\n                ))}\n            </div>\n        );\n    };\n\n    return (\n        <div>\n            <div className=\"flex flex-col md:flex-row justify-between items-center mb-8 gap-4\">\n                <h2 className=\"text-3xl font-bold text-charcoal-dark\">Manage & Finalize Posts</h2>\n                <div className=\"flex items-center space-x-2 bg-light-gray p-1 rounded-lg\">\n                    <ViewToggleButton mode=\"grid\" icon={LayoutGrid} label=\"Grid\" />\n                    <ViewToggleButton mode=\"calendar\" icon={Calendar} label=\"Calendar\" />\n                </div>\n            </div>\n\n            <FilterBar\n                onSearchChange={setSearchTerm}\n                onStatusChange={setStatusFilter}\n                onPlatformChange={setPlatformFilter}\n                excludeStatuses={['published', 'scheduled', 'ready to publish']}\n            />\n\n            {viewMode === 'grid' ? renderGridContent() : <CalendarView posts={filteredPosts} />}\n        </div>\n    );\n};\n\nexport default ManagePosts;"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AAAA;AAPA;;;;;;;AAqBA,MAAM,cAA0C,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,YAAY,EAAE,aAAa,EAAE,WAAW,EAAE,iBAAiB,EAAE,iBAAiB,EAAE;IACpJ,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAW;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAqB;IACrE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAmB;IAEvE,MAAM,oBAAoB,IAAA,gNAAO,EAAC,IAAM,MAAM,MAAM,CAAC,CAAA,OAAQ,CAAC;gBAAC;gBAAoB;gBAAa;aAAY,CAAC,QAAQ,CAAC,KAAK,MAAM,IAAI;QAAC;KAAM;IAE5I,MAAM,gBAAgB,IAAA,gNAAO,EAAC;QAC1B,OAAO,kBAAkB,MAAM,CAAC,CAAA;YAC5B,MAAM,gBAAgB,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;YAC9E,MAAM,gBAAgB,iBAAiB,SAAS,KAAK,MAAM,KAAK;YAChE,MAAM,kBAAkB,mBAAmB,SAAS,KAAK,SAAS,CAAC,QAAQ,CAAC;YAC5E,OAAO,iBAAiB,iBAAiB;QAC7C;IACJ,GAAG;QAAC;QAAmB;QAAY;QAAc;KAAe;IAEhE,MAAM,mBAAyF,CAAC,EAAE,IAAI,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,iBACvH,8OAAC;YACG,SAAS,IAAM,YAAY;YAC3B,WAAW,CAAC,6EAA6E,EACrF,aAAa,OAAO,2BAA2B,qDACjD;;8BAEF,8OAAC;oBAAK,WAAU;;;;;;gBACf;;;;;;;IAIT,MAAM,oBAAoB;QACtB,IAAI,kBAAkB,MAAM,KAAK,GAAG;YAC/B,qBACG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC;wBAAE,WAAU;kCAAkB;;;;;;;;;;;;QAG3C;QACA,IAAI,cAAc,MAAM,KAAK,GAAG;YAC5B,qBACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC;wBAAE,WAAU;kCAAkB;;;;;;;;;;;;QAG3C;QACA,qBACI,8OAAC;YAAI,WAAU;sBACV,cAAc,GAAG,CAAC,CAAA,qBACf,8OAAC,oJAAQ;oBAEL,MAAM;oBACN,cAAc;oBACd,cAAc;oBACd,eAAe;oBACf,aAAa;oBACb,mBAAmB;oBACnB,mBAAmB;mBAPd,KAAK,EAAE;;;;;;;;;;IAYhC;IAEA,qBACI,8OAAC;;0BACG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAiB,MAAK;gCAAO,MAAM,gOAAU;gCAAE,OAAM;;;;;;0CACtD,8OAAC;gCAAiB,MAAK;gCAAW,MAAM,sNAAQ;gCAAE,OAAM;;;;;;;;;;;;;;;;;;0BAIhE,8OAAC,gJAAS;gBACN,gBAAgB;gBAChB,gBAAgB;gBAChB,kBAAkB;gBAClB,iBAAiB;oBAAC;oBAAa;oBAAa;iBAAmB;;;;;;YAGlE,aAAa,SAAS,oCAAsB,8OAAC,yJAAY;gBAAC,OAAO;;;;;;;;;;;;AAG9E;uCAEe","debugId":null}},
    {"offset": {"line": 3599, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/analytics/AnalyticsDashboard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useMemo } from 'react';\r\nimport { Post, Platform, PostStatus } from '@/types';\r\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport { PLATFORMS, STATUS_CONFIG } from '@/constants';\r\n\r\ninterface AnalyticsDashboardProps {\r\n    posts: Post[];\r\n}\r\n\r\nconst COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff8042', '#0088FE', '#00C49F'];\r\n\r\nconst AnalyticsDashboard: React.FC<AnalyticsDashboardProps> = ({ posts }) => {\r\n\r\n    const stats = useMemo(() => {\r\n        const statusCounts = posts.reduce((acc, post) => {\r\n            acc[post.status] = (acc[post.status] || 0) + 1;\r\n            return acc;\r\n        }, {} as { [key in PostStatus]: number });\r\n\r\n        const platformCounts = posts.reduce((acc, post) => {\r\n            post.platforms.forEach(platform => {\r\n                acc[platform] = (acc[platform] || 0) + 1;\r\n            });\r\n            return acc;\r\n        }, {} as { [key in Platform]: number });\r\n\r\n        const platformData = Object.entries(platformCounts)\r\n            // Fix: Explicitly convert value to a number to resolve type inference issues.\r\n            .map(([name, value]) => ({ name: PLATFORMS.find(p => p.id === name)?.name || name, value: Number(value) }))\r\n            .filter(item => item.value > 0);\r\n\r\n        const statusData = (Object.keys(STATUS_CONFIG) as PostStatus[])\r\n            .map(status => ({\r\n                name: STATUS_CONFIG[status].label,\r\n                value: statusCounts[status] || 0,\r\n                color: STATUS_CONFIG[status].color.replace('bg-', '#').replace('-500', '') // basic color conversion\r\n            }))\r\n            .filter(item => item.value > 0);\r\n\r\n\r\n        return { totalPosts: posts.length, platformData, statusData, statusCounts };\r\n    }, [posts]);\r\n\r\n    const StatCard: React.FC<{ title: string; value: number; className?: string }> = ({ title, value, className }) => (\r\n        <div className={`bg-white p-6 rounded-lg shadow-lg border border-slate/30 ${className}`}>\r\n            <h3 className=\"text-sm font-medium text-slate\">{title}</h3>\r\n            <p className=\"mt-2 text-3xl font-semibold text-charcoal-dark\">{value || 0}</p>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <h2 className=\"text-3xl font-bold mb-8 text-charcoal-dark\">Analytics Dashboard</h2>\r\n            \r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\">\r\n                <StatCard title=\"Total Posts\" value={stats.totalPosts} className=\"bg-indigo-900\" />\r\n                <StatCard title=\"Published\" value={stats.statusCounts.published} className=\"bg-green-900\" />\r\n                <StatCard title=\"Scheduled\" value={stats.statusCounts.scheduled} className=\"bg-blue-900\" />\r\n                <StatCard title=\"Needs Approval\" value={stats.statusCounts['needs approval']} className=\"bg-yellow-900\" />\r\n                <StatCard title=\"Drafts\" value={stats.statusCounts.draft} className=\"bg-gray-700\" />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                <div className=\"bg-white p-6 rounded-lg shadow-lg border border-slate/30\">\r\n                    <h3 className=\"text-lg font-semibold text-charcoal-dark mb-4\">Platform Distribution</h3>\r\n                    {stats.platformData.length > 0 ? (\r\n                        <ResponsiveContainer width=\"100%\" height={300}>\r\n                            <PieChart>\r\n                                <Pie data={stats.platformData} dataKey=\"value\" nameKey=\"name\" cx=\"50%\" cy=\"50%\" outerRadius={100} fill=\"#8884d8\" label>\r\n                                    {stats.platformData.map((entry, index) => (\r\n                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                                    ))}\r\n                                </Pie>\r\n                                <Tooltip contentStyle={{ backgroundColor: '#1f2937', border: 'none', borderRadius: '0.5rem' }}/>\r\n                                <Legend />\r\n                            </PieChart>\r\n                        </ResponsiveContainer>\r\n                    ) : <p className=\"text-gray-500 text-center py-10\">No data to display.</p>}\r\n                </div>\r\n\r\n                <div className=\"bg-white p-6 rounded-lg shadow-lg border border-slate/30\">\r\n                    <h3 className=\"text-lg font-semibold text-charcoal-dark mb-4\">Post Status Overview</h3>\r\n                     {stats.statusData.length > 0 ? (\r\n                        <ResponsiveContainer width=\"100%\" height={300}>\r\n                            <BarChart data={stats.statusData} layout=\"vertical\" margin={{ top: 5, right: 20, left: 20, bottom: 5 }}>\r\n                                <XAxis type=\"number\" stroke=\"#9ca3af\" />\r\n                                <YAxis type=\"category\" dataKey=\"name\" stroke=\"#9ca3af\" width={100} tick={{ fontSize: 12 }} />\r\n                                <Tooltip contentStyle={{ backgroundColor: '#1f2937', border: 'none', borderRadius: '0.5rem' }}/>\r\n                                <Bar dataKey=\"value\" barSize={25}>\r\n                                    {stats.statusData.map((entry, index) => (\r\n                                         <Cell key={`cell-${index}`} fill={STATUS_CONFIG[entry.name.toLowerCase().replace(' ', '-') as PostStatus]?.color.replace('bg-', '#').replace('-500', '') || '#8884d8'} />\r\n                                    ))}\r\n                                </Bar>\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    ) : <p className=\"text-gray-500 text-center py-10\">No data to display.</p>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AnalyticsDashboard;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3942, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/credentialService.ts"],"sourcesContent":["import {\r\n  PlatformCredentials,\r\n  TwitterCredentials,\r\n  LinkedInCredentials,\r\n  FacebookCredentials,\r\n  InstagramCredentials,\r\n  Platform\r\n} from '@/types';\r\n\r\nconst STORAGE_KEY = 'social_media_credentials';\r\nconst ENCRYPTION_KEY = 'smOS_v1'; // In production, use proper encryption key management\r\n\r\n/**\r\n * Simple obfuscation for localStorage storage\r\n * WARNING: This is NOT secure encryption. For production, use a backend with proper encryption.\r\n */\r\nfunction obfuscate(data: string): string {\r\n  try {\r\n    const encoded = btoa(data);\r\n    return encoded.split('').reverse().join('');\r\n  } catch (e) {\r\n    console.error('Obfuscation error:', e);\r\n    return data;\r\n  }\r\n}\r\n\r\nfunction deobfuscate(data: string): string {\r\n  try {\r\n    const reversed = data.split('').reverse().join('');\r\n    return atob(reversed);\r\n  } catch (e) {\r\n    console.error('Deobfuscation error:', e);\r\n    return data;\r\n  }\r\n}\r\n\r\n/**\r\n * Save all platform credentials to localStorage\r\n */\r\nexport function saveCredentials(credentials: PlatformCredentials): void {\r\n  try {\r\n    const jsonString = JSON.stringify(credentials);\r\n    const obfuscated = obfuscate(jsonString);\r\n    localStorage.setItem(STORAGE_KEY, obfuscated);\r\n  } catch (error) {\r\n    console.error('Failed to save credentials:', error);\r\n    throw new Error('Failed to save credentials');\r\n  }\r\n}\r\n\r\n/**\r\n * Load all platform credentials from localStorage\r\n */\r\nexport function loadCredentials(): PlatformCredentials {\r\n  try {\r\n    const obfuscated = localStorage.getItem(STORAGE_KEY);\r\n    if (!obfuscated) {\r\n      return {};\r\n    }\r\n    const jsonString = deobfuscate(obfuscated);\r\n    return JSON.parse(jsonString);\r\n  } catch (error) {\r\n    console.error('Failed to load credentials:', error);\r\n    return {};\r\n  }\r\n}\r\n\r\n/**\r\n * Save credentials for a specific platform\r\n */\r\nexport function savePlatformCredentials(\r\n  platform: Platform,\r\n  credentials: TwitterCredentials | LinkedInCredentials | FacebookCredentials | InstagramCredentials\r\n): void {\r\n  const allCredentials = loadCredentials();\r\n  allCredentials[platform] = credentials;\r\n  saveCredentials(allCredentials);\r\n}\r\n\r\n/**\r\n * Get credentials for a specific platform\r\n */\r\nexport function getPlatformCredentials(platform: Platform) {\r\n  const allCredentials = loadCredentials();\r\n  return allCredentials[platform];\r\n}\r\n\r\n/**\r\n * Check if a platform is connected (has valid credentials)\r\n */\r\nexport function isPlatformConnected(platform: Platform): boolean {\r\n  const credentials = getPlatformCredentials(platform);\r\n  return credentials?.isConnected ?? false;\r\n}\r\n\r\n/**\r\n * Disconnect a platform (remove credentials)\r\n */\r\nexport function disconnectPlatform(platform: Platform): void {\r\n  const allCredentials = loadCredentials();\r\n  if (allCredentials[platform]) {\r\n    allCredentials[platform] = {\r\n      ...allCredentials[platform],\r\n      isConnected: false,\r\n    };\r\n    saveCredentials(allCredentials);\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all credentials (logout from all platforms)\r\n */\r\nexport function clearAllCredentials(): void {\r\n  localStorage.removeItem(STORAGE_KEY);\r\n}\r\n\r\n/**\r\n * Get connection summary for all platforms\r\n */\r\nexport function getConnectionSummary(): Record<Platform, boolean> {\r\n  const allCredentials = loadCredentials();\r\n  return {\r\n    twitter: allCredentials.twitter?.isConnected ?? false,\r\n    linkedin: allCredentials.linkedin?.isConnected ?? false,\r\n    facebook: allCredentials.facebook?.isConnected ?? false,\r\n    instagram: allCredentials.instagram?.isConnected ?? false,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AASA,MAAM,cAAc;AACpB,MAAM,iBAAiB,WAAW,sDAAsD;AAExF;;;CAGC,GACD,SAAS,UAAU,IAAY;IAC7B,IAAI;QACF,MAAM,UAAU,KAAK;QACrB,OAAO,QAAQ,KAAK,CAAC,IAAI,OAAO,GAAG,IAAI,CAAC;IAC1C,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO;IACT;AACF;AAEA,SAAS,YAAY,IAAY;IAC/B,IAAI;QACF,MAAM,WAAW,KAAK,KAAK,CAAC,IAAI,OAAO,GAAG,IAAI,CAAC;QAC/C,OAAO,KAAK;IACd,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO;IACT;AACF;AAKO,SAAS,gBAAgB,WAAgC;IAC9D,IAAI;QACF,MAAM,aAAa,KAAK,SAAS,CAAC;QAClC,MAAM,aAAa,UAAU;QAC7B,aAAa,OAAO,CAAC,aAAa;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM;IAClB;AACF;AAKO,SAAS;IACd,IAAI;QACF,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,CAAC,YAAY;YACf,OAAO,CAAC;QACV;QACA,MAAM,aAAa,YAAY;QAC/B,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,CAAC;IACV;AACF;AAKO,SAAS,wBACd,QAAkB,EAClB,WAAkG;IAElG,MAAM,iBAAiB;IACvB,cAAc,CAAC,SAAS,GAAG;IAC3B,gBAAgB;AAClB;AAKO,SAAS,uBAAuB,QAAkB;IACvD,MAAM,iBAAiB;IACvB,OAAO,cAAc,CAAC,SAAS;AACjC;AAKO,SAAS,oBAAoB,QAAkB;IACpD,MAAM,cAAc,uBAAuB;IAC3C,OAAO,aAAa,eAAe;AACrC;AAKO,SAAS,mBAAmB,QAAkB;IACnD,MAAM,iBAAiB;IACvB,IAAI,cAAc,CAAC,SAAS,EAAE;QAC5B,cAAc,CAAC,SAAS,GAAG;YACzB,GAAG,cAAc,CAAC,SAAS;YAC3B,aAAa;QACf;QACA,gBAAgB;IAClB;AACF;AAKO,SAAS;IACd,aAAa,UAAU,CAAC;AAC1B;AAKO,SAAS;IACd,MAAM,iBAAiB;IACvB,OAAO;QACL,SAAS,eAAe,OAAO,EAAE,eAAe;QAChD,UAAU,eAAe,QAAQ,EAAE,eAAe;QAClD,UAAU,eAAe,QAAQ,EAAE,eAAe;QAClD,WAAW,eAAe,SAAS,EAAE,eAAe;IACtD;AACF","debugId":null}},
    {"offset": {"line": 4045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/platforms/twitterService.ts"],"sourcesContent":["import { TwitterCredentials } from '@/types';\r\n\r\n/**\r\n * Twitter/X API Service\r\n * Now uses real backend API endpoints for Twitter integration\r\n */\r\n\r\nexport interface TwitterPostOptions {\r\n  text: string;\r\n  mediaIds?: string[];\r\n}\r\n\r\n/**\r\n * Start Twitter OAuth flow\r\n * Opens popup window for Twitter authentication\r\n */\r\nexport async function startTwitterAuth(): Promise<{ success: boolean; error?: string }> {\r\n  try {\r\n    // Call backend to start OAuth flow\r\n    const response = await fetch('/api/twitter/auth', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error || 'Failed to start Twitter authentication');\r\n    }\r\n\r\n    const { url } = await response.json();\r\n\r\n    // Open Twitter auth in current window\r\n    window.location.href = url;\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('Twitter auth start error:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to start authentication'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Verify Twitter credentials by calling backend\r\n */\r\nexport async function verifyTwitterCredentials(credentials: TwitterCredentials): Promise<{\r\n  success: boolean;\r\n  username?: string;\r\n  error?: string\r\n}> {\r\n  try {\r\n    // Call backend to verify credentials\r\n    const response = await fetch('/api/twitter/verify', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      return { success: false, error: error.error || 'Verification failed' };\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    return {\r\n      success: data.connected,\r\n      username: data.username\r\n    };\r\n  } catch (error) {\r\n    console.error('Twitter verification error:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Verification failed'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Post a tweet to Twitter via backend API\r\n */\r\nexport async function postTweet(\r\n  credentials: TwitterCredentials,\r\n  options: TwitterPostOptions\r\n): Promise<{ success: boolean; tweetId?: string; url?: string; error?: string }> {\r\n  try {\r\n    if (!credentials.isConnected) {\r\n      return { success: false, error: 'Twitter account not connected' };\r\n    }\r\n\r\n    if (!options.text || options.text.length > 280) {\r\n      return { success: false, error: 'Tweet text must be between 1-280 characters' };\r\n    }\r\n\r\n    // Call backend to post tweet\r\n    const response = await fetch('/api/twitter/post', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        text: options.text,\r\n        mediaIds: options.mediaIds\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.details || error.error || 'Failed to post tweet');\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    return {\r\n      success: true,\r\n      tweetId: data.tweetId,\r\n      url: data.tweetUrl\r\n    };\r\n  } catch (error) {\r\n    console.error('Twitter post error:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to post tweet'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Upload media to Twitter via backend API\r\n */\r\nexport async function uploadTwitterMedia(\r\n  credentials: TwitterCredentials,\r\n  mediaData: string,  // base64 encoded\r\n  mediaType: 'image' | 'video'\r\n): Promise<{ success: boolean; mediaId?: string; error?: string }> {\r\n  try {\r\n    if (!credentials.isConnected) {\r\n      return { success: false, error: 'Twitter account not connected' };\r\n    }\r\n\r\n    // Call backend to upload media\r\n    const response = await fetch('/api/twitter/upload-media', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        mediaData,\r\n        mediaType\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.details || error.error || 'Failed to upload media');\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    return {\r\n      success: true,\r\n      mediaId: data.mediaId\r\n    };\r\n  } catch (error) {\r\n    console.error('Twitter media upload error:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to upload media'\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get user profile information via backend API\r\n */\r\nexport async function getTwitterProfile(\r\n  credentials: TwitterCredentials\r\n): Promise<{ success: boolean; profile?: any; error?: string }> {\r\n  try {\r\n    if (!credentials.isConnected) {\r\n      return { success: false, error: 'Twitter account not connected' };\r\n    }\r\n\r\n    // Call backend to get profile\r\n    const response = await fetch('/api/twitter/verify', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error || 'Failed to fetch profile');\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    return {\r\n      success: true,\r\n      profile: {\r\n        id: data.id,\r\n        username: data.username,\r\n        name: data.name,\r\n      }\r\n    };\r\n  } catch (error) {\r\n    console.error('Twitter profile fetch error:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch profile'\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4232, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/platforms/linkedinService.ts"],"sourcesContent":["import { LinkedInCredentials } from '@/types';\n\n/**\n * LinkedIn API Service\n * Now uses real backend API endpoints for LinkedIn integration\n */\n\nexport interface LinkedInPostOptions {\n  text: string;\n  visibility?: 'PUBLIC' | 'CONNECTIONS';\n  mediaUrn?: string;\n}\n\n/**\n * Start LinkedIn OAuth flow\n * Opens popup window for LinkedIn authentication\n */\nexport async function startLinkedInAuth(): Promise<{ success: boolean; error?: string }> {\n  try {\n    // Call backend to start OAuth flow\n    const response = await fetch('/api/linkedin/auth', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to start LinkedIn authentication');\n    }\n\n    const { url } = await response.json();\n\n    // Open LinkedIn auth in current window\n    window.location.href = url;\n\n    return { success: true };\n  } catch (error) {\n    console.error('LinkedIn auth start error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to start authentication'\n    };\n  }\n}\n\n/**\n * Verify LinkedIn credentials by calling backend\n */\nexport async function verifyLinkedInCredentials(credentials: LinkedInCredentials): Promise<{\n  success: boolean;\n  profileName?: string;\n  error?: string\n}> {\n  try {\n    // Call backend to verify credentials\n    const response = await fetch('/api/linkedin/verify', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      return { success: false, error: error.error || 'Verification failed' };\n    }\n\n    const data = await response.json();\n\n    return {\n      success: data.connected,\n      profileName: data.profileName\n    };\n  } catch (error) {\n    console.error('LinkedIn verification error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Verification failed'\n    };\n  }\n}\n\n/**\n * Post to LinkedIn via backend API\n */\nexport async function postToLinkedIn(\n  credentials: LinkedInCredentials,\n  options: LinkedInPostOptions\n): Promise<{ success: boolean; postId?: string; url?: string; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'LinkedIn account not connected' };\n    }\n\n    if (!options.text || options.text.length > 3000) {\n      return { success: false, error: 'Post text must be between 1-3000 characters' };\n    }\n\n    // Call backend to post\n    const response = await fetch('/api/linkedin/post', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        text: options.text,\n        visibility: options.visibility || 'PUBLIC',\n        mediaUrn: options.mediaUrn\n      })\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.details || error.error || 'Failed to post to LinkedIn');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      postId: data.postId,\n      url: data.postUrl\n    };\n  } catch (error) {\n    console.error('LinkedIn post error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to post to LinkedIn'\n    };\n  }\n}\n\n/**\n * Upload media to LinkedIn via backend API\n */\nexport async function uploadLinkedInMedia(\n  credentials: LinkedInCredentials,\n  mediaData: string,\n  mediaType: 'image' | 'video' = 'image'\n): Promise<{ success: boolean; mediaUrn?: string; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'LinkedIn account not connected' };\n    }\n\n    // Call backend to upload media\n    const response = await fetch('/api/linkedin/upload-media', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        mediaData,\n        mediaType\n      })\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.details || error.error || 'Failed to upload media');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      mediaUrn: data.mediaUrn\n    };\n  } catch (error) {\n    console.error('LinkedIn media upload error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to upload media'\n    };\n  }\n}\n\n/**\n * Get LinkedIn profile via backend API\n */\nexport async function getLinkedInProfile(\n  credentials: LinkedInCredentials\n): Promise<{ success: boolean; profile?: any; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'LinkedIn account not connected' };\n    }\n\n    // Call backend to get profile\n    const response = await fetch('/api/linkedin/verify', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch profile');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      profile: {\n        id: data.profileId,\n        name: data.profileName,\n        email: data.email,\n      }\n    };\n  } catch (error) {\n    console.error('LinkedIn profile fetch error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to fetch profile'\n    };\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4420, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/platforms/facebookService.ts"],"sourcesContent":["import { FacebookCredentials } from '@/types';\n\n/**\n * Facebook API Service\n * Now uses real backend API endpoints for Facebook integration\n */\n\nconst FACEBOOK_API_BASE = 'https://graph.facebook.com/v18.0';\n\nexport interface FacebookPostOptions {\n  message: string;\n  link?: string;\n  imageUrl?: string;\n  videoUrl?: string;\n  mediaType?: 'image' | 'video';\n}\n\n/**\n * Start Facebook OAuth flow\n * Opens window for Facebook authentication\n */\nexport async function startFacebookAuth(): Promise<{ success: boolean; error?: string }> {\n  try {\n    // Call backend to start OAuth flow\n    const response = await fetch('/api/facebook/auth', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to start Facebook authentication');\n    }\n\n    const { url } = await response.json();\n\n    // Open Facebook auth in current window\n    window.location.href = url;\n\n    return { success: true };\n  } catch (error) {\n    console.error('Facebook auth start error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to start authentication'\n    };\n  }\n}\n\n/**\n * Verify Facebook credentials by calling backend\n */\nexport async function verifyFacebookCredentials(credentials: FacebookCredentials): Promise<{\n  success: boolean;\n  pageName?: string;\n  error?: string\n}> {\n  try {\n    // Call backend to verify credentials\n    const response = await fetch('/api/facebook/verify', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      return { success: false, error: error.error || 'Verification failed' };\n    }\n\n    const data = await response.json();\n\n    return {\n      success: data.connected,\n      pageName: data.pageName\n    };\n  } catch (error) {\n    console.error('Facebook verification error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Verification failed'\n    };\n  }\n}\n\n/**\n * Post to Facebook via backend API\n */\nexport async function postToFacebook(\n  credentials: FacebookCredentials,\n  options: FacebookPostOptions\n): Promise<{ success: boolean; postId?: string; url?: string; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'Facebook account not connected' };\n    }\n\n    if (!options.message || options.message.length > 63206) {\n      return { success: false, error: 'Message must be between 1-63206 characters' };\n    }\n\n    // Call backend to post\n    const response = await fetch('/api/facebook/post', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        message: options.message,\n        imageUrl: options.imageUrl,\n        link: options.link\n      })\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.details || error.error || 'Failed to post to Facebook');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      postId: data.postId,\n      url: data.postUrl\n    };\n  } catch (error) {\n    console.error('Facebook post error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to post to Facebook'\n    };\n  }\n}\n\n/**\n * Upload media to Facebook via backend API\n * Returns public URL for use in posting\n */\nexport async function uploadFacebookPhoto(\n  credentials: FacebookCredentials,\n  mediaData: string  // base64 encoded\n): Promise<{ success: boolean; imageUrl?: string; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'Facebook account not connected' };\n    }\n\n    // Call backend to upload media to Supabase Storage\n    const response = await fetch('/api/facebook/upload-media', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        mediaData\n      })\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.details || error.error || 'Failed to upload media');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      imageUrl: data.imageUrl\n    };\n  } catch (error) {\n    console.error('Facebook media upload error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to upload media'\n    };\n  }\n}\n\n/**\n * Get Facebook Page info via backend API\n */\nexport async function getFacebookPageInfo(\n  credentials: FacebookCredentials\n): Promise<{ success: boolean; pageInfo?: any; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'Facebook account not connected' };\n    }\n\n    // Call backend to get page info\n    const response = await fetch('/api/facebook/verify', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch page info');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      pageInfo: {\n        id: data.pageId,\n        name: data.pageName,\n        category: data.category,\n        fanCount: data.fanCount,\n      }\n    };\n  } catch (error) {\n    console.error('Facebook page info fetch error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to fetch page info'\n    };\n  }\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4613, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/platforms/instagramService.ts"],"sourcesContent":["import { InstagramCredentials } from '@/types';\n\n/**\n * Instagram API Service\n * Now uses real backend API endpoints for Instagram integration\n * Note: Instagram API requires a Facebook Business account\n */\n\nexport interface InstagramPostOptions {\n  caption: string;\n  imageUrl: string; // Required for Instagram\n  mediaType?: 'image' | 'video';\n}\n\n/**\n * Start Instagram OAuth flow\n * Opens window for Instagram/Facebook authentication\n */\nexport async function startInstagramAuth(): Promise<{ success: boolean; error?: string }> {\n  try {\n    // Call backend to start OAuth flow\n    const response = await fetch('/api/instagram/auth', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to start Instagram authentication');\n    }\n\n    const { url } = await response.json();\n\n    // Open Instagram/Facebook auth in current window\n    window.location.href = url;\n\n    return { success: true };\n  } catch (error) {\n    console.error('Instagram auth start error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to start authentication'\n    };\n  }\n}\n\n/**\n * Verify Instagram credentials by calling backend\n */\nexport async function verifyInstagramCredentials(credentials: InstagramCredentials): Promise<{\n  success: boolean;\n  username?: string;\n  error?: string\n}> {\n  try {\n    // Call backend to verify credentials\n    const response = await fetch('/api/instagram/verify', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      return { success: false, error: error.error || 'Verification failed' };\n    }\n\n    const data = await response.json();\n\n    return {\n      success: data.connected,\n      username: data.username\n    };\n  } catch (error) {\n    console.error('Instagram verification error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Verification failed'\n    };\n  }\n}\n\n/**\n * Post to Instagram via backend API\n * Instagram requires a 2-step process: create container  publish container\n */\nexport async function postToInstagram(\n  credentials: InstagramCredentials,\n  options: InstagramPostOptions\n): Promise<{ success: boolean; postId?: string; url?: string; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'Instagram account not connected' };\n    }\n\n    if (!options.caption || options.caption.length > 2200) {\n      return { success: false, error: 'Caption must be between 1-2200 characters' };\n    }\n\n    if (!options.imageUrl) {\n      return { success: false, error: 'Instagram requires an image' };\n    }\n\n    // Call backend to post (handles 2-step process)\n    const response = await fetch('/api/instagram/post', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        caption: options.caption,\n        imageUrl: options.imageUrl\n      })\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.details || error.error || 'Failed to post to Instagram');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      postId: data.postId,\n      url: data.postUrl\n    };\n  } catch (error) {\n    console.error('Instagram post error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to post to Instagram'\n    };\n  }\n}\n\n/**\n * Upload media to Instagram via backend API\n * Returns public URL for use in posting\n */\nexport async function uploadInstagramMedia(\n  credentials: InstagramCredentials,\n  mediaData: string  // base64 encoded\n): Promise<{ success: boolean; imageUrl?: string; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'Instagram account not connected' };\n    }\n\n    // Call backend to upload media to Supabase Storage\n    const response = await fetch('/api/instagram/upload-media', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        mediaData\n      })\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.details || error.error || 'Failed to upload media');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      imageUrl: data.imageUrl\n    };\n  } catch (error) {\n    console.error('Instagram media upload error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to upload media'\n    };\n  }\n}\n\n/**\n * Get Instagram profile via backend API\n */\nexport async function getInstagramProfile(\n  credentials: InstagramCredentials\n): Promise<{ success: boolean; profile?: any; error?: string }> {\n  try {\n    if (!credentials.isConnected) {\n      return { success: false, error: 'Instagram account not connected' };\n    }\n\n    // Call backend to get profile\n    const response = await fetch('/api/instagram/verify', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || 'Failed to fetch profile');\n    }\n\n    const data = await response.json();\n\n    return {\n      success: true,\n      profile: {\n        id: data.userId,\n        username: data.username,\n        name: data.name,\n      }\n    };\n  } catch (error) {\n    console.error('Instagram profile fetch error:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to fetch profile'\n    };\n  }\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4806, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/publishingService.ts"],"sourcesContent":["import { Platform, Post, PostContent, TwitterCredentials, LinkedInCredentials, FacebookCredentials, InstagramCredentials } from '@/types';\nimport { getPlatformCredentials } from './credentialService';\nimport { postTweet, uploadTwitterMedia } from './platforms/twitterService';\nimport { postToLinkedIn, uploadLinkedInMedia } from './platforms/linkedinService';\nimport { postToFacebook, uploadFacebookPhoto } from './platforms/facebookService';\nimport { postToInstagram, uploadInstagramMedia } from './platforms/instagramService';\n\nexport interface PublishResult {\n  platform: Platform;\n  success: boolean;\n  postId?: string;\n  url?: string;\n  error?: string;\n}\n\n/**\n * Publish a post to a single platform\n */\nexport async function publishToSinglePlatform(\n  platform: Platform,\n  content: string,\n  mediaUrl?: string,\n  mediaType?: 'image' | 'video'\n): Promise<PublishResult> {\n  // Auto-detect media type if not provided\n  if (!mediaType && mediaUrl) {\n    mediaType = (mediaUrl.includes('.mp4') || mediaUrl.includes('.mov') || mediaUrl.includes('video')) \n      ? 'video' \n      : 'image';\n  }\n  try {\n    const credentials = getPlatformCredentials(platform);\n\n    if (!credentials || !credentials.isConnected) {\n      return {\n        platform,\n        success: false,\n        error: `${platform} is not connected. Please connect your account first.`\n      };\n    }\n\n    let result;\n\n    switch (platform) {\n      case 'twitter': {\n        // Handle media upload if present\n        let mediaIds: string[] | undefined;\n        if (mediaUrl) {\n          const mediaResult = await uploadTwitterMedia(\n            credentials as TwitterCredentials, \n            mediaUrl, \n            mediaType || 'image'\n          );\n          if (mediaResult.success && mediaResult.mediaId) {\n            mediaIds = [mediaResult.mediaId];\n          }\n        }\n\n        result = await postTweet(credentials as TwitterCredentials, {\n          text: content,\n          mediaIds\n        });\n        break;\n      }\n\n      case 'linkedin': {\n        // Handle media upload if present\n        let mediaUrn: string | undefined;\n        if (mediaUrl) {\n          const mediaResult = await uploadLinkedInMedia(\n            credentials as LinkedInCredentials, \n            mediaUrl,\n            mediaType || 'image'\n          );\n          if (mediaResult.success && mediaResult.mediaUrn) {\n            mediaUrn = mediaResult.mediaUrn;\n          }\n        }\n\n        result = await postToLinkedIn(credentials as LinkedInCredentials, {\n          text: content,\n          visibility: 'PUBLIC',\n          mediaUrn\n        });\n        break;\n      }\n\n      case 'facebook': {\n        // Handle media upload if present\n        let imageUrl: string | undefined;\n        if (mediaUrl) {\n          const mediaResult = await uploadFacebookPhoto(credentials as FacebookCredentials, mediaUrl);\n          if (mediaResult.success && mediaResult.imageUrl) {\n            imageUrl = mediaResult.imageUrl;\n          }\n        }\n\n        result = await postToFacebook(credentials as FacebookCredentials, {\n          message: content,\n          imageUrl: imageUrl,\n          mediaType: mediaType\n        });\n        break;\n      }\n\n      case 'instagram': {\n        if (!mediaUrl) {\n          return {\n            platform,\n            success: false,\n            error: 'Instagram requires an image or video to post'\n          };\n        }\n\n        // Upload media to get public URL (Instagram requires public URLs)\n        const mediaResult = await uploadInstagramMedia(credentials as InstagramCredentials, mediaUrl);\n        if (!mediaResult.success || !mediaResult.imageUrl) {\n          return {\n            platform,\n            success: false,\n            error: mediaResult.error || 'Failed to upload media'\n          };\n        }\n\n        result = await postToInstagram(credentials as InstagramCredentials, {\n          caption: content,\n          imageUrl: mediaResult.imageUrl,\n          mediaType: mediaType\n        });\n        break;\n      }\n\n      default:\n        return {\n          platform,\n          success: false,\n          error: `Unsupported platform: ${platform}`\n        };\n    }\n\n    return {\n      platform,\n      success: result.success,\n      postId: (result as any).postId ?? (result as any).tweetId,\n      url: result.url,\n      error: result.error\n    };\n  } catch (error) {\n    console.error(`Failed to publish to ${platform}:`, error);\n    return {\n      platform,\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    };\n  }\n}\n\n/**\n * Publish a post to multiple platforms\n */\nexport async function publishPost(post: Post): Promise<PublishResult[]> {\n  const results: PublishResult[] = [];\n\n  for (const platform of post.platforms) {\n    // Get platform-specific content\n    const content = post.content[platform];\n\n    if (!content) {\n      results.push({\n        platform,\n        success: false,\n        error: `No content specified for ${platform}`\n      });\n      continue;\n    }\n\n    // Determine media URL (prefer generated image/video, fall back to suggestions)\n    const mediaUrl = post.generatedImage || post.generatedVideoUrl;\n\n    const result = await publishToSinglePlatform(platform, content, mediaUrl);\n    results.push(result);\n  }\n\n  return results;\n}\n\n/**\n * Check if a platform is ready to publish (connected and has valid credentials)\n */\nexport function isPlatformReady(platform: Platform): boolean {\n  const credentials = getPlatformCredentials(platform);\n  return credentials?.isConnected ?? false;\n}\n\n/**\n * Get publishing readiness for all platforms\n */\nexport function getPublishingReadiness(): Record<Platform, boolean> {\n  return {\n    twitter: isPlatformReady('twitter'),\n    linkedin: isPlatformReady('linkedin'),\n    facebook: isPlatformReady('facebook'),\n    instagram: isPlatformReady('instagram')\n  };\n}\n\n/**\n * Validate post before publishing\n */\nexport function validatePostForPublishing(post: Post): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n\n  // Check if at least one platform is selected\n  if (!post.platforms || post.platforms.length === 0) {\n    errors.push('No platforms selected');\n  }\n\n  // Check if platforms are connected\n  post.platforms.forEach(platform => {\n    if (!isPlatformReady(platform)) {\n      errors.push(`${platform} is not connected`);\n    }\n  });\n\n  // Check if content exists for each platform\n  post.platforms.forEach(platform => {\n    if (!post.content[platform]) {\n      errors.push(`Missing content for ${platform}`);\n    }\n  });\n\n  // Platform-specific validations\n  post.platforms.forEach(platform => {\n    const content = post.content[platform];\n    if (!content) return;\n\n    switch (platform) {\n      case 'twitter':\n        if (content.length > 280) {\n          errors.push('Twitter content exceeds 280 characters');\n        }\n        break;\n      case 'linkedin':\n        if (content.length > 3000) {\n          errors.push('LinkedIn content exceeds 3000 characters');\n        }\n        break;\n      case 'facebook':\r\n        if (content.length > 63206) {\r\n          errors.push('Facebook content exceeds 63206 characters');\r\n        }\r\n        break;\r\n      case 'instagram':\r\n        if (content.length > 2200) {\r\n          errors.push('Instagram caption exceeds 2200 characters');\r\n        }\r\n        if (!post.generatedImage && !post.generatedVideoUrl) {\r\n          errors.push('Instagram requires an image or video');\r\n        }\r\n        break;\r\n    }\r\n  });\r\n\r\n  return {\r\n    valid: errors.length === 0,\r\n    errors\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5033, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/history/HistoryCard.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState } from 'react';\nimport { Post, Platform } from '@/types';\nimport { PLATFORMS, STATUS_CONFIG } from '@/constants';\nimport { publishPost } from '@/services/publishingService';\nimport { Link as LinkIcon, Globe, Send, Clock, X, Trash2, Loader2, AlertCircle, CheckCircle2 } from 'lucide-react';\n\ninterface PublishedCardProps {\n    post: Post;\n    onUpdatePost: (post: Post) => void;\n    onDeletePost: (postId: string) => void;\n    connectedAccounts: Record<Platform, boolean>;\n}\n\nconst PublishedCard: React.FC<PublishedCardProps> = ({ post, onUpdatePost, onDeletePost, connectedAccounts }) => {\n    const [activePlatform, setActivePlatform] = useState<Platform>(post.platforms[0]);\n    const [isScheduleModalOpen, setIsScheduleModalOpen] = useState(false);\n    const [scheduleDate, setScheduleDate] = useState('');\n    const [isPublishing, setIsPublishing] = useState(false);\n    const [publishError, setPublishError] = useState<string | null>(null);\n    const [publishSuccess, setPublishSuccess] = useState(false);\n\n    const handlePublish = async () => {\n        setIsPublishing(true);\n        setPublishError(null);\n        setPublishSuccess(false);\n        \n        try {\n            // Actually publish to social media platforms!\n            const results = await publishPost(post);\n            \n            // Check for failures\n            const failures = results.filter(r => !r.success);\n            \n            if (failures.length === 0) {\n                // All platforms succeeded\n                const updates: Partial<Post> = { \n                    status: 'published', \n                    publishedAt: new Date().toISOString() \n                };\n                onUpdatePost({ ...post, ...updates });\n                setPublishSuccess(true);\n                \n                // Auto-hide success message after 3 seconds\n                setTimeout(() => setPublishSuccess(false), 3000);\n            } else {\n                // Some platforms failed\n                const failedPlatforms = failures.map(f => f.platform).join(', ');\n                const errorMessages = failures.map(f => f.error).join('; ');\n                setPublishError(`Failed to publish to ${failedPlatforms}: ${errorMessages}`);\n            }\n        } catch (error) {\n            console.error('Publishing error:', error);\n            setPublishError(error instanceof Error ? error.message : 'An unexpected error occurred while publishing');\n        } finally {\n            setIsPublishing(false);\n        }\n    };\n    \n    const handleSchedule = () => {\n        if (!scheduleDate) return;\n        const updates: Partial<Post> = { \n            status: 'scheduled', \n            scheduledAt: new Date(scheduleDate).toISOString() \n        };\n        onUpdatePost({ ...post, ...updates });\n        setIsScheduleModalOpen(false);\n        setScheduleDate('');\n    };\n\n    const handleUnschedule = () => {\n        const updates: Partial<Post> = { \n            status: 'ready to publish', \n            scheduledAt: undefined \n        };\n        onUpdatePost({ ...post, ...updates });\n    };\n\n    const unconnectedPlatforms = post.platforms.filter(p => !connectedAccounts[p]);\n    const canPublish = unconnectedPlatforms.length === 0;\n\n    const StatusChip: React.FC<{ status: Post['status'] }> = ({ status }) => {\n        const config = STATUS_CONFIG[status];\n        return <span className={`px-2.5 py-1 text-xs font-semibold rounded-full text-white ${config.color}`}>{config.label}</span>;\n    };\n\n    const ActionButton: React.FC<{ onClick: () => void, icon: React.ElementType, label: string, className?: string, disabled?: boolean }> = \n    ({ onClick, icon: Icon, label, className, disabled }) => (\n        <button onClick={onClick} disabled={disabled} className={`flex items-center justify-center text-xs font-bold py-2 px-3 rounded transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${className}`}>\n            <Icon className={`w-4 h-4 mr-1.5 ${Icon === Loader2 ? 'animate-spin' : ''}`} />\n            <span>{label}</span>\n        </button>\n    );\n\n    const ScheduleModal = () => (\n         <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\" onClick={() => setIsScheduleModalOpen(false)}>\n            <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md flex flex-col border border-slate/30\" onClick={e => e.stopPropagation()}>\n                <header className=\"flex justify-between items-center p-4 border-b border-slate/30\">\n                    <h2 className=\"text-xl font-bold text-charcoal-dark\">Schedule Post</h2>\n                    <button onClick={() => setIsScheduleModalOpen(false)} className=\"p-2 rounded-full text-slate hover:bg-slate/10 hover:text-charcoal-dark transition-colors\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </header>\n                <div className=\"p-6 space-y-4\">\n                     <p className=\"text-charcoal\">Select a date and time to schedule this post for.</p>\n                     <input\n                        type=\"datetime-local\"\n                        value={scheduleDate}\n                        onChange={(e) => setScheduleDate(e.target.value)}\n                        className=\"mt-1 block w-full bg-white border-slate/30 rounded-md shadow-sm focus:ring-charcoal focus:border-charcoal text-charcoal p-3\"\n                        min={new Date().toISOString().slice(0, 16)}\n                    />\n                    <button\n                        onClick={handleSchedule}\n                        disabled={!scheduleDate}\n                        className=\"w-full inline-flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-charcoal hover:bg-charcoal-dark disabled:bg-slate disabled:cursor-not-allowed\"\n                    >\n                       Confirm Schedule\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n\n    const PlatformPreview: React.FC<{ platform: Platform }> = ({ platform }) => {\n        const platformInfo = PLATFORMS.find(p => p.id === platform);\n        if (!platformInfo) return null;\n        const content = post.content[platform] || '';\n\n        return (\n            <div className=\"bg-slate/10 rounded-lg p-4\">\n                <div className=\"flex items-center mb-4\">\n                    <div className=\"w-11 h-11 bg-charcoal rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0\">AI</div>\n                    <div className=\"ml-3\">\n                        <p className=\"font-semibold text-charcoal-dark leading-tight\">AI Content OS</p>\n                        <p className=\"flex items-center text-xs text-slate\">Preview for {platformInfo.name}</p>\n                    </div>\n                </div>\n                <p className=\"text-charcoal text-sm mb-4 whitespace-pre-wrap h-24 overflow-y-auto\">{content}</p>\n                {post.generatedImage && <img src={post.generatedImage} alt=\"Generated content\" className=\"rounded-lg w-full border border-slate/30 mb-4\" />}\n                {post.generatedVideoUrl && <video src={post.generatedVideoUrl} controls className=\"rounded-lg w-full border border-slate/30\" />}\n            </div>\n        );\n    };\n\n    const PlatformSwitcher = () => (\n        <div className=\"flex items-center gap-1 mb-4 p-1 bg-light-gray rounded-lg\">\n            {post.platforms.map(p => {\n                const platformInfo = PLATFORMS.find(info => info.id === p);\n                if (!platformInfo) return null;\n                const { icon: Icon } = platformInfo;\n                return (\n                    <button\n                        key={p}\n                        onClick={() => setActivePlatform(p)}\n                        title={`Preview on ${platformInfo.name}`}\n                        className={`flex-1 flex justify-center items-center p-2 rounded-md transition-all duration-200 ${ activePlatform === p ? 'bg-charcoal text-white' : 'text-slate hover:bg-slate/10 hover:text-charcoal-dark' }`}\n                    > <Icon className=\"w-5 h-5\" /> </button>\n                );\n            })}\n        </div>\n    );\n\n    const renderActions = () => {\n        switch (post.status) {\n            case 'ready to publish':\n                return (\n                    <div className=\"flex flex-col w-full gap-2\">\n                        <div className=\"flex items-center justify-between w-full\">\n                            <div className=\"flex gap-2 flex-wrap\">\n                                <ActionButton onClick={() => setIsScheduleModalOpen(true)} icon={Clock} label=\"Schedule\" className=\"text-white bg-purple-600 hover:bg-purple-700\" />\n                                <ActionButton \n                                    onClick={handlePublish} \n                                    disabled={!canPublish || isPublishing} \n                                    icon={isPublishing ? Loader2 : Send} \n                                    label={isPublishing ? 'Publishing...' : 'Publish Now'} \n                                    className=\"bg-charcoal hover:bg-charcoal-dark text-white\" \n                                />\n                            </div>\n                            <ActionButton onClick={() => onDeletePost(post.id)} icon={Trash2} label=\"\" className=\"bg-red-600 hover:bg-red-700 text-white\" />\n                        </div>\n                        {!canPublish && (\n                            <div className=\"text-xs text-yellow-300 bg-yellow-900/50 p-2 rounded flex items-center gap-2\">\n                                <LinkIcon className=\"w-4 h-4 flex-shrink-0\" />\n                                <span>Connect {unconnectedPlatforms.map(p => PLATFORMS.find(info => info.id === p)?.name).join(', ')} account(s) to publish.</span>\n                            </div>\n                        )}\n                        {publishError && (\n                            <div className=\"text-xs text-red-300 bg-red-900/50 p-2 rounded flex items-center gap-2\">\n                                <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\n                                <span>{publishError}</span>\n                            </div>\n                        )}\n                        {publishSuccess && (\n                            <div className=\"text-xs text-green-300 bg-green-900/50 p-2 rounded flex items-center gap-2\">\n                                <CheckCircle2 className=\"w-4 h-4 flex-shrink-0\" />\n                                <span>Successfully published to all platforms! </span>\n                            </div>\n                        )}\n                    </div>\n                );\n            case 'scheduled':\n                return (\n                     <div className=\"flex items-center justify-between w-full text-sm\">\n                        <div className=\"flex items-center gap-2 text-blue-300\">\n                           <Clock className=\"w-4 h-4\"/>\n                           <span>{new Date(post.scheduledAt!).toLocaleString()}</span>\n                        </div>\n                        <button onClick={handleUnschedule} className=\"text-xs text-slate hover:text-charcoal-dark hover:underline\">Unschedule</button>\n                    </div>\n                );\n            case 'published':\n                return (\n                    <div className=\"flex items-center justify-between w-full text-sm\">\n                        <div className=\"flex items-center gap-2 text-green-300\">\n                           <Globe className=\"w-4 h-4\"/>\n                           <span>{new Date(post.publishedAt!).toLocaleString()}</span>\n                        </div>\n                        <a href=\"#\" className=\"text-xs text-charcoal-dark hover:underline\">View Live Post</a>\n                    </div>\n                );\n            default: return null;\n        }\n    }\n\n    return (\n        <>\n        <div className=\"bg-white rounded-lg shadow-lg flex flex-col overflow-hidden border border-slate/30\">\n            <div className=\"p-4 bg-light-gray\">\n                <div className=\"flex justify-between items-start\">\n                    <p className=\"font-bold text-lg text-charcoal-dark pr-2 break-words flex-1 truncate\">{post.topic}</p>\n                    <StatusChip status={post.status} />\n                </div>\n            </div>\n            <div className=\"flex-grow p-4 pt-2\">\n                <PlatformSwitcher />\n                <PlatformPreview platform={activePlatform} />\n            </div>\n            <div className=\"p-3 bg-light-gray flex flex-wrap gap-2 justify-between items-center\">\n                {renderActions()}\n            </div>\n        </div>\n        {isScheduleModalOpen && <ScheduleModal />}\n        </>\n    );\n};\n\nexport default PublishedCard;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5670, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/history/HistoryView.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useMemo } from 'react';\nimport { Post, PostStatus, Platform } from '@/types';\nimport FilterBar from '@/components/ui/FilterBar';\nimport PublishedCard from '@/components/history/HistoryCard';\n\ninterface PublishedViewProps {\n    posts: Post[];\n    onUpdatePost: (post: Post) => void;\n    onDeletePost: (postId: string) => void;\n    connectedAccounts: Record<Platform, boolean>;\n}\n\nconst PublishedView: React.FC<PublishedViewProps> = ({ posts, onUpdatePost, onDeletePost, connectedAccounts }) => {\n    const [searchTerm, setSearchTerm] = useState('');\n    const [platformFilter, setPlatformFilter] = useState<Platform | 'all'>('all');\n\n    const postsForPublishing = useMemo(() => {\n        const relevantPosts = posts.filter(post => ['ready to publish', 'scheduled', 'published'].includes(post.status));\n        \n        return relevantPosts\n            .filter(post => {\n                const matchesSearch = post.topic.toLowerCase().includes(searchTerm.toLowerCase());\n                const matchesPlatform = platformFilter === 'all' || post.platforms.includes(platformFilter);\n                return matchesSearch && matchesPlatform;\n            })\n            .sort((a, b) => {\n                const statusOrder: Partial<Record<PostStatus, number>> = {\n                    'ready to publish': 1,\n                    'scheduled': 2,\n                    'published': 3,\n                };\n                const weightA = statusOrder[a.status] ?? 99;\n                const weightB = statusOrder[b.status] ?? 99;\n                if (weightA !== weightB) {\n                    return weightA - weightB;\n                }\n                const dateA = a.publishedAt || a.scheduledAt || a.createdAt;\n                const dateB = b.publishedAt || b.scheduledAt || b.createdAt;\n                return new Date(dateB).getTime() - new Date(dateA).getTime();\n            });\n    }, [posts, searchTerm, platformFilter]);\n\n    if (postsForPublishing.length === 0 && searchTerm === '' && platformFilter === 'all') {\n        return (\n            <div className=\"text-center py-20\">\n                <h2 className=\"text-3xl font-semibold text-slate\">Nothing to Publish</h2>\n                <p className=\"text-slate mt-2\">Finalize a post in \"Manage Posts\" and it will appear here, ready for action.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div>\n            <div className=\"flex flex-col md:flex-row justify-between items-center mb-8 gap-4\">\n                <h2 className=\"text-3xl font-bold text-charcoal-dark\">Publishing Command Center</h2>\n            </div>\n\n            <FilterBar\n                onSearchChange={setSearchTerm}\n                onStatusChange={() => {}} \n                onPlatformChange={setPlatformFilter}\n                showStatusFilter={false}\n            />\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {postsForPublishing.map(post => (\n                    <PublishedCard\n                        key={post.id}\n                        post={post}\n                        onUpdatePost={onUpdatePost}\n                        onDeletePost={onDeletePost}\n                        connectedAccounts={connectedAccounts}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default PublishedView;\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AALA;;;;;AAcA,MAAM,gBAA8C,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,YAAY,EAAE,iBAAiB,EAAE;IACzG,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAmB;IAEvE,MAAM,qBAAqB,IAAA,gNAAO,EAAC;QAC/B,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAA,OAAQ;gBAAC;gBAAoB;gBAAa;aAAY,CAAC,QAAQ,CAAC,KAAK,MAAM;QAE9G,OAAO,cACF,MAAM,CAAC,CAAA;YACJ,MAAM,gBAAgB,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;YAC9E,MAAM,kBAAkB,mBAAmB,SAAS,KAAK,SAAS,CAAC,QAAQ,CAAC;YAC5E,OAAO,iBAAiB;QAC5B,GACC,IAAI,CAAC,CAAC,GAAG;YACN,MAAM,cAAmD;gBACrD,oBAAoB;gBACpB,aAAa;gBACb,aAAa;YACjB;YACA,MAAM,UAAU,WAAW,CAAC,EAAE,MAAM,CAAC,IAAI;YACzC,MAAM,UAAU,WAAW,CAAC,EAAE,MAAM,CAAC,IAAI;YACzC,IAAI,YAAY,SAAS;gBACrB,OAAO,UAAU;YACrB;YACA,MAAM,QAAQ,EAAE,WAAW,IAAI,EAAE,WAAW,IAAI,EAAE,SAAS;YAC3D,MAAM,QAAQ,EAAE,WAAW,IAAI,EAAE,WAAW,IAAI,EAAE,SAAS;YAC3D,OAAO,IAAI,KAAK,OAAO,OAAO,KAAK,IAAI,KAAK,OAAO,OAAO;QAC9D;IACR,GAAG;QAAC;QAAO;QAAY;KAAe;IAEtC,IAAI,mBAAmB,MAAM,KAAK,KAAK,eAAe,MAAM,mBAAmB,OAAO;QAClF,qBACI,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAClD,8OAAC;oBAAE,WAAU;8BAAkB;;;;;;;;;;;;IAG3C;IAEA,qBACI,8OAAC;;0BACG,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAG,WAAU;8BAAwC;;;;;;;;;;;0BAG1D,8OAAC,gJAAS;gBACN,gBAAgB;gBAChB,gBAAgB,KAAO;gBACvB,kBAAkB;gBAClB,kBAAkB;;;;;;0BAGtB,8OAAC;gBAAI,WAAU;0BACV,mBAAmB,GAAG,CAAC,CAAA,qBACpB,8OAAC,uJAAa;wBAEV,MAAM;wBACN,cAAc;wBACd,cAAc;wBACd,mBAAmB;uBAJd,KAAK,EAAE;;;;;;;;;;;;;;;;AAUpC;uCAEe","debugId":null}},
    {"offset": {"line": 5799, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/accounts/CredentialModal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState } from 'react';\r\nimport { Platform } from '@/types';\r\nimport { X, AlertCircle, ExternalLink, Info } from 'lucide-react';\r\n\r\ninterface CredentialModalProps {\r\n  platform: Platform;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSave: (credentials: any) => Promise<void>;\r\n}\r\n\r\nconst PLATFORM_DOCS = {\r\n  twitter: {\r\n    name: 'Twitter/X',\r\n    docsUrl: 'https://developer.twitter.com/en/docs/twitter-api',\r\n    fields: [\r\n      { key: 'apiKey', label: 'API Key', type: 'text', required: true },\r\n      { key: 'apiSecret', label: 'API Secret', type: 'password', required: true },\r\n      { key: 'accessToken', label: 'Access Token', type: 'text', required: true },\r\n      { key: 'accessTokenSecret', label: 'Access Token Secret', type: 'password', required: true },\r\n    ],\r\n    instructions: [\r\n      'Go to the Twitter Developer Portal',\r\n      'Create a new app or select an existing one',\r\n      'Generate API keys and access tokens under \"Keys and tokens\"',\r\n      'Copy all four credentials and paste them below',\r\n    ],\r\n  },\r\n  linkedin: {\r\n    name: 'LinkedIn',\r\n    docsUrl: 'https://learn.microsoft.com/en-us/linkedin/shared/authentication/authentication',\r\n    fields: [\r\n      { key: 'clientId', label: 'Client ID', type: 'text', required: true },\r\n      { key: 'clientSecret', label: 'Client Secret', type: 'password', required: true },\r\n      { key: 'accessToken', label: 'Access Token', type: 'text', required: true },\r\n    ],\r\n    instructions: [\r\n      'Go to LinkedIn Developers',\r\n      'Create a new app',\r\n      'Request access to the \"Share on LinkedIn\" and \"Sign In with LinkedIn\" products',\r\n      'Copy your Client ID and Client Secret',\r\n      'Generate an access token using OAuth 2.0 flow',\r\n    ],\r\n  },\r\n  facebook: {\r\n    name: 'Facebook',\r\n    docsUrl: 'https://developers.facebook.com/docs/pages-api',\r\n    fields: [\r\n      { key: 'appId', label: 'App ID', type: 'text', required: true },\r\n      { key: 'appSecret', label: 'App Secret', type: 'password', required: true },\r\n      { key: 'accessToken', label: 'Page Access Token', type: 'text', required: true },\r\n      { key: 'pageId', label: 'Page ID (Optional)', type: 'text', required: false },\r\n    ],\r\n    instructions: [\r\n      'Go to Facebook Developers',\r\n      'Create a new app with \"Business\" type',\r\n      'Add the \"Pages\" product to your app',\r\n      'Generate a Page Access Token for your Facebook Page',\r\n      'Copy your App ID, App Secret, and Page Access Token',\r\n    ],\r\n  },\r\n  instagram: {\r\n    name: 'Instagram',\r\n    docsUrl: 'https://developers.facebook.com/docs/instagram-api',\r\n    fields: [\r\n      { key: 'accessToken', label: 'Access Token', type: 'text', required: true },\r\n      { key: 'userId', label: 'Instagram User ID (Optional)', type: 'text', required: false },\r\n    ],\r\n    instructions: [\r\n      'Instagram API requires a Facebook Business account',\r\n      'Go to Facebook Developers and create an app',\r\n      'Add Instagram Graph API product',\r\n      'Connect your Instagram Business account',\r\n      'Generate a long-lived access token',\r\n    ],\r\n  },\r\n};\r\n\r\nconst CredentialModal: React.FC<CredentialModalProps> = ({ platform, isOpen, onClose, onSave }) => {\r\n  const [formData, setFormData] = useState<Record<string, string>>({});\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showInstructions, setShowInstructions] = useState(true);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const platformConfig = PLATFORM_DOCS[platform];\r\n\r\n  const handleInputChange = (key: string, value: string) => {\r\n    setFormData(prev => ({ ...prev, [key]: value }));\r\n    setError(null);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n\r\n    // Validate required fields\r\n    const missingFields = platformConfig.fields\r\n      .filter(field => field.required && !formData[field.key]?.trim())\r\n      .map(field => field.label);\r\n\r\n    if (missingFields.length > 0) {\r\n      setError(`Please fill in: ${missingFields.join(', ')}`);\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n\r\n    try {\r\n      const credentials = {\r\n        ...formData,\r\n        isConnected: true,\r\n        connectedAt: new Date().toISOString(),\r\n      };\r\n\r\n      await onSave(credentials);\r\n      setFormData({});\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to save credentials');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-slate/30\">\r\n          <h2 className=\"text-2xl font-bold text-charcoal-dark\">\r\n            Connect {platformConfig.name}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-slate hover:text-charcoal-dark transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {/* Security Notice */}\r\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 flex gap-3\">\r\n            <AlertCircle className=\"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\r\n            <div className=\"text-sm text-yellow-800\">\r\n              <p className=\"font-semibold mb-1\">Security Notice</p>\r\n              <p>\r\n                Credentials are stored locally in your browser. For production use, consider\r\n                using a secure backend server to store sensitive API keys.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Instructions Toggle */}\r\n          <button\r\n            onClick={() => setShowInstructions(!showInstructions)}\r\n            className=\"flex items-center gap-2 text-charcoal hover:text-charcoal-dark mb-4 font-medium\"\r\n          >\r\n            <Info className=\"w-5 h-5\" />\r\n            {showInstructions ? 'Hide' : 'Show'} Setup Instructions\r\n          </button>\r\n\r\n          {/* Instructions */}\r\n          {showInstructions && (\r\n            <div className=\"bg-light-gray rounded-lg p-4 mb-6\">\r\n              <h3 className=\"font-semibold text-charcoal-dark mb-3\">How to get your credentials:</h3>\r\n              <ol className=\"space-y-2 text-sm text-slate list-decimal list-inside\">\r\n                {platformConfig.instructions.map((instruction, index) => (\r\n                  <li key={index}>{instruction}</li>\r\n                ))}\r\n              </ol>\r\n              <a\r\n                href={platformConfig.docsUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"inline-flex items-center gap-2 mt-4 text-charcoal hover:text-charcoal-dark font-medium text-sm\"\r\n              >\r\n                <ExternalLink className=\"w-4 h-4\" />\r\n                View Official Documentation\r\n              </a>\r\n            </div>\r\n          )}\r\n\r\n          {/* Form */}\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {platformConfig.fields.map(field => (\r\n              <div key={field.key}>\r\n                <label className=\"block text-sm font-medium text-charcoal-dark mb-2\">\r\n                  {field.label}\r\n                  {field.required && <span className=\"text-red-500 ml-1\">*</span>}\r\n                </label>\r\n                <input\r\n                  type={field.type}\r\n                  value={formData[field.key] || ''}\r\n                  onChange={(e) => handleInputChange(field.key, e.target.value)}\r\n                  className=\"w-full px-4 py-2 border border-slate/30 rounded-lg focus:ring-2 focus:ring-charcoal focus:border-charcoal\"\r\n                  placeholder={`Enter your ${field.label.toLowerCase()}`}\r\n                  required={field.required}\r\n                />\r\n              </div>\r\n            ))}\r\n\r\n            {error && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 flex gap-2\">\r\n                <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0\" />\r\n                <p className=\"text-sm text-red-800\">{error}</p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex gap-3 p-6 border-t border-slate/30 bg-light-gray\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-1 px-4 py-2 border border-slate/30 rounded-lg text-charcoal hover:bg-white transition-colors font-medium\"\r\n            disabled={isSaving}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isSaving}\r\n            className=\"flex-1 px-4 py-2 bg-charcoal text-white rounded-lg hover:bg-charcoal-dark transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {isSaving ? 'Connecting...' : 'Connect Account'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CredentialModal;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6260, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/accounts/ConnectedAccountsView.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Platform, TwitterCredentials, LinkedInCredentials, FacebookCredentials, InstagramCredentials } from '@/types';\r\nimport { PLATFORMS } from '@/constants';\r\nimport { CheckCircle, Link, AlertCircle, Settings, Loader2 } from 'lucide-react';\r\nimport CredentialModal from './CredentialModal';\r\nimport {\r\n    savePlatformCredentials,\r\n    getPlatformCredentials,\r\n    disconnectPlatform,\r\n    getConnectionSummary\r\n} from '@/services/credentialService';\r\nimport { startTwitterAuth, verifyTwitterCredentials } from '@/services/platforms/twitterService';\r\nimport { startLinkedInAuth, verifyLinkedInCredentials } from '@/services/platforms/linkedinService';\r\nimport { startInstagramAuth, verifyInstagramCredentials } from '@/services/platforms/instagramService';\r\nimport { startFacebookAuth, verifyFacebookCredentials } from '@/services/platforms/facebookService';\r\n\r\ninterface ConnectedAccountsViewProps {\r\n    connectedAccounts: Record<Platform, boolean>;\r\n    onUpdateAccounts: (accounts: Record<Platform, boolean>) => void;\r\n}\r\n\r\nconst ConnectedAccountsView: React.FC<ConnectedAccountsViewProps> = ({ connectedAccounts, onUpdateAccounts }) => {\r\n    const [selectedPlatform, setSelectedPlatform] = useState<Platform | null>(null);\r\n    const [verifyingPlatform, setVerifyingPlatform] = useState<Platform | null>(null);\r\n    const [platformErrors, setPlatformErrors] = useState<Record<Platform, string | undefined>>({\r\n        twitter: undefined,\r\n        linkedin: undefined,\r\n        facebook: undefined,\r\n        instagram: undefined\r\n    });\r\n    const [platformUsernames, setPlatformUsernames] = useState<Record<Platform, string | undefined>>({\r\n        twitter: undefined,\r\n        linkedin: undefined,\r\n        facebook: undefined,\r\n        instagram: undefined\r\n    });\r\n\r\n    // Load connection status on mount\r\n    useEffect(() => {\r\n        loadConnectionStatus();\r\n\r\n        // Check for OAuth callback messages in URL\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        const twitterConnected = urlParams.get('twitter_connected');\r\n        const linkedinConnected = urlParams.get('linkedin_connected');\r\n        const instagramConnected = urlParams.get('instagram_connected');\r\n        const facebookConnected = urlParams.get('facebook_connected');\r\n        const error = urlParams.get('error');\r\n        const errorDetails = urlParams.get('details');\r\n\r\n        // Handle success states\r\n        if (twitterConnected === 'true' || linkedinConnected === 'true' || instagramConnected === 'true' || facebookConnected === 'true') {\r\n            // Clear URL parameters and sessionStorage immediately\r\n            window.history.replaceState({}, document.title, window.location.pathname);\r\n            sessionStorage.removeItem('verifying_platform');\r\n\r\n            // Reload connection status after a short delay\r\n            setTimeout(() => {\r\n                loadConnectionStatus();\r\n                setVerifyingPlatform(null);\r\n            }, 500);\r\n            return;\r\n        }\r\n\r\n        // Handle error states - CLEAR IMMEDIATELY\r\n        if (error) {\r\n            console.error('OAuth error detected:', error, errorDetails);\r\n\r\n            const errorMessage = errorDetails\r\n                ? `${error.replace(/_/g, ' ')}: ${decodeURIComponent(errorDetails)}`\r\n                : error.replace(/_/g, ' ');\r\n\r\n            // Determine which platform had the error\r\n            if (error.includes('twitter')) {\r\n                setPlatformErrors(prev => ({ ...prev, twitter: errorMessage }));\r\n            } else if (error.includes('linkedin')) {\r\n                setPlatformErrors(prev => ({ ...prev, linkedin: errorMessage }));\r\n            } else if (error.includes('instagram')) {\r\n                setPlatformErrors(prev => ({ ...prev, instagram: errorMessage }));\r\n            } else if (error.includes('facebook')) {\r\n                setPlatformErrors(prev => ({ ...prev, facebook: errorMessage }));\r\n            }\r\n\r\n            // Clear URL parameters and ALL cache immediately\r\n            window.history.replaceState({}, document.title, window.location.pathname);\r\n            sessionStorage.removeItem('verifying_platform');\r\n            localStorage.removeItem('oauth_state');\r\n            setVerifyingPlatform(null);\r\n            return;\r\n        }\r\n\r\n        // Handle OAuth timeout if page reload happens during flow\r\n        const savedVerifyingPlatform = sessionStorage.getItem('verifying_platform');\r\n        if (savedVerifyingPlatform) {\r\n            setVerifyingPlatform(savedVerifyingPlatform as Platform);\r\n\r\n            // Set a timeout to clear the loading state if OAuth doesn't complete\r\n            // REDUCED from 60 seconds to 15 seconds for faster recovery\r\n            const timeoutId = setTimeout(() => {\r\n                console.warn(`OAuth flow timeout for ${savedVerifyingPlatform} - clearing loading state after 15 seconds`);\r\n                setVerifyingPlatform(null);\r\n                sessionStorage.removeItem('verifying_platform');\r\n                localStorage.removeItem('oauth_state');\r\n\r\n                // Show timeout error to user\r\n                setPlatformErrors(prev => ({\r\n                    ...prev,\r\n                    [savedVerifyingPlatform]: 'OAuth authentication timed out. Please try again.'\r\n                }));\r\n            }, 15000); // 15 seconds timeout (was 60)\r\n\r\n            // Cleanup timeout on unmount or when component updates\r\n            return () => clearTimeout(timeoutId);\r\n        }\r\n\r\n        // If no success or error parameter, but we have saved verifying state, clear it\r\n        // This handles the case when user presses back button from OAuth page\r\n        if (!twitterConnected && !linkedinConnected && !instagramConnected && !facebookConnected && !error && savedVerifyingPlatform) {\r\n            console.log('No OAuth callback detected - clearing loading state');\r\n            setVerifyingPlatform(null);\r\n            sessionStorage.removeItem('verifying_platform');\r\n            localStorage.removeItem('oauth_state');\r\n        }\r\n    }, []);\r\n\r\n    const loadConnectionStatus = () => {\r\n        const summary = getConnectionSummary();\r\n        onUpdateAccounts(summary);\r\n\r\n        // Load usernames for connected accounts\r\n        const usernames: Record<Platform, string | undefined> = {\r\n            twitter: undefined,\r\n            linkedin: undefined,\r\n            facebook: undefined,\r\n            instagram: undefined\r\n        };\r\n\r\n        (Object.keys(summary) as Platform[]).forEach(platform => {\r\n            if (summary[platform]) {\r\n                const credentials = getPlatformCredentials(platform);\r\n                if (credentials) {\r\n                    if (platform === 'twitter') {\r\n                        usernames[platform] = (credentials as TwitterCredentials).username;\r\n                    } else if (platform === 'linkedin') {\r\n                        usernames[platform] = (credentials as LinkedInCredentials).profileName;\r\n                    } else if (platform === 'facebook') {\r\n                        usernames[platform] = (credentials as FacebookCredentials).pageName;\r\n                    } else if (platform === 'instagram') {\r\n                        usernames[platform] = (credentials as InstagramCredentials).username;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        setPlatformUsernames(usernames);\r\n    };\r\n\r\n    const handleConnect = async (platform: Platform) => {\r\n        // Clear any previous errors first\r\n        setPlatformErrors(prev => ({ ...prev, [platform]: undefined }));\r\n\r\n        // Clear all old cache/state before starting new OAuth flow\r\n        sessionStorage.removeItem('verifying_platform');\r\n        localStorage.removeItem('oauth_state');\r\n\r\n        // Set current platform as verifying\r\n        setVerifyingPlatform(platform);\r\n        sessionStorage.setItem('verifying_platform', platform);\r\n\r\n        try {\r\n            let result;\r\n\r\n            // Initiate OAuth flow based on platform\r\n            if (platform === 'twitter') {\r\n                result = await startTwitterAuth();\r\n            } else if (platform === 'linkedin') {\r\n                result = await startLinkedInAuth();\r\n            } else if (platform === 'instagram') {\r\n                result = await startInstagramAuth();\r\n            } else if (platform === 'facebook') {\r\n                result = await startFacebookAuth();\r\n            }\r\n\r\n            // If OAuth initiation failed (not redirect), handle error\r\n            if (result && !result.success) {\r\n                console.error(`${platform} auth failed:`, result.error);\r\n                setPlatformErrors(prev => ({ ...prev, [platform]: result.error }));\r\n                setVerifyingPlatform(null);\r\n                sessionStorage.removeItem('verifying_platform');\r\n                localStorage.removeItem('oauth_state');\r\n                return;\r\n            }\r\n\r\n            // If we reach here, OAuth redirect should happen\r\n            // (component will unmount or page will navigate)\r\n        } catch (err) {\r\n            // Handle unexpected errors\r\n            console.error(`Unexpected error during ${platform} auth:`, err);\r\n            const errorMsg = err instanceof Error ? err.message : 'Failed to start authentication';\r\n            setPlatformErrors(prev => ({ ...prev, [platform]: errorMsg }));\r\n            setVerifyingPlatform(null);\r\n            sessionStorage.removeItem('verifying_platform');\r\n            localStorage.removeItem('oauth_state');\r\n        }\r\n    };\r\n\r\n    const handleDisconnect = (platform: Platform) => {\r\n        disconnectPlatform(platform);\r\n        loadConnectionStatus();\r\n        setPlatformErrors(prev => ({ ...prev, [platform]: undefined }));\r\n    };\r\n\r\n    const handleSaveCredentials = async (credentials: any) => {\r\n        if (!selectedPlatform) return;\r\n\r\n        setVerifyingPlatform(selectedPlatform);\r\n        setPlatformErrors(prev => ({ ...prev, [selectedPlatform]: undefined }));\r\n\r\n        try {\r\n            let verificationResult;\r\n\r\n            // Verify credentials based on platform\r\n            switch (selectedPlatform) {\r\n                case 'twitter':\r\n                    verificationResult = await verifyTwitterCredentials(credentials as TwitterCredentials);\r\n                    if (verificationResult.success && verificationResult.username) {\r\n                        credentials.username = verificationResult.username;\r\n                    }\r\n                    break;\r\n                case 'linkedin':\r\n                    verificationResult = await verifyLinkedInCredentials(credentials as LinkedInCredentials);\r\n                    if (verificationResult.success && verificationResult.profileName) {\r\n                        credentials.profileName = verificationResult.profileName;\r\n                    }\r\n                    break;\r\n                case 'facebook':\r\n                    verificationResult = await verifyFacebookCredentials(credentials as FacebookCredentials);\r\n                    if (verificationResult.success && verificationResult.pageName) {\r\n                        credentials.pageName = verificationResult.pageName;\r\n                    }\r\n                    break;\r\n                case 'instagram':\r\n                    verificationResult = await verifyInstagramCredentials(credentials as InstagramCredentials);\r\n                    if (verificationResult.success && verificationResult.username) {\r\n                        credentials.username = verificationResult.username;\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            if (verificationResult && !verificationResult.success) {\r\n                throw new Error(verificationResult.error || 'Verification failed');\r\n            }\r\n\r\n            // Save credentials\r\n            savePlatformCredentials(selectedPlatform, credentials);\r\n\r\n            // Reload connection status\r\n            loadConnectionStatus();\r\n\r\n            setSelectedPlatform(null);\r\n        } catch (error) {\r\n            console.error('Failed to save credentials:', error);\r\n            setPlatformErrors(prev => ({\r\n                ...prev,\r\n                [selectedPlatform]: error instanceof Error ? error.message : 'Failed to connect'\r\n            }));\r\n            throw error; // Re-throw to show error in modal\r\n        } finally {\r\n            setVerifyingPlatform(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2 className=\"text-3xl font-bold mb-8 text-charcoal-dark\">Connected Accounts</h2>\r\n            <div className=\"bg-white p-8 rounded-lg shadow-xl max-w-3xl mx-auto border border-slate/30\">\r\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex gap-3\">\r\n                    <Settings className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\r\n                    <div className=\"text-sm text-blue-800\">\r\n                        <p className=\"font-semibold mb-1\">Production-Ready Integration</p>\r\n                        <p>\r\n                            Connect your social media accounts by providing your API credentials.\r\n                            Once connected, you'll be able to publish posts directly from this app.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    {PLATFORMS.map(({ id, name, icon: Icon }) => {\r\n                        const isConnected = connectedAccounts[id];\r\n                        const isVerifying = verifyingPlatform === id;\r\n                        const error = platformErrors[id];\r\n                        const username = platformUsernames[id];\r\n\r\n                        return (\r\n                            <div key={id} className=\"bg-light-gray rounded-lg overflow-hidden\">\r\n                                <div className=\"flex items-center justify-between p-4\">\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <Icon className=\"w-8 h-8 text-charcoal\" />\r\n                                        <div>\r\n                                            <span className=\"text-lg font-medium text-charcoal-dark block\">{name}</span>\r\n                                            {isConnected && username && (\r\n                                                <span className=\"text-sm text-slate\">@{username}</span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                    {isVerifying ? (\r\n                                        <div className=\"flex items-center gap-2 text-slate\">\r\n                                            <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                            <span className=\"font-semibold\">Verifying...</span>\r\n                                        </div>\r\n                                    ) : isConnected ? (\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className=\"flex items-center text-green-600\">\r\n                                                <CheckCircle className=\"w-5 h-5 mr-2\" />\r\n                                                <span className=\"font-semibold\">Connected</span>\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={() => handleDisconnect(id)}\r\n                                                className=\"px-4 py-2 text-sm font-medium bg-slate hover:bg-slate/80 rounded-md text-white transition-colors\"\r\n                                            >\r\n                                                Disconnect\r\n                                            </button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <button\r\n                                            onClick={() => handleConnect(id)}\r\n                                            className=\"px-4 py-2 text-sm font-medium bg-charcoal hover:bg-charcoal-dark rounded-md text-white flex items-center transition-colors\"\r\n                                        >\r\n                                            <Link className=\"w-4 h-4 mr-2\" />\r\n                                            Connect\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                                {error && (\r\n                                    <div className=\"px-4 pb-4\">\r\n                                        <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 flex gap-2\">\r\n                                            <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0\" />\r\n                                            <p className=\"text-sm text-red-800\">{error}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                <div className=\"mt-6 pt-6 border-t border-slate/30\">\r\n                    <p className=\"text-sm text-slate\">\r\n                        <strong>Note:</strong> Your credentials are stored locally in your browser.\r\n                        For production deployment, consider implementing a secure backend service to store and manage API credentials.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {selectedPlatform && (\r\n                <CredentialModal\r\n                    platform={selectedPlatform}\r\n                    isOpen={true}\r\n                    onClose={() => setSelectedPlatform(null)}\r\n                    onSave={handleSaveCredentials}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ConnectedAccountsView;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6823, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/media/MediaLibrary.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { MediaAsset } from '@/types';\r\nimport {\r\n  getAllMediaAssets,\r\n  deleteMediaAsset,\r\n  uploadMediaFile,\r\n  updateMediaTags,\r\n  searchMediaByTags,\r\n  getStorageStats,\r\n} from '@/services/mediaService';\r\nimport { Upload, Search, Trash2, Tag, Image as ImageIcon, Video, Download, X, Filter } from 'lucide-react';\r\n\r\nconst MediaLibrary: React.FC = () => {\r\n  const [assets, setAssets] = useState<MediaAsset[]>([]);\r\n  const [filteredAssets, setFilteredAssets] = useState<MediaAsset[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterType, setFilterType] = useState<'all' | 'image' | 'video'>('all');\r\n  const [selectedAsset, setSelectedAsset] = useState<MediaAsset | null>(null);\r\n  const [storageStats, setStorageStats] = useState({ totalAssets: 0, totalSize: 0 });\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  const loadAssets = useCallback(async () => {\r\n    const allAssets = await getAllMediaAssets();\r\n    setAssets(allAssets);\r\n    setFilteredAssets(allAssets);\r\n    const stats = await getStorageStats();\r\n    setStorageStats(stats);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadAssets();\r\n  }, [loadAssets]);\r\n\r\n  useEffect(() => {\r\n    let filtered = assets;\r\n\r\n    // Filter by type\r\n    if (filterType !== 'all') {\r\n      filtered = filtered.filter(asset => asset.type === filterType);\r\n    }\r\n\r\n    // Filter by search term\r\n    if (searchTerm) {\r\n      filtered = filtered.filter(asset =>\r\n        asset.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        asset.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()))\r\n      );\r\n    }\r\n\r\n    setFilteredAssets(filtered);\r\n  }, [assets, filterType, searchTerm]);\r\n\r\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = event.target.files;\r\n    if (!files || files.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n    try {\r\n      for (const file of Array.from(files)) {\r\n        await uploadMediaFile(file);\r\n      }\r\n      await loadAssets();\r\n    } catch (error) {\r\n      console.error('Error uploading files:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (confirm('Are you sure you want to delete this media asset?')) {\r\n      await deleteMediaAsset(id);\r\n      await loadAssets();\r\n      setSelectedAsset(null);\r\n    }\r\n  };\r\n\r\n  const handleUpdateTags = async (id: string, tags: string[]) => {\r\n    await updateMediaTags(id, tags);\r\n    await loadAssets();\r\n  };\r\n\r\n  const formatFileSize = (bytes: number): string => {\r\n    if (bytes === 0) return 'Unknown';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return `${Math.round((bytes / Math.pow(k, i)) * 100) / 100} ${sizes[i]}`;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold text-charcoal-dark\">Media Library</h2>\r\n          <p className=\"text-slate mt-1\">\r\n            {storageStats.totalAssets} assets  {formatFileSize(storageStats.totalSize)} total\r\n          </p>\r\n        </div>\r\n        <label className=\"cursor-pointer inline-flex items-center px-4 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition\">\r\n          <Upload className=\"w-5 h-5 mr-2\" />\r\n          {isUploading ? 'Uploading...' : 'Upload Media'}\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            accept=\"image/*,video/*\"\r\n            onChange={handleFileUpload}\r\n            className=\"hidden\"\r\n            disabled={isUploading}\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex gap-4 mb-6\">\r\n        <div className=\"flex-1 relative\">\r\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate w-5 h-5\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by name or tags...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 bg-white border border-slate/30 rounded-lg text-charcoal focus:ring-2 focus:ring-charcoal focus:border-transparent\"\r\n          />\r\n        </div>\r\n        <div className=\"flex bg-light-gray rounded-lg p-1 border border-slate/30\">\r\n          <button\r\n            onClick={() => setFilterType('all')}\r\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\r\n              filterType === 'all' ? 'bg-charcoal text-white' : 'text-slate hover:text-charcoal-dark'\r\n            }`}\r\n          >\r\n            All\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterType('image')}\r\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\r\n              filterType === 'image' ? 'bg-charcoal text-white' : 'text-slate hover:text-charcoal-dark'\r\n            }`}\r\n          >\r\n            Images\r\n          </button>\r\n          <button\r\n            onClick={() => setFilterType('video')}\r\n            className={`px-4 py-2 rounded-md text-sm font-medium transition ${\r\n              filterType === 'video' ? 'bg-charcoal text-white' : 'text-slate hover:text-charcoal-dark'\r\n            }`}\r\n          >\r\n            Videos\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Media Grid */}\r\n      {filteredAssets.length === 0 ? (\r\n        <div className=\"text-center py-20 bg-white rounded-lg border border-slate/30\">\r\n          <ImageIcon className=\"w-16 h-16 text-slate mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-semibold text-slate\">No media assets found</h3>\r\n          <p className=\"text-slate mt-2\">Upload images or videos to get started</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n          {filteredAssets.map(asset => (\r\n            <div\r\n              key={asset.id}\r\n              onClick={() => setSelectedAsset(asset)}\r\n              className=\"group relative bg-white rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-charcoal transition border border-slate/30\"\r\n            >\r\n              <div className=\"aspect-square bg-gray-900 flex items-center justify-center\">\r\n                {asset.type === 'image' ? (\r\n                  <img src={asset.url} alt={asset.name} className=\"w-full h-full object-cover\" />\r\n                ) : (\r\n                  <div className=\"relative w-full h-full\">\r\n                    {asset.thumbnailUrl ? (\r\n                      <img src={asset.thumbnailUrl} alt={asset.name} className=\"w-full h-full object-cover\" />\r\n                    ) : (\r\n                      <div className=\"w-full h-full flex items-center justify-center\">\r\n                        <Video className=\"w-12 h-12 text-gray-600\" />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black/40\">\r\n                      <Video className=\"w-8 h-8 text-white\" />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"p-2\">\r\n                <p className=\"text-xs text-charcoal truncate\">{asset.name}</p>\r\n                <div className=\"flex items-center justify-between mt-1\">\r\n                  <span className=\"text-xs text-slate\">{formatFileSize(asset.size)}</span>\r\n                  {asset.source === 'ai-generated' && (\r\n                    <span className=\"text-xs bg-purple-900/50 text-purple-300 px-2 py-0.5 rounded\">AI</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Asset Detail Modal */}\r\n      {selectedAsset && (\r\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\" onClick={() => setSelectedAsset(null)}>\r\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-slate/30\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"p-6\">\r\n              <div className=\"flex justify-between items-start mb-4\">\r\n                <h3 className=\"text-2xl font-bold text-charcoal-dark\">{selectedAsset.name}</h3>\r\n                <button onClick={() => setSelectedAsset(null)} className=\"text-slate hover:text-charcoal-dark\">\r\n                  <X className=\"w-6 h-6\" />\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"mb-6\">\r\n                {selectedAsset.type === 'image' ? (\r\n                  <img src={selectedAsset.url} alt={selectedAsset.name} className=\"w-full rounded-lg\" />\r\n                ) : (\r\n                  <video src={selectedAsset.url} controls className=\"w-full rounded-lg\" />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <p className=\"text-sm text-slate\">Type</p>\r\n                  <p className=\"text-charcoal-dark capitalize\">{selectedAsset.type}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-slate\">Size</p>\r\n                  <p className=\"text-charcoal-dark\">{formatFileSize(selectedAsset.size)}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-slate\">Source</p>\r\n                  <p className=\"text-charcoal-dark capitalize\">{selectedAsset.source.replace('-', ' ')}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-slate\">Created</p>\r\n                  <p className=\"text-charcoal-dark\">{new Date(selectedAsset.createdAt).toLocaleString()}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-slate mb-2\">Tags</p>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {selectedAsset.tags.length > 0 ? (\r\n                      selectedAsset.tags.map((tag, index) => (\r\n                        <span key={index} className=\"px-2 py-1 bg-charcoal/10 text-charcoal-dark rounded text-sm\">\r\n                          {tag}\r\n                        </span>\r\n                      ))\r\n                    ) : (\r\n                      <p className=\"text-slate text-sm\">No tags</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2 mt-6\">\r\n                <a\r\n                  href={selectedAsset.url}\r\n                  download={selectedAsset.name}\r\n                  className=\"flex items-center px-4 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition\"\r\n                >\r\n                  <Download className=\"w-4 h-4 mr-2\" />\r\n                  Download\r\n                </a>\r\n                <button\r\n                  onClick={() => handleDelete(selectedAsset.id)}\r\n                  className=\"flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLibrary;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7492, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/campaignService.ts"],"sourcesContent":["import { Campaign } from '@/types';\r\n\r\nconst STORAGE_KEY = 'campaigns';\r\n\r\nexport function getAllCampaigns(): Campaign[] {\r\n  try {\r\n    const saved = localStorage.getItem(STORAGE_KEY);\r\n    return saved ? JSON.parse(saved) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveCampaign(campaign: Campaign): void {\r\n  const campaigns = getAllCampaigns();\r\n  const index = campaigns.findIndex(c => c.id === campaign.id);\r\n\r\n  if (index !== -1) {\r\n    campaigns[index] = campaign;\r\n  } else {\r\n    campaigns.push(campaign);\r\n  }\r\n\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(campaigns));\r\n}\r\n\r\nexport function deleteCampaign(id: string): void {\r\n  const campaigns = getAllCampaigns().filter(c => c.id !== id);\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(campaigns));\r\n}\r\n\r\nexport function getCampaignById(id: string): Campaign | undefined {\r\n  return getAllCampaigns().find(c => c.id === id);\r\n}\r\n\r\nexport function createCampaign(\r\n  name: string,\r\n  description?: string,\r\n  startDate?: string,\r\n  endDate?: string,\r\n  goals?: string[]\r\n): Campaign {\r\n  const campaign: Campaign = {\r\n    id: crypto.randomUUID(),\r\n    name,\r\n    description,\r\n    color: getRandomCampaignColor(),\r\n    startDate: startDate || new Date().toISOString(),\r\n    endDate,\r\n    goals,\r\n    createdAt: new Date().toISOString(),\r\n  };\r\n\r\n  saveCampaign(campaign);\r\n  return campaign;\r\n}\r\n\r\nfunction getRandomCampaignColor(): string {\r\n  const colors = [\r\n    '#8B5CF6', // Purple\r\n    '#EC4899', // Pink\r\n    '#F59E0B', // Amber\r\n    '#10B981', // Green\r\n    '#3B82F6', // Blue\r\n    '#EF4444', // Red\r\n    '#14B8A6', // Teal\r\n    '#F97316', // Orange\r\n  ];\r\n  return colors[Math.floor(Math.random() * colors.length)];\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA,MAAM,cAAc;AAEb,SAAS;IACd,IAAI;QACF,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,OAAO,QAAQ,KAAK,KAAK,CAAC,SAAS,EAAE;IACvC,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEO,SAAS,aAAa,QAAkB;IAC7C,MAAM,YAAY;IAClB,MAAM,QAAQ,UAAU,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,SAAS,EAAE;IAE3D,IAAI,UAAU,CAAC,GAAG;QAChB,SAAS,CAAC,MAAM,GAAG;IACrB,OAAO;QACL,UAAU,IAAI,CAAC;IACjB;IAEA,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AACnD;AAEO,SAAS,eAAe,EAAU;IACvC,MAAM,YAAY,kBAAkB,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACzD,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AACnD;AAEO,SAAS,gBAAgB,EAAU;IACxC,OAAO,kBAAkB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AAC9C;AAEO,SAAS,eACd,IAAY,EACZ,WAAoB,EACpB,SAAkB,EAClB,OAAgB,EAChB,KAAgB;IAEhB,MAAM,WAAqB;QACzB,IAAI,OAAO,UAAU;QACrB;QACA;QACA,OAAO;QACP,WAAW,aAAa,IAAI,OAAO,WAAW;QAC9C;QACA;QACA,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,aAAa;IACb,OAAO;AACT;AAEA,SAAS;IACP,MAAM,SAAS;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,MAAM,EAAE;AAC1D","debugId":null}},
    {"offset": {"line": 7561, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/campaigns/CampaignManager.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { Campaign, Post } from '@/types';\r\nimport { getAllCampaigns, createCampaign, deleteCampaign, saveCampaign } from '@/services/campaignService';\r\nimport { Plus, Trash2, Edit, Target, Calendar, TrendingUp, X } from 'lucide-react';\r\n\r\ninterface CampaignManagerProps {\r\n  posts: Post[];\r\n}\r\n\r\nconst CampaignManager: React.FC<CampaignManagerProps> = ({ posts }) => {\r\n  const [campaigns, setCampaigns] = useState<Campaign[]>([]);\r\n  const [isCreating, setIsCreating] = useState(false);\r\n  const [selectedCampaign, setSelectedCampaign] = useState<Campaign | null>(null);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    goals: '' as string,\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadCampaigns();\r\n  }, []);\r\n\r\n  const loadCampaigns = () => {\r\n    const allCampaigns = getAllCampaigns();\r\n    setCampaigns(allCampaigns);\r\n  };\r\n\r\n  const handleCreate = () => {\r\n    if (!formData.name.trim()) return;\r\n\r\n    const goals = formData.goals\r\n      .split('\\n')\r\n      .map(g => g.trim())\r\n      .filter(g => g.length > 0);\r\n\r\n    createCampaign(\r\n      formData.name,\r\n      formData.description,\r\n      formData.startDate || undefined,\r\n      formData.endDate || undefined,\r\n      goals.length > 0 ? goals : undefined\r\n    );\r\n\r\n    setFormData({ name: '', description: '', startDate: '', endDate: '', goals: '' });\r\n    setIsCreating(false);\r\n    loadCampaigns();\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    if (confirm('Are you sure you want to delete this campaign? Posts will not be deleted.')) {\r\n      deleteCampaign(id);\r\n      loadCampaigns();\r\n      setSelectedCampaign(null);\r\n    }\r\n  };\r\n\r\n  const getCampaignStats = (campaignId: string) => {\r\n    const campaignPosts = posts.filter(p => p.campaignId === campaignId);\r\n    return {\r\n      total: campaignPosts.length,\r\n      published: campaignPosts.filter(p => p.status === 'published').length,\r\n      scheduled: campaignPosts.filter(p => p.status === 'scheduled').length,\r\n      draft: campaignPosts.filter(p => p.status === 'draft').length,\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h2 className=\"text-3xl font-bold text-charcoal-dark\">Campaign Management</h2>\r\n        <button\r\n          onClick={() => setIsCreating(true)}\r\n          className=\"flex items-center px-4 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition\"\r\n        >\r\n          <Plus className=\"w-5 h-5 mr-2\" />\r\n          New Campaign\r\n        </button>\r\n      </div>\r\n\r\n      {campaigns.length === 0 && !isCreating ? (\r\n        <div className=\"text-center py-20 bg-white rounded-lg border border-slate/30\">\r\n          <Target className=\"w-16 h-16 text-slate mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-semibold text-slate\">No campaigns yet</h3>\r\n          <p className=\"text-slate mt-2\">Create a campaign to organize your content strategy</p>\r\n          <button\r\n            onClick={() => setIsCreating(true)}\r\n            className=\"mt-4 px-6 py-2 bg-charcoal hover:bg-charcoal-dark text-white rounded-lg transition\"\r\n          >\r\n            Create Your First Campaign\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {/* Create Campaign Card */}\r\n          {isCreating && (\r\n            <div className=\"bg-gray-800 rounded-lg p-6 border-2 border-dashed border-gray-600\">\r\n              <h3 className=\"text-lg font-semibold text-white mb-4\">New Campaign</h3>\r\n              <div className=\"space-y-4\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Campaign Name *\"\r\n                  value={formData.name}\r\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                  className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500\"\r\n                />\r\n                <textarea\r\n                  placeholder=\"Description\"\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                  className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 resize-none\"\r\n                  rows={3}\r\n                />\r\n                <div>\r\n                  <label className=\"text-sm text-gray-400 block mb-1\">Start Date</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={formData.startDate}\r\n                    onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-sm text-gray-400 block mb-1\">End Date (Optional)</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={formData.endDate}\r\n                    onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-sm text-gray-400 block mb-1\">Goals (one per line)</label>\r\n                  <textarea\r\n                    placeholder=\"Increase brand awareness&#10;Drive website traffic&#10;Generate leads\"\r\n                    value={formData.goals}\r\n                    onChange={(e) => setFormData({ ...formData, goals: e.target.value })}\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 resize-none\"\r\n                    rows={3}\r\n                  />\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={handleCreate}\r\n                    disabled={!formData.name.trim()}\r\n                    className=\"flex-1 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition\"\r\n                  >\r\n                    Create\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsCreating(false);\r\n                      setFormData({ name: '', description: '', startDate: '', endDate: '', goals: '' });\r\n                    }}\r\n                    className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Campaign Cards */}\r\n          {campaigns.map(campaign => {\r\n            const stats = getCampaignStats(campaign.id);\r\n            return (\r\n              <div\r\n                key={campaign.id}\r\n                className=\"bg-gray-800 rounded-lg p-6 hover:ring-2 hover:ring-indigo-500 transition cursor-pointer\"\r\n                onClick={() => setSelectedCampaign(campaign)}\r\n              >\r\n                <div className=\"flex justify-between items-start mb-4\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div\r\n                      className=\"w-3 h-3 rounded-full\"\r\n                      style={{ backgroundColor: campaign.color }}\r\n                    />\r\n                    <h3 className=\"text-lg font-semibold text-white\">{campaign.name}</h3>\r\n                  </div>\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleDelete(campaign.id);\r\n                    }}\r\n                    className=\"text-gray-400 hover:text-red-400\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n\r\n                {campaign.description && (\r\n                  <p className=\"text-gray-400 text-sm mb-4\">{campaign.description}</p>\r\n                )}\r\n\r\n                <div className=\"space-y-2 mb-4\">\r\n                  <div className=\"flex items-center text-sm text-gray-400\">\r\n                    <Calendar className=\"w-4 h-4 mr-2\" />\r\n                    {new Date(campaign.startDate).toLocaleDateString()}\r\n                    {campaign.endDate && ` - ${new Date(campaign.endDate).toLocaleDateString()}`}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-4 gap-2 pt-4 border-t border-gray-700\">\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-2xl font-bold text-white\">{stats.total}</p>\r\n                    <p className=\"text-xs text-gray-400\">Total</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-2xl font-bold text-green-400\">{stats.published}</p>\r\n                    <p className=\"text-xs text-gray-400\">Published</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-2xl font-bold text-blue-400\">{stats.scheduled}</p>\r\n                    <p className=\"text-xs text-gray-400\">Scheduled</p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-2xl font-bold text-gray-400\">{stats.draft}</p>\r\n                    <p className=\"text-xs text-gray-400\">Drafts</p>\r\n                  </div>\r\n                </div>\r\n\r\n                {campaign.goals && campaign.goals.length > 0 && (\r\n                  <div className=\"mt-4 pt-4 border-t border-gray-700\">\r\n                    <p className=\"text-xs text-gray-400 mb-2\">Goals:</p>\r\n                    <ul className=\"space-y-1\">\r\n                      {campaign.goals.slice(0, 2).map((goal, index) => (\r\n                        <li key={index} className=\"text-sm text-gray-300 flex items-start\">\r\n                          <span className=\"text-indigo-400 mr-2\"></span>\r\n                          {goal}\r\n                        </li>\r\n                      ))}\r\n                      {campaign.goals.length > 2 && (\r\n                        <li className=\"text-sm text-gray-500\">+{campaign.goals.length - 2} more</li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Campaign Detail Modal */}\r\n      {selectedCampaign && (\r\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\" onClick={() => setSelectedCampaign(null)}>\r\n          <div className=\"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"p-6\">\r\n              <div className=\"flex justify-between items-start mb-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div\r\n                    className=\"w-4 h-4 rounded-full\"\r\n                    style={{ backgroundColor: selectedCampaign.color }}\r\n                  />\r\n                  <h3 className=\"text-2xl font-bold text-white\">{selectedCampaign.name}</h3>\r\n                </div>\r\n                <button onClick={() => setSelectedCampaign(null)} className=\"text-gray-400 hover:text-white\">\r\n                  <X className=\"w-6 h-6\" />\r\n                </button>\r\n              </div>\r\n\r\n              {selectedCampaign.description && (\r\n                <p className=\"text-gray-300 mb-6\">{selectedCampaign.description}</p>\r\n              )}\r\n\r\n              <div className=\"space-y-4 mb-6\">\r\n                <div>\r\n                  <p className=\"text-sm text-gray-400\">Duration</p>\r\n                  <p className=\"text-white\">\r\n                    {new Date(selectedCampaign.startDate).toLocaleDateString()}\r\n                    {selectedCampaign.endDate && ` - ${new Date(selectedCampaign.endDate).toLocaleDateString()}`}\r\n                  </p>\r\n                </div>\r\n\r\n                {selectedCampaign.goals && selectedCampaign.goals.length > 0 && (\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-400 mb-2\">Campaign Goals</p>\r\n                    <ul className=\"space-y-2\">\r\n                      {selectedCampaign.goals.map((goal, index) => (\r\n                        <li key={index} className=\"text-white flex items-start\">\r\n                          <Target className=\"w-4 h-4 text-indigo-400 mr-2 mt-0.5 flex-shrink-0\" />\r\n                          {goal}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"pt-6 border-t border-gray-700\">\r\n                <h4 className=\"text-lg font-semibold text-white mb-4\">Campaign Statistics</h4>\r\n                {(() => {\r\n                  const stats = getCampaignStats(selectedCampaign.id);\r\n                  return (\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div className=\"bg-gray-700/50 p-4 rounded-lg\">\r\n                        <p className=\"text-3xl font-bold text-white\">{stats.total}</p>\r\n                        <p className=\"text-gray-400\">Total Posts</p>\r\n                      </div>\r\n                      <div className=\"bg-gray-700/50 p-4 rounded-lg\">\r\n                        <p className=\"text-3xl font-bold text-green-400\">{stats.published}</p>\r\n                        <p className=\"text-gray-400\">Published</p>\r\n                      </div>\r\n                      <div className=\"bg-gray-700/50 p-4 rounded-lg\">\r\n                        <p className=\"text-3xl font-bold text-blue-400\">{stats.scheduled}</p>\r\n                        <p className=\"text-gray-400\">Scheduled</p>\r\n                      </div>\r\n                      <div className=\"bg-gray-700/50 p-4 rounded-lg\">\r\n                        <p className=\"text-3xl font-bold text-gray-400\">{stats.draft}</p>\r\n                        <p className=\"text-gray-400\">In Progress</p>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CampaignManager;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8457, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/content/ContentRepurposer.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState } from 'react';\r\nimport { Post, Platform } from '@/types';\r\nimport { PLATFORMS } from '@/constants';\r\nimport { repurposeContent } from '@/services/api/geminiService';\r\nimport { Sparkles, Loader2, FileText, Link as LinkIcon, Upload, Save, Video, Image as ImageIcon } from 'lucide-react';\r\n\r\ninterface ContentRepurposerProps {\r\n  onPostsCreated: (posts: Post[]) => void;\r\n}\r\n\r\nconst ContentRepurposer: React.FC<ContentRepurposerProps> = ({ onPostsCreated }) => {\r\n  const [inputType, setInputType] = useState<'text' | 'url' | 'file'>('text');\r\n  const [longFormContent, setLongFormContent] = useState('');\r\n  const [url, setUrl] = useState('');\r\n  const [selectedPlatforms, setSelectedPlatforms] = useState<Platform[]>(['twitter', 'linkedin']);\r\n  const [numberOfPosts, setNumberOfPosts] = useState(5);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [generatedPosts, setGeneratedPosts] = useState<Post[]>([]);\r\n\r\n  const handlePlatformChange = (platform: Platform) => {\r\n    setSelectedPlatforms(prev =>\r\n      prev.includes(platform)\r\n        ? prev.filter(p => p !== platform)\r\n        : [...prev, platform]\r\n    );\r\n  };\r\n\r\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      const text = e.target?.result as string;\r\n      setLongFormContent(text);\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  const fetchContentFromURL = async () => {\r\n    // In a real app, you'd use a backend service to fetch and parse the URL\r\n    // For now, we'll just show a placeholder\r\n    setError('URL fetching requires a backend service. Please paste the content directly.');\r\n  };\r\n\r\n  const handleRepurpose = async () => {\r\n    if (!longFormContent.trim()) {\r\n      setError('Please provide content to repurpose.');\r\n      return;\r\n    }\r\n\r\n    if (selectedPlatforms.length === 0) {\r\n      setError('Please select at least one platform.');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    setError(null);\r\n    setGeneratedPosts([]);\r\n\r\n    try {\r\n      const repurposedPosts = await repurposeContent(longFormContent, selectedPlatforms, numberOfPosts);\r\n\r\n      const posts: Post[] = repurposedPosts.map(post => ({\r\n        id: crypto.randomUUID(),\r\n        topic: post.topic,\r\n        platforms: selectedPlatforms,\r\n        content: post.content,\r\n        status: 'draft' as const,\r\n        createdAt: new Date().toISOString(),\r\n        isGeneratingImage: false,\r\n        isGeneratingVideo: false,\r\n        videoGenerationStatus: '',\r\n      }));\r\n\r\n      setGeneratedPosts(posts);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An unknown error occurred.');\r\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleSaveAll = () => {\n    onPostsCreated(generatedPosts);\n    setGeneratedPosts([]);\n    setLongFormContent('');\n    setUrl('');\n  };\n\n  return (\n    <div className=\"max-w-6xl mx-auto\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-3xl font-bold text-charcoal-dark flex items-center\">\n          <Sparkles className=\"w-8 h-8 mr-3 text-yellow-400\" />\n          Content Repurposer\n        </h2>\n        <p className=\"text-slate mt-2\">\n          Transform long-form content into multiple engaging social media posts\n        </p>\n      </div>\n\n      <div className=\"bg-white p-8 rounded-lg shadow-xl border border-slate/30\">\n        {/* Input Type Selection */}\n        <div className=\"mb-6\">\n          <label className=\"block text-md font-medium text-charcoal mb-3\">Input Source</label>\n          <div className=\"flex gap-4\">\n            <button\n              onClick={() => setInputType('text')}\n              className={`flex items-center px-4 py-2 rounded-lg transition ${\n                inputType === 'text' ? 'bg-charcoal text-white' : 'bg-gray-50 text-charcoal hover:bg-slate/10'\n              }`}\n            >\n              <FileText className=\"w-4 h-4 mr-2\" />\n              Paste Text\n            </button>\n            <button\n              onClick={() => setInputType('url')}\n              className={`flex items-center px-4 py-2 rounded-lg transition ${\n                inputType === 'url' ? 'bg-charcoal text-white' : 'bg-gray-50 text-charcoal hover:bg-slate/10'\n              }`}\n            >\n              <LinkIcon className=\"w-4 h-4 mr-2\" />\n              From URL\n            </button>\n            <label\n              className={`flex items-center px-4 py-2 rounded-lg transition cursor-pointer ${\n                inputType === 'file' ? 'bg-charcoal text-white' : 'bg-gray-50 text-charcoal hover:bg-slate/10'\n              }`}\n            >\n              <Upload className=\"w-4 h-4 mr-2\" />\n              Upload File\n              <input\n                type=\"file\"\n                accept=\".txt,.md\"\n                onChange={(e) => {\n                  setInputType('file');\n                  handleFileUpload(e);\n                }}\n                className=\"hidden\"\n              />\n            </label>\n          </div>\n        </div>\n\n        {/* Content Input */}\n        {inputType === 'text' && (\n          <div className=\"mb-6\">\n            <label className=\"block text-md font-medium text-charcoal mb-3\">Long-Form Content</label>\n            <textarea\n              value={longFormContent}\n              onChange={(e) => setLongFormContent(e.target.value)}\n              placeholder=\"Paste your blog post, article, video transcript, or any long-form content here...\"\n              className=\"w-full h-64 px-4 py-3 bg-white border border-slate/30 rounded-lg text-charcoal focus:ring-2 focus:ring-charcoal focus:border-transparent resize-none\"\n            />\n            <p className=\"text-sm text-slate mt-2\">\n              {longFormContent.length} characters  Minimum 500 characters recommended\n            </p>\n          </div>\n        )}\n\n        {inputType === 'url' && (\n          <div className=\"mb-6\">\n            <label className=\"block text-md font-medium text-gray-300 mb-3\">Content URL</label>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"url\"\n                value={url}\n                onChange={(e) => setUrl(e.target.value)}\n                placeholder=\"https://example.com/blog-post\"\n                className=\"flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n              />\n              <button\n                onClick={fetchContentFromURL}\n                className=\"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition\"\n              >\n                Fetch\n              </button>\n            </div>\n            <p className=\"text-sm text-yellow-500 mt-2\">\n              Note: URL fetching requires backend integration (not yet implemented)\n            </p>\n          </div>\n        )}\n\n        {inputType === 'file' && longFormContent && (\n          <div className=\"mb-6\">\n            <label className=\"block text-md font-medium text-gray-300 mb-3\">File Content Preview</label>\n            <textarea\n              value={longFormContent}\n              onChange={(e) => setLongFormContent(e.target.value)}\n              className=\"w-full h-64 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none\"\n            />\n          </div>\n        )}\n\n        {/* Platform Selection */}\n        <div className=\"mb-6\">\n          <label className=\"block text-md font-medium text-charcoal mb-3\">Target Platforms</label>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {PLATFORMS.map(({ id, name, icon: Icon }) => (\n              <label\n                key={id}\n                className={`flex items-center space-x-3 p-4 rounded-lg cursor-pointer transition-all duration-200 border-2 ${\n                  selectedPlatforms.includes(id)\n                    ? 'bg-charcoal/10 border-charcoal'\n                    : 'bg-gray-50 border-transparent hover:border-slate/30'\n                }`}\n              >\n                <input\n                  type=\"checkbox\"\n                  checked={selectedPlatforms.includes(id)}\n                  onChange={() => handlePlatformChange(id)}\n                  className=\"hidden\"\n                />\n                <Icon className={`w-6 h-6 ${selectedPlatforms.includes(id) ? 'text-charcoal-dark' : 'text-slate'}`} />\n                <span className=\"font-medium text-charcoal-dark\">{name}</span>\n              </label>\n            ))}\n          </div>\n        </div>\n\n        {/* Number of Posts */}\n        <div className=\"mb-6\">\n          <label className=\"block text-md font-medium text-charcoal mb-3\">\n            Number of Posts to Generate: {numberOfPosts}\n          </label>\n          <input\n            type=\"range\"\n            min=\"3\"\n            max=\"10\"\n            value={numberOfPosts}\n            onChange={(e) => setNumberOfPosts(parseInt(e.target.value))}\n            className=\"w-full h-2 bg-light-gray rounded-lg appearance-none cursor-pointer accent-charcoal\"\n          />\n          <div className=\"flex justify-between text-xs text-slate mt-1\">\n            <span>3 posts</span>\n            <span>10 posts</span>\n          </div>\n        </div>\n\n        {error && <p className=\"text-red-400 text-sm mb-4\">{error}</p>}\n\n        {/* Action Button */}\n        <button\n          onClick={handleRepurpose}\n          disabled={isProcessing || !longFormContent.trim()}\n          className=\"w-full flex items-center justify-center py-3 px-6 bg-charcoal hover:bg-charcoal-dark disabled:bg-slate disabled:cursor-not-allowed text-white rounded-lg transition font-medium\"\n        >\n          {isProcessing ? (\n            <>\n              <Loader2 className=\"animate-spin w-5 h-5 mr-2\" />\n              Generating {numberOfPosts} Posts...\n            </>\n          ) : (\n            <>\n              <Sparkles className=\"w-5 h-5 mr-2\" />\n              Repurpose Content\n            </>\n          )}\n        </button>\n      </div>\n\n      {/* Generated Posts Preview */}\n      {generatedPosts.length > 0 && (\n        <div className=\"mt-8\">\n          <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6\">\n            <div>\n              <h3 className=\"text-2xl font-bold text-charcoal-dark flex items-center gap-2\">\n                <Sparkles className=\"w-6 h-6 text-yellow-400\" />\n                Generated Posts\n              </h3>\n              <p className=\"text-sm text-slate mt-1\">{generatedPosts.length} posts ready to save</p>\n            </div>\n            <button\n              onClick={handleSaveAll}\n              className=\"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-xl\"\n            >\n              <Save className=\"w-4 h-4\" />\n              Save All to Drafts\n            </button>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {generatedPosts.map((post, index) => (\n              <div key={post.id} className=\"bg-white rounded-lg shadow-lg border border-slate/30 overflow-hidden hover:shadow-xl transition-shadow duration-200\">\n                {/* Card Header */}\n                <div className=\"bg-light-gray px-6 py-4 border-b border-slate/30\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 rounded-full bg-charcoal text-white flex items-center justify-center font-bold text-sm\">\n                        {index + 1}\n                      </div>\n                      <div>\n                        <h4 className=\"font-bold text-charcoal-dark\">Post {index + 1}</h4>\n                        <p className=\"text-xs text-slate\">Draft</p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      {selectedPlatforms.map(platform => {\n                        const platformInfo = PLATFORMS.find(p => p.id === platform);\n                        if (!platformInfo) return null;\n                        const { icon: Icon } = platformInfo;\n                        return <Icon key={platform} className=\"w-5 h-5 text-slate\" />;\n                      })}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Card Body */}\n                <div className=\"p-6 space-y-4\">\n                  {/* Topic */}\n                  <div className=\"pb-3 border-b border-slate/20\">\n                    <p className=\"text-sm font-semibold text-charcoal-dark leading-relaxed\">{post.topic}</p>\n                  </div>\n                  \n                  {/* Content Preview */}\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <FileText className=\"w-4 h-4 text-charcoal\" />\n                      <p className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Content</p>\n                    </div>\n                    <div className=\"bg-slate/5 border border-slate/20 p-4 rounded-lg\">\n                      <p className=\"text-charcoal text-sm leading-relaxed line-clamp-4\">\n                        {post?.content?.[selectedPlatforms?.[0]] ?? 'No content'}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Image Script Preview */}\n                  {post.content?.imageSuggestion && (\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <ImageIcon className=\"w-4 h-4 text-teal-600\" />\n                        <p className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Picture Script</p>\n                      </div>\n                      <div className=\"bg-teal-50 border border-teal-200 p-4 rounded-lg\">\n                        <p className=\"text-slate text-xs italic leading-relaxed line-clamp-3\">\n                          \"{post.content.imageSuggestion}\"\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Video Script Preview */}\n                  {post.content?.videoSuggestion && (\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <Video className=\"w-4 h-4 text-purple-600\" />\n                        <p className=\"text-xs font-semibold text-charcoal uppercase tracking-wide\">Video Script</p>\n                      </div>\n                      <div className=\"bg-purple-50 border border-purple-200 p-4 rounded-lg\">\n                        <p className=\"text-slate text-xs italic leading-relaxed line-clamp-3\">\n                          \"{post.content.videoSuggestion}\"\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ContentRepurposer;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9316, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/contexts/NotificationContext.tsx"],"sourcesContent":["'use client'\n\nimport React, { createContext, useContext, useState, useCallback, useEffect, ReactNode } from 'react'\nimport toast, { Toaster } from 'react-hot-toast'\nimport { Notification, NotificationType } from '@/types'\n\ninterface NotificationContextType {\n  notifications: Notification[]\n  addNotification: (type: NotificationType, title: string, message: string, postId?: string) => void\n  markAsRead: (id: string) => void\n  markAllAsRead: () => void\n  clearNotification: (id: string) => void\n  clearAllNotifications: () => void\n  unreadCount: number\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined)\n\nexport const useNotifications = () => {\n  const context = useContext(NotificationContext)\n  if (!context) {\n    throw new Error('useNotifications must be used within NotificationProvider')\n  }\n  return context\n}\n\ninterface NotificationProviderProps {\n  children: ReactNode\n}\n\nexport const NotificationProvider: React.FC<NotificationProviderProps> = ({ children }) => {\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [isHydrated, setIsHydrated] = useState(false)\n\n  // Hydrate from localStorage on client\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem('notifications')\n      if (saved) {\n        setNotifications(JSON.parse(saved))\n      }\n    } catch {\n      // ignore\n    }\n    setIsHydrated(true)\n  }, [])\n\n  // Persist to localStorage\n  useEffect(() => {\n    if (isHydrated) {\n      try {\n        localStorage.setItem('notifications', JSON.stringify(notifications))\n      } catch {\n        // ignore\n      }\n    }\n  }, [notifications, isHydrated])\n\n  const addNotification = useCallback((\n    type: NotificationType,\n    title: string,\n    message: string,\n    postId?: string\n  ) => {\n    const notification: Notification = {\n      id: crypto.randomUUID(),\n      type,\n      title,\n      message,\n      postId,\n      read: false,\n      createdAt: new Date().toISOString(),\n    }\n\n    setNotifications(prev => [notification, ...prev])\n\n    // Toast UI\n    const emoji = getEmojiForType(type)\n    toast.success(`${emoji} ${title}`, {\n      duration: 4000,\n      position: 'top-right',\n    })\n  }, [])\n\n  const markAsRead = useCallback((id: string) => {\n    setNotifications(prev => prev.map(n => (n.id === id ? { ...n, read: true } : n)))\n  }, [])\n\n  const markAllAsRead = useCallback(() => {\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })))\n  }, [])\n\n  const clearNotification = useCallback((id: string) => {\n    setNotifications(prev => prev.filter(n => n.id !== id))\n  }, [])\n\n  const clearAllNotifications = useCallback(() => {\n    setNotifications([])\n  }, [])\n\n  const unreadCount = notifications.filter(n => !n.read).length\n\n  return (\n    <NotificationContext.Provider\n      value={{\n        notifications,\n        addNotification,\n        markAsRead,\n        markAllAsRead,\n        clearNotification,\n        clearAllNotifications,\n        unreadCount,\n      }}\n    >\n      {children}\n      <Toaster />\n    </NotificationContext.Provider>\n  )\n}\n\nfunction getEmojiForType(type: NotificationType): string {\n  const emojiMap: Record<NotificationType, string> = {\n    video_complete: '',\n    image_complete: '',\n    post_scheduled: '',\n    post_published: '',\n    approval_needed: '',\n    comment_added: '',\n    insight_available: '',\n    queue_published: '',\n    error: '',\n  }\n  return emojiMap[type] || ''\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAgBA,MAAM,oCAAsB,IAAA,sNAAa,EAAsC;AAExE,MAAM,mBAAmB;IAC9B,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAMO,MAAM,uBAA4D,CAAC,EAAE,QAAQ,EAAE;IACpF,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IACrE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,sCAAsC;IACtC,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACT,iBAAiB,KAAK,KAAK,CAAC;YAC9B;QACF,EAAE,OAAM;QACN,SAAS;QACX;QACA,cAAc;IAChB,GAAG,EAAE;IAEL,0BAA0B;IAC1B,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;YACd,IAAI;gBACF,aAAa,OAAO,CAAC,iBAAiB,KAAK,SAAS,CAAC;YACvD,EAAE,OAAM;YACN,SAAS;YACX;QACF;IACF,GAAG;QAAC;QAAe;KAAW;IAE9B,MAAM,kBAAkB,IAAA,oNAAW,EAAC,CAClC,MACA,OACA,SACA;QAEA,MAAM,eAA6B;YACjC,IAAI,OAAO,UAAU;YACrB;YACA;YACA;YACA;YACA,MAAM;YACN,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,iBAAiB,CAAA,OAAQ;gBAAC;mBAAiB;aAAK;QAEhD,WAAW;QACX,MAAM,QAAQ,gBAAgB;QAC9B,kKAAK,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,EAAE,OAAO,EAAE;YACjC,UAAU;YACV,UAAU;QACZ;IACF,GAAG,EAAE;IAEL,MAAM,aAAa,IAAA,oNAAW,EAAC,CAAC;QAC9B,iBAAiB,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAM,EAAE,EAAE,KAAK,KAAK;oBAAE,GAAG,CAAC;oBAAE,MAAM;gBAAK,IAAI;IAC/E,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,iBAAiB,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;oBAAE,GAAG,CAAC;oBAAE,MAAM;gBAAK,CAAC;IAC9D,GAAG,EAAE;IAEL,MAAM,oBAAoB,IAAA,oNAAW,EAAC,CAAC;QACrC,iBAAiB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACrD,GAAG,EAAE;IAEL,MAAM,wBAAwB,IAAA,oNAAW,EAAC;QACxC,iBAAiB,EAAE;IACrB,GAAG,EAAE;IAEL,MAAM,cAAc,cAAc,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,IAAI,EAAE,MAAM;IAE7D,qBACE,8OAAC,oBAAoB,QAAQ;QAC3B,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;QACF;;YAEC;0BACD,8OAAC,kKAAO;;;;;;;;;;;AAGd;AAEA,SAAS,gBAAgB,IAAsB;IAC7C,MAAM,WAA6C;QACjD,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAChB,iBAAiB;QACjB,eAAe;QACf,mBAAmB;QACnB,iBAAiB;QACjB,OAAO;IACT;IACA,OAAO,QAAQ,CAAC,KAAK,IAAI;AAC3B","debugId":null}},
    {"offset": {"line": 9447, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/ui/NotificationBell.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Bell, X, Check, CheckCheck } from 'lucide-react';\r\nimport { useNotifications } from '@/contexts/NotificationContext';\r\n\r\nconst NotificationBell: React.FC = () => {\r\n  const { notifications, unreadCount, markAsRead, markAllAsRead, clearNotification } = useNotifications();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const getTimeAgo = (dateString: string): string => {\r\n    const seconds = Math.floor((new Date().getTime() - new Date(dateString).getTime()) / 1000);\r\n\r\n    if (seconds < 60) return 'Just now';\r\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\r\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\r\n    return `${Math.floor(seconds / 86400)}d ago`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-slate hover:text-charcoal-dark hover:bg-slate/10 rounded-lg transition\"\r\n      >\r\n        <Bell className=\"w-6 h-6\" />\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute top-0 right-0 inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-600 rounded-full\">\r\n            {unreadCount > 9 ? '9+' : unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-slate/30 z-50 max-h-[600px] overflow-hidden flex flex-col\">\r\n          <div className=\"p-4 border-b border-slate/30 flex justify-between items-center\">\r\n            <h3 className=\"text-lg font-semibold text-charcoal-dark\">Notifications</h3>\r\n            {notifications.length > 0 && (\r\n              <button\r\n                onClick={markAllAsRead}\r\n                className=\"text-xs text-charcoal-dark hover:text-charcoal flex items-center\"\r\n              >\r\n                <CheckCheck className=\"w-4 h-4 mr-1\" />\r\n                Mark all read\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"overflow-y-auto flex-1\">\r\n            {notifications.length === 0 ? (\r\n              <div className=\"p-8 text-center\">\r\n                <Bell className=\"w-12 h-12 text-slate mx-auto mb-2\" />\r\n                <p className=\"text-slate\">No notifications yet</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"divide-y divide-slate/30\">\r\n                {notifications.map(notification => (\r\n                  <div\r\n                    key={notification.id}\r\n                    className={`p-4 hover:bg-slate/10 transition ${\r\n                      !notification.read ? 'bg-charcoal/10' : ''\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex justify-between items-start\">\r\n                      <div className=\"flex-1 pr-2\">\r\n                        <p className=\"text-charcoal-dark font-medium text-sm\">{notification.title}</p>\r\n                        <p className=\"text-slate text-sm mt-1\">{notification.message}</p>\r\n                        <p className=\"text-slate text-xs mt-2\">{getTimeAgo(notification.createdAt)}</p>\r\n                      </div>\r\n                      <div className=\"flex gap-2\">\r\n                        {!notification.read && (\r\n                          <button\r\n                            onClick={() => markAsRead(notification.id)}\r\n                            className=\"text-charcoal-dark hover:text-charcoal\"\r\n                            title=\"Mark as read\"\r\n                          >\r\n                            <Check className=\"w-4 h-4\" />\r\n                          </button>\r\n                        )}\r\n                        <button\r\n                          onClick={() => clearNotification(notification.id)}\r\n                          className=\"text-slate hover:text-charcoal-dark\"\r\n                          title=\"Remove\"\r\n                        >\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationBell;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAMA,MAAM,mBAA6B;IACjC,MAAM,EAAE,aAAa,EAAE,WAAW,EAAE,UAAU,EAAE,aAAa,EAAE,iBAAiB,EAAE,GAAG,IAAA,2JAAgB;IACrG,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,cAAc,IAAA,+MAAM,EAAiB;IAE3C,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC9E,UAAU;YACZ;QACF;QAEA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG,EAAE;IAEL,MAAM,aAAa,CAAC;QAClB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,OAAO,KAAK,IAAI,KAAK,YAAY,OAAO,EAAE,IAAI;QAErF,IAAI,UAAU,IAAI,OAAO;QACzB,IAAI,UAAU,MAAM,OAAO,GAAG,KAAK,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC;QAC7D,IAAI,UAAU,OAAO,OAAO,GAAG,KAAK,KAAK,CAAC,UAAU,MAAM,KAAK,CAAC;QAChE,OAAO,GAAG,KAAK,KAAK,CAAC,UAAU,OAAO,KAAK,CAAC;IAC9C;IAEA,qBACE,8OAAC;QAAI,WAAU;QAAW,KAAK;;0BAC7B,8OAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;;kCAEV,8OAAC,0MAAI;wBAAC,WAAU;;;;;;oBACf,cAAc,mBACb,8OAAC;wBAAK,WAAU;kCACb,cAAc,IAAI,OAAO;;;;;;;;;;;;YAK/B,wBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA2C;;;;;;4BACxD,cAAc,MAAM,GAAG,mBACtB,8OAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,8OAAC,gOAAU;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;kCAM7C,8OAAC;wBAAI,WAAU;kCACZ,cAAc,MAAM,KAAK,kBACxB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,0MAAI;oCAAC,WAAU;;;;;;8CAChB,8OAAC;oCAAE,WAAU;8CAAa;;;;;;;;;;;qFAG5B,8OAAC;4BAAI,WAAU;sCACZ,cAAc,GAAG,CAAC,CAAA,6BACjB,8OAAC;oCAEC,WAAW,CAAC,iCAAiC,EAC3C,CAAC,aAAa,IAAI,GAAG,mBAAmB,IACxC;8CAEF,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAE,WAAU;kEAA0C,aAAa,KAAK;;;;;;kEACzE,8OAAC;wDAAE,WAAU;kEAA2B,aAAa,OAAO;;;;;;kEAC5D,8OAAC;wDAAE,WAAU;kEAA2B,WAAW,aAAa,SAAS;;;;;;;;;;;;0DAE3E,8OAAC;gDAAI,WAAU;;oDACZ,CAAC,aAAa,IAAI,kBACjB,8OAAC;wDACC,SAAS,IAAM,WAAW,aAAa,EAAE;wDACzC,WAAU;wDACV,OAAM;kEAEN,cAAA,8OAAC,6MAAK;4DAAC,WAAU;;;;;;;;;;;kEAGrB,8OAAC;wDACC,SAAS,IAAM,kBAAkB,aAAa,EAAE;wDAChD,WAAU;wDACV,OAAM;kEAEN,cAAA,8OAAC,iMAAC;4DAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;mCA1Bd,aAAa,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCxC;uCAEe","debugId":null}},
    {"offset": {"line": 9695, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/database/postService.ts"],"sourcesContent":["/**\r\n * Post Service - Supabase Database Operations\r\n * Handles all CRUD operations for posts\r\n */\r\n\r\nimport { supabase } from '@/lib/supabase'\r\nimport { Post, PostStatus, Platform } from '@/types'\r\n\r\nexport class PostService {\r\n  /**\r\n   * Get all posts for the current user's workspace\r\n   */\r\n  static async getAllPosts(workspaceId: string): Promise<Post[]> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('posts')\r\n        .select('*')\r\n        .eq('workspace_id', workspaceId)\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) throw error\r\n\r\n      // Transform database format to app format\r\n      return data.map(this.transformFromDB)\r\n    } catch (error) {\r\n      console.error('Error fetching posts:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a single post by ID\r\n   */\r\n  static async getPostById(postId: string, workspaceId: string): Promise<Post | null> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('posts')\r\n        .select('*')\r\n        .eq('id', postId)\r\n        .eq('workspace_id', workspaceId)\r\n        .single()\r\n\r\n      if (error) throw error\r\n\r\n      return data ? this.transformFromDB(data) : null\r\n    } catch (error) {\r\n      console.error('Error fetching post:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a new post\r\n   */\r\n  static async createPost(post: Post, userId: string, workspaceId: string): Promise<Post> {\r\n    try {\r\n      const dbPost = this.transformToDB(post, userId, workspaceId)\r\n\r\n      const { data, error } = await supabase\n        .from('posts')\n        .insert(dbPost)\n        .select()\n        .maybeSingle<{ id: string }>()\n\r\n      if (error) throw error\r\n\r\n      // Log activity\r\n      await this.logActivity(workspaceId, userId, 'create', 'post', data!.id)\n\r\n      return this.transformFromDB(data)\r\n    } catch (error) {\r\n      console.error('Error creating post:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update an existing post\r\n   */\r\n  static async updatePost(post: Post, userId: string, workspaceId: string): Promise<Post> {\r\n    try {\r\n      const dbPost = this.transformToDB(post, userId, workspaceId)\r\n\r\n      const { data, error } = await (supabase.from('posts') as any)\n        .update(dbPost)\n        .eq('id', post.id)\n        .eq('workspace_id', workspaceId)\n        .select()\n        .single()\n\r\n      if (error) throw error\r\n\r\n      // Log activity\r\n      await this.logActivity(workspaceId, userId, 'update', 'post', (data as any).id)\n\r\n      return this.transformFromDB(data)\r\n    } catch (error) {\r\n      console.error('Error updating post:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete a post\r\n   */\r\n  static async deletePost(postId: string, userId: string, workspaceId: string): Promise<void> {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('posts')\r\n        .delete()\r\n        .eq('id', postId)\r\n        .eq('workspace_id', workspaceId)\r\n\r\n      if (error) throw error\r\n\r\n      // Log activity\r\n      await this.logActivity(workspaceId, userId, 'delete', 'post', postId)\r\n    } catch (error) {\r\n      console.error('Error deleting post:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get posts by status\r\n   */\r\n  static async getPostsByStatus(status: PostStatus, workspaceId: string): Promise<Post[]> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('posts')\r\n        .select('*')\r\n        .eq('workspace_id', workspaceId)\r\n        .eq('status', status)\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) throw error\r\n\r\n      return data.map(this.transformFromDB)\r\n    } catch (error) {\r\n      console.error('Error fetching posts by status:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get posts by campaign\r\n   */\r\n  static async getPostsByCampaign(campaignId: string, workspaceId: string): Promise<Post[]> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('posts')\r\n        .select('*')\r\n        .eq('workspace_id', workspaceId)\r\n        .eq('campaign_id', campaignId)\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) throw error\r\n\r\n      return data.map(this.transformFromDB)\r\n    } catch (error) {\r\n      console.error('Error fetching posts by campaign:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get scheduled posts (for publishing)\r\n   */\r\n  static async getScheduledPosts(workspaceId: string): Promise<Post[]> {\r\n    try {\r\n      const now = new Date().toISOString()\r\n\r\n      const { data, error } = await supabase\r\n        .from('posts')\r\n        .select('*')\r\n        .eq('workspace_id', workspaceId)\r\n        .eq('status', 'scheduled')\r\n        .lte('scheduled_at', now)\r\n\r\n      if (error) throw error\r\n\r\n      return data.map(this.transformFromDB)\r\n    } catch (error) {\r\n      console.error('Error fetching scheduled posts:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update post status\r\n   */\r\n  static async updatePostStatus(\r\n    postId: string,\r\n    status: PostStatus,\r\n    userId: string,\r\n    workspaceId: string\r\n  ): Promise<void> {\r\n    try {\r\n      const updateData: any = { status }\r\n\r\n      // Add published_at timestamp when status is published\r\n      if (status === 'published') {\r\n        updateData.published_at = new Date().toISOString()\r\n      }\r\n\r\n      const { error } = await (supabase.from('posts') as any)\n        .update(updateData)\n        .eq('id', postId)\n        .eq('workspace_id', workspaceId)\n\r\n      if (error) throw error\r\n\r\n      // Log activity\r\n      await this.logActivity(workspaceId, userId, 'update_status', 'post', postId, { status })\r\n    } catch (error) {\r\n      console.error('Error updating post status:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Transform database row to Post type\r\n   */\r\n  private static transformFromDB(dbPost: any): Post {\r\n    return {\r\n      id: dbPost.id,\r\n      topic: dbPost.topic,\r\n      platforms: dbPost.platforms as Platform[],\r\n      content: dbPost.content,\r\n      status: dbPost.status as PostStatus,\r\n      createdAt: dbPost.created_at,\r\n      scheduledAt: dbPost.scheduled_at,\r\n      publishedAt: dbPost.published_at,\r\n      campaignId: dbPost.campaign_id,\r\n      engagementScore: dbPost.engagement_score,\r\n      engagementSuggestions: dbPost.engagement_suggestions,\r\n      // These fields are stored in content JSONB\r\n      generatedImage: dbPost.content?.generatedImage,\r\n      generatedVideoUrl: dbPost.content?.generatedVideoUrl,\r\n      isGeneratingImage: dbPost.content?.isGeneratingImage || false,\r\n      isGeneratingVideo: dbPost.content?.isGeneratingVideo || false,\r\n      videoGenerationStatus: dbPost.content?.videoGenerationStatus,\r\n      videoOperation: dbPost.content?.videoOperation,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Transform Post type to database format\r\n   */\r\n  private static transformToDB(post: Post, userId: string, workspaceId: string): any {\r\n    // Extract fields that go into content JSONB\r\n    const { generatedImage, generatedVideoUrl, isGeneratingImage, isGeneratingVideo, videoGenerationStatus, videoOperation, content, ...rest } = post\r\n\r\n    return {\r\n      id: post.id,\r\n      workspace_id: workspaceId,\r\n      created_by: userId,\r\n      topic: post.topic,\r\n      platforms: post.platforms,\r\n      content: {\r\n        ...content,\r\n        generatedImage,\r\n        generatedVideoUrl,\r\n        isGeneratingImage,\r\n        isGeneratingVideo,\r\n        videoGenerationStatus,\r\n        videoOperation,\r\n      },\r\n      status: post.status,\r\n      scheduled_at: post.scheduledAt,\r\n      published_at: post.publishedAt,\r\n      campaign_id: post.campaignId,\r\n      engagement_score: post.engagementScore,\r\n      engagement_suggestions: post.engagementSuggestions,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Log activity to activity_logs table\r\n   */\r\n  private static async logActivity(\r\n    workspaceId: string,\r\n    userId: string,\r\n    action: string,\r\n    resourceType: string,\r\n    resourceId: string,\r\n    details: any = {}\r\n  ): Promise<void> {\r\n    try {\r\n      await (supabase.from('activity_logs') as any).insert({\n        workspace_id: workspaceId,\n        user_id: userId,\n        action,\n        resource_type: resourceType,\n        resource_id: resourceId,\n        details: details || null,\n      })\n    } catch (error) {\r\n      console.error('Error logging activity:', error)\r\n      // Don't throw - activity logging shouldn't break the main operation\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9913, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/database/campaignService.ts"],"sourcesContent":["/**\r\n * Campaign Service - Supabase Database Operations\r\n * Handles all CRUD operations for campaigns\r\n */\r\n\r\nimport { supabase } from '@/lib/supabase'\r\nimport { Campaign } from '@/types'\nimport type { Database } from '@/lib/supabase/types'\n\r\nexport class CampaignService {\r\n  /**\r\n   * Get all campaigns for workspace\r\n   */\r\n  static async getAllCampaigns(workspaceId: string): Promise<Campaign[]> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('campaigns')\r\n        .select('*')\r\n        .eq('workspace_id', workspaceId)\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) throw error\r\n\r\n      return data.map(this.transformFromDB)\r\n    } catch (error) {\r\n      console.error('Error fetching campaigns:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get campaign by ID\r\n   */\r\n  static async getCampaignById(campaignId: string, workspaceId: string): Promise<Campaign | null> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('campaigns')\r\n        .select('*')\r\n        .eq('id', campaignId)\r\n        .eq('workspace_id', workspaceId)\r\n        .single()\r\n\r\n      if (error) throw error\r\n\r\n      return data ? this.transformFromDB(data) : null\r\n    } catch (error) {\r\n      console.error('Error fetching campaign:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a new campaign\r\n   */\r\n  static async createCampaign(\r\n    workspaceId: string,\r\n    name: string,\r\n    description?: string,\r\n    startDate?: string,\r\n    endDate?: string,\r\n    goals?: string[]\r\n  ): Promise<Campaign> {\r\n    try {\r\n      const campaign: Database['public']['Tables']['campaigns']['Insert'] = {\n        workspace_id: workspaceId,\n        name,\n        goal: description || null,\n        color: this.getRandomCampaignColor(),\n        start_date: startDate || new Date().toISOString(),\n        end_date: endDate || null,\n      }\n\r\n      const { data, error } = await (supabase\n        .from('campaigns') as any)\n        .insert(campaign)\n        .select()\n        .single()\n\r\n      if (error) throw error\r\n\r\n      return this.transformFromDB(data)\r\n    } catch (error) {\r\n      console.error('Error creating campaign:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update a campaign\r\n   */\r\n  static async updateCampaign(campaign: Campaign, workspaceId: string): Promise<Campaign> {\r\n    try {\r\n      const dbCampaign = {\n        name: campaign.name,\n        goal: campaign.description || null,\n        color: campaign.color,\n        start_date: campaign.startDate,\n        end_date: campaign.endDate ?? null,\n      }\n\r\n      const { data, error } = await (supabase\n        .from('campaigns') as any)\n        .update(dbCampaign)\n        .eq('id', campaign.id)\n        .eq('workspace_id', workspaceId)\n        .select()\n        .single()\n\r\n      if (error) throw error\r\n\r\n      return this.transformFromDB(data)\r\n    } catch (error) {\r\n      console.error('Error updating campaign:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete a campaign\r\n   */\r\n  static async deleteCampaign(campaignId: string, workspaceId: string): Promise<void> {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('campaigns')\r\n        .delete()\r\n        .eq('id', campaignId)\r\n        .eq('workspace_id', workspaceId)\r\n\r\n      if (error) throw error\r\n    } catch (error) {\r\n      console.error('Error deleting campaign:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get posts count for a campaign\r\n   */\r\n  static async getCampaignPostsCount(campaignId: string, workspaceId: string): Promise<number> {\r\n    try {\r\n      const { count, error } = await supabase\r\n        .from('posts')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('campaign_id', campaignId)\r\n        .eq('workspace_id', workspaceId)\r\n\r\n      if (error) throw error\r\n\r\n      return count || 0\r\n    } catch (error) {\r\n      console.error('Error getting campaign posts count:', error)\r\n      return 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Transform database row to Campaign type\r\n   */\r\n  private static transformFromDB(dbCampaign: any): Campaign {\n    return {\n      id: dbCampaign.id,\n      name: dbCampaign.name,\n      description: dbCampaign.goal,\n      color: dbCampaign.color,\n      startDate: dbCampaign.start_date,\n      endDate: dbCampaign.end_date,\n      createdAt: dbCampaign.created_at,\n    }\n  }\n\r\n  /**\r\n   * Generate random campaign color\r\n   */\r\n  private static getRandomCampaignColor(): string {\r\n    const colors = [\r\n      '#8B5CF6', // Purple\r\n      '#EC4899', // Pink\r\n      '#F59E0B', // Amber\r\n      '#10B981', // Green\r\n      '#3B82F6', // Blue\r\n      '#EF4444', // Red\r\n      '#14B8A6', // Teal\r\n      '#F97316', // Orange\r\n    ]\r\n    return colors[Math.floor(Math.random() * colors.length)]\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10048, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/lib/encryption.ts"],"sourcesContent":["/**\r\n * Simple Encryption Utility\r\n *\r\n * Note: This uses browser's SubtleCrypto API for encryption.\r\n * For production, consider using a backend service with server-side encryption.\r\n */\r\n\r\n// Generate a key from a passphrase\r\nasync function deriveKey(password: string, salt: Uint8Array): Promise<CryptoKey> {\r\n  const enc = new TextEncoder()\r\n  const keyMaterial = await window.crypto.subtle.importKey(\r\n    'raw',\r\n    enc.encode(password),\r\n    'PBKDF2',\r\n    false,\r\n    ['deriveBits', 'deriveKey']\r\n  )\r\n\r\n  return window.crypto.subtle.deriveKey(\r\n    {\r\n      name: 'PBKDF2',\r\n      salt: salt,\r\n      iterations: 100000,\r\n      hash: 'SHA-256',\r\n    },\r\n    keyMaterial,\r\n    { name: 'AES-GCM', length: 256 },\r\n    true,\r\n    ['encrypt', 'decrypt']\r\n  )\r\n}\r\n\r\n/**\r\n * Encrypt data using AES-GCM\r\n */\r\nexport async function encrypt(data: string, userSecret: string): Promise<string> {\r\n  try {\r\n    const enc = new TextEncoder()\r\n    const salt = window.crypto.getRandomValues(new Uint8Array(16))\r\n    const iv = window.crypto.getRandomValues(new Uint8Array(12))\r\n    const key = await deriveKey(userSecret, salt)\r\n\r\n    const encrypted = await window.crypto.subtle.encrypt(\r\n      {\r\n        name: 'AES-GCM',\r\n        iv: iv,\r\n      },\r\n      key,\r\n      enc.encode(data)\r\n    )\r\n\r\n    // Combine salt + iv + encrypted data\r\n    const combined = new Uint8Array(salt.length + iv.length + encrypted.byteLength)\r\n    combined.set(salt, 0)\r\n    combined.set(iv, salt.length)\r\n    combined.set(new Uint8Array(encrypted), salt.length + iv.length)\r\n\r\n    // Convert to base64\r\n    return btoa(String.fromCharCode(...combined))\r\n  } catch (error) {\r\n    console.error('Encryption error:', error)\r\n    throw new Error('Failed to encrypt data')\r\n  }\r\n}\r\n\r\n/**\r\n * Decrypt data using AES-GCM\r\n */\r\nexport async function decrypt(encryptedData: string, userSecret: string): Promise<string> {\r\n  try {\r\n    // Decode from base64\r\n    const combined = Uint8Array.from(atob(encryptedData), (c) => c.charCodeAt(0))\r\n\r\n    // Extract salt, iv, and encrypted data\r\n    const salt = combined.slice(0, 16)\r\n    const iv = combined.slice(16, 28)\r\n    const encrypted = combined.slice(28)\r\n\r\n    const key = await deriveKey(userSecret, salt)\r\n\r\n    const decrypted = await window.crypto.subtle.decrypt(\r\n      {\r\n        name: 'AES-GCM',\r\n        iv: iv,\r\n      },\r\n      key,\r\n      encrypted\r\n    )\r\n\r\n    const dec = new TextDecoder()\r\n    return dec.decode(decrypted)\r\n  } catch (error) {\r\n    console.error('Decryption error:', error)\r\n    throw new Error('Failed to decrypt data')\r\n  }\r\n}\r\n\r\n/**\r\n * Generate encryption key from user ID\r\n * In production, use a more secure key management system\r\n */\r\nexport function getUserEncryptionKey(userId: string): string {\r\n  // In production, this should be derived from a secure backend\r\n  // For now, we use a combination of user ID and a static salt\r\n  return `${userId}_encryption_key_v1`\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;CAKC,GAED,mCAAmC;;;;;;;;;AACnC,eAAe,UAAU,QAAgB,EAAE,IAAgB;IACzD,MAAM,MAAM,IAAI;IAChB,MAAM,cAAc,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,SAAS,CACtD,OACA,IAAI,MAAM,CAAC,WACX,UACA,OACA;QAAC;QAAc;KAAY;IAG7B,OAAO,OAAO,MAAM,CAAC,MAAM,CAAC,SAAS,CACnC;QACE,MAAM;QACN,MAAM;QACN,YAAY;QACZ,MAAM;IACR,GACA,aACA;QAAE,MAAM;QAAW,QAAQ;IAAI,GAC/B,MACA;QAAC;QAAW;KAAU;AAE1B;AAKO,eAAe,QAAQ,IAAY,EAAE,UAAkB;IAC5D,IAAI;QACF,MAAM,MAAM,IAAI;QAChB,MAAM,OAAO,OAAO,MAAM,CAAC,eAAe,CAAC,IAAI,WAAW;QAC1D,MAAM,KAAK,OAAO,MAAM,CAAC,eAAe,CAAC,IAAI,WAAW;QACxD,MAAM,MAAM,MAAM,UAAU,YAAY;QAExC,MAAM,YAAY,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAClD;YACE,MAAM;YACN,IAAI;QACN,GACA,KACA,IAAI,MAAM,CAAC;QAGb,qCAAqC;QACrC,MAAM,WAAW,IAAI,WAAW,KAAK,MAAM,GAAG,GAAG,MAAM,GAAG,UAAU,UAAU;QAC9E,SAAS,GAAG,CAAC,MAAM;QACnB,SAAS,GAAG,CAAC,IAAI,KAAK,MAAM;QAC5B,SAAS,GAAG,CAAC,IAAI,WAAW,YAAY,KAAK,MAAM,GAAG,GAAG,MAAM;QAE/D,oBAAoB;QACpB,OAAO,KAAK,OAAO,YAAY,IAAI;IACrC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,MAAM,IAAI,MAAM;IAClB;AACF;AAKO,eAAe,QAAQ,aAAqB,EAAE,UAAkB;IACrE,IAAI;QACF,qBAAqB;QACrB,MAAM,WAAW,WAAW,IAAI,CAAC,KAAK,gBAAgB,CAAC,IAAM,EAAE,UAAU,CAAC;QAE1E,uCAAuC;QACvC,MAAM,OAAO,SAAS,KAAK,CAAC,GAAG;QAC/B,MAAM,KAAK,SAAS,KAAK,CAAC,IAAI;QAC9B,MAAM,YAAY,SAAS,KAAK,CAAC;QAEjC,MAAM,MAAM,MAAM,UAAU,YAAY;QAExC,MAAM,YAAY,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAClD;YACE,MAAM;YACN,IAAI;QACN,GACA,KACA;QAGF,MAAM,MAAM,IAAI;QAChB,OAAO,IAAI,MAAM,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,MAAM,IAAI,MAAM;IAClB;AACF;AAMO,SAAS,qBAAqB,MAAc;IACjD,8DAA8D;IAC9D,6DAA6D;IAC7D,OAAO,GAAG,OAAO,kBAAkB,CAAC;AACtC","debugId":null}},
    {"offset": {"line": 10132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/database/credentialService.ts"],"sourcesContent":["/**\r\n * Credential Service - Supabase Database Operations\r\n * Handles encrypted storage of social media credentials\r\n */\r\n\r\nimport { supabase } from '@/lib/supabase'\r\nimport { encrypt, decrypt, getUserEncryptionKey } from '@/lib/encryption'\r\nimport {\r\n  Platform,\r\n  TwitterCredentials,\r\n  LinkedInCredentials,\r\n  FacebookCredentials,\r\n  InstagramCredentials,\r\n  PlatformCredentials,\r\n} from '@/types'\r\n\r\ntype AnyCredentials = TwitterCredentials | LinkedInCredentials | FacebookCredentials | InstagramCredentials\r\n\r\nexport class CredentialService {\n  /**\r\n   * Save credentials for a platform\r\n   */\r\n  static async savePlatformCredentials(\r\n    platform: Platform,\r\n    credentials: AnyCredentials,\r\n    userId: string,\r\n    workspaceId: string\r\n  ): Promise<void> {\r\n    try {\r\n      // Encrypt credentials\r\n      const encryptionKey = getUserEncryptionKey(userId)\r\n      const credentialsJson = JSON.stringify(credentials)\r\n      const encrypted = await encrypt(credentialsJson, encryptionKey)\r\n\r\n      // Check if credentials already exist\r\n      const { data: existing } = await supabase\n        .from('social_accounts')\n        .select('id')\n        .eq('workspace_id', workspaceId)\n        .eq('platform', platform)\n        .maybeSingle<{ id: string }>()\n\r\n      if (existing) {\r\n        // Update existing\r\n        const usernameVal = 'username' in credentials ? (credentials as any).username ?? null : null\n        const { error } = await (supabase\n          .from('social_accounts') as any)\n          .update({\n            credentials_encrypted: encrypted,\n            is_connected: credentials.isConnected,\n            username: usernameVal,\n            connected_at: credentials.isConnected ? new Date().toISOString() : null,\n            last_verified_at: new Date().toISOString(),\n          })\n          .eq('id', existing.id)\n\r\n        if (error) throw error\r\n      } else {\r\n        // Insert new\r\n        const usernameInsert = 'username' in credentials ? (credentials as any).username ?? null : null\n        const { error } = await (supabase.from('social_accounts') as any).insert({\n          workspace_id: workspaceId,\n          platform,\n          credentials_encrypted: encrypted,\n          is_connected: credentials.isConnected,\n          username: usernameInsert,\n          connected_at: credentials.isConnected ? new Date().toISOString() : null,\n          last_verified_at: new Date().toISOString(),\n        })\n\r\n        if (error) throw error\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving credentials:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get credentials for a specific platform\r\n   */\r\n  static async getPlatformCredentials(\n    platform: Platform,\n    userId: string,\n    workspaceId: string\n  ): Promise<AnyCredentials | null> {\n    try {\r\n      const { data, error } = await supabase\n        .from('social_accounts')\n        .select('credentials_encrypted')\n        .eq('workspace_id', workspaceId)\n        .eq('platform', platform)\n        .maybeSingle<{ credentials_encrypted: string }>()\n\r\n      if (error || !data) return null\r\n\r\n      // Decrypt credentials\r\n      const encryptionKey = getUserEncryptionKey(userId)\r\n      const decrypted = await decrypt(data.credentials_encrypted, encryptionKey)\r\n      const credentials = JSON.parse(decrypted)\r\n\r\n      return credentials\r\n    } catch (error) {\r\n      console.error('Error getting credentials:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all platform credentials\r\n   */\r\n  static async getAllCredentials(\r\n    userId: string,\r\n    workspaceId: string\r\n  ): Promise<PlatformCredentials> {\r\n    try {\r\n      const { data, error } = await supabase\n        .from('social_accounts')\n        .select('platform, credentials_encrypted')\n        .eq('workspace_id', workspaceId)\n\r\n      if (error) throw error\r\n\r\n      const credentials: PlatformCredentials = {}\r\n      const encryptionKey = getUserEncryptionKey(userId)\r\n\r\n      for (const account of (data || []) as Array<{ platform: string; credentials_encrypted: string }>) {\n        try {\r\n          const decrypted = await decrypt(account.credentials_encrypted, encryptionKey)\r\n          credentials[account.platform as Platform] = JSON.parse(decrypted)\r\n        } catch (error) {\r\n          console.error(`Error decrypting ${account.platform} credentials:`, error)\r\n        }\r\n      }\r\n\r\n      return credentials\r\n    } catch (error) {\r\n      console.error('Error getting all credentials:', error)\r\n      return {}\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if a platform is connected\r\n   */\r\n  static async isPlatformConnected(platform: Platform, workspaceId: string): Promise<boolean> {\r\n    try {\r\n      const { data, error } = await supabase\n        .from('social_accounts')\n        .select('is_connected')\n        .eq('workspace_id', workspaceId)\n        .eq('platform', platform)\n        .maybeSingle<{ is_connected: boolean }>()\n\r\n      if (error || !data) return false\r\n\r\n      return data.is_connected\r\n    } catch (error) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get connection summary for all platforms\r\n   */\r\n  static async getConnectionSummary(workspaceId: string): Promise<Record<Platform, boolean>> {\r\n    try {\r\n      const { data, error } = await supabase\n        .from('social_accounts')\n        .select('platform, is_connected')\n        .eq('workspace_id', workspaceId)\n\r\n      if (error) throw error\r\n\r\n      const summary: Record<Platform, boolean> = {\r\n        twitter: false,\r\n        linkedin: false,\r\n        facebook: false,\r\n        instagram: false,\r\n      }\r\n\r\n      for (const account of (data || []) as Array<{ platform: Platform; is_connected: boolean }>) {\n        summary[account.platform] = account.is_connected\n      }\n\r\n      return summary\r\n    } catch (error) {\r\n      console.error('Error getting connection summary:', error)\r\n      return {\r\n        twitter: false,\r\n        linkedin: false,\r\n        facebook: false,\r\n        instagram: false,\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disconnect a platform\r\n   */\r\n  static async disconnectPlatform(\r\n    platform: Platform,\r\n    userId: string,\r\n    workspaceId: string\r\n  ): Promise<void> {\r\n    try {\r\n      // Get existing credentials\r\n      const credentials = await this.getPlatformCredentials(platform, userId, workspaceId)\r\n      if (!credentials) return\r\n\r\n      // Update to disconnected\r\n      credentials.isConnected = false\r\n      await this.savePlatformCredentials(platform, credentials, userId, workspaceId)\r\n    } catch (error) {\r\n      console.error('Error disconnecting platform:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete platform credentials completely\r\n   */\r\n  static async deletePlatformCredentials(\r\n    platform: Platform,\r\n    workspaceId: string\r\n  ): Promise<void> {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('social_accounts')\r\n        .delete()\r\n        .eq('workspace_id', workspaceId)\r\n        .eq('platform', platform)\r\n\r\n      if (error) throw error\r\n    } catch (error) {\r\n      console.error('Error deleting credentials:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all credentials for workspace\r\n   */\r\n  static async clearAllCredentials(workspaceId: string): Promise<void> {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('social_accounts')\r\n        .delete()\r\n        .eq('workspace_id', workspaceId)\r\n\r\n      if (error) throw error\r\n    } catch (error) {\r\n      console.error('Error clearing all credentials:', error)\r\n      throw error\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10302, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/database/migrationService.ts"],"sourcesContent":["/**\r\n * Migration Service\r\n * Handles one-time migration of data from localStorage to Supabase\r\n */\r\n\r\nimport { PostService } from './postService'\r\nimport { CampaignService } from './campaignService'\r\nimport { CredentialService } from './credentialService'\r\nimport { Post, Campaign, PlatformCredentials } from '@/types'\r\n\r\nexport class MigrationService {\r\n  /**\r\n   * Check if migration is needed\r\n   */\r\n  static needsMigration(): boolean {\r\n    // Check if there's data in localStorage\r\n    const hasPosts = localStorage.getItem('socialMediaPosts') !== null\r\n    const hasCampaigns = localStorage.getItem('campaigns') !== null\r\n    const hasCredentials = localStorage.getItem('social_media_credentials') !== null\r\n\r\n    // Check if migration has been completed before\r\n    const migrationCompleted = localStorage.getItem('migration_completed') === 'true'\r\n\r\n    return (hasPosts || hasCampaigns || hasCredentials) && !migrationCompleted\r\n  }\r\n\r\n  /**\r\n   * Migrate all data from localStorage to Supabase\r\n   */\r\n  static async migrateAllData(userId: string, workspaceId: string): Promise<{\r\n    success: boolean\r\n    postsCount: number\r\n    campaignsCount: number\r\n    credentialsCount: number\r\n    errors: string[]\r\n  }> {\r\n    const errors: string[] = []\r\n    let postsCount = 0\r\n    let campaignsCount = 0\r\n    let credentialsCount = 0\r\n\r\n    try {\r\n      // Migrate posts\r\n      const postsMigrationResult = await this.migratePosts(userId, workspaceId)\r\n      postsCount = postsMigrationResult.count\r\n      if (postsMigrationResult.errors.length > 0) {\r\n        errors.push(...postsMigrationResult.errors)\r\n      }\r\n\r\n      // Migrate campaigns\r\n      const campaignsMigrationResult = await this.migrateCampaigns(workspaceId)\r\n      campaignsCount = campaignsMigrationResult.count\r\n      if (campaignsMigrationResult.errors.length > 0) {\r\n        errors.push(...campaignsMigrationResult.errors)\r\n      }\r\n\r\n      // Migrate credentials\r\n      const credentialsMigrationResult = await this.migrateCredentials(userId, workspaceId)\r\n      credentialsCount = credentialsMigrationResult.count\r\n      if (credentialsMigrationResult.errors.length > 0) {\r\n        errors.push(...credentialsMigrationResult.errors)\r\n      }\r\n\r\n      // Mark migration as completed\r\n      localStorage.setItem('migration_completed', 'true')\r\n\r\n      return {\r\n        success: errors.length === 0,\r\n        postsCount,\r\n        campaignsCount,\r\n        credentialsCount,\r\n        errors,\r\n      }\r\n    } catch (error) {\r\n      console.error('Migration error:', error)\r\n      errors.push('Failed to complete migration: ' + (error as Error).message)\r\n      return {\r\n        success: false,\r\n        postsCount,\r\n        campaignsCount,\r\n        credentialsCount,\r\n        errors,\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Migrate posts from localStorage\r\n   */\r\n  private static async migratePosts(userId: string, workspaceId: string): Promise<{\r\n    count: number\r\n    errors: string[]\r\n  }> {\r\n    const errors: string[] = []\r\n    let count = 0\r\n\r\n    try {\r\n      const postsJson = localStorage.getItem('socialMediaPosts')\r\n      if (!postsJson) return { count: 0, errors: [] }\r\n\r\n      const posts: Post[] = JSON.parse(postsJson)\r\n\r\n      for (const post of posts) {\r\n        try {\r\n          // Check if post already exists in database\r\n          const existing = await PostService.getPostById(post.id, workspaceId)\r\n          if (existing) {\r\n            console.log(`Post ${post.id} already exists, skipping`)\r\n            continue\r\n          }\r\n\r\n          await PostService.createPost(post, userId, workspaceId)\r\n          count++\r\n        } catch (error) {\r\n          console.error(`Error migrating post ${post.id}:`, error)\r\n          errors.push(`Failed to migrate post \"${post.topic}\": ${(error as Error).message}`)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error parsing posts from localStorage:', error)\r\n      errors.push('Failed to parse posts from localStorage')\r\n    }\r\n\r\n    return { count, errors }\r\n  }\r\n\r\n  /**\r\n   * Migrate campaigns from localStorage\r\n   */\r\n  private static async migrateCampaigns(workspaceId: string): Promise<{\r\n    count: number\r\n    errors: string[]\r\n  }> {\r\n    const errors: string[] = []\r\n    let count = 0\r\n\r\n    try {\r\n      const campaignsJson = localStorage.getItem('campaigns')\r\n      if (!campaignsJson) return { count: 0, errors: [] }\r\n\r\n      const campaigns: Campaign[] = JSON.parse(campaignsJson)\r\n\r\n      for (const campaign of campaigns) {\r\n        try {\r\n          // Check if campaign already exists\r\n          const existing = await CampaignService.getCampaignById(campaign.id, workspaceId)\r\n          if (existing) {\r\n            console.log(`Campaign ${campaign.id} already exists, skipping`)\r\n            continue\r\n          }\r\n\r\n          // Create campaign directly with ID preservation\r\n          const { error } = await (await import('@/lib/supabase')).supabase\n            .from('campaigns' as any)\n            .insert({\n              id: campaign.id, // Preserve original ID\n              workspace_id: workspaceId,\n              name: campaign.name,\n              goal: campaign.description || null,\n              color: campaign.color,\n              start_date: campaign.startDate,\n              end_date: campaign.endDate ?? null,\n            } as any)\n\r\n          if (error) throw error\r\n\r\n          count++\r\n        } catch (error) {\r\n          console.error(`Error migrating campaign ${campaign.id}:`, error)\r\n          errors.push(`Failed to migrate campaign \"${campaign.name}\": ${(error as Error).message}`)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error parsing campaigns from localStorage:', error)\r\n      errors.push('Failed to parse campaigns from localStorage')\r\n    }\r\n\r\n    return { count, errors }\r\n  }\r\n\r\n  /**\r\n   * Migrate credentials from localStorage\r\n   */\r\n  private static async migrateCredentials(userId: string, workspaceId: string): Promise<{\r\n    count: number\r\n    errors: string[]\r\n  }> {\r\n    const errors: string[] = []\r\n    let count = 0\r\n\r\n    try {\r\n      const credentialsObfuscated = localStorage.getItem('social_media_credentials')\r\n      if (!credentialsObfuscated) return { count: 0, errors: [] }\r\n\r\n      // Deobfuscate (reverse + base64 decode)\r\n      const reversed = credentialsObfuscated.split('').reverse().join('')\r\n      const credentialsJson = atob(reversed)\r\n      const credentials: PlatformCredentials = JSON.parse(credentialsJson)\r\n\r\n      for (const [platform, platformCredentials] of Object.entries(credentials)) {\r\n        try {\r\n          if (!platformCredentials) continue\r\n\r\n          // Check if credentials already exist\r\n          const existing = await CredentialService.isPlatformConnected(\r\n            platform as any,\r\n            workspaceId\r\n          )\r\n          if (existing) {\r\n            console.log(`Credentials for ${platform} already exist, skipping`)\r\n            continue\r\n          }\r\n\r\n          await CredentialService.savePlatformCredentials(\r\n            platform as any,\r\n            platformCredentials as any,\r\n            userId,\r\n            workspaceId\r\n          )\r\n          count++\r\n        } catch (error) {\r\n          console.error(`Error migrating credentials for ${platform}:`, error)\r\n          errors.push(`Failed to migrate ${platform} credentials: ${(error as Error).message}`)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error parsing credentials from localStorage:', error)\r\n      errors.push('Failed to parse credentials from localStorage')\r\n    }\r\n\r\n    return { count, errors }\r\n  }\r\n\r\n  /**\r\n   * Clear localStorage data after successful migration\r\n   */\r\n  static clearLocalStorageData(): void {\r\n    try {\r\n      localStorage.removeItem('socialMediaPosts')\r\n      localStorage.removeItem('campaigns')\r\n      localStorage.removeItem('social_media_credentials')\r\n      console.log('LocalStorage data cleared after migration')\r\n    } catch (error) {\r\n      console.error('Error clearing localStorage:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset migration status (for testing)\r\n   */\r\n  static resetMigrationStatus(): void {\r\n    localStorage.removeItem('migration_completed')\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10518, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/services/database/index.ts"],"sourcesContent":["/**\r\n * Database Services - Centralized exports\r\n */\r\n\r\nexport { PostService } from './postService'\r\nexport { CampaignService } from './campaignService'\r\nexport { CredentialService } from './credentialService'\r\nexport { MigrationService } from './migrationService'\r\n"],"names":[],"mappings":"AAAA;;CAEC;AAED;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 10533, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/migration/MigrationBanner.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport { useAuth } from '@/contexts/AuthContext'\r\nimport { MigrationService } from '@/services/database'\r\nimport { AlertCircle, CheckCircle, Loader2, X } from 'lucide-react'\r\n\r\nexport default function MigrationBanner() {\r\n  const { user, workspaceId } = useAuth()\r\n  const [needsMigration, setNeedsMigration] = useState(false)\r\n  const [migrating, setMigrating] = useState(false)\r\n  const [migrationResult, setMigrationResult] = useState<any>(null)\r\n  const [dismissed, setDismissed] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // Check if migration is needed\r\n    const checkMigration = () => {\r\n      const needs = MigrationService.needsMigration()\r\n      setNeedsMigration(needs)\r\n\r\n      // Check if user dismissed the banner in this session\r\n      const dismissed = sessionStorage.getItem('migration_banner_dismissed')\r\n      if (dismissed) {\r\n        setDismissed(true)\r\n      }\r\n    }\r\n\r\n    checkMigration()\r\n  }, [])\r\n\r\n  const handleMigrate = async () => {\r\n    if (!user || !workspaceId) return\r\n\r\n    setMigrating(true)\r\n    try {\r\n      const result = await MigrationService.migrateAllData(user.id, workspaceId)\r\n      setMigrationResult(result)\r\n\r\n      if (result.success) {\r\n        // Clear localStorage data after successful migration\r\n        MigrationService.clearLocalStorageData()\r\n        setNeedsMigration(false)\r\n\r\n        // Reload the page to refresh all data from database\r\n        setTimeout(() => {\r\n          window.location.reload()\r\n        }, 2000)\r\n      }\r\n    } catch (error) {\r\n      console.error('Migration failed:', error)\r\n      setMigrationResult({\r\n        success: false,\r\n        postsCount: 0,\r\n        campaignsCount: 0,\r\n        credentialsCount: 0,\r\n        errors: ['Migration failed: ' + (error as Error).message],\r\n      })\r\n    } finally {\r\n      setMigrating(false)\r\n    }\r\n  }\r\n\r\n  const handleSkip = () => {\r\n    // Mark migration as completed to stop showing this banner\r\n    localStorage.setItem('migration_completed', 'true')\r\n    setNeedsMigration(false)\r\n    setDismissed(true)\r\n  }\r\n\r\n  const handleDismiss = () => {\r\n    sessionStorage.setItem('migration_banner_dismissed', 'true')\r\n    setDismissed(true)\r\n  }\r\n\r\n  if (!needsMigration || dismissed) return null\r\n\r\n  return (\r\n    <div className=\"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4\">\r\n      <div className=\"flex items-start\">\r\n        <div className=\"flex-shrink-0\">\r\n          <AlertCircle className=\"h-5 w-5 text-blue-500\" />\r\n        </div>\r\n        <div className=\"ml-3 flex-1\">\r\n          <h3 className=\"text-sm font-medium text-blue-900\">\r\n            Migrate your data to the cloud\r\n          </h3>\r\n          <div className=\"mt-2 text-sm text-blue-800\">\r\n            <p>\r\n              We've upgraded to a cloud database! Your existing data (posts, campaigns,\r\n              credentials) is currently stored locally in your browser. Click \"Migrate Now\" to\r\n              securely transfer it to the cloud database.\r\n            </p>\r\n          </div>\r\n\r\n          {migrationResult && (\r\n            <div\r\n              className={`mt-3 p-3 rounded ${\r\n                migrationResult.success\r\n                  ? 'bg-green-100 border border-green-300'\r\n                  : 'bg-red-100 border border-red-300'\r\n              }`}\r\n            >\r\n              {migrationResult.success ? (\r\n                <div className=\"flex items-center text-green-800\">\r\n                  <CheckCircle className=\"w-5 h-5 mr-2\" />\r\n                  <div>\r\n                    <p className=\"font-medium\">Migration successful!</p>\r\n                    <p className=\"text-sm\">\r\n                      Migrated {migrationResult.postsCount} posts, {migrationResult.campaignsCount}{' '}\r\n                      campaigns, and {migrationResult.credentialsCount} platform credentials.\r\n                      Refreshing...\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-red-800\">\r\n                  <p className=\"font-medium\">Migration encountered errors:</p>\r\n                  <ul className=\"text-sm list-disc list-inside mt-1\">\r\n                    {migrationResult.errors.map((error: string, index: number) => (\r\n                      <li key={index}>{error}</li>\r\n                    ))}\r\n                  </ul>\r\n                  <p className=\"text-sm mt-2\">\r\n                    Partial migration: {migrationResult.postsCount} posts,{' '}\r\n                    {migrationResult.campaignsCount} campaigns, {migrationResult.credentialsCount}{' '}\r\n                    credentials\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-4 flex space-x-3\">\r\n            <button\r\n              onClick={handleMigrate}\r\n              disabled={migrating}\r\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {migrating ? (\r\n                <>\r\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                  Migrating...\r\n                </>\r\n              ) : (\r\n                'Migrate Now'\r\n              )}\r\n            </button>\r\n            <button\r\n              onClick={handleSkip}\r\n              disabled={migrating}\r\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\r\n            >\r\n              Skip (Keep local data)\r\n            </button>\r\n            <button\r\n              onClick={handleDismiss}\r\n              disabled={migrating}\r\n              className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 disabled:opacity-50\"\r\n            >\r\n              Remind me later\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"ml-auto pl-3\">\r\n          <button\r\n            onClick={handleDismiss}\r\n            className=\"inline-flex text-gray-400 hover:text-gray-500 focus:outline-none\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10854, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/App.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { Post, Platform } from '@/types';\r\nimport ContentStrategistView from '@/components/content/ContentStrategistView';\r\nimport ManagePosts from '@/components/posts/ManagePosts';\r\nimport AnalyticsDashboard from '@/components/analytics/AnalyticsDashboard';\r\nimport PublishedView from '@/components/history/HistoryView';\r\nimport ConnectedAccountsView from '@/components/accounts/ConnectedAccountsView';\r\nimport MediaLibrary from '@/components/media/MediaLibrary';\r\nimport CampaignManager from '@/components/campaigns/CampaignManager';\r\nimport ContentRepurposer from '@/components/content/ContentRepurposer';\r\nimport NotificationBell from '@/components/ui/NotificationBell';\r\nimport MigrationBanner from '@/components/migration/MigrationBanner';\r\nimport { NotificationProvider, useNotifications } from '@/contexts/NotificationContext';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { PostService, CredentialService } from '@/services/database';\r\nimport { checkVideoOperationStatus, fetchVideo } from '@/services/api/geminiService';\r\nimport { autoSaveAIMedia } from '@/services/mediaService';\r\nimport { Edit3, LayoutGrid, BarChart3, Settings, History, Link as LinkIcon, Image, Target, Sparkles, LogOut, User } from 'lucide-react';\r\n\r\ntype View = 'create' | 'manage' | 'history' | 'analytics' | 'accounts' | 'media' | 'campaigns' | 'repurpose';\r\n\r\nconst AppContent: React.FC = () => {\r\n    const { addNotification } = useNotifications();\r\n    const { user, signOut, userRole, workspaceId } = useAuth();\r\n    const [activeView, setActiveView] = useState<View>('create');\r\n    const [posts, setPosts] = useState<Post[]>([]);\r\n    const [loading, setLoading] = useState(false);\n\r\n    const [connectedAccounts, setConnectedAccounts] = useState<Record<Platform, boolean>>({\r\n        twitter: false,\r\n        linkedin: false,\r\n        facebook: false,\r\n        instagram: false\r\n    });\r\n\r\n    // Load data from Supabase on mount\r\n    useEffect(() => {\n        // If prerequisites arent ready, dont block the UI\n        if (!user || !workspaceId) {\n            setLoading(false);\n            return;\n        }\n\n        const loadData = async () => {\n            try {\n                setLoading(true);\n\n                // Load posts from Supabase\n                const supabasePosts = await PostService.getAllPosts(workspaceId);\n                setPosts(supabasePosts);\n\n                // Load connected accounts from Supabase\n                const accountsSummary = await CredentialService.getConnectionSummary(workspaceId);\n                setConnectedAccounts(accountsSummary);\n            } catch (error) {\n                console.error(\"Error loading data from Supabase:\", error);\n\n                // Fallback to localStorage if Supabase fails\n                try {\n                    const savedPosts = localStorage.getItem('socialMediaPosts');\n                    if (savedPosts) {\n                        setPosts(JSON.parse(savedPosts));\n                    }\n\n                    const savedAccounts = localStorage.getItem('connectedSocialAccounts');\n                    if (savedAccounts) {\n                        setConnectedAccounts(JSON.parse(savedAccounts));\n                    }\n                } catch (localError) {\n                    console.error(\"Could not load from localStorage either\", localError);\n                }\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadData();\n    }, [user, workspaceId]);\n\r\n\r\n    const [isApiKeyReady, setIsApiKeyReady] = useState(false);\r\n\r\n    const checkAndSetApiKey = useCallback(async () => {\r\n        if (window.aistudio && await window.aistudio.hasSelectedApiKey()) {\r\n            setIsApiKeyReady(true);\r\n        } else {\r\n            setIsApiKeyReady(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        checkAndSetApiKey();\r\n    }, [checkAndSetApiKey]);\r\n\r\n    const handleSelectKey = useCallback(async () => {\r\n        if(window.aistudio) {\r\n            await window.aistudio.openSelectKey();\r\n            // Assume success and optimistically update UI\r\n            setIsApiKeyReady(true); \r\n        }\r\n    }, []);\r\n\r\n    // Save to Supabase when posts change (with debounce)\r\n    useEffect(() => {\r\n        if (!user || !workspaceId || posts.length === 0) return;\r\n\r\n        // Also save to localStorage as backup\r\n        localStorage.setItem('socialMediaPosts', JSON.stringify(posts));\r\n    }, [posts, user, workspaceId]);\r\n\r\n    // Save connected accounts to localStorage as backup\r\n    useEffect(() => {\r\n        localStorage.setItem('connectedSocialAccounts', JSON.stringify(connectedAccounts));\r\n    }, [connectedAccounts]);\r\n\r\n\r\n    const checkScheduledPosts = useCallback(() => {\r\n        setPosts(prevPosts =>\r\n            prevPosts.map(post => {\r\n                if (post.status === 'scheduled' && post.scheduledAt && new Date(post.scheduledAt) <= new Date()) {\r\n                    return { ...post, status: 'published', publishedAt: new Date().toISOString() };\r\n                }\r\n                return post;\r\n            })\r\n        );\r\n    }, []);\r\n\r\n    const updatePost = useCallback(async (updatedPost: Post) => {\r\n        // Update local state immediately\r\n        setPosts(prevPosts => prevPosts.map(post => post.id === updatedPost.id ? updatedPost : post));\r\n\r\n        // Save to Supabase in background\r\n        if (user && workspaceId) {\r\n            try {\r\n                await PostService.updatePost(updatedPost, user.id, workspaceId);\r\n            } catch (error) {\r\n                console.error('Error updating post in Supabase:', error);\r\n            }\r\n        }\r\n    }, [user, workspaceId]);\r\n\r\n    const pollVideoStatuses = useCallback(() => {\r\n        posts.forEach(post => {\r\n            if (post.isGeneratingVideo && post.videoOperation && !post.videoOperation.done) {\r\n                checkVideoOperationStatus(post.videoOperation)\r\n                    .then(async (updatedOp) => {\r\n                        if (updatedOp.done) {\r\n                            const uri = updatedOp.response?.generatedVideos?.[0]?.video?.uri;\r\n                            if (uri) {\r\n                                const videoUrl = await fetchVideo(uri);\r\n                                // Auto-save to media library\r\n                                await autoSaveAIMedia(videoUrl, 'video', post.topic);\r\n                                // Send notification\r\n                                addNotification('video_complete', 'Video Generation Complete', `Video for \"${post.topic}\" is ready!`, post.id);\r\n                                updatePost({ ...post, generatedVideoUrl: videoUrl, isGeneratingVideo: false, videoGenerationStatus: 'Completed!', videoOperation: updatedOp });\r\n                            } else {\r\n                                updatePost({ ...post, isGeneratingVideo: false, videoGenerationStatus: 'Failed: No URI.', videoOperation: updatedOp });\r\n                            }\r\n                        } else {\r\n                            updatePost({ ...post, videoOperation: updatedOp }); // Just update the operation status\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.error(\"Error polling video status:\", error);\r\n                        if(error.message === 'API_KEY_INVALID') {\r\n                            setIsApiKeyReady(false);\r\n                        }\r\n                        updatePost({ ...post, isGeneratingVideo: false, videoGenerationStatus: 'Error polling status.' });\r\n                    });\r\n            }\r\n        });\r\n    }, [posts, updatePost, addNotification]);\r\n\r\n    useEffect(() => {\r\n        const scheduleInterval = setInterval(checkScheduledPosts, 60000);\r\n        const videoPollInterval = setInterval(pollVideoStatuses, 15000); // Poll every 15s\r\n\r\n        return () => {\r\n            clearInterval(scheduleInterval);\r\n            clearInterval(videoPollInterval);\r\n        };\r\n    }, [checkScheduledPosts, pollVideoStatuses]);\r\n\r\n    const addPost = async (post: Post) => {\r\n        // Add to local state immediately for responsiveness\r\n        setPosts(prevPosts => [post, ...prevPosts]);\r\n        setActiveView('manage');\r\n        addNotification('post_scheduled', 'New Post Created', `Post \"${post.topic}\" has been added to drafts.`, post.id);\r\n\r\n        // Save to Supabase in background\r\n        if (user && workspaceId) {\r\n            try {\r\n                await PostService.createPost(post, user.id, workspaceId);\r\n            } catch (error) {\r\n                console.error('Error saving post to Supabase:', error);\r\n                addNotification('error', 'Save Error', 'Failed to save post to database. It will be saved locally.');\r\n            }\r\n        }\r\n    };\r\n\r\n    const addMultiplePosts = (newPosts: Post[]) => {\r\n        setPosts(prevPosts => [...newPosts, ...prevPosts]);\r\n        setActiveView('manage');\r\n        addNotification('post_scheduled', 'Posts Created', `${newPosts.length} posts have been added to your drafts.`);\r\n    };\r\n\r\n    const deletePost = async (postId: string) => {\r\n        // Delete from local state immediately\r\n        setPosts(prevPosts => prevPosts.filter(post => post.id !== postId));\r\n\r\n        // Delete from Supabase in background\r\n        if (user && workspaceId) {\r\n            try {\r\n                await PostService.deletePost(postId, user.id, workspaceId);\r\n            } catch (error) {\r\n                console.error('Error deleting post from Supabase:', error);\r\n            }\r\n        }\r\n    };\r\n    \r\n    const SidebarItem: React.FC<{ viewName: View; icon: React.ElementType; label: string }> = ({ viewName, icon: Icon, label }) => (\r\n        <button\r\n            onClick={() => setActiveView(viewName)}\r\n            className={`flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200 ${\r\n                activeView === viewName\r\n                    ? 'bg-charcoal text-white shadow-md'\r\n                    : 'text-slate hover:bg-slate/10 hover:text-charcoal-dark'\r\n            }`}\r\n        >\r\n            <Icon className=\"w-5 h-5 mr-3\" />\r\n            <span>{label}</span>\r\n        </button>\r\n    );\r\n\r\n    const renderViewContent = () => {\r\n        const viewProps = {\r\n            posts,\r\n            onUpdatePost: updatePost,\r\n            onDeletePost: deletePost,\r\n            isApiKeyReady,\r\n            onSelectKey: handleSelectKey,\r\n            resetApiKeyStatus: () => setIsApiKeyReady(false),\r\n            connectedAccounts,\r\n        };\r\n        switch (activeView) {\r\n            case 'create':\r\n                return <ContentStrategistView onPostCreated={addPost} />;\r\n            case 'manage':\r\n                return <ManagePosts {...viewProps} />;\r\n            case 'history':\r\n                return <PublishedView {...viewProps} />;\r\n            case 'analytics':\r\n                return <AnalyticsDashboard posts={posts} />;\r\n            case 'accounts':\r\n                return <ConnectedAccountsView connectedAccounts={connectedAccounts} onUpdateAccounts={setConnectedAccounts} />;\r\n            case 'media':\r\n                return <MediaLibrary />;\r\n            case 'campaigns':\r\n                return <CampaignManager posts={posts} />;\r\n            case 'repurpose':\r\n                return <ContentRepurposer onPostsCreated={addMultiplePosts} />;\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-white text-charcoal font-sans\">\r\n            <aside className=\"w-64 bg-light-gray p-4 flex flex-col justify-between border-r border-slate/30\">\r\n                <div>\r\n                    <div className=\"flex items-center justify-between mb-8\">\r\n                        <h1 className=\"text-xl font-bold text-charcoal-dark\">\r\n                           AI Content OS\r\n                        </h1>\r\n                        <NotificationBell />\r\n                    </div>\r\n                    <nav className=\"space-y-2\">\r\n                        <SidebarItem viewName=\"create\" icon={Edit3} label=\"Create Content\" />\r\n                        <SidebarItem viewName=\"repurpose\" icon={Sparkles} label=\"Repurpose\" />\r\n                        <SidebarItem viewName=\"manage\" icon={LayoutGrid} label=\"Manage Posts\" />\r\n                        <SidebarItem viewName=\"history\" icon={History} label=\"Published\" />\r\n                        <div className=\"border-t border-slate/30 my-2\"></div>\r\n                        <SidebarItem viewName=\"campaigns\" icon={Target} label=\"Campaigns\" />\r\n                        <SidebarItem viewName=\"media\" icon={Image} label=\"Media Library\" />\r\n                        <SidebarItem viewName=\"analytics\" icon={BarChart3} label=\"Analytics\" />\r\n                        <SidebarItem viewName=\"accounts\" icon={LinkIcon} label=\"Accounts\" />\r\n                    </nav>\r\n                </div>\r\n                 <div className=\"space-y-2\">\r\n                    {/* User Profile */}\r\n                    <div className=\"p-3 bg-white border border-slate/30 rounded-lg\">\r\n                        <div className=\"flex items-center space-x-3 mb-2\">\r\n                            <div className=\"w-10 h-10 bg-charcoal rounded-full flex items-center justify-center\">\r\n                                <User className=\"w-5 h-5 text-white\" />\r\n                            </div>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <p className=\"text-sm font-semibold text-charcoal-dark truncate\">\r\n                                    {user?.user_metadata?.full_name || user?.email?.split('@')[0]}\r\n                                </p>\r\n                                <p className=\"text-xs text-slate truncate\">{user?.email}</p>\r\n                            </div>\r\n                        </div>\r\n                        {userRole && (\r\n                            <div className=\"inline-block px-2 py-1 bg-charcoal/10 rounded text-xs font-medium text-charcoal\">\r\n                                {userRole}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"text-xs p-3 bg-white border border-slate/30 rounded-lg\">\r\n                        <p className=\"font-semibold text-charcoal-dark\">Video API Key</p>\r\n                        <p className={`text-xs ${isApiKeyReady ? 'text-green-600' : 'text-yellow-600'}`}>\r\n                            {isApiKeyReady ? 'Ready' : 'Selection required'}\r\n                        </p>\r\n                        <a href=\"https://ai.google.dev/gemini-api/docs/billing\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-charcoal hover:underline text-xs mt-1 block\">\r\n                            Billing info\r\n                        </a>\r\n                    </div>\r\n                    <button\r\n                        onClick={handleSelectKey}\r\n                        className=\"flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-slate hover:bg-slate/10 hover:text-charcoal-dark\"\r\n                    >\r\n                        <Settings className=\"w-5 h-5 mr-3\" />\r\n                        <span>Change API Key</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => {\r\n                            if (confirm('Are you sure you want to sign out?')) {\r\n                                signOut();\r\n                            }\r\n                        }}\r\n                        className=\"flex items-center w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200 text-red-600 hover:bg-red-50\"\r\n                    >\r\n                        <LogOut className=\"w-5 h-5 mr-3\" />\r\n                        <span>Sign Out</span>\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n            <main className=\"flex-1 overflow-y-auto p-8\">\r\n                <MigrationBanner />\r\n                {loading ? (\r\n                    <div className=\"flex items-center justify-center h-64\">\r\n                        <div className=\"text-center\">\r\n                            <div className=\"w-16 h-16 border-4 border-charcoal border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n                            <p className=\"text-slate\">Loading your content...</p>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    renderViewContent()\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Wrap AppContent with NotificationProvider\r\nconst App: React.FC = () => {\r\n    return (\r\n        <NotificationProvider>\r\n            <AppContent />\r\n        </NotificationProvider>\r\n    );\r\n};\r\n\r\nexport default App;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11587, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/auth/AuthPage.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState } from 'react'\r\nimport { useAuth } from '@/contexts/AuthContext'\r\nimport { Loader2, Sparkles } from 'lucide-react'\r\n\r\nexport default function AuthPage() {\r\n  const [isLogin, setIsLogin] = useState(true)\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [fullName, setFullName] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const { signIn, signUp } = useAuth()\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError(null)\r\n    setLoading(true)\r\n\r\n    try {\r\n      if (isLogin) {\r\n        // Sign in\r\n        const { error } = await signIn(email, password)\r\n        if (error) {\r\n          setError(error.message)\r\n        }\r\n      } else {\r\n        // Sign up\r\n        if (!fullName.trim()) {\r\n          setError('Please enter your full name')\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        const { error } = await signUp(email, password, fullName)\r\n        if (error) {\r\n          setError(error.message)\r\n        } else {\r\n          // Success message - check if email confirmation is required\r\n          setError(null)\r\n          setIsLogin(true)\r\n          // Reset form\r\n          setEmail('')\r\n          setPassword('')\r\n          setFullName('')\r\n          alert('Account created successfully! Please sign in.')\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setError('An unexpected error occurred')\r\n      console.error(err)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100\">\r\n      <div className=\"w-full max-w-md\">\r\n        {/* Logo/Branding */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"flex items-center justify-center mb-4\">\r\n            <div className=\"bg-charcoal p-3 rounded-xl\">\r\n              <Sparkles className=\"w-8 h-8 text-white\" />\r\n            </div>\r\n          </div>\r\n          <h1 className=\"text-3xl font-bold text-charcoal-dark\">AI Content OS</h1>\r\n          <p className=\"text-slate mt-2\">\r\n            AI-powered social media management platform\r\n          </p>\r\n        </div>\r\n\r\n        {/* Auth Card */}\r\n        <div className=\"bg-white rounded-2xl shadow-xl p-8\">\r\n          <div className=\"mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-charcoal-dark\">\r\n              {isLogin ? 'Welcome back' : 'Create an account'}\r\n            </h2>\r\n            <p className=\"text-slate text-sm mt-1\">\r\n              {isLogin\r\n                ? 'Sign in to continue to your workspace'\r\n                : 'Get started with your free account'}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <p className=\"text-red-700 text-sm\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Form */}\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {!isLogin && (\r\n              <div>\r\n                <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-charcoal-dark mb-2\">\r\n                  Full Name\r\n                </label>\r\n                <input\r\n                  id=\"fullName\"\r\n                  type=\"text\"\r\n                  value={fullName}\r\n                  onChange={(e) => setFullName(e.target.value)}\r\n                  placeholder=\"John Doe\"\r\n                  className=\"w-full px-4 py-3 border border-slate/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-charcoal focus:border-transparent\"\r\n                  required={!isLogin}\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-charcoal-dark mb-2\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                placeholder=\"you@example.com\"\r\n                className=\"w-full px-4 py-3 border border-slate/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-charcoal focus:border-transparent\"\r\n                required\r\n                disabled={loading}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-charcoal-dark mb-2\">\r\n                Password\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                placeholder=\"\"\r\n                className=\"w-full px-4 py-3 border border-slate/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-charcoal focus:border-transparent\"\r\n                required\r\n                minLength={6}\r\n                disabled={loading}\r\n              />\r\n              {!isLogin && (\r\n                <p className=\"text-xs text-slate mt-1\">\r\n                  Must be at least 6 characters\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full bg-charcoal text-white py-3 px-4 rounded-lg font-medium hover:bg-charcoal-dark transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\r\n                  {isLogin ? 'Signing in...' : 'Creating account...'}\r\n                </>\r\n              ) : (\r\n                <>{isLogin ? 'Sign in' : 'Create account'}</>\r\n              )}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Toggle Login/Signup */}\r\n          <div className=\"mt-6 text-center\">\r\n            <button\r\n              onClick={() => {\r\n                setIsLogin(!isLogin)\r\n                setError(null)\r\n              }}\r\n              disabled={loading}\r\n              className=\"text-sm text-charcoal hover:text-charcoal-dark font-medium disabled:opacity-50\"\r\n            >\r\n              {isLogin\r\n                ? \"Don't have an account? Sign up\"\r\n                : 'Already have an account? Sign in'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <p className=\"text-center text-xs text-slate mt-8\">\r\n          By continuing, you agree to our Terms of Service and Privacy Policy\r\n        </p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11927, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/components/auth/ProtectedApp.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react'\r\nimport { useAuth } from '@/contexts/AuthContext'\r\nimport AuthPage from './AuthPage'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\ninterface ProtectedAppProps {\r\n  children: React.ReactNode\r\n}\r\n\r\nexport default function ProtectedApp({ children }: ProtectedAppProps) {\r\n  const { user, loading } = useAuth()\r\n\r\n  // Show loading screen while checking authentication\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"w-12 h-12 text-charcoal animate-spin mx-auto mb-4\" />\r\n          <p className=\"text-slate\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Show auth page if not authenticated\r\n  if (!user) {\r\n    return <AuthPage />\r\n  }\r\n\r\n  // Show protected content if authenticated\r\n  return <>{children}</>\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AALA;;;;;AAWe,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAClE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAO;IAEjC,oDAAoD;IACpD,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4NAAO;wBAAC,WAAU;;;;;;kCACnB,8OAAC;wBAAE,WAAU;kCAAa;;;;;;;;;;;;;;;;;IAIlC;IAEA,sCAAsC;IACtC,IAAI,CAAC,MAAM;QACT,qBAAO,8OAAC,iJAAQ;;;;;IAClB;IAEA,0CAA0C;IAC1C,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 11993, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/app/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport App from '@/App'\r\nimport ProtectedApp from '@/components/auth/ProtectedApp'\r\n\r\nexport default function Home() {\r\n  return (\r\n    <ProtectedApp>\r\n      <App />\r\n    </ProtectedApp>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,qBACE,8OAAC,qJAAY;kBACX,cAAA,8OAAC,sHAAG;;;;;;;;;;AAGV","debugId":null}}]
}