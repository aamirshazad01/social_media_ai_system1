{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/lib/supabase/server.ts"],"sourcesContent":["/**\r\n * Supabase Server Client\r\n * Use this client in server components, API routes, and server actions\r\n */\r\n\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\nimport type { Database } from './types'\r\n\r\nexport async function createClient() {\n  const cookieStore = await cookies()\n\r\n  return createServerClient<Database>(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return cookieStore.get(name)?.value\r\n        },\r\n        set(name: string, value: string, options: CookieOptions) {\r\n          try {\r\n            cookieStore.set({ name, value, ...options })\r\n          } catch (error) {\r\n            // Handle cookie errors (happens in Server Components)\r\n          }\r\n        },\r\n        remove(name: string, options: CookieOptions) {\r\n          try {\r\n            cookieStore.set({ name, value: '', ...options })\r\n          } catch (error) {\r\n            // Handle cookie errors\r\n          }\r\n        },\r\n      },\r\n    }\r\n  )\n}\n\n// Alias to match existing imports in API routes\nexport { createClient as createServerClient }\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAED;AAAA;AACA;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,sUAGvB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC;gBAC5C,EAAE,OAAO,OAAO;gBACd,sDAAsD;gBACxD;YACF;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM,OAAO;wBAAI,GAAG,OAAO;oBAAC;gBAChD,EAAE,OAAO,OAAO;gBACd,uBAAuB;gBACzB;YACF;QACF;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/lib/twitter/client.ts"],"sourcesContent":["/**\r\n * Twitter API Client Utility\r\n * Handles Twitter API v2 client initialization and OAuth 1.0a\r\n */\r\n\r\nimport { TwitterApi } from 'twitter-api-v2'\r\n\r\n/**\r\n * Create Twitter client with app-level credentials (for OAuth flow)\r\n */\r\nexport function createTwitterClient() {\r\n  const apiKey = process.env.TWITTER_API_KEY\r\n  const apiSecret = process.env.TWITTER_API_SECRET\r\n\r\n  if (!apiKey || !apiSecret) {\r\n    throw new Error('Twitter API credentials not configured')\r\n  }\r\n\r\n  return new TwitterApi({\r\n    appKey: apiKey,\r\n    appSecret: apiSecret,\r\n  })\r\n}\r\n\r\n/**\r\n * Create Twitter client with user access tokens\r\n */\r\nexport function createUserTwitterClient(accessToken: string, accessSecret: string) {\r\n  const apiKey = process.env.TWITTER_API_KEY\r\n  const apiSecret = process.env.TWITTER_API_SECRET\r\n\r\n  if (!apiKey || !apiSecret) {\r\n    throw new Error('Twitter API credentials not configured')\r\n  }\r\n\r\n  return new TwitterApi({\r\n    appKey: apiKey,\r\n    appSecret: apiSecret,\r\n    accessToken,\r\n    accessSecret,\r\n  })\r\n}\r\n\r\n/**\r\n * Create read-only Twitter client with Bearer Token (OAuth 2.0)\r\n */\r\nexport function createBearerTwitterClient() {\r\n  const bearerToken = process.env.TWITTER_BEARER_TOKEN\r\n\r\n  if (!bearerToken) {\r\n    throw new Error('Twitter Bearer Token not configured')\r\n  }\r\n\r\n  return new TwitterApi(bearerToken)\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAED;AAAA;;AAKO,SAAS;IACd,MAAM,SAAS,QAAQ,GAAG,CAAC,eAAe;IAC1C,MAAM,YAAY,QAAQ,GAAG,CAAC,kBAAkB;IAEhD,IAAI,CAAC,UAAU,CAAC,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAI,sLAAU,CAAC;QACpB,QAAQ;QACR,WAAW;IACb;AACF;AAKO,SAAS,wBAAwB,WAAmB,EAAE,YAAoB;IAC/E,MAAM,SAAS,QAAQ,GAAG,CAAC,eAAe;IAC1C,MAAM,YAAY,QAAQ,GAAG,CAAC,kBAAkB;IAEhD,IAAI,CAAC,UAAU,CAAC,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAI,sLAAU,CAAC;QACpB,QAAQ;QACR,WAAW;QACX;QACA;IACF;AACF;AAKO,SAAS;IACd,MAAM,cAAc,QAAQ,GAAG,CAAC,oBAAoB;IAEpD,IAAI,CAAC,aAAa;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAI,sLAAU,CAAC;AACxB","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/aamir/social_media_os/src/app/api/twitter/auth/route.ts"],"sourcesContent":["/**\r\n * Twitter OAuth - Start Authentication Flow\r\n * POST /api/twitter/auth\r\n */\r\n\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { createServerClient } from '@/lib/supabase/server'\r\nimport { createTwitterClient } from '@/lib/twitter/client'\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    // Check authentication\r\n    const supabase = await createServerClient()\r\n    const {\r\n      data: { user },\r\n    } = await supabase.auth.getUser()\r\n\r\n    if (!user) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n    }\r\n\r\n    // Get callback URL from environment\r\n    const callbackURL = `${process.env.NEXT_PUBLIC_APP_URL}/api/twitter/callback`\r\n\r\n    // Create Twitter client\r\n    const twitterClient = createTwitterClient()\r\n\r\n    // Generate OAuth request token\r\n    const authLink = await twitterClient.generateAuthLink(callbackURL, {\r\n      linkMode: 'authorize', // Use 'authorize' to force user to re-authenticate each time\r\n    })\r\n\r\n    // Store oauth_token_secret temporarily in the session\r\n    // In production, store this in Redis or a database with expiration\r\n    // For now, we'll return it to the client to pass back in the callback\r\n    const response = NextResponse.json({\r\n      url: authLink.url,\r\n      oauth_token: authLink.oauth_token,\r\n      oauth_token_secret: authLink.oauth_token_secret,\r\n    })\r\n\r\n    // Set a secure cookie with the oauth_token_secret\r\n    response.cookies.set('twitter_oauth_token_secret', authLink.oauth_token_secret, {\r\n      httpOnly: true,\r\n      secure: process.env.NODE_ENV === 'production',\r\n      sameSite: 'lax',\r\n      maxAge: 600, // 10 minutes\r\n      path: '/',\r\n    })\r\n\r\n    return response\r\n  } catch (error) {\r\n    console.error('Twitter OAuth error:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to initiate Twitter authentication', details: (error as Error).message },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAED;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,uBAAuB;QACvB,MAAM,WAAW,MAAM,IAAA,wJAAkB;QACzC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAE/B,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,oCAAoC;QACpC,MAAM,cAAc,6DAAmC,qBAAqB,CAAC;QAE7E,wBAAwB;QACxB,MAAM,gBAAgB,IAAA,wJAAmB;QAEzC,+BAA+B;QAC/B,MAAM,WAAW,MAAM,cAAc,gBAAgB,CAAC,aAAa;YACjE,UAAU;QACZ;QAEA,sDAAsD;QACtD,mEAAmE;QACnE,sEAAsE;QACtE,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;YACjC,KAAK,SAAS,GAAG;YACjB,aAAa,SAAS,WAAW;YACjC,oBAAoB,SAAS,kBAAkB;QACjD;QAEA,kDAAkD;QAClD,SAAS,OAAO,CAAC,GAAG,CAAC,8BAA8B,SAAS,kBAAkB,EAAE;YAC9E,UAAU;YACV,QAAQ,oDAAyB;YACjC,UAAU;YACV,QAAQ;YACR,MAAM;QACR;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAA6C,SAAS,AAAC,MAAgB,OAAO;QAAC,GACxF;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}